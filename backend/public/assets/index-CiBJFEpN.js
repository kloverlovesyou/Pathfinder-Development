var xv=n=>{throw TypeError(n)};var u2=(n,t,e)=>t.has(n)||xv("Cannot "+e);var In=(n,t,e)=>(u2(n,t,"read from private field"),e?e.call(n):t.get(n)),qr=(n,t,e)=>t.has(n)?xv("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),yi=(n,t,e,s)=>(u2(n,t,"write to private field"),s?s.call(n,e):t.set(n,e),e),Wr=(n,t,e)=>(u2(n,t,"access private method"),e);var Cv=(n,t,e,s)=>({set _(i){yi(n,t,i,e)},get _(){return In(n,t,s)}});function vk(n,t){for(var e=0;e<t.length;e++){const s=t[e];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in n)){const r=Object.getOwnPropertyDescriptor(s,i);r&&Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function o5(n){const t=Object.create(null);for(const e of n.split(","))t[e]=1;return e=>e in t}const yn={},au=[],ao=()=>{},yk=()=>!1,Up=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),a5=n=>n.startsWith("onUpdate:"),Ls=Object.assign,l5=(n,t)=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)},wk=Object.prototype.hasOwnProperty,ln=(n,t)=>wk.call(n,t),be=Array.isArray,lu=n=>Fu(n)==="[object Map]",Ou=n=>Fu(n)==="[object Set]",kv=n=>Fu(n)==="[object Date]",_k=n=>Fu(n)==="[object RegExp]",De=n=>typeof n=="function",jn=n=>typeof n=="string",Pr=n=>typeof n=="symbol",_n=n=>n!==null&&typeof n=="object",F9=n=>(_n(n)||De(n))&&De(n.then)&&De(n.catch),$9=Object.prototype.toString,Fu=n=>$9.call(n),xk=n=>Fu(n).slice(8,-1),B9=n=>Fu(n)==="[object Object]",c5=n=>jn(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Gd=o5(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),zp=n=>{const t=Object.create(null);return e=>t[e]||(t[e]=n(e))},Ck=/-(\w)/g,ur=zp(n=>n.replace(Ck,(t,e)=>e?e.toUpperCase():"")),kk=/\B([A-Z])/g,Za=zp(n=>n.replace(kk,"-$1").toLowerCase()),Hp=zp(n=>n.charAt(0).toUpperCase()+n.slice(1)),d2=zp(n=>n?`on${Hp(n)}`:""),$a=(n,t)=>!Object.is(n,t),cu=(n,...t)=>{for(let e=0;e<n.length;e++)n[e](...t)},$0=(n,t,e,s=!1)=>{Object.defineProperty(n,t,{configurable:!0,enumerable:!1,writable:s,value:e})},ap=n=>{const t=parseFloat(n);return isNaN(t)?n:t},Ak=n=>{const t=jn(n)?Number(n):NaN;return isNaN(t)?n:t};let Av;const Vp=()=>Av||(Av=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function qp(n){if(be(n)){const t={};for(let e=0;e<n.length;e++){const s=n[e],i=jn(s)?Lk(s):qp(s);if(i)for(const r in i)t[r]=i[r]}return t}else if(jn(n)||_n(n))return n}const Sk=/;(?![^(]*\))/g,Ek=/:([^]+)/,Tk=/\/\*[^]*?\*\//g;function Lk(n){const t={};return n.replace(Tk,"").split(Sk).forEach(e=>{if(e){const s=e.split(Ek);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function fe(n){let t="";if(jn(n))t=n;else if(be(n))for(let e=0;e<n.length;e++){const s=fe(n[e]);s&&(t+=s+" ")}else if(_n(n))for(const e in n)n[e]&&(t+=e+" ");return t.trim()}const Pk="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Ik=o5(Pk);function j9(n){return!!n||n===""}function Dk(n,t){if(n.length!==t.length)return!1;let e=!0;for(let s=0;e&&s<n.length;s++)e=rc(n[s],t[s]);return e}function rc(n,t){if(n===t)return!0;let e=kv(n),s=kv(t);if(e||s)return e&&s?n.getTime()===t.getTime():!1;if(e=Pr(n),s=Pr(t),e||s)return n===t;if(e=be(n),s=be(t),e||s)return e&&s?Dk(n,t):!1;if(e=_n(n),s=_n(t),e||s){if(!e||!s)return!1;const i=Object.keys(n).length,r=Object.keys(t).length;if(i!==r)return!1;for(const o in n){const a=n.hasOwnProperty(o),l=t.hasOwnProperty(o);if(a&&!l||!a&&l||!rc(n[o],t[o]))return!1}}return String(n)===String(t)}function u5(n,t){return n.findIndex(e=>rc(e,t))}const U9=n=>!!(n&&n.__v_isRef===!0),J=n=>jn(n)?n:n==null?"":be(n)||_n(n)&&(n.toString===$9||!De(n.toString))?U9(n)?J(n.value):JSON.stringify(n,z9,2):String(n),z9=(n,t)=>U9(t)?z9(n,t.value):lu(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[s,i],r)=>(e[h2(s,r)+" =>"]=i,e),{})}:Ou(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>h2(e))}:Pr(t)?h2(t):_n(t)&&!be(t)&&!B9(t)?String(t):t,h2=(n,t="")=>{var e;return Pr(n)?`Symbol(${(e=n.description)!=null?e:t})`:n};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Js;class H9{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Js,!t&&Js&&(this.index=(Js.scopes||(Js.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].pause();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].resume();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].resume()}}run(t){if(this._active){const e=Js;try{return Js=this,t()}finally{Js=e}}}on(){++this._on===1&&(this.prevScope=Js,Js=this)}off(){this._on>0&&--this._on===0&&(Js=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let e,s;for(e=0,s=this.effects.length;e<s;e++)this.effects[e].stop();for(this.effects.length=0,e=0,s=this.cleanups.length;e<s;e++)this.cleanups[e]();if(this.cleanups.length=0,this.scopes){for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function V9(n){return new H9(n)}function q9(){return Js}function Mk(n,t=!1){Js&&Js.cleanups.push(n)}let An;const f2=new WeakSet;class W9{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Js&&Js.active&&Js.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,f2.has(this)&&(f2.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Y9(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Sv(this),K9(this);const t=An,e=Lr;An=this,Lr=!0;try{return this.fn()}finally{X9(this),An=t,Lr=e,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)f5(t);this.deps=this.depsTail=void 0,Sv(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?f2.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){B0(this)&&this.run()}get dirty(){return B0(this)}}let G9=0,Yd,Kd;function Y9(n,t=!1){if(n.flags|=8,t){n.next=Kd,Kd=n;return}n.next=Yd,Yd=n}function d5(){G9++}function h5(){if(--G9>0)return;if(Kd){let t=Kd;for(Kd=void 0;t;){const e=t.next;t.next=void 0,t.flags&=-9,t=e}}let n;for(;Yd;){let t=Yd;for(Yd=void 0;t;){const e=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){n||(n=s)}t=e}}if(n)throw n}function K9(n){for(let t=n.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function X9(n){let t,e=n.depsTail,s=e;for(;s;){const i=s.prevDep;s.version===-1?(s===e&&(e=i),f5(s),Rk(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=i}n.deps=t,n.depsTail=e}function B0(n){for(let t=n.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Z9(t.dep.computed)||t.dep.version!==t.version))return!0;return!!n._dirty}function Z9(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===ph)||(n.globalVersion=ph,!n.isSSR&&n.flags&128&&(!n.deps&&!n._dirty||!B0(n))))return;n.flags|=2;const t=n.dep,e=An,s=Lr;An=n,Lr=!0;try{K9(n);const i=n.fn(n._value);(t.version===0||$a(i,n._value))&&(n.flags|=128,n._value=i,t.version++)}catch(i){throw t.version++,i}finally{An=e,Lr=s,X9(n),n.flags&=-3}}function f5(n,t=!1){const{dep:e,prevSub:s,nextSub:i}=n;if(s&&(s.nextSub=i,n.prevSub=void 0),i&&(i.prevSub=s,n.nextSub=void 0),e.subs===n&&(e.subs=s,!s&&e.computed)){e.computed.flags&=-5;for(let r=e.computed.deps;r;r=r.nextDep)f5(r,!0)}!t&&!--e.sc&&e.map&&e.map.delete(e.key)}function Rk(n){const{prevDep:t,nextDep:e}=n;t&&(t.nextDep=e,n.prevDep=void 0),e&&(e.prevDep=t,n.nextDep=void 0)}let Lr=!0;const J9=[];function Zo(){J9.push(Lr),Lr=!1}function Jo(){const n=J9.pop();Lr=n===void 0?!0:n}function Sv(n){const{cleanup:t}=n;if(n.cleanup=void 0,t){const e=An;An=void 0;try{t()}finally{An=e}}}let ph=0;class Nk{constructor(t,e){this.sub=t,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class p5{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!An||!Lr||An===this.computed)return;let e=this.activeLink;if(e===void 0||e.sub!==An)e=this.activeLink=new Nk(An,this),An.deps?(e.prevDep=An.depsTail,An.depsTail.nextDep=e,An.depsTail=e):An.deps=An.depsTail=e,Q9(e);else if(e.version===-1&&(e.version=this.version,e.nextDep)){const s=e.nextDep;s.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=s),e.prevDep=An.depsTail,e.nextDep=void 0,An.depsTail.nextDep=e,An.depsTail=e,An.deps===e&&(An.deps=s)}return e}trigger(t){this.version++,ph++,this.notify(t)}notify(t){d5();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{h5()}}}function Q9(n){if(n.dep.sc++,n.sub.flags&4){const t=n.dep.computed;if(t&&!n.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)Q9(s)}const e=n.dep.subs;e!==n&&(n.prevSub=e,e&&(e.nextSub=n)),n.dep.subs=n}}const lp=new WeakMap,Jl=Symbol(""),j0=Symbol(""),gh=Symbol("");function ti(n,t,e){if(Lr&&An){let s=lp.get(n);s||lp.set(n,s=new Map);let i=s.get(e);i||(s.set(e,i=new p5),i.map=s,i.key=e),i.track()}}function Ho(n,t,e,s,i,r){const o=lp.get(n);if(!o){ph++;return}const a=l=>{l&&l.trigger()};if(d5(),t==="clear")o.forEach(a);else{const l=be(n),c=l&&c5(e);if(l&&e==="length"){const u=Number(s);o.forEach((d,f)=>{(f==="length"||f===gh||!Pr(f)&&f>=u)&&a(d)})}else switch((e!==void 0||o.has(void 0))&&a(o.get(e)),c&&a(o.get(gh)),t){case"add":l?c&&a(o.get("length")):(a(o.get(Jl)),lu(n)&&a(o.get(j0)));break;case"delete":l||(a(o.get(Jl)),lu(n)&&a(o.get(j0)));break;case"set":lu(n)&&a(o.get(Jl));break}}h5()}function Ok(n,t){const e=lp.get(n);return e&&e.get(t)}function Rc(n){const t=Je(n);return t===n?t:(ti(t,"iterate",gh),ar(n)?t:t.map(js))}function Wp(n){return ti(n=Je(n),"iterate",gh),n}const Fk={__proto__:null,[Symbol.iterator](){return p2(this,Symbol.iterator,js)},concat(...n){return Rc(this).concat(...n.map(t=>be(t)?Rc(t):t))},entries(){return p2(this,"entries",n=>(n[1]=js(n[1]),n))},every(n,t){return To(this,"every",n,t,void 0,arguments)},filter(n,t){return To(this,"filter",n,t,e=>e.map(js),arguments)},find(n,t){return To(this,"find",n,t,js,arguments)},findIndex(n,t){return To(this,"findIndex",n,t,void 0,arguments)},findLast(n,t){return To(this,"findLast",n,t,js,arguments)},findLastIndex(n,t){return To(this,"findLastIndex",n,t,void 0,arguments)},forEach(n,t){return To(this,"forEach",n,t,void 0,arguments)},includes(...n){return g2(this,"includes",n)},indexOf(...n){return g2(this,"indexOf",n)},join(n){return Rc(this).join(n)},lastIndexOf(...n){return g2(this,"lastIndexOf",n)},map(n,t){return To(this,"map",n,t,void 0,arguments)},pop(){return yd(this,"pop")},push(...n){return yd(this,"push",n)},reduce(n,...t){return Ev(this,"reduce",n,t)},reduceRight(n,...t){return Ev(this,"reduceRight",n,t)},shift(){return yd(this,"shift")},some(n,t){return To(this,"some",n,t,void 0,arguments)},splice(...n){return yd(this,"splice",n)},toReversed(){return Rc(this).toReversed()},toSorted(n){return Rc(this).toSorted(n)},toSpliced(...n){return Rc(this).toSpliced(...n)},unshift(...n){return yd(this,"unshift",n)},values(){return p2(this,"values",js)}};function p2(n,t,e){const s=Wp(n),i=s[t]();return s!==n&&!ar(n)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.value&&(r.value=e(r.value)),r}),i}const $k=Array.prototype;function To(n,t,e,s,i,r){const o=Wp(n),a=o!==n&&!ar(n),l=o[t];if(l!==$k[t]){const d=l.apply(n,r);return a?js(d):d}let c=e;o!==n&&(a?c=function(d,f){return e.call(this,js(d),f,n)}:e.length>2&&(c=function(d,f){return e.call(this,d,f,n)}));const u=l.call(o,c,s);return a&&i?i(u):u}function Ev(n,t,e,s){const i=Wp(n);let r=e;return i!==n&&(ar(n)?e.length>3&&(r=function(o,a,l){return e.call(this,o,a,l,n)}):r=function(o,a,l){return e.call(this,o,js(a),l,n)}),i[t](r,...s)}function g2(n,t,e){const s=Je(n);ti(s,"iterate",gh);const i=s[t](...e);return(i===-1||i===!1)&&b5(e[0])?(e[0]=Je(e[0]),s[t](...e)):i}function yd(n,t,e=[]){Zo(),d5();const s=Je(n)[t].apply(n,e);return h5(),Jo(),s}const Bk=o5("__proto__,__v_isRef,__isVue"),t6=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Pr));function jk(n){Pr(n)||(n=String(n));const t=Je(this);return ti(t,"has",n),t.hasOwnProperty(n)}class e6{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,s){if(e==="__v_skip")return t.__v_skip;const i=this._isReadonly,r=this._isShallow;if(e==="__v_isReactive")return!i;if(e==="__v_isReadonly")return i;if(e==="__v_isShallow")return r;if(e==="__v_raw")return s===(i?r?Xk:r6:r?i6:s6).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const o=be(t);if(!i){let l;if(o&&(l=Fk[e]))return l;if(e==="hasOwnProperty")return jk}const a=Reflect.get(t,e,rs(t)?t:s);return(Pr(e)?t6.has(e):Bk(e))||(i||ti(t,"get",e),r)?a:rs(a)?o&&c5(e)?a:a.value:_n(a)?i?a6(a):ws(a):a}}class n6 extends e6{constructor(t=!1){super(!1,t)}set(t,e,s,i){let r=t[e];if(!this._isShallow){const l=Ha(r);if(!ar(s)&&!Ha(s)&&(r=Je(r),s=Je(s)),!be(t)&&rs(r)&&!rs(s))return l?!1:(r.value=s,!0)}const o=be(t)&&c5(e)?Number(e)<t.length:ln(t,e),a=Reflect.set(t,e,s,rs(t)?t:i);return t===Je(i)&&(o?$a(s,r)&&Ho(t,"set",e,s):Ho(t,"add",e,s)),a}deleteProperty(t,e){const s=ln(t,e);t[e];const i=Reflect.deleteProperty(t,e);return i&&s&&Ho(t,"delete",e,void 0),i}has(t,e){const s=Reflect.has(t,e);return(!Pr(e)||!t6.has(e))&&ti(t,"has",e),s}ownKeys(t){return ti(t,"iterate",be(t)?"length":Jl),Reflect.ownKeys(t)}}class Uk extends e6{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const zk=new n6,Hk=new Uk,Vk=new n6(!0);const U0=n=>n,Yf=n=>Reflect.getPrototypeOf(n);function qk(n,t,e){return function(...s){const i=this.__v_raw,r=Je(i),o=lu(r),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,c=i[n](...s),u=e?U0:t?cp:js;return!t&&ti(r,"iterate",l?j0:Jl),{next(){const{value:d,done:f}=c.next();return f?{value:d,done:f}:{value:a?[u(d[0]),u(d[1])]:u(d),done:f}},[Symbol.iterator](){return this}}}}function Kf(n){return function(...t){return n==="delete"?!1:n==="clear"?void 0:this}}function Wk(n,t){const e={get(i){const r=this.__v_raw,o=Je(r),a=Je(i);n||($a(i,a)&&ti(o,"get",i),ti(o,"get",a));const{has:l}=Yf(o),c=t?U0:n?cp:js;if(l.call(o,i))return c(r.get(i));if(l.call(o,a))return c(r.get(a));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!n&&ti(Je(i),"iterate",Jl),Reflect.get(i,"size",i)},has(i){const r=this.__v_raw,o=Je(r),a=Je(i);return n||($a(i,a)&&ti(o,"has",i),ti(o,"has",a)),i===a?r.has(i):r.has(i)||r.has(a)},forEach(i,r){const o=this,a=o.__v_raw,l=Je(a),c=t?U0:n?cp:js;return!n&&ti(l,"iterate",Jl),a.forEach((u,d)=>i.call(r,c(u),c(d),o))}};return Ls(e,n?{add:Kf("add"),set:Kf("set"),delete:Kf("delete"),clear:Kf("clear")}:{add(i){!t&&!ar(i)&&!Ha(i)&&(i=Je(i));const r=Je(this);return Yf(r).has.call(r,i)||(r.add(i),Ho(r,"add",i,i)),this},set(i,r){!t&&!ar(r)&&!Ha(r)&&(r=Je(r));const o=Je(this),{has:a,get:l}=Yf(o);let c=a.call(o,i);c||(i=Je(i),c=a.call(o,i));const u=l.call(o,i);return o.set(i,r),c?$a(r,u)&&Ho(o,"set",i,r):Ho(o,"add",i,r),this},delete(i){const r=Je(this),{has:o,get:a}=Yf(r);let l=o.call(r,i);l||(i=Je(i),l=o.call(r,i)),a&&a.call(r,i);const c=r.delete(i);return l&&Ho(r,"delete",i,void 0),c},clear(){const i=Je(this),r=i.size!==0,o=i.clear();return r&&Ho(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=qk(i,n,t)}),e}function g5(n,t){const e=Wk(n,t);return(s,i,r)=>i==="__v_isReactive"?!n:i==="__v_isReadonly"?n:i==="__v_raw"?s:Reflect.get(ln(e,i)&&i in s?e:s,i,r)}const Gk={get:g5(!1,!1)},Yk={get:g5(!1,!0)},Kk={get:g5(!0,!1)};const s6=new WeakMap,i6=new WeakMap,r6=new WeakMap,Xk=new WeakMap;function Zk(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Jk(n){return n.__v_skip||!Object.isExtensible(n)?0:Zk(xk(n))}function ws(n){return Ha(n)?n:m5(n,!1,zk,Gk,s6)}function o6(n){return m5(n,!1,Vk,Yk,i6)}function a6(n){return m5(n,!0,Hk,Kk,r6)}function m5(n,t,e,s,i){if(!_n(n)||n.__v_raw&&!(t&&n.__v_isReactive))return n;const r=Jk(n);if(r===0)return n;const o=i.get(n);if(o)return o;const a=new Proxy(n,r===2?s:e);return i.set(n,a),a}function Ba(n){return Ha(n)?Ba(n.__v_raw):!!(n&&n.__v_isReactive)}function Ha(n){return!!(n&&n.__v_isReadonly)}function ar(n){return!!(n&&n.__v_isShallow)}function b5(n){return n?!!n.__v_raw:!1}function Je(n){const t=n&&n.__v_raw;return t?Je(t):n}function v5(n){return!ln(n,"__v_skip")&&Object.isExtensible(n)&&$0(n,"__v_skip",!0),n}const js=n=>_n(n)?ws(n):n,cp=n=>_n(n)?a6(n):n;function rs(n){return n?n.__v_isRef===!0:!1}function ut(n){return l6(n,!1)}function Qk(n){return l6(n,!0)}function l6(n,t){return rs(n)?n:new tA(n,t)}class tA{constructor(t,e){this.dep=new p5,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=e?t:Je(t),this._value=e?t:js(t),this.__v_isShallow=e}get value(){return this.dep.track(),this._value}set value(t){const e=this._rawValue,s=this.__v_isShallow||ar(t)||Ha(t);t=s?t:Je(t),$a(t,e)&&(this._rawValue=t,this._value=s?t:js(t),this.dep.trigger())}}function Qe(n){return rs(n)?n.value:n}const eA={get:(n,t,e)=>t==="__v_raw"?n:Qe(Reflect.get(n,t,e)),set:(n,t,e,s)=>{const i=n[t];return rs(i)&&!rs(e)?(i.value=e,!0):Reflect.set(n,t,e,s)}};function c6(n){return Ba(n)?n:new Proxy(n,eA)}function nA(n){const t=be(n)?new Array(n.length):{};for(const e in n)t[e]=iA(n,e);return t}class sA{constructor(t,e,s){this._object=t,this._key=e,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Ok(Je(this._object),this._key)}}function iA(n,t,e){const s=n[t];return rs(s)?s:new sA(n,t,e)}class rA{constructor(t,e,s){this.fn=t,this.setter=e,this._value=void 0,this.dep=new p5(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ph-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!e,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&An!==this)return Y9(this,!0),!0}get value(){const t=this.dep.track();return Z9(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function oA(n,t,e=!1){let s,i;return De(n)?s=n:(s=n.get,i=n.set),new rA(s,i,e)}const Xf={},up=new WeakMap;let Nl;function aA(n,t=!1,e=Nl){if(e){let s=up.get(e);s||up.set(e,s=[]),s.push(n)}}function lA(n,t,e=yn){const{immediate:s,deep:i,once:r,scheduler:o,augmentJob:a,call:l}=e,c=C=>i?C:ar(C)||i===!1||i===0?Vo(C,1):Vo(C);let u,d,f,h,g=!1,m=!1;if(rs(n)?(d=()=>n.value,g=ar(n)):Ba(n)?(d=()=>c(n),g=!0):be(n)?(m=!0,g=n.some(C=>Ba(C)||ar(C)),d=()=>n.map(C=>{if(rs(C))return C.value;if(Ba(C))return c(C);if(De(C))return l?l(C,2):C()})):De(n)?t?d=l?()=>l(n,2):n:d=()=>{if(f){Zo();try{f()}finally{Jo()}}const C=Nl;Nl=u;try{return l?l(n,3,[h]):n(h)}finally{Nl=C}}:d=ao,t&&i){const C=d,A=i===!0?1/0:i;d=()=>Vo(C(),A)}const b=q9(),y=()=>{u.stop(),b&&b.active&&l5(b.effects,u)};if(r&&t){const C=t;t=(...A)=>{C(...A),y()}}let x=m?new Array(n.length).fill(Xf):Xf;const _=C=>{if(!(!(u.flags&1)||!u.dirty&&!C))if(t){const A=u.run();if(i||g||(m?A.some((I,R)=>$a(I,x[R])):$a(A,x))){f&&f();const I=Nl;Nl=u;try{const R=[A,x===Xf?void 0:m&&x[0]===Xf?[]:x,h];x=A,l?l(t,3,R):t(...R)}finally{Nl=I}}}else u.run()};return a&&a(_),u=new W9(d),u.scheduler=o?()=>o(_,!1):_,h=C=>aA(C,!1,u),f=u.onStop=()=>{const C=up.get(u);if(C){if(l)l(C,4);else for(const A of C)A();up.delete(u)}},t?s?_(!0):x=u.run():o?o(_.bind(null,!0),!0):u.run(),y.pause=u.pause.bind(u),y.resume=u.resume.bind(u),y.stop=y,y}function Vo(n,t=1/0,e){if(t<=0||!_n(n)||n.__v_skip||(e=e||new Set,e.has(n)))return n;if(e.add(n),t--,rs(n))Vo(n.value,t,e);else if(be(n))for(let s=0;s<n.length;s++)Vo(n[s],t,e);else if(Ou(n)||lu(n))n.forEach(s=>{Vo(s,t,e)});else if(B9(n)){for(const s in n)Vo(n[s],t,e);for(const s of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,s)&&Vo(n[s],t,e)}return n}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function qh(n,t,e,s){try{return s?n(...s):n()}catch(i){Gp(i,t,e)}}function Ir(n,t,e,s){if(De(n)){const i=qh(n,t,e,s);return i&&F9(i)&&i.catch(r=>{Gp(r,t,e)}),i}if(be(n)){const i=[];for(let r=0;r<n.length;r++)i.push(Ir(n[r],t,e,s));return i}}function Gp(n,t,e,s=!0){const i=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||yn;if(t){let a=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${e}`;for(;a;){const u=a.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](n,l,c)===!1)return}a=a.parent}if(r){Zo(),qh(r,null,10,[n,l,c]),Jo();return}}cA(n,e,i,s,o)}function cA(n,t,e,s=!0,i=!1){if(i)throw n;console.error(n)}const fi=[];let Qr=-1;const uu=[];let Sa=null,Gc=0;const u6=Promise.resolve();let dp=null;function Si(n){const t=dp||u6;return n?t.then(this?n.bind(this):n):t}function uA(n){let t=Qr+1,e=fi.length;for(;t<e;){const s=t+e>>>1,i=fi[s],r=mh(i);r<n||r===n&&i.flags&2?t=s+1:e=s}return t}function y5(n){if(!(n.flags&1)){const t=mh(n),e=fi[fi.length-1];!e||!(n.flags&2)&&t>=mh(e)?fi.push(n):fi.splice(uA(t),0,n),n.flags|=1,d6()}}function d6(){dp||(dp=u6.then(f6))}function dA(n){be(n)?uu.push(...n):Sa&&n.id===-1?Sa.splice(Gc+1,0,n):n.flags&1||(uu.push(n),n.flags|=1),d6()}function Tv(n,t,e=Qr+1){for(;e<fi.length;e++){const s=fi[e];if(s&&s.flags&2){if(n&&s.id!==n.uid)continue;fi.splice(e,1),e--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function h6(n){if(uu.length){const t=[...new Set(uu)].sort((e,s)=>mh(e)-mh(s));if(uu.length=0,Sa){Sa.push(...t);return}for(Sa=t,Gc=0;Gc<Sa.length;Gc++){const e=Sa[Gc];e.flags&4&&(e.flags&=-2),e.flags&8||e(),e.flags&=-2}Sa=null,Gc=0}}const mh=n=>n.id==null?n.flags&2?-1:1/0:n.id;function f6(n){try{for(Qr=0;Qr<fi.length;Qr++){const t=fi[Qr];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),qh(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Qr<fi.length;Qr++){const t=fi[Qr];t&&(t.flags&=-2)}Qr=-1,fi.length=0,h6(),dp=null,(fi.length||uu.length)&&f6()}}let _s=null,p6=null;function hp(n){const t=_s;return _s=n,p6=n&&n.type.__scopeId||null,t}function hs(n,t=_s,e){if(!t||n._n)return n;const s=(...i)=>{s._d&&$v(-1);const r=hp(t);let o;try{o=n(...i)}finally{hp(r),s._d&&$v(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Ut(n,t){if(_s===null)return n;const e=tg(_s),s=n.dirs||(n.dirs=[]);for(let i=0;i<t.length;i++){let[r,o,a,l=yn]=t[i];r&&(De(r)&&(r={mounted:r,updated:r}),r.deep&&Vo(o),s.push({dir:r,instance:e,value:o,oldValue:void 0,arg:a,modifiers:l}))}return n}function Al(n,t,e,s){const i=n.dirs,r=t&&t.dirs;for(let o=0;o<i.length;o++){const a=i[o];r&&(a.oldValue=r[o].value);let l=a.dir[s];l&&(Zo(),Ir(l,e,8,[n.el,a,n,t]),Jo())}}const hA=Symbol("_vte"),g6=n=>n.__isTeleport,Ea=Symbol("_leaveCb"),Zf=Symbol("_enterCb");function fA(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return je(()=>{n.isMounted=!0}),oc(()=>{n.isUnmounting=!0}),n}const tr=[Function,Array],m6={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:tr,onEnter:tr,onAfterEnter:tr,onEnterCancelled:tr,onBeforeLeave:tr,onLeave:tr,onAfterLeave:tr,onLeaveCancelled:tr,onBeforeAppear:tr,onAppear:tr,onAfterAppear:tr,onAppearCancelled:tr},b6=n=>{const t=n.subTree;return t.component?b6(t.component):t},pA={name:"BaseTransition",props:m6,setup(n,{slots:t}){const e=Y6(),s=fA();return()=>{const i=t.default&&w6(t.default(),!0);if(!i||!i.length)return;const r=v6(i),o=Je(n),{mode:a}=o;if(s.isLeaving)return m2(r);const l=Lv(r);if(!l)return m2(r);let c=z0(l,o,s,e,d=>c=d);l.type!==Us&&xu(l,c);let u=e.subTree&&Lv(e.subTree);if(u&&u.type!==Us&&!Pa(l,u)&&b6(e).type!==Us){let d=z0(u,o,s,e);if(xu(u,d),a==="out-in"&&l.type!==Us)return s.isLeaving=!0,d.afterLeave=()=>{s.isLeaving=!1,e.job.flags&8||e.update(),delete d.afterLeave,u=void 0},m2(r);a==="in-out"&&l.type!==Us?d.delayLeave=(f,h,g)=>{const m=y6(s,u);m[String(u.key)]=u,f[Ea]=()=>{h(),f[Ea]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{g(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return r}}};function v6(n){let t=n[0];if(n.length>1){for(const e of n)if(e.type!==Us){t=e;break}}return t}const gA=pA;function y6(n,t){const{leavingVNodes:e}=n;let s=e.get(t.type);return s||(s=Object.create(null),e.set(t.type,s)),s}function z0(n,t,e,s,i){const{appear:r,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:f,onLeave:h,onAfterLeave:g,onLeaveCancelled:m,onBeforeAppear:b,onAppear:y,onAfterAppear:x,onAppearCancelled:_}=t,C=String(n.key),A=y6(e,n),I=(P,V)=>{P&&Ir(P,s,9,V)},R=(P,V)=>{const T=V[1];I(P,V),be(P)?P.every(D=>D.length<=1)&&T():P.length<=1&&T()},L={mode:o,persisted:a,beforeEnter(P){let V=l;if(!e.isMounted)if(r)V=b||l;else return;P[Ea]&&P[Ea](!0);const T=A[C];T&&Pa(n,T)&&T.el[Ea]&&T.el[Ea](),I(V,[P])},enter(P){let V=c,T=u,D=d;if(!e.isMounted)if(r)V=y||c,T=x||u,D=_||d;else return;let K=!1;const $=P[Zf]=q=>{K||(K=!0,q?I(D,[P]):I(T,[P]),L.delayedLeave&&L.delayedLeave(),P[Zf]=void 0)};V?R(V,[P,$]):$()},leave(P,V){const T=String(n.key);if(P[Zf]&&P[Zf](!0),e.isUnmounting)return V();I(f,[P]);let D=!1;const K=P[Ea]=$=>{D||(D=!0,V(),$?I(m,[P]):I(g,[P]),P[Ea]=void 0,A[T]===n&&delete A[T])};A[T]=n,h?R(h,[P,K]):K()},clone(P){const V=z0(P,t,e,s,i);return i&&i(V),V}};return L}function m2(n){if(Yp(n))return n=ta(n),n.children=null,n}function Lv(n){if(!Yp(n))return g6(n.type)&&n.children?v6(n.children):n;if(n.component)return n.component.subTree;const{shapeFlag:t,children:e}=n;if(e){if(t&16)return e[0];if(t&32&&De(e.default))return e.default()}}function xu(n,t){n.shapeFlag&6&&n.component?(n.transition=t,xu(n.component.subTree,t)):n.shapeFlag&128?(n.ssContent.transition=t.clone(n.ssContent),n.ssFallback.transition=t.clone(n.ssFallback)):n.transition=t}function w6(n,t=!1,e){let s=[],i=0;for(let r=0;r<n.length;r++){let o=n[r];const a=e==null?o.key:String(e)+String(o.key!=null?o.key:r);o.type===Kt?(o.patchFlag&128&&i++,s=s.concat(w6(o.children,t,a))):(t||o.type!==Us)&&s.push(a!=null?ta(o,{key:a}):o)}if(i>1)for(let r=0;r<s.length;r++)s[r].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function Wh(n,t){return De(n)?Ls({name:n.name},t,{setup:n}):n}function _6(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function Xd(n,t,e,s,i=!1){if(be(n)){n.forEach((g,m)=>Xd(g,t&&(be(t)?t[m]:t),e,s,i));return}if(Ql(s)&&!i){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Xd(n,t,e,s.component.subTree);return}const r=s.shapeFlag&4?tg(s.component):s.el,o=i?null:r,{i:a,r:l}=n,c=t&&t.r,u=a.refs===yn?a.refs={}:a.refs,d=a.setupState,f=Je(d),h=d===yn?()=>!1:g=>ln(f,g);if(c!=null&&c!==l&&(jn(c)?(u[c]=null,h(c)&&(d[c]=null)):rs(c)&&(c.value=null)),De(l))qh(l,a,12,[o,u]);else{const g=jn(l),m=rs(l);if(g||m){const b=()=>{if(n.f){const y=g?h(l)?d[l]:u[l]:l.value;i?be(y)&&l5(y,r):be(y)?y.includes(r)||y.push(r):g?(u[l]=[r],h(l)&&(d[l]=u[l])):(l.value=[r],n.k&&(u[n.k]=l.value))}else g?(u[l]=o,h(l)&&(d[l]=o)):m&&(l.value=o,n.k&&(u[n.k]=o))};o?(b.id=-1,$s(b,e)):b()}}}Vp().requestIdleCallback;Vp().cancelIdleCallback;const Ql=n=>!!n.type.__asyncLoader,Yp=n=>n.type.__isKeepAlive,mA={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(n,{slots:t}){const e=Y6(),s=e.ctx;if(!s.renderer)return()=>{const x=t.default&&t.default();return x&&x.length===1?x[0]:x};const i=new Map,r=new Set;let o=null;const a=e.suspense,{renderer:{p:l,m:c,um:u,o:{createElement:d}}}=s,f=d("div");s.activate=(x,_,C,A,I)=>{const R=x.component;c(x,_,C,0,a),l(R.vnode,x,_,C,R,a,A,x.slotScopeIds,I),$s(()=>{R.isDeactivated=!1,R.a&&cu(R.a);const L=x.props&&x.props.onVnodeMounted;L&&ir(L,R.parent,x)},a)},s.deactivate=x=>{const _=x.component;pp(_.m),pp(_.a),c(x,f,null,1,a),$s(()=>{_.da&&cu(_.da);const C=x.props&&x.props.onVnodeUnmounted;C&&ir(C,_.parent,x),_.isDeactivated=!0},a)};function h(x){b2(x),u(x,e,a,!0)}function g(x){i.forEach((_,C)=>{const A=Y0(_.type);A&&!x(A)&&m(C)})}function m(x){const _=i.get(x);_&&(!o||!Pa(_,o))?h(_):o&&b2(o),i.delete(x),r.delete(x)}lo(()=>[n.include,n.exclude],([x,_])=>{x&&g(C=>Fd(x,C)),_&&g(C=>!Fd(_,C))},{flush:"post",deep:!0});let b=null;const y=()=>{b!=null&&(gp(e.subTree.type)?$s(()=>{i.set(b,Jf(e.subTree))},e.subTree.suspense):i.set(b,Jf(e.subTree)))};return je(y),Xp(y),oc(()=>{i.forEach(x=>{const{subTree:_,suspense:C}=e,A=Jf(_);if(x.type===A.type&&x.key===A.key){b2(A);const I=A.component.da;I&&$s(I,C);return}h(x)})}),()=>{if(b=null,!t.default)return o=null;const x=t.default(),_=x[0];if(x.length>1)return o=null,x;if(!Cu(_)||!(_.shapeFlag&4)&&!(_.shapeFlag&128))return o=null,_;let C=Jf(_);if(C.type===Us)return o=null,C;const A=C.type,I=Y0(Ql(C)?C.type.__asyncResolved||{}:A),{include:R,exclude:L,max:P}=n;if(R&&(!I||!Fd(R,I))||L&&I&&Fd(L,I))return C.shapeFlag&=-257,o=C,_;const V=C.key==null?A:C.key,T=i.get(V);return C.el&&(C=ta(C),_.shapeFlag&128&&(_.ssContent=C)),b=V,T?(C.el=T.el,C.component=T.component,C.transition&&xu(C,C.transition),C.shapeFlag|=512,r.delete(V),r.add(V)):(r.add(V),P&&r.size>parseInt(P,10)&&m(r.values().next().value)),C.shapeFlag|=256,o=C,gp(_.type)?_:C}}},x6=mA;function Fd(n,t){return be(n)?n.some(e=>Fd(e,t)):jn(n)?n.split(",").includes(t):_k(n)?(n.lastIndex=0,n.test(t)):!1}function C6(n,t){k6(n,"a",t)}function bA(n,t){k6(n,"da",t)}function k6(n,t,e=Es){const s=n.__wdc||(n.__wdc=()=>{let i=e;for(;i;){if(i.isDeactivated)return;i=i.parent}return n()});if(Kp(t,s,e),e){let i=e.parent;for(;i&&i.parent;)Yp(i.parent.vnode)&&vA(s,t,e,i),i=i.parent}}function vA(n,t,e,s){const i=Kp(t,n,s,!0);Zp(()=>{l5(s[t],i)},e)}function b2(n){n.shapeFlag&=-257,n.shapeFlag&=-513}function Jf(n){return n.shapeFlag&128?n.ssContent:n}function Kp(n,t,e=Es,s=!1){if(e){const i=e[n]||(e[n]=[]),r=t.__weh||(t.__weh=(...o)=>{Zo();const a=Gh(e),l=Ir(t,e,n,o);return a(),Jo(),l});return s?i.unshift(r):i.push(r),r}}const ea=n=>(t,e=Es)=>{(!vh||n==="sp")&&Kp(n,(...s)=>t(...s),e)},yA=ea("bm"),je=ea("m"),wA=ea("bu"),Xp=ea("u"),oc=ea("bum"),Zp=ea("um"),_A=ea("sp"),xA=ea("rtg"),CA=ea("rtc");function kA(n,t=Es){Kp("ec",n,t)}const A6="components";function Qo(n,t){return T6(A6,n,!0,t)||n}const S6=Symbol.for("v-ndc");function E6(n){return jn(n)?T6(A6,n,!1)||n:n||S6}function T6(n,t,e=!0,s=!1){const i=_s||Es;if(i){const r=i.type;{const a=Y0(r,!1);if(a&&(a===t||a===ur(t)||a===Hp(ur(t))))return r}const o=Pv(i[n]||r[n],t)||Pv(i.appContext[n],t);return!o&&s?r:o}}function Pv(n,t){return n&&(n[t]||n[ur(t)]||n[Hp(ur(t))])}function pe(n,t,e,s){let i;const r=e,o=be(n);if(o||jn(n)){const a=o&&Ba(n);let l=!1,c=!1;a&&(l=!ar(n),c=Ha(n),n=Wp(n)),i=new Array(n.length);for(let u=0,d=n.length;u<d;u++)i[u]=t(l?c?cp(js(n[u])):js(n[u]):n[u],u,void 0,r)}else if(typeof n=="number"){i=new Array(n);for(let a=0;a<n;a++)i[a]=t(a+1,a,void 0,r)}else if(_n(n))if(n[Symbol.iterator])i=Array.from(n,(a,l)=>t(a,l,void 0,r));else{const a=Object.keys(n);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];i[l]=t(n[u],u,l,r)}}else i=[];return i}function AA(n,t,e={},s,i){if(_s.ce||_s.parent&&Ql(_s.parent)&&_s.parent.ce)return e.name=t,j(),Va(Kt,null,[Ce("slot",e,s&&s())],64);let r=n[t];r&&r._c&&(r._d=!1),j();const o=r&&L6(r(e)),a=e.key||o&&o.key,l=Va(Kt,{key:(a&&!Pr(a)?a:`_${t}`)+(!o&&s?"_fb":"")},o||(s?s():[]),o&&n._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),r&&r._c&&(r._d=!0),l}function L6(n){return n.some(t=>Cu(t)?!(t.type===Us||t.type===Kt&&!L6(t.children)):!0)?n:null}const H0=n=>n?K6(n)?tg(n):H0(n.parent):null,Zd=Ls(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>H0(n.parent),$root:n=>H0(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>I6(n),$forceUpdate:n=>n.f||(n.f=()=>{y5(n.update)}),$nextTick:n=>n.n||(n.n=Si.bind(n.proxy)),$watch:n=>GA.bind(n)}),v2=(n,t)=>n!==yn&&!n.__isScriptSetup&&ln(n,t),SA={get({_:n},t){if(t==="__v_skip")return!0;const{ctx:e,setupState:s,data:i,props:r,accessCache:o,type:a,appContext:l}=n;let c;if(t[0]!=="$"){const h=o[t];if(h!==void 0)switch(h){case 1:return s[t];case 2:return i[t];case 4:return e[t];case 3:return r[t]}else{if(v2(s,t))return o[t]=1,s[t];if(i!==yn&&ln(i,t))return o[t]=2,i[t];if((c=n.propsOptions[0])&&ln(c,t))return o[t]=3,r[t];if(e!==yn&&ln(e,t))return o[t]=4,e[t];V0&&(o[t]=0)}}const u=Zd[t];let d,f;if(u)return t==="$attrs"&&ti(n.attrs,"get",""),u(n);if((d=a.__cssModules)&&(d=d[t]))return d;if(e!==yn&&ln(e,t))return o[t]=4,e[t];if(f=l.config.globalProperties,ln(f,t))return f[t]},set({_:n},t,e){const{data:s,setupState:i,ctx:r}=n;return v2(i,t)?(i[t]=e,!0):s!==yn&&ln(s,t)?(s[t]=e,!0):ln(n.props,t)||t[0]==="$"&&t.slice(1)in n?!1:(r[t]=e,!0)},has({_:{data:n,setupState:t,accessCache:e,ctx:s,appContext:i,propsOptions:r}},o){let a;return!!e[o]||n!==yn&&ln(n,o)||v2(t,o)||(a=r[0])&&ln(a,o)||ln(s,o)||ln(Zd,o)||ln(i.config.globalProperties,o)},defineProperty(n,t,e){return e.get!=null?n._.accessCache[t]=0:ln(e,"value")&&this.set(n,t,e.value,null),Reflect.defineProperty(n,t,e)}};function Iv(n){return be(n)?n.reduce((t,e)=>(t[e]=null,t),{}):n}let V0=!0;function EA(n){const t=I6(n),e=n.proxy,s=n.ctx;V0=!1,t.beforeCreate&&Dv(t.beforeCreate,n,"bc");const{data:i,computed:r,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:f,beforeUpdate:h,updated:g,activated:m,deactivated:b,beforeDestroy:y,beforeUnmount:x,destroyed:_,unmounted:C,render:A,renderTracked:I,renderTriggered:R,errorCaptured:L,serverPrefetch:P,expose:V,inheritAttrs:T,components:D,directives:K,filters:$}=t;if(c&&TA(c,s,null),o)for(const F in o){const O=o[F];De(O)&&(s[F]=O.bind(e))}if(i){const F=i.call(e,e);_n(F)&&(n.data=ws(F))}if(V0=!0,r)for(const F in r){const O=r[F],et=De(O)?O.bind(e,e):De(O.get)?O.get.bind(e,e):ao,gt=!De(O)&&De(O.set)?O.set.bind(e):ao,lt=cn({get:et,set:gt});Object.defineProperty(s,F,{enumerable:!0,configurable:!0,get:()=>lt.value,set:E=>lt.value=E})}if(a)for(const F in a)P6(a[F],s,e,F);if(l){const F=De(l)?l.call(e):l;Reflect.ownKeys(F).forEach(O=>{z1(O,F[O])})}u&&Dv(u,n,"c");function W(F,O){be(O)?O.forEach(et=>F(et.bind(e))):O&&F(O.bind(e))}if(W(yA,d),W(je,f),W(wA,h),W(Xp,g),W(C6,m),W(bA,b),W(kA,L),W(CA,I),W(xA,R),W(oc,x),W(Zp,C),W(_A,P),be(V))if(V.length){const F=n.exposed||(n.exposed={});V.forEach(O=>{Object.defineProperty(F,O,{get:()=>e[O],set:et=>e[O]=et})})}else n.exposed||(n.exposed={});A&&n.render===ao&&(n.render=A),T!=null&&(n.inheritAttrs=T),D&&(n.components=D),K&&(n.directives=K),P&&_6(n)}function TA(n,t,e=ao){be(n)&&(n=q0(n));for(const s in n){const i=n[s];let r;_n(i)?"default"in i?r=lr(i.from||s,i.default,!0):r=lr(i.from||s):r=lr(i),rs(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[s]=r}}function Dv(n,t,e){Ir(be(n)?n.map(s=>s.bind(t.proxy)):n.bind(t.proxy),t,e)}function P6(n,t,e,s){let i=s.includes(".")?V6(e,s):()=>e[s];if(jn(n)){const r=t[n];De(r)&&lo(i,r)}else if(De(n))lo(i,n.bind(e));else if(_n(n))if(be(n))n.forEach(r=>P6(r,t,e,s));else{const r=De(n.handler)?n.handler.bind(e):t[n.handler];De(r)&&lo(i,r,n)}}function I6(n){const t=n.type,{mixins:e,extends:s}=t,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=n.appContext,a=r.get(t);let l;return a?l=a:!i.length&&!e&&!s?l=t:(l={},i.length&&i.forEach(c=>fp(l,c,o,!0)),fp(l,t,o)),_n(t)&&r.set(t,l),l}function fp(n,t,e,s=!1){const{mixins:i,extends:r}=t;r&&fp(n,r,e,!0),i&&i.forEach(o=>fp(n,o,e,!0));for(const o in t)if(!(s&&o==="expose")){const a=LA[o]||e&&e[o];n[o]=a?a(n[o],t[o]):t[o]}return n}const LA={data:Mv,props:Rv,emits:Rv,methods:$d,computed:$d,beforeCreate:li,created:li,beforeMount:li,mounted:li,beforeUpdate:li,updated:li,beforeDestroy:li,beforeUnmount:li,destroyed:li,unmounted:li,activated:li,deactivated:li,errorCaptured:li,serverPrefetch:li,components:$d,directives:$d,watch:IA,provide:Mv,inject:PA};function Mv(n,t){return t?n?function(){return Ls(De(n)?n.call(this,this):n,De(t)?t.call(this,this):t)}:t:n}function PA(n,t){return $d(q0(n),q0(t))}function q0(n){if(be(n)){const t={};for(let e=0;e<n.length;e++)t[n[e]]=n[e];return t}return n}function li(n,t){return n?[...new Set([].concat(n,t))]:t}function $d(n,t){return n?Ls(Object.create(null),n,t):t}function Rv(n,t){return n?be(n)&&be(t)?[...new Set([...n,...t])]:Ls(Object.create(null),Iv(n),Iv(t??{})):t}function IA(n,t){if(!n)return t;if(!t)return n;const e=Ls(Object.create(null),n);for(const s in t)e[s]=li(n[s],t[s]);return e}function D6(){return{app:null,config:{isNativeTag:yk,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let DA=0;function MA(n,t){return function(s,i=null){De(s)||(s=Ls({},s)),i!=null&&!_n(i)&&(i=null);const r=D6(),o=new WeakSet,a=[];let l=!1;const c=r.app={_uid:DA++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:fS,get config(){return r.config},set config(u){},use(u,...d){return o.has(u)||(u&&De(u.install)?(o.add(u),u.install(c,...d)):De(u)&&(o.add(u),u(c,...d))),c},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),c},component(u,d){return d?(r.components[u]=d,c):r.components[u]},directive(u,d){return d?(r.directives[u]=d,c):r.directives[u]},mount(u,d,f){if(!l){const h=c._ceVNode||Ce(s,i);return h.appContext=r,f===!0?f="svg":f===!1&&(f=void 0),n(h,u,f),l=!0,c._container=u,u.__vue_app__=c,tg(h.component)}},onUnmount(u){a.push(u)},unmount(){l&&(Ir(a,c._instance,16),n(null,c._container),delete c._container.__vue_app__)},provide(u,d){return r.provides[u]=d,c},runWithContext(u){const d=tc;tc=c;try{return u()}finally{tc=d}}};return c}}let tc=null;function z1(n,t){if(Es){let e=Es.provides;const s=Es.parent&&Es.parent.provides;s===e&&(e=Es.provides=Object.create(s)),e[n]=t}}function lr(n,t,e=!1){const s=Es||_s;if(s||tc){let i=tc?tc._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(i&&n in i)return i[n];if(arguments.length>1)return e&&De(t)?t.call(s&&s.proxy):t}}function RA(){return!!(Es||_s||tc)}const M6={},R6=()=>Object.create(M6),N6=n=>Object.getPrototypeOf(n)===M6;function NA(n,t,e,s=!1){const i={},r=R6();n.propsDefaults=Object.create(null),O6(n,t,i,r);for(const o in n.propsOptions[0])o in i||(i[o]=void 0);e?n.props=s?i:o6(i):n.type.props?n.props=i:n.props=r,n.attrs=r}function OA(n,t,e,s){const{props:i,attrs:r,vnode:{patchFlag:o}}=n,a=Je(i),[l]=n.propsOptions;let c=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=n.vnode.dynamicProps;for(let d=0;d<u.length;d++){let f=u[d];if(Jp(n.emitsOptions,f))continue;const h=t[f];if(l)if(ln(r,f))h!==r[f]&&(r[f]=h,c=!0);else{const g=ur(f);i[g]=W0(l,a,g,h,n,!1)}else h!==r[f]&&(r[f]=h,c=!0)}}}else{O6(n,t,i,r)&&(c=!0);let u;for(const d in a)(!t||!ln(t,d)&&((u=Za(d))===d||!ln(t,u)))&&(l?e&&(e[d]!==void 0||e[u]!==void 0)&&(i[d]=W0(l,a,d,void 0,n,!0)):delete i[d]);if(r!==a)for(const d in r)(!t||!ln(t,d))&&(delete r[d],c=!0)}c&&Ho(n.attrs,"set","")}function O6(n,t,e,s){const[i,r]=n.propsOptions;let o=!1,a;if(t)for(let l in t){if(Gd(l))continue;const c=t[l];let u;i&&ln(i,u=ur(l))?!r||!r.includes(u)?e[u]=c:(a||(a={}))[u]=c:Jp(n.emitsOptions,l)||(!(l in s)||c!==s[l])&&(s[l]=c,o=!0)}if(r){const l=Je(e),c=a||yn;for(let u=0;u<r.length;u++){const d=r[u];e[d]=W0(i,l,d,c[d],n,!ln(c,d))}}return o}function W0(n,t,e,s,i,r){const o=n[e];if(o!=null){const a=ln(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&De(l)){const{propsDefaults:c}=i;if(e in c)s=c[e];else{const u=Gh(i);s=c[e]=l.call(null,t),u()}}else s=l;i.ce&&i.ce._setProp(e,s)}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===Za(e))&&(s=!0))}return s}const FA=new WeakMap;function F6(n,t,e=!1){const s=e?FA:t.propsCache,i=s.get(n);if(i)return i;const r=n.props,o={},a=[];let l=!1;if(!De(n)){const u=d=>{l=!0;const[f,h]=F6(d,t,!0);Ls(o,f),h&&a.push(...h)};!e&&t.mixins.length&&t.mixins.forEach(u),n.extends&&u(n.extends),n.mixins&&n.mixins.forEach(u)}if(!r&&!l)return _n(n)&&s.set(n,au),au;if(be(r))for(let u=0;u<r.length;u++){const d=ur(r[u]);Nv(d)&&(o[d]=yn)}else if(r)for(const u in r){const d=ur(u);if(Nv(d)){const f=r[u],h=o[d]=be(f)||De(f)?{type:f}:Ls({},f),g=h.type;let m=!1,b=!0;if(be(g))for(let y=0;y<g.length;++y){const x=g[y],_=De(x)&&x.name;if(_==="Boolean"){m=!0;break}else _==="String"&&(b=!1)}else m=De(g)&&g.name==="Boolean";h[0]=m,h[1]=b,(m||ln(h,"default"))&&a.push(d)}}const c=[o,a];return _n(n)&&s.set(n,c),c}function Nv(n){return n[0]!=="$"&&!Gd(n)}const w5=n=>n[0]==="_"||n==="$stable",_5=n=>be(n)?n.map(so):[so(n)],$A=(n,t,e)=>{if(t._n)return t;const s=hs((...i)=>_5(t(...i)),e);return s._c=!1,s},$6=(n,t,e)=>{const s=n._ctx;for(const i in n){if(w5(i))continue;const r=n[i];if(De(r))t[i]=$A(i,r,s);else if(r!=null){const o=_5(r);t[i]=()=>o}}},B6=(n,t)=>{const e=_5(t);n.slots.default=()=>e},j6=(n,t,e)=>{for(const s in t)(e||!w5(s))&&(n[s]=t[s])},BA=(n,t,e)=>{const s=n.slots=R6();if(n.vnode.shapeFlag&32){const i=t.__;i&&$0(s,"__",i,!0);const r=t._;r?(j6(s,t,e),e&&$0(s,"_",r,!0)):$6(t,s)}else t&&B6(n,t)},jA=(n,t,e)=>{const{vnode:s,slots:i}=n;let r=!0,o=yn;if(s.shapeFlag&32){const a=t._;a?e&&a===1?r=!1:j6(i,t,e):(r=!t.$stable,$6(t,i)),o=t}else t&&(B6(n,t),o={default:1});if(r)for(const a in i)!w5(a)&&o[a]==null&&delete i[a]},$s=tS;function UA(n){return zA(n)}function zA(n,t){const e=Vp();e.__VUE__=!0;const{insert:s,remove:i,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:f,setScopeId:h=ao,insertStaticContent:g}=n,m=(Q,it,ot,X=null,Pt=null,Tt=null,Nt=void 0,_t=null,It=!!it.dynamicChildren)=>{if(Q===it)return;Q&&!Pa(Q,it)&&(X=nt(Q),E(Q,Pt,Tt,!0),Q=null),it.patchFlag===-2&&(It=!1,it.dynamicChildren=null);const{type:kt,ref:Ht,shapeFlag:Mt}=it;switch(kt){case Qp:b(Q,it,ot,X);break;case Us:y(Q,it,ot,X);break;case H1:Q==null&&x(it,ot,X,Nt);break;case Kt:D(Q,it,ot,X,Pt,Tt,Nt,_t,It);break;default:Mt&1?A(Q,it,ot,X,Pt,Tt,Nt,_t,It):Mt&6?K(Q,it,ot,X,Pt,Tt,Nt,_t,It):(Mt&64||Mt&128)&&kt.process(Q,it,ot,X,Pt,Tt,Nt,_t,It,rt)}Ht!=null&&Pt?Xd(Ht,Q&&Q.ref,Tt,it||Q,!it):Ht==null&&Q&&Q.ref!=null&&Xd(Q.ref,null,Tt,Q,!0)},b=(Q,it,ot,X)=>{if(Q==null)s(it.el=a(it.children),ot,X);else{const Pt=it.el=Q.el;it.children!==Q.children&&c(Pt,it.children)}},y=(Q,it,ot,X)=>{Q==null?s(it.el=l(it.children||""),ot,X):it.el=Q.el},x=(Q,it,ot,X)=>{[Q.el,Q.anchor]=g(Q.children,it,ot,X,Q.el,Q.anchor)},_=({el:Q,anchor:it},ot,X)=>{let Pt;for(;Q&&Q!==it;)Pt=f(Q),s(Q,ot,X),Q=Pt;s(it,ot,X)},C=({el:Q,anchor:it})=>{let ot;for(;Q&&Q!==it;)ot=f(Q),i(Q),Q=ot;i(it)},A=(Q,it,ot,X,Pt,Tt,Nt,_t,It)=>{it.type==="svg"?Nt="svg":it.type==="math"&&(Nt="mathml"),Q==null?I(it,ot,X,Pt,Tt,Nt,_t,It):P(Q,it,Pt,Tt,Nt,_t,It)},I=(Q,it,ot,X,Pt,Tt,Nt,_t)=>{let It,kt;const{props:Ht,shapeFlag:Mt,transition:qt,dirs:Vt}=Q;if(It=Q.el=o(Q.type,Tt,Ht&&Ht.is,Ht),Mt&8?u(It,Q.children):Mt&16&&L(Q.children,It,null,X,Pt,y2(Q,Tt),Nt,_t),Vt&&Al(Q,null,X,"created"),R(It,Q,Q.scopeId,Nt,X),Ht){for(const ve in Ht)ve!=="value"&&!Gd(ve)&&r(It,ve,null,Ht[ve],Tt,X);"value"in Ht&&r(It,"value",null,Ht.value,Tt),(kt=Ht.onVnodeBeforeMount)&&ir(kt,X,Q)}Vt&&Al(Q,null,X,"beforeMount");const Yt=HA(Pt,qt);Yt&&qt.beforeEnter(It),s(It,it,ot),((kt=Ht&&Ht.onVnodeMounted)||Yt||Vt)&&$s(()=>{kt&&ir(kt,X,Q),Yt&&qt.enter(It),Vt&&Al(Q,null,X,"mounted")},Pt)},R=(Q,it,ot,X,Pt)=>{if(ot&&h(Q,ot),X)for(let Tt=0;Tt<X.length;Tt++)h(Q,X[Tt]);if(Pt){let Tt=Pt.subTree;if(it===Tt||gp(Tt.type)&&(Tt.ssContent===it||Tt.ssFallback===it)){const Nt=Pt.vnode;R(Q,Nt,Nt.scopeId,Nt.slotScopeIds,Pt.parent)}}},L=(Q,it,ot,X,Pt,Tt,Nt,_t,It=0)=>{for(let kt=It;kt<Q.length;kt++){const Ht=Q[kt]=_t?Ta(Q[kt]):so(Q[kt]);m(null,Ht,it,ot,X,Pt,Tt,Nt,_t)}},P=(Q,it,ot,X,Pt,Tt,Nt)=>{const _t=it.el=Q.el;let{patchFlag:It,dynamicChildren:kt,dirs:Ht}=it;It|=Q.patchFlag&16;const Mt=Q.props||yn,qt=it.props||yn;let Vt;if(ot&&Sl(ot,!1),(Vt=qt.onVnodeBeforeUpdate)&&ir(Vt,ot,it,Q),Ht&&Al(it,Q,ot,"beforeUpdate"),ot&&Sl(ot,!0),(Mt.innerHTML&&qt.innerHTML==null||Mt.textContent&&qt.textContent==null)&&u(_t,""),kt?V(Q.dynamicChildren,kt,_t,ot,X,y2(it,Pt),Tt):Nt||O(Q,it,_t,null,ot,X,y2(it,Pt),Tt,!1),It>0){if(It&16)T(_t,Mt,qt,ot,Pt);else if(It&2&&Mt.class!==qt.class&&r(_t,"class",null,qt.class,Pt),It&4&&r(_t,"style",Mt.style,qt.style,Pt),It&8){const Yt=it.dynamicProps;for(let ve=0;ve<Yt.length;ve++){const Xt=Yt[ve],Zt=Mt[Xt],ie=qt[Xt];(ie!==Zt||Xt==="value")&&r(_t,Xt,Zt,ie,Pt,ot)}}It&1&&Q.children!==it.children&&u(_t,it.children)}else!Nt&&kt==null&&T(_t,Mt,qt,ot,Pt);((Vt=qt.onVnodeUpdated)||Ht)&&$s(()=>{Vt&&ir(Vt,ot,it,Q),Ht&&Al(it,Q,ot,"updated")},X)},V=(Q,it,ot,X,Pt,Tt,Nt)=>{for(let _t=0;_t<it.length;_t++){const It=Q[_t],kt=it[_t],Ht=It.el&&(It.type===Kt||!Pa(It,kt)||It.shapeFlag&198)?d(It.el):ot;m(It,kt,Ht,null,X,Pt,Tt,Nt,!0)}},T=(Q,it,ot,X,Pt)=>{if(it!==ot){if(it!==yn)for(const Tt in it)!Gd(Tt)&&!(Tt in ot)&&r(Q,Tt,it[Tt],null,Pt,X);for(const Tt in ot){if(Gd(Tt))continue;const Nt=ot[Tt],_t=it[Tt];Nt!==_t&&Tt!=="value"&&r(Q,Tt,_t,Nt,Pt,X)}"value"in ot&&r(Q,"value",it.value,ot.value,Pt)}},D=(Q,it,ot,X,Pt,Tt,Nt,_t,It)=>{const kt=it.el=Q?Q.el:a(""),Ht=it.anchor=Q?Q.anchor:a("");let{patchFlag:Mt,dynamicChildren:qt,slotScopeIds:Vt}=it;Vt&&(_t=_t?_t.concat(Vt):Vt),Q==null?(s(kt,ot,X),s(Ht,ot,X),L(it.children||[],ot,Ht,Pt,Tt,Nt,_t,It)):Mt>0&&Mt&64&&qt&&Q.dynamicChildren?(V(Q.dynamicChildren,qt,ot,Pt,Tt,Nt,_t),(it.key!=null||Pt&&it===Pt.subTree)&&U6(Q,it,!0)):O(Q,it,ot,Ht,Pt,Tt,Nt,_t,It)},K=(Q,it,ot,X,Pt,Tt,Nt,_t,It)=>{it.slotScopeIds=_t,Q==null?it.shapeFlag&512?Pt.ctx.activate(it,ot,X,Nt,It):$(it,ot,X,Pt,Tt,Nt,It):q(Q,it,It)},$=(Q,it,ot,X,Pt,Tt,Nt)=>{const _t=Q.component=aS(Q,X,Pt);if(Yp(Q)&&(_t.ctx.renderer=rt),lS(_t,!1,Nt),_t.asyncDep){if(Pt&&Pt.registerDep(_t,W,Nt),!Q.el){const It=_t.subTree=Ce(Us);y(null,It,it,ot)}}else W(_t,Q,it,ot,Pt,Tt,Nt)},q=(Q,it,ot)=>{const X=it.component=Q.component;if(JA(Q,it,ot))if(X.asyncDep&&!X.asyncResolved){F(X,it,ot);return}else X.next=it,X.update();else it.el=Q.el,X.vnode=it},W=(Q,it,ot,X,Pt,Tt,Nt)=>{const _t=()=>{if(Q.isMounted){let{next:Mt,bu:qt,u:Vt,parent:Yt,vnode:ve}=Q;{const ze=z6(Q);if(ze){Mt&&(Mt.el=ve.el,F(Q,Mt,Nt)),ze.asyncDep.then(()=>{Q.isUnmounted||_t()});return}}let Xt=Mt,Zt;Sl(Q,!1),Mt?(Mt.el=ve.el,F(Q,Mt,Nt)):Mt=ve,qt&&cu(qt),(Zt=Mt.props&&Mt.props.onVnodeBeforeUpdate)&&ir(Zt,Yt,Mt,ve),Sl(Q,!0);const ie=Ov(Q),Jt=Q.subTree;Q.subTree=ie,m(Jt,ie,d(Jt.el),nt(Jt),Q,Pt,Tt),Mt.el=ie.el,Xt===null&&QA(Q,ie.el),Vt&&$s(Vt,Pt),(Zt=Mt.props&&Mt.props.onVnodeUpdated)&&$s(()=>ir(Zt,Yt,Mt,ve),Pt)}else{let Mt;const{el:qt,props:Vt}=it,{bm:Yt,m:ve,parent:Xt,root:Zt,type:ie}=Q,Jt=Ql(it);Sl(Q,!1),Yt&&cu(Yt),!Jt&&(Mt=Vt&&Vt.onVnodeBeforeMount)&&ir(Mt,Xt,it),Sl(Q,!0);{Zt.ce&&Zt.ce._def.shadowRoot!==!1&&Zt.ce._injectChildStyle(ie);const ze=Q.subTree=Ov(Q);m(null,ze,ot,X,Q,Pt,Tt),it.el=ze.el}if(ve&&$s(ve,Pt),!Jt&&(Mt=Vt&&Vt.onVnodeMounted)){const ze=it;$s(()=>ir(Mt,Xt,ze),Pt)}(it.shapeFlag&256||Xt&&Ql(Xt.vnode)&&Xt.vnode.shapeFlag&256)&&Q.a&&$s(Q.a,Pt),Q.isMounted=!0,it=ot=X=null}};Q.scope.on();const It=Q.effect=new W9(_t);Q.scope.off();const kt=Q.update=It.run.bind(It),Ht=Q.job=It.runIfDirty.bind(It);Ht.i=Q,Ht.id=Q.uid,It.scheduler=()=>y5(Ht),Sl(Q,!0),kt()},F=(Q,it,ot)=>{it.component=Q;const X=Q.vnode.props;Q.vnode=it,Q.next=null,OA(Q,it.props,X,ot),jA(Q,it.children,ot),Zo(),Tv(Q),Jo()},O=(Q,it,ot,X,Pt,Tt,Nt,_t,It=!1)=>{const kt=Q&&Q.children,Ht=Q?Q.shapeFlag:0,Mt=it.children,{patchFlag:qt,shapeFlag:Vt}=it;if(qt>0){if(qt&128){gt(kt,Mt,ot,X,Pt,Tt,Nt,_t,It);return}else if(qt&256){et(kt,Mt,ot,X,Pt,Tt,Nt,_t,It);return}}Vt&8?(Ht&16&&pt(kt,Pt,Tt),Mt!==kt&&u(ot,Mt)):Ht&16?Vt&16?gt(kt,Mt,ot,X,Pt,Tt,Nt,_t,It):pt(kt,Pt,Tt,!0):(Ht&8&&u(ot,""),Vt&16&&L(Mt,ot,X,Pt,Tt,Nt,_t,It))},et=(Q,it,ot,X,Pt,Tt,Nt,_t,It)=>{Q=Q||au,it=it||au;const kt=Q.length,Ht=it.length,Mt=Math.min(kt,Ht);let qt;for(qt=0;qt<Mt;qt++){const Vt=it[qt]=It?Ta(it[qt]):so(it[qt]);m(Q[qt],Vt,ot,null,Pt,Tt,Nt,_t,It)}kt>Ht?pt(Q,Pt,Tt,!0,!1,Mt):L(it,ot,X,Pt,Tt,Nt,_t,It,Mt)},gt=(Q,it,ot,X,Pt,Tt,Nt,_t,It)=>{let kt=0;const Ht=it.length;let Mt=Q.length-1,qt=Ht-1;for(;kt<=Mt&&kt<=qt;){const Vt=Q[kt],Yt=it[kt]=It?Ta(it[kt]):so(it[kt]);if(Pa(Vt,Yt))m(Vt,Yt,ot,null,Pt,Tt,Nt,_t,It);else break;kt++}for(;kt<=Mt&&kt<=qt;){const Vt=Q[Mt],Yt=it[qt]=It?Ta(it[qt]):so(it[qt]);if(Pa(Vt,Yt))m(Vt,Yt,ot,null,Pt,Tt,Nt,_t,It);else break;Mt--,qt--}if(kt>Mt){if(kt<=qt){const Vt=qt+1,Yt=Vt<Ht?it[Vt].el:X;for(;kt<=qt;)m(null,it[kt]=It?Ta(it[kt]):so(it[kt]),ot,Yt,Pt,Tt,Nt,_t,It),kt++}}else if(kt>qt)for(;kt<=Mt;)E(Q[kt],Pt,Tt,!0),kt++;else{const Vt=kt,Yt=kt,ve=new Map;for(kt=Yt;kt<=qt;kt++){const ge=it[kt]=It?Ta(it[kt]):so(it[kt]);ge.key!=null&&ve.set(ge.key,kt)}let Xt,Zt=0;const ie=qt-Yt+1;let Jt=!1,ze=0;const He=new Array(ie);for(kt=0;kt<ie;kt++)He[kt]=0;for(kt=Vt;kt<=Mt;kt++){const ge=Q[kt];if(Zt>=ie){E(ge,Pt,Tt,!0);continue}let Ue;if(ge.key!=null)Ue=ve.get(ge.key);else for(Xt=Yt;Xt<=qt;Xt++)if(He[Xt-Yt]===0&&Pa(ge,it[Xt])){Ue=Xt;break}Ue===void 0?E(ge,Pt,Tt,!0):(He[Ue-Yt]=kt+1,Ue>=ze?ze=Ue:Jt=!0,m(ge,it[Ue],ot,null,Pt,Tt,Nt,_t,It),Zt++)}const oe=Jt?VA(He):au;for(Xt=oe.length-1,kt=ie-1;kt>=0;kt--){const ge=Yt+kt,Ue=it[ge],we=ge+1<Ht?it[ge+1].el:X;He[kt]===0?m(null,Ue,ot,we,Pt,Tt,Nt,_t,It):Jt&&(Xt<0||kt!==oe[Xt]?lt(Ue,ot,we,2):Xt--)}}},lt=(Q,it,ot,X,Pt=null)=>{const{el:Tt,type:Nt,transition:_t,children:It,shapeFlag:kt}=Q;if(kt&6){lt(Q.component.subTree,it,ot,X);return}if(kt&128){Q.suspense.move(it,ot,X);return}if(kt&64){Nt.move(Q,it,ot,rt);return}if(Nt===Kt){s(Tt,it,ot);for(let Mt=0;Mt<It.length;Mt++)lt(It[Mt],it,ot,X);s(Q.anchor,it,ot);return}if(Nt===H1){_(Q,it,ot);return}if(X!==2&&kt&1&&_t)if(X===0)_t.beforeEnter(Tt),s(Tt,it,ot),$s(()=>_t.enter(Tt),Pt);else{const{leave:Mt,delayLeave:qt,afterLeave:Vt}=_t,Yt=()=>{Q.ctx.isUnmounted?i(Tt):s(Tt,it,ot)},ve=()=>{Mt(Tt,()=>{Yt(),Vt&&Vt()})};qt?qt(Tt,Yt,ve):ve()}else s(Tt,it,ot)},E=(Q,it,ot,X=!1,Pt=!1)=>{const{type:Tt,props:Nt,ref:_t,children:It,dynamicChildren:kt,shapeFlag:Ht,patchFlag:Mt,dirs:qt,cacheIndex:Vt}=Q;if(Mt===-2&&(Pt=!1),_t!=null&&(Zo(),Xd(_t,null,ot,Q,!0),Jo()),Vt!=null&&(it.renderCache[Vt]=void 0),Ht&256){it.ctx.deactivate(Q);return}const Yt=Ht&1&&qt,ve=!Ql(Q);let Xt;if(ve&&(Xt=Nt&&Nt.onVnodeBeforeUnmount)&&ir(Xt,it,Q),Ht&6)at(Q.component,ot,X);else{if(Ht&128){Q.suspense.unmount(ot,X);return}Yt&&Al(Q,null,it,"beforeUnmount"),Ht&64?Q.type.remove(Q,it,ot,rt,X):kt&&!kt.hasOnce&&(Tt!==Kt||Mt>0&&Mt&64)?pt(kt,it,ot,!1,!0):(Tt===Kt&&Mt&384||!Pt&&Ht&16)&&pt(It,it,ot),X&&M(Q)}(ve&&(Xt=Nt&&Nt.onVnodeUnmounted)||Yt)&&$s(()=>{Xt&&ir(Xt,it,Q),Yt&&Al(Q,null,it,"unmounted")},ot)},M=Q=>{const{type:it,el:ot,anchor:X,transition:Pt}=Q;if(it===Kt){B(ot,X);return}if(it===H1){C(Q);return}const Tt=()=>{i(ot),Pt&&!Pt.persisted&&Pt.afterLeave&&Pt.afterLeave()};if(Q.shapeFlag&1&&Pt&&!Pt.persisted){const{leave:Nt,delayLeave:_t}=Pt,It=()=>Nt(ot,Tt);_t?_t(Q.el,Tt,It):It()}else Tt()},B=(Q,it)=>{let ot;for(;Q!==it;)ot=f(Q),i(Q),Q=ot;i(it)},at=(Q,it,ot)=>{const{bum:X,scope:Pt,job:Tt,subTree:Nt,um:_t,m:It,a:kt,parent:Ht,slots:{__:Mt}}=Q;pp(It),pp(kt),X&&cu(X),Ht&&be(Mt)&&Mt.forEach(qt=>{Ht.renderCache[qt]=void 0}),Pt.stop(),Tt&&(Tt.flags|=8,E(Nt,Q,it,ot)),_t&&$s(_t,it),$s(()=>{Q.isUnmounted=!0},it),it&&it.pendingBranch&&!it.isUnmounted&&Q.asyncDep&&!Q.asyncResolved&&Q.suspenseId===it.pendingId&&(it.deps--,it.deps===0&&it.resolve())},pt=(Q,it,ot,X=!1,Pt=!1,Tt=0)=>{for(let Nt=Tt;Nt<Q.length;Nt++)E(Q[Nt],it,ot,X,Pt)},nt=Q=>{if(Q.shapeFlag&6)return nt(Q.component.subTree);if(Q.shapeFlag&128)return Q.suspense.next();const it=f(Q.anchor||Q.el),ot=it&&it[hA];return ot?f(ot):it};let ct=!1;const G=(Q,it,ot)=>{Q==null?it._vnode&&E(it._vnode,null,null,!0):m(it._vnode||null,Q,it,null,null,null,ot),it._vnode=Q,ct||(ct=!0,Tv(),h6(),ct=!1)},rt={p:m,um:E,m:lt,r:M,mt:$,mc:L,pc:O,pbc:V,n:nt,o:n};return{render:G,hydrate:void 0,createApp:MA(G)}}function y2({type:n,props:t},e){return e==="svg"&&n==="foreignObject"||e==="mathml"&&n==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function Sl({effect:n,job:t},e){e?(n.flags|=32,t.flags|=4):(n.flags&=-33,t.flags&=-5)}function HA(n,t){return(!n||n&&!n.pendingBranch)&&t&&!t.persisted}function U6(n,t,e=!1){const s=n.children,i=t.children;if(be(s)&&be(i))for(let r=0;r<s.length;r++){const o=s[r];let a=i[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[r]=Ta(i[r]),a.el=o.el),!e&&a.patchFlag!==-2&&U6(o,a)),a.type===Qp&&(a.el=o.el),a.type===Us&&!a.el&&(a.el=o.el)}}function VA(n){const t=n.slice(),e=[0];let s,i,r,o,a;const l=n.length;for(s=0;s<l;s++){const c=n[s];if(c!==0){if(i=e[e.length-1],n[i]<c){t[s]=i,e.push(s);continue}for(r=0,o=e.length-1;r<o;)a=r+o>>1,n[e[a]]<c?r=a+1:o=a;c<n[e[r]]&&(r>0&&(t[s]=e[r-1]),e[r]=s)}}for(r=e.length,o=e[r-1];r-- >0;)e[r]=o,o=t[o];return e}function z6(n){const t=n.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:z6(t)}function pp(n){if(n)for(let t=0;t<n.length;t++)n[t].flags|=8}const qA=Symbol.for("v-scx"),WA=()=>lr(qA);function lo(n,t,e){return H6(n,t,e)}function H6(n,t,e=yn){const{immediate:s,deep:i,flush:r,once:o}=e,a=Ls({},e),l=t&&s||!t&&r!=="post";let c;if(vh){if(r==="sync"){const h=WA();c=h.__watcherHandles||(h.__watcherHandles=[])}else if(!l){const h=()=>{};return h.stop=ao,h.resume=ao,h.pause=ao,h}}const u=Es;a.call=(h,g,m)=>Ir(h,u,g,m);let d=!1;r==="post"?a.scheduler=h=>{$s(h,u&&u.suspense)}:r!=="sync"&&(d=!0,a.scheduler=(h,g)=>{g?h():y5(h)}),a.augmentJob=h=>{t&&(h.flags|=4),d&&(h.flags|=2,u&&(h.id=u.uid,h.i=u))};const f=lA(n,t,a);return vh&&(c?c.push(f):l&&f()),f}function GA(n,t,e){const s=this.proxy,i=jn(n)?n.includes(".")?V6(s,n):()=>s[n]:n.bind(s,s);let r;De(t)?r=t:(r=t.handler,e=t);const o=Gh(this),a=H6(i,r.bind(s),e);return o(),a}function V6(n,t){const e=t.split(".");return()=>{let s=n;for(let i=0;i<e.length&&s;i++)s=s[e[i]];return s}}const YA=(n,t)=>t==="modelValue"||t==="model-value"?n.modelModifiers:n[`${t}Modifiers`]||n[`${ur(t)}Modifiers`]||n[`${Za(t)}Modifiers`];function KA(n,t,...e){if(n.isUnmounted)return;const s=n.vnode.props||yn;let i=e;const r=t.startsWith("update:"),o=r&&YA(s,t.slice(7));o&&(o.trim&&(i=e.map(u=>jn(u)?u.trim():u)),o.number&&(i=e.map(ap)));let a,l=s[a=d2(t)]||s[a=d2(ur(t))];!l&&r&&(l=s[a=d2(Za(t))]),l&&Ir(l,n,6,i);const c=s[a+"Once"];if(c){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,Ir(c,n,6,i)}}function q6(n,t,e=!1){const s=t.emitsCache,i=s.get(n);if(i!==void 0)return i;const r=n.emits;let o={},a=!1;if(!De(n)){const l=c=>{const u=q6(c,t,!0);u&&(a=!0,Ls(o,u))};!e&&t.mixins.length&&t.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!r&&!a?(_n(n)&&s.set(n,null),null):(be(r)?r.forEach(l=>o[l]=null):Ls(o,r),_n(n)&&s.set(n,o),o)}function Jp(n,t){return!n||!Up(t)?!1:(t=t.slice(2).replace(/Once$/,""),ln(n,t[0].toLowerCase()+t.slice(1))||ln(n,Za(t))||ln(n,t))}function Ov(n){const{type:t,vnode:e,proxy:s,withProxy:i,propsOptions:[r],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:d,data:f,setupState:h,ctx:g,inheritAttrs:m}=n,b=hp(n);let y,x;try{if(e.shapeFlag&4){const C=i||s,A=C;y=so(c.call(A,C,u,d,h,f,g)),x=a}else{const C=t;y=so(C.length>1?C(d,{attrs:a,slots:o,emit:l}):C(d,null)),x=t.props?a:XA(a)}}catch(C){Jd.length=0,Gp(C,n,1),y=Ce(Us)}let _=y;if(x&&m!==!1){const C=Object.keys(x),{shapeFlag:A}=_;C.length&&A&7&&(r&&C.some(a5)&&(x=ZA(x,r)),_=ta(_,x,!1,!0))}return e.dirs&&(_=ta(_,null,!1,!0),_.dirs=_.dirs?_.dirs.concat(e.dirs):e.dirs),e.transition&&xu(_,e.transition),y=_,hp(b),y}const XA=n=>{let t;for(const e in n)(e==="class"||e==="style"||Up(e))&&((t||(t={}))[e]=n[e]);return t},ZA=(n,t)=>{const e={};for(const s in n)(!a5(s)||!(s.slice(9)in t))&&(e[s]=n[s]);return e};function JA(n,t,e){const{props:s,children:i,component:r}=n,{props:o,children:a,patchFlag:l}=t,c=r.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&l>=0){if(l&1024)return!0;if(l&16)return s?Fv(s,o,c):!!o;if(l&8){const u=t.dynamicProps;for(let d=0;d<u.length;d++){const f=u[d];if(o[f]!==s[f]&&!Jp(c,f))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?Fv(s,o,c):!0:!!o;return!1}function Fv(n,t,e){const s=Object.keys(t);if(s.length!==Object.keys(n).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(t[r]!==n[r]&&!Jp(e,r))return!0}return!1}function QA({vnode:n,parent:t},e){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===n&&(s.el=n.el),s===n)(n=t.vnode).el=e,t=t.parent;else break}}const gp=n=>n.__isSuspense;function tS(n,t){t&&t.pendingBranch?be(n)?t.effects.push(...n):t.effects.push(n):dA(n)}const Kt=Symbol.for("v-fgt"),Qp=Symbol.for("v-txt"),Us=Symbol.for("v-cmt"),H1=Symbol.for("v-stc"),Jd=[];let Hi=null;function j(n=!1){Jd.push(Hi=n?null:[])}function eS(){Jd.pop(),Hi=Jd[Jd.length-1]||null}let bh=1;function $v(n,t=!1){bh+=n,n<0&&Hi&&t&&(Hi.hasOnce=!0)}function W6(n){return n.dynamicChildren=bh>0?Hi||au:null,eS(),bh>0&&Hi&&Hi.push(n),n}function z(n,t,e,s,i,r){return W6(p(n,t,e,s,i,r,!0))}function Va(n,t,e,s,i){return W6(Ce(n,t,e,s,i,!0))}function Cu(n){return n?n.__v_isVNode===!0:!1}function Pa(n,t){return n.type===t.type&&n.key===t.key}const G6=({key:n})=>n??null,V1=({ref:n,ref_key:t,ref_for:e})=>(typeof n=="number"&&(n=""+n),n!=null?jn(n)||rs(n)||De(n)?{i:_s,r:n,k:t,f:!!e}:n:null);function p(n,t=null,e=null,s=0,i=null,r=n===Kt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:t,key:t&&G6(t),ref:t&&V1(t),scopeId:p6,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:_s};return a?(x5(l,e),r&128&&n.normalize(l)):e&&(l.shapeFlag|=jn(e)?8:16),bh>0&&!o&&Hi&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&Hi.push(l),l}const Ce=nS;function nS(n,t=null,e=null,s=0,i=null,r=!1){if((!n||n===S6)&&(n=Us),Cu(n)){const a=ta(n,t,!0);return e&&x5(a,e),bh>0&&!r&&Hi&&(a.shapeFlag&6?Hi[Hi.indexOf(n)]=a:Hi.push(a)),a.patchFlag=-2,a}if(hS(n)&&(n=n.__vccOpts),t){t=sS(t);let{class:a,style:l}=t;a&&!jn(a)&&(t.class=fe(a)),_n(l)&&(b5(l)&&!be(l)&&(l=Ls({},l)),t.style=qp(l))}const o=jn(n)?1:gp(n)?128:g6(n)?64:_n(n)?4:De(n)?2:0;return p(n,t,e,s,i,o,r,!0)}function sS(n){return n?b5(n)||N6(n)?Ls({},n):n:null}function ta(n,t,e=!1,s=!1){const{props:i,ref:r,patchFlag:o,children:a,transition:l}=n,c=t?iS(i||{},t):i,u={__v_isVNode:!0,__v_skip:!0,type:n.type,props:c,key:c&&G6(c),ref:t&&t.ref?e&&r?be(r)?r.concat(V1(t)):[r,V1(t)]:V1(t):r,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:t&&n.type!==Kt?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:l,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&ta(n.ssContent),ssFallback:n.ssFallback&&ta(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return l&&s&&xu(u,l.clone(u)),u}function Dt(n=" ",t=0){return Ce(Qp,null,n,t)}function si(n,t){const e=Ce(H1,null,n);return e.staticCount=t,e}function Ct(n="",t=!1){return t?(j(),Va(Us,null,n)):Ce(Us,null,n)}function so(n){return n==null||typeof n=="boolean"?Ce(Us):be(n)?Ce(Kt,null,n.slice()):Cu(n)?Ta(n):Ce(Qp,null,String(n))}function Ta(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:ta(n)}function x5(n,t){let e=0;const{shapeFlag:s}=n;if(t==null)t=null;else if(be(t))e=16;else if(typeof t=="object")if(s&65){const i=t.default;i&&(i._c&&(i._d=!1),x5(n,i()),i._c&&(i._d=!0));return}else{e=32;const i=t._;!i&&!N6(t)?t._ctx=_s:i===3&&_s&&(_s.slots._===1?t._=1:(t._=2,n.patchFlag|=1024))}else De(t)?(t={default:t,_ctx:_s},e=32):(t=String(t),s&64?(e=16,t=[Dt(t)]):e=8);n.children=t,n.shapeFlag|=e}function iS(...n){const t={};for(let e=0;e<n.length;e++){const s=n[e];for(const i in s)if(i==="class")t.class!==s.class&&(t.class=fe([t.class,s.class]));else if(i==="style")t.style=qp([t.style,s.style]);else if(Up(i)){const r=t[i],o=s[i];o&&r!==o&&!(be(r)&&r.includes(o))&&(t[i]=r?[].concat(r,o):o)}else i!==""&&(t[i]=s[i])}return t}function ir(n,t,e,s=null){Ir(n,t,7,[e,s])}const rS=D6();let oS=0;function aS(n,t,e){const s=n.type,i=(t?t.appContext:n.appContext)||rS,r={uid:oS++,vnode:n,type:s,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new H9(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:F6(s,i),emitsOptions:q6(s,i),emit:null,emitted:null,propsDefaults:yn,inheritAttrs:s.inheritAttrs,ctx:yn,data:yn,props:yn,attrs:yn,slots:yn,refs:yn,setupState:yn,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=KA.bind(null,r),n.ce&&n.ce(r),r}let Es=null;const Y6=()=>Es||_s;let mp,G0;{const n=Vp(),t=(e,s)=>{let i;return(i=n[e])||(i=n[e]=[]),i.push(s),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};mp=t("__VUE_INSTANCE_SETTERS__",e=>Es=e),G0=t("__VUE_SSR_SETTERS__",e=>vh=e)}const Gh=n=>{const t=Es;return mp(n),n.scope.on(),()=>{n.scope.off(),mp(t)}},Bv=()=>{Es&&Es.scope.off(),mp(null)};function K6(n){return n.vnode.shapeFlag&4}let vh=!1;function lS(n,t=!1,e=!1){t&&G0(t);const{props:s,children:i}=n.vnode,r=K6(n);NA(n,s,r,t),BA(n,i,e||t);const o=r?cS(n,t):void 0;return t&&G0(!1),o}function cS(n,t){const e=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,SA);const{setup:s}=e;if(s){Zo();const i=n.setupContext=s.length>1?dS(n):null,r=Gh(n),o=qh(s,n,0,[n.props,i]),a=F9(o);if(Jo(),r(),(a||n.sp)&&!Ql(n)&&_6(n),a){if(o.then(Bv,Bv),t)return o.then(l=>{jv(n,l)}).catch(l=>{Gp(l,n,0)});n.asyncDep=o}else jv(n,o)}else X6(n)}function jv(n,t,e){De(t)?n.type.__ssrInlineRender?n.ssrRender=t:n.render=t:_n(t)&&(n.setupState=c6(t)),X6(n)}function X6(n,t,e){const s=n.type;n.render||(n.render=s.render||ao);{const i=Gh(n);Zo();try{EA(n)}finally{Jo(),i()}}}const uS={get(n,t){return ti(n,"get",""),n[t]}};function dS(n){const t=e=>{n.exposed=e||{}};return{attrs:new Proxy(n.attrs,uS),slots:n.slots,emit:n.emit,expose:t}}function tg(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(c6(v5(n.exposed)),{get(t,e){if(e in t)return t[e];if(e in Zd)return Zd[e](n)},has(t,e){return e in t||e in Zd}})):n.proxy}function Y0(n,t=!0){return De(n)?n.displayName||n.name:n.name||t&&n.__name}function hS(n){return De(n)&&"__vccOpts"in n}const cn=(n,t)=>oA(n,t,vh);function hi(n,t,e){const s=arguments.length;return s===2?_n(t)&&!be(t)?Cu(t)?Ce(n,null,[t]):Ce(n,t):Ce(n,null,t):(s>3?e=Array.prototype.slice.call(arguments,2):s===3&&Cu(e)&&(e=[e]),Ce(n,t,e))}const fS="3.5.17";/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let K0;const Uv=typeof window<"u"&&window.trustedTypes;if(Uv)try{K0=Uv.createPolicy("vue",{createHTML:n=>n})}catch{}const Z6=K0?n=>K0.createHTML(n):n=>n,pS="http://www.w3.org/2000/svg",gS="http://www.w3.org/1998/Math/MathML",Fo=typeof document<"u"?document:null,zv=Fo&&Fo.createElement("template"),mS={insert:(n,t,e)=>{t.insertBefore(n,e||null)},remove:n=>{const t=n.parentNode;t&&t.removeChild(n)},createElement:(n,t,e,s)=>{const i=t==="svg"?Fo.createElementNS(pS,n):t==="mathml"?Fo.createElementNS(gS,n):e?Fo.createElement(n,{is:e}):Fo.createElement(n);return n==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:n=>Fo.createTextNode(n),createComment:n=>Fo.createComment(n),setText:(n,t)=>{n.nodeValue=t},setElementText:(n,t)=>{n.textContent=t},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Fo.querySelector(n),setScopeId(n,t){n.setAttribute(t,"")},insertStaticContent(n,t,e,s,i,r){const o=e?e.previousSibling:t.lastChild;if(i&&(i===r||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),e),!(i===r||!(i=i.nextSibling)););else{zv.innerHTML=Z6(s==="svg"?`<svg>${n}</svg>`:s==="mathml"?`<math>${n}</math>`:n);const a=zv.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,e)}return[o?o.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},wa="transition",wd="animation",yh=Symbol("_vtc"),J6={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},bS=Ls({},m6,J6),vS=n=>(n.displayName="Transition",n.props=bS,n),dr=vS((n,{slots:t})=>hi(gA,yS(n),t)),El=(n,t=[])=>{be(n)?n.forEach(e=>e(...t)):n&&n(...t)},Hv=n=>n?be(n)?n.some(t=>t.length>1):n.length>1:!1;function yS(n){const t={};for(const D in n)D in J6||(t[D]=n[D]);if(n.css===!1)return t;const{name:e="v",type:s,duration:i,enterFromClass:r=`${e}-enter-from`,enterActiveClass:o=`${e}-enter-active`,enterToClass:a=`${e}-enter-to`,appearFromClass:l=r,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:d=`${e}-leave-from`,leaveActiveClass:f=`${e}-leave-active`,leaveToClass:h=`${e}-leave-to`}=n,g=wS(i),m=g&&g[0],b=g&&g[1],{onBeforeEnter:y,onEnter:x,onEnterCancelled:_,onLeave:C,onLeaveCancelled:A,onBeforeAppear:I=y,onAppear:R=x,onAppearCancelled:L=_}=t,P=(D,K,$,q)=>{D._enterCancelled=q,Tl(D,K?u:a),Tl(D,K?c:o),$&&$()},V=(D,K)=>{D._isLeaving=!1,Tl(D,d),Tl(D,h),Tl(D,f),K&&K()},T=D=>(K,$)=>{const q=D?R:x,W=()=>P(K,D,$);El(q,[K,W]),Vv(()=>{Tl(K,D?l:r),Lo(K,D?u:a),Hv(q)||qv(K,s,m,W)})};return Ls(t,{onBeforeEnter(D){El(y,[D]),Lo(D,r),Lo(D,o)},onBeforeAppear(D){El(I,[D]),Lo(D,l),Lo(D,c)},onEnter:T(!1),onAppear:T(!0),onLeave(D,K){D._isLeaving=!0;const $=()=>V(D,K);Lo(D,d),D._enterCancelled?(Lo(D,f),Yv()):(Yv(),Lo(D,f)),Vv(()=>{D._isLeaving&&(Tl(D,d),Lo(D,h),Hv(C)||qv(D,s,b,$))}),El(C,[D,$])},onEnterCancelled(D){P(D,!1,void 0,!0),El(_,[D])},onAppearCancelled(D){P(D,!0,void 0,!0),El(L,[D])},onLeaveCancelled(D){V(D),El(A,[D])}})}function wS(n){if(n==null)return null;if(_n(n))return[w2(n.enter),w2(n.leave)];{const t=w2(n);return[t,t]}}function w2(n){return Ak(n)}function Lo(n,t){t.split(/\s+/).forEach(e=>e&&n.classList.add(e)),(n[yh]||(n[yh]=new Set)).add(t)}function Tl(n,t){t.split(/\s+/).forEach(s=>s&&n.classList.remove(s));const e=n[yh];e&&(e.delete(t),e.size||(n[yh]=void 0))}function Vv(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let _S=0;function qv(n,t,e,s){const i=n._endId=++_S,r=()=>{i===n._endId&&s()};if(e!=null)return setTimeout(r,e);const{type:o,timeout:a,propCount:l}=xS(n,t);if(!o)return s();const c=o+"end";let u=0;const d=()=>{n.removeEventListener(c,f),r()},f=h=>{h.target===n&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},a+1),n.addEventListener(c,f)}function xS(n,t){const e=window.getComputedStyle(n),s=g=>(e[g]||"").split(", "),i=s(`${wa}Delay`),r=s(`${wa}Duration`),o=Wv(i,r),a=s(`${wd}Delay`),l=s(`${wd}Duration`),c=Wv(a,l);let u=null,d=0,f=0;t===wa?o>0&&(u=wa,d=o,f=r.length):t===wd?c>0&&(u=wd,d=c,f=l.length):(d=Math.max(o,c),u=d>0?o>c?wa:wd:null,f=u?u===wa?r.length:l.length:0);const h=u===wa&&/\b(transform|all)(,|$)/.test(s(`${wa}Property`).toString());return{type:u,timeout:d,propCount:f,hasTransform:h}}function Wv(n,t){for(;n.length<t.length;)n=n.concat(n);return Math.max(...t.map((e,s)=>Gv(e)+Gv(n[s])))}function Gv(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function Yv(){return document.body.offsetHeight}function CS(n,t,e){const s=n[yh];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?n.removeAttribute("class"):e?n.setAttribute("class",t):n.className=t}const Kv=Symbol("_vod"),kS=Symbol("_vsh"),AS=Symbol(""),SS=/(^|;)\s*display\s*:/;function ES(n,t,e){const s=n.style,i=jn(e);let r=!1;if(e&&!i){if(t)if(jn(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();e[a]==null&&q1(s,a,"")}else for(const o in t)e[o]==null&&q1(s,o,"");for(const o in e)o==="display"&&(r=!0),q1(s,o,e[o])}else if(i){if(t!==e){const o=s[AS];o&&(e+=";"+o),s.cssText=e,r=SS.test(e)}}else t&&n.removeAttribute("style");Kv in n&&(n[Kv]=r?s.display:"",n[kS]&&(s.display="none"))}const Xv=/\s*!important$/;function q1(n,t,e){if(be(e))e.forEach(s=>q1(n,t,s));else if(e==null&&(e=""),t.startsWith("--"))n.setProperty(t,e);else{const s=TS(n,t);Xv.test(e)?n.setProperty(Za(s),e.replace(Xv,""),"important"):n[s]=e}}const Zv=["Webkit","Moz","ms"],_2={};function TS(n,t){const e=_2[t];if(e)return e;let s=ur(t);if(s!=="filter"&&s in n)return _2[t]=s;s=Hp(s);for(let i=0;i<Zv.length;i++){const r=Zv[i]+s;if(r in n)return _2[t]=r}return t}const Jv="http://www.w3.org/1999/xlink";function Qv(n,t,e,s,i,r=Ik(t)){s&&t.startsWith("xlink:")?e==null?n.removeAttributeNS(Jv,t.slice(6,t.length)):n.setAttributeNS(Jv,t,e):e==null||r&&!j9(e)?n.removeAttribute(t):n.setAttribute(t,r?"":Pr(e)?String(e):e)}function ty(n,t,e,s,i){if(t==="innerHTML"||t==="textContent"){e!=null&&(n[t]=t==="innerHTML"?Z6(e):e);return}const r=n.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?n.getAttribute("value")||"":n.value,l=e==null?n.type==="checkbox"?"on":"":String(e);(a!==l||!("_value"in n))&&(n.value=l),e==null&&n.removeAttribute(t),n._value=e;return}let o=!1;if(e===""||e==null){const a=typeof n[t];a==="boolean"?e=j9(e):e==null&&a==="string"?(e="",o=!0):a==="number"&&(e=0,o=!0)}try{n[t]=e}catch{}o&&n.removeAttribute(i||t)}function qo(n,t,e,s){n.addEventListener(t,e,s)}function LS(n,t,e,s){n.removeEventListener(t,e,s)}const ey=Symbol("_vei");function PS(n,t,e,s,i=null){const r=n[ey]||(n[ey]={}),o=r[t];if(s&&o)o.value=s;else{const[a,l]=IS(t);if(s){const c=r[t]=RS(s,i);qo(n,a,c,l)}else o&&(LS(n,a,o,l),r[t]=void 0)}}const ny=/(?:Once|Passive|Capture)$/;function IS(n){let t;if(ny.test(n)){t={};let s;for(;s=n.match(ny);)n=n.slice(0,n.length-s[0].length),t[s[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Za(n.slice(2)),t]}let x2=0;const DS=Promise.resolve(),MS=()=>x2||(DS.then(()=>x2=0),x2=Date.now());function RS(n,t){const e=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=e.attached)return;Ir(NS(s,e.value),t,5,[s])};return e.value=n,e.attached=MS(),e}function NS(n,t){if(be(t)){const e=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{e.call(n),n._stopped=!0},t.map(s=>i=>!i._stopped&&s&&s(i))}else return t}const sy=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,OS=(n,t,e,s,i,r)=>{const o=i==="svg";t==="class"?CS(n,s,o):t==="style"?ES(n,e,s):Up(t)?a5(t)||PS(n,t,e,s,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):FS(n,t,s,o))?(ty(n,t,s),!n.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Qv(n,t,s,o,r,t!=="value")):n._isVueCE&&(/[A-Z]/.test(t)||!jn(s))?ty(n,ur(t),s,r,t):(t==="true-value"?n._trueValue=s:t==="false-value"&&(n._falseValue=s),Qv(n,t,s,o))};function FS(n,t,e,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in n&&sy(t)&&De(e));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&n.tagName==="INPUT"||t==="type"&&n.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=n.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return sy(t)&&jn(e)?!1:t in n}const qa=n=>{const t=n.props["onUpdate:modelValue"]||!1;return be(t)?e=>cu(t,e):t};function $S(n){n.target.composing=!0}function iy(n){const t=n.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const cr=Symbol("_assign"),Wt={created(n,{modifiers:{lazy:t,trim:e,number:s}},i){n[cr]=qa(i);const r=s||i.props&&i.props.type==="number";qo(n,t?"change":"input",o=>{if(o.target.composing)return;let a=n.value;e&&(a=a.trim()),r&&(a=ap(a)),n[cr](a)}),e&&qo(n,"change",()=>{n.value=n.value.trim()}),t||(qo(n,"compositionstart",$S),qo(n,"compositionend",iy),qo(n,"change",iy))},mounted(n,{value:t}){n.value=t??""},beforeUpdate(n,{value:t,oldValue:e,modifiers:{lazy:s,trim:i,number:r}},o){if(n[cr]=qa(o),n.composing)return;const a=(r||n.type==="number")&&!/^0\d/.test(n.value)?ap(n.value):n.value,l=t??"";a!==l&&(document.activeElement===n&&n.type!=="range"&&(s&&t===e||i&&n.value.trim()===l)||(n.value=l))}},wh={deep:!0,created(n,t,e){n[cr]=qa(e),qo(n,"change",()=>{const s=n._modelValue,i=ku(n),r=n.checked,o=n[cr];if(be(s)){const a=u5(s,i),l=a!==-1;if(r&&!l)o(s.concat(i));else if(!r&&l){const c=[...s];c.splice(a,1),o(c)}}else if(Ou(s)){const a=new Set(s);r?a.add(i):a.delete(i),o(a)}else o(Q6(n,r))})},mounted:ry,beforeUpdate(n,t,e){n[cr]=qa(e),ry(n,t,e)}};function ry(n,{value:t,oldValue:e},s){n._modelValue=t;let i;if(be(t))i=u5(t,s.props.value)>-1;else if(Ou(t))i=t.has(s.props.value);else{if(t===e)return;i=rc(t,Q6(n,!0))}n.checked!==i&&(n.checked=i)}const _h={created(n,{value:t},e){n.checked=rc(t,e.props.value),n[cr]=qa(e),qo(n,"change",()=>{n[cr](ku(n))})},beforeUpdate(n,{value:t,oldValue:e},s){n[cr]=qa(s),t!==e&&(n.checked=rc(t,s.props.value))}},eg={deep:!0,created(n,{value:t,modifiers:{number:e}},s){const i=Ou(t);qo(n,"change",()=>{const r=Array.prototype.filter.call(n.options,o=>o.selected).map(o=>e?ap(ku(o)):ku(o));n[cr](n.multiple?i?new Set(r):r:r[0]),n._assigning=!0,Si(()=>{n._assigning=!1})}),n[cr]=qa(s)},mounted(n,{value:t}){oy(n,t)},beforeUpdate(n,t,e){n[cr]=qa(e)},updated(n,{value:t}){n._assigning||oy(n,t)}};function oy(n,t){const e=n.multiple,s=be(t);if(!(e&&!s&&!Ou(t))){for(let i=0,r=n.options.length;i<r;i++){const o=n.options[i],a=ku(o);if(e)if(s){const l=typeof a;l==="string"||l==="number"?o.selected=t.some(c=>String(c)===String(a)):o.selected=u5(t,a)>-1}else o.selected=t.has(a);else if(rc(ku(o),t)){n.selectedIndex!==i&&(n.selectedIndex=i);return}}!e&&n.selectedIndex!==-1&&(n.selectedIndex=-1)}}function ku(n){return"_value"in n?n._value:n.value}function Q6(n,t){const e=t?"_trueValue":"_falseValue";return e in n?n[e]:t}const xh={created(n,t,e){Qf(n,t,e,null,"created")},mounted(n,t,e){Qf(n,t,e,null,"mounted")},beforeUpdate(n,t,e,s){Qf(n,t,e,s,"beforeUpdate")},updated(n,t,e,s){Qf(n,t,e,s,"updated")}};function BS(n,t){switch(n){case"SELECT":return eg;case"TEXTAREA":return Wt;default:switch(t){case"checkbox":return wh;case"radio":return _h;default:return Wt}}}function Qf(n,t,e,s,i){const o=BS(n.tagName,e.props&&e.props.type)[i];o&&o(n,t,e,s)}const jS=["ctrl","shift","alt","meta"],US={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,t)=>jS.some(e=>n[`${e}Key`]&&!t.includes(e))},me=(n,t)=>{const e=n._withMods||(n._withMods={}),s=t.join(".");return e[s]||(e[s]=(i,...r)=>{for(let o=0;o<t.length;o++){const a=US[t[o]];if(a&&a(i,t))return}return n(i,...r)})},zS={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},HS=(n,t)=>{const e=n._withKeys||(n._withKeys={}),s=t.join(".");return e[s]||(e[s]=i=>{if(!("key"in i))return;const r=Za(i.key);if(t.some(o=>o===r||zS[o]===r))return n(i)})},VS=Ls({patchProp:OS},mS);let ay;function qS(){return ay||(ay=UA(VS))}const WS=(...n)=>{const t=qS().createApp(...n),{mount:e}=t;return t.mount=s=>{const i=YS(s);if(!i)return;const r=t._component;!De(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=e(i,!1,GS(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function GS(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function YS(n){return jn(n)?document.querySelector(n):n}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let t8;const ng=n=>t8=n,e8=Symbol();function X0(n){return n&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"&&typeof n.toJSON!="function"}var Qd;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(Qd||(Qd={}));function KS(){const n=V9(!0),t=n.run(()=>ut({}));let e=[],s=[];const i=v5({install(r){ng(i),i._a=r,r.provide(e8,i),r.config.globalProperties.$pinia=i,s.forEach(o=>e.push(o)),s=[]},use(r){return this._a?e.push(r):s.push(r),this},_p:e,_a:null,_e:n,_s:new Map,state:t});return i}const n8=()=>{};function ly(n,t,e,s=n8){n.push(t);const i=()=>{const r=n.indexOf(t);r>-1&&(n.splice(r,1),s())};return!e&&q9()&&Mk(i),i}function Nc(n,...t){n.slice().forEach(e=>{e(...t)})}const XS=n=>n(),cy=Symbol(),C2=Symbol();function Z0(n,t){n instanceof Map&&t instanceof Map?t.forEach((e,s)=>n.set(s,e)):n instanceof Set&&t instanceof Set&&t.forEach(n.add,n);for(const e in t){if(!t.hasOwnProperty(e))continue;const s=t[e],i=n[e];X0(i)&&X0(s)&&n.hasOwnProperty(e)&&!rs(s)&&!Ba(s)?n[e]=Z0(i,s):n[e]=s}return n}const ZS=Symbol();function JS(n){return!X0(n)||!n.hasOwnProperty(ZS)}const{assign:Aa}=Object;function QS(n){return!!(rs(n)&&n.effect)}function tE(n,t,e,s){const{state:i,actions:r,getters:o}=t,a=e.state.value[n];let l;function c(){a||(e.state.value[n]=i?i():{});const u=nA(e.state.value[n]);return Aa(u,r,Object.keys(o||{}).reduce((d,f)=>(d[f]=v5(cn(()=>{ng(e);const h=e._s.get(n);return o[f].call(h,h)})),d),{}))}return l=s8(n,c,t,e,s,!0),l}function s8(n,t,e={},s,i,r){let o;const a=Aa({actions:{}},e),l={deep:!0};let c,u,d=[],f=[],h;const g=s.state.value[n];!r&&!g&&(s.state.value[n]={}),ut({});let m;function b(L){let P;c=u=!1,typeof L=="function"?(L(s.state.value[n]),P={type:Qd.patchFunction,storeId:n,events:h}):(Z0(s.state.value[n],L),P={type:Qd.patchObject,payload:L,storeId:n,events:h});const V=m=Symbol();Si().then(()=>{m===V&&(c=!0)}),u=!0,Nc(d,P,s.state.value[n])}const y=r?function(){const{state:P}=e,V=P?P():{};this.$patch(T=>{Aa(T,V)})}:n8;function x(){o.stop(),d=[],f=[],s._s.delete(n)}const _=(L,P="")=>{if(cy in L)return L[C2]=P,L;const V=function(){ng(s);const T=Array.from(arguments),D=[],K=[];function $(F){D.push(F)}function q(F){K.push(F)}Nc(f,{args:T,name:V[C2],store:A,after:$,onError:q});let W;try{W=L.apply(this&&this.$id===n?this:A,T)}catch(F){throw Nc(K,F),F}return W instanceof Promise?W.then(F=>(Nc(D,F),F)).catch(F=>(Nc(K,F),Promise.reject(F))):(Nc(D,W),W)};return V[cy]=!0,V[C2]=P,V},C={_p:s,$id:n,$onAction:ly.bind(null,f),$patch:b,$reset:y,$subscribe(L,P={}){const V=ly(d,L,P.detached,()=>T()),T=o.run(()=>lo(()=>s.state.value[n],D=>{(P.flush==="sync"?u:c)&&L({storeId:n,type:Qd.direct,events:h},D)},Aa({},l,P)));return V},$dispose:x},A=ws(C);s._s.set(n,A);const R=(s._a&&s._a.runWithContext||XS)(()=>s._e.run(()=>(o=V9()).run(()=>t({action:_}))));for(const L in R){const P=R[L];if(rs(P)&&!QS(P)||Ba(P))r||(g&&JS(P)&&(rs(P)?P.value=g[L]:Z0(P,g[L])),s.state.value[n][L]=P);else if(typeof P=="function"){const V=_(P,L);R[L]=V,a.actions[L]=P}}return Aa(A,R),Aa(Je(A),R),Object.defineProperty(A,"$state",{get:()=>s.state.value[n],set:L=>{b(P=>{Aa(P,L)})}}),s._p.forEach(L=>{Aa(A,o.run(()=>L({store:A,app:s._a,pinia:s,options:a})))}),g&&r&&e.hydrate&&e.hydrate(A.$state,g),c=!0,u=!0,A}/*! #__NO_SIDE_EFFECTS__ */function C5(n,t,e){let s,i;const r=typeof t=="function";typeof n=="string"?(s=n,i=r?e:t):(i=n,s=n.id);function o(a,l){const c=RA();return a=a||(c?lr(e8,null):null),a&&ng(a),a=t8,a._s.has(s)||(r?s8(s,t,i,a):tE(s,i,a)),a._s.get(s)}return o.$id=s,o}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Yc=typeof document<"u";function i8(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function eE(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&i8(n.default)}const an=Object.assign;function k2(n,t){const e={};for(const s in t){const i=t[s];e[s]=Dr(i)?i.map(n):n(i)}return e}const th=()=>{},Dr=Array.isArray,r8=/#/g,nE=/&/g,sE=/\//g,iE=/=/g,rE=/\?/g,o8=/\+/g,oE=/%5B/g,aE=/%5D/g,a8=/%5E/g,lE=/%60/g,l8=/%7B/g,cE=/%7C/g,c8=/%7D/g,uE=/%20/g;function k5(n){return encodeURI(""+n).replace(cE,"|").replace(oE,"[").replace(aE,"]")}function dE(n){return k5(n).replace(l8,"{").replace(c8,"}").replace(a8,"^")}function J0(n){return k5(n).replace(o8,"%2B").replace(uE,"+").replace(r8,"%23").replace(nE,"%26").replace(lE,"`").replace(l8,"{").replace(c8,"}").replace(a8,"^")}function hE(n){return J0(n).replace(iE,"%3D")}function fE(n){return k5(n).replace(r8,"%23").replace(rE,"%3F")}function pE(n){return n==null?"":fE(n).replace(sE,"%2F")}function Ch(n){try{return decodeURIComponent(""+n)}catch{}return""+n}const gE=/\/$/,mE=n=>n.replace(gE,"");function A2(n,t,e="/"){let s,i={},r="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(s=t.slice(0,l),r=t.slice(l+1,a>-1?a:t.length),i=n(r)),a>-1&&(s=s||t.slice(0,a),o=t.slice(a,t.length)),s=wE(s??t,e),{fullPath:s+(r&&"?")+r+o,path:s,query:i,hash:Ch(o)}}function bE(n,t){const e=t.query?n(t.query):"";return t.path+(e&&"?")+e+(t.hash||"")}function uy(n,t){return!t||!n.toLowerCase().startsWith(t.toLowerCase())?n:n.slice(t.length)||"/"}function vE(n,t,e){const s=t.matched.length-1,i=e.matched.length-1;return s>-1&&s===i&&Au(t.matched[s],e.matched[i])&&u8(t.params,e.params)&&n(t.query)===n(e.query)&&t.hash===e.hash}function Au(n,t){return(n.aliasOf||n)===(t.aliasOf||t)}function u8(n,t){if(Object.keys(n).length!==Object.keys(t).length)return!1;for(const e in n)if(!yE(n[e],t[e]))return!1;return!0}function yE(n,t){return Dr(n)?dy(n,t):Dr(t)?dy(t,n):n===t}function dy(n,t){return Dr(t)?n.length===t.length&&n.every((e,s)=>e===t[s]):n.length===1&&n[0]===t}function wE(n,t){if(n.startsWith("/"))return n;if(!n)return t;const e=t.split("/"),s=n.split("/"),i=s[s.length-1];(i===".."||i===".")&&s.push("");let r=e.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")r>1&&r--;else break;return e.slice(0,r).join("/")+"/"+s.slice(o).join("/")}const _a={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var kh;(function(n){n.pop="pop",n.push="push"})(kh||(kh={}));var eh;(function(n){n.back="back",n.forward="forward",n.unknown=""})(eh||(eh={}));function _E(n){if(!n)if(Yc){const t=document.querySelector("base");n=t&&t.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),mE(n)}const xE=/^[^#]+#/;function CE(n,t){return n.replace(xE,"#")+t}function kE(n,t){const e=document.documentElement.getBoundingClientRect(),s=n.getBoundingClientRect();return{behavior:t.behavior,left:s.left-e.left-(t.left||0),top:s.top-e.top-(t.top||0)}}const sg=()=>({left:window.scrollX,top:window.scrollY});function AE(n){let t;if("el"in n){const e=n.el,s=typeof e=="string"&&e.startsWith("#"),i=typeof e=="string"?s?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!i)return;t=kE(i,n)}else t=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function hy(n,t){return(history.state?history.state.position-t:-1)+n}const Q0=new Map;function SE(n,t){Q0.set(n,t)}function EE(n){const t=Q0.get(n);return Q0.delete(n),t}let TE=()=>location.protocol+"//"+location.host;function d8(n,t){const{pathname:e,search:s,hash:i}=t,r=n.indexOf("#");if(r>-1){let a=i.includes(n.slice(r))?n.slice(r).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),uy(l,"")}return uy(e,n)+s+i}function LE(n,t,e,s){let i=[],r=[],o=null;const a=({state:f})=>{const h=d8(n,location),g=e.value,m=t.value;let b=0;if(f){if(e.value=h,t.value=f,o&&o===g){o=null;return}b=m?f.position-m.position:0}else s(h);i.forEach(y=>{y(e.value,g,{delta:b,type:kh.pop,direction:b?b>0?eh.forward:eh.back:eh.unknown})})};function l(){o=e.value}function c(f){i.push(f);const h=()=>{const g=i.indexOf(f);g>-1&&i.splice(g,1)};return r.push(h),h}function u(){const{history:f}=window;f.state&&f.replaceState(an({},f.state,{scroll:sg()}),"")}function d(){for(const f of r)f();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:d}}function fy(n,t,e,s=!1,i=!1){return{back:n,current:t,forward:e,replaced:s,position:window.history.length,scroll:i?sg():null}}function PE(n){const{history:t,location:e}=window,s={value:d8(n,e)},i={value:t.state};i.value||r(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(l,c,u){const d=n.indexOf("#"),f=d>-1?(e.host&&document.querySelector("base")?n:n.slice(d))+l:TE()+n+l;try{t[u?"replaceState":"pushState"](c,"",f),i.value=c}catch(h){console.error(h),e[u?"replace":"assign"](f)}}function o(l,c){const u=an({},t.state,fy(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});r(l,u,!0),s.value=l}function a(l,c){const u=an({},i.value,t.state,{forward:l,scroll:sg()});r(u.current,u,!0);const d=an({},fy(s.value,l,null),{position:u.position+1},c);r(l,d,!1),s.value=l}return{location:s,state:i,push:a,replace:o}}function IE(n){n=_E(n);const t=PE(n),e=LE(n,t.state,t.location,t.replace);function s(r,o=!0){o||e.pauseListeners(),history.go(r)}const i=an({location:"",base:n,go:s,createHref:CE.bind(null,n)},t,e);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function DE(n){return typeof n=="string"||n&&typeof n=="object"}function h8(n){return typeof n=="string"||typeof n=="symbol"}const f8=Symbol("");var py;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(py||(py={}));function Su(n,t){return an(new Error,{type:n,[f8]:!0},t)}function Po(n,t){return n instanceof Error&&f8 in n&&(t==null||!!(n.type&t))}const gy="[^/]+?",ME={sensitive:!1,strict:!1,start:!0,end:!0},RE=/[.+*?^${}()[\]/\\]/g;function NE(n,t){const e=an({},ME,t),s=[];let i=e.start?"^":"";const r=[];for(const c of n){const u=c.length?[]:[90];e.strict&&!c.length&&(i+="/");for(let d=0;d<c.length;d++){const f=c[d];let h=40+(e.sensitive?.25:0);if(f.type===0)d||(i+="/"),i+=f.value.replace(RE,"\\$&"),h+=40;else if(f.type===1){const{value:g,repeatable:m,optional:b,regexp:y}=f;r.push({name:g,repeatable:m,optional:b});const x=y||gy;if(x!==gy){h+=10;try{new RegExp(`(${x})`)}catch(C){throw new Error(`Invalid custom RegExp for param "${g}" (${x}): `+C.message)}}let _=m?`((?:${x})(?:/(?:${x}))*)`:`(${x})`;d||(_=b&&c.length<2?`(?:/${_})`:"/"+_),b&&(_+="?"),i+=_,h+=20,b&&(h+=-8),m&&(h+=-20),x===".*"&&(h+=-50)}u.push(h)}s.push(u)}if(e.strict&&e.end){const c=s.length-1;s[c][s[c].length-1]+=.7000000000000001}e.strict||(i+="/?"),e.end?i+="$":e.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,e.sensitive?"":"i");function a(c){const u=c.match(o),d={};if(!u)return null;for(let f=1;f<u.length;f++){const h=u[f]||"",g=r[f-1];d[g.name]=h&&g.repeatable?h.split("/"):h}return d}function l(c){let u="",d=!1;for(const f of n){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const h of f)if(h.type===0)u+=h.value;else if(h.type===1){const{value:g,repeatable:m,optional:b}=h,y=g in c?c[g]:"";if(Dr(y)&&!m)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const x=Dr(y)?y.join("/"):y;if(!x)if(b)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${g}"`);u+=x}}return u||"/"}return{re:o,score:s,keys:r,parse:a,stringify:l}}function OE(n,t){let e=0;for(;e<n.length&&e<t.length;){const s=t[e]-n[e];if(s)return s;e++}return n.length<t.length?n.length===1&&n[0]===80?-1:1:n.length>t.length?t.length===1&&t[0]===80?1:-1:0}function p8(n,t){let e=0;const s=n.score,i=t.score;for(;e<s.length&&e<i.length;){const r=OE(s[e],i[e]);if(r)return r;e++}if(Math.abs(i.length-s.length)===1){if(my(s))return 1;if(my(i))return-1}return i.length-s.length}function my(n){const t=n[n.length-1];return n.length>0&&t[t.length-1]<0}const FE={type:0,value:""},$E=/[a-zA-Z0-9_]/;function BE(n){if(!n)return[[]];if(n==="/")return[[FE]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function t(h){throw new Error(`ERR (${e})/"${c}": ${h}`)}let e=0,s=e;const i=[];let r;function o(){r&&i.push(r),r=[]}let a=0,l,c="",u="";function d(){c&&(e===0?r.push({type:0,value:c}):e===1||e===2||e===3?(r.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<n.length;){if(l=n[a++],l==="\\"&&e!==2){s=e,e=4;continue}switch(e){case 0:l==="/"?(c&&d(),o()):l===":"?(d(),e=1):f();break;case 4:f(),e=s;break;case 1:l==="("?e=2:$E.test(l)?f():(d(),e=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:e=3:u+=l;break;case 3:d(),e=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:t("Unknown state");break}}return e===2&&t(`Unfinished custom RegExp for param "${c}"`),d(),o(),i}function jE(n,t,e){const s=NE(BE(n.path),e),i=an(s,{record:n,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function UE(n,t){const e=[],s=new Map;t=wy({strict:!1,end:!0,sensitive:!1},t);function i(d){return s.get(d)}function r(d,f,h){const g=!h,m=vy(d);m.aliasOf=h&&h.record;const b=wy(t,d),y=[m];if("alias"in d){const C=typeof d.alias=="string"?[d.alias]:d.alias;for(const A of C)y.push(vy(an({},m,{components:h?h.record.components:m.components,path:A,aliasOf:h?h.record:m})))}let x,_;for(const C of y){const{path:A}=C;if(f&&A[0]!=="/"){const I=f.record.path,R=I[I.length-1]==="/"?"":"/";C.path=f.record.path+(A&&R+A)}if(x=jE(C,f,b),h?h.alias.push(x):(_=_||x,_!==x&&_.alias.push(x),g&&d.name&&!yy(x)&&o(d.name)),g8(x)&&l(x),m.children){const I=m.children;for(let R=0;R<I.length;R++)r(I[R],x,h&&h.children[R])}h=h||x}return _?()=>{o(_)}:th}function o(d){if(h8(d)){const f=s.get(d);f&&(s.delete(d),e.splice(e.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=e.indexOf(d);f>-1&&(e.splice(f,1),d.record.name&&s.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return e}function l(d){const f=VE(d,e);e.splice(f,0,d),d.record.name&&!yy(d)&&s.set(d.record.name,d)}function c(d,f){let h,g={},m,b;if("name"in d&&d.name){if(h=s.get(d.name),!h)throw Su(1,{location:d});b=h.record.name,g=an(by(f.params,h.keys.filter(_=>!_.optional).concat(h.parent?h.parent.keys.filter(_=>_.optional):[]).map(_=>_.name)),d.params&&by(d.params,h.keys.map(_=>_.name))),m=h.stringify(g)}else if(d.path!=null)m=d.path,h=e.find(_=>_.re.test(m)),h&&(g=h.parse(m),b=h.record.name);else{if(h=f.name?s.get(f.name):e.find(_=>_.re.test(f.path)),!h)throw Su(1,{location:d,currentLocation:f});b=h.record.name,g=an({},f.params,d.params),m=h.stringify(g)}const y=[];let x=h;for(;x;)y.unshift(x.record),x=x.parent;return{name:b,path:m,params:g,matched:y,meta:HE(y)}}n.forEach(d=>r(d));function u(){e.length=0,s.clear()}return{addRoute:r,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:i}}function by(n,t){const e={};for(const s of t)s in n&&(e[s]=n[s]);return e}function vy(n){const t={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:zE(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function zE(n){const t={},e=n.props||!1;if("component"in n)t.default=e;else for(const s in n.components)t[s]=typeof e=="object"?e[s]:e;return t}function yy(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function HE(n){return n.reduce((t,e)=>an(t,e.meta),{})}function wy(n,t){const e={};for(const s in n)e[s]=s in t?t[s]:n[s];return e}function VE(n,t){let e=0,s=t.length;for(;e!==s;){const r=e+s>>1;p8(n,t[r])<0?s=r:e=r+1}const i=qE(n);return i&&(s=t.lastIndexOf(i,s-1)),s}function qE(n){let t=n;for(;t=t.parent;)if(g8(t)&&p8(n,t)===0)return t}function g8({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function WE(n){const t={};if(n===""||n==="?")return t;const s=(n[0]==="?"?n.slice(1):n).split("&");for(let i=0;i<s.length;++i){const r=s[i].replace(o8," "),o=r.indexOf("="),a=Ch(o<0?r:r.slice(0,o)),l=o<0?null:Ch(r.slice(o+1));if(a in t){let c=t[a];Dr(c)||(c=t[a]=[c]),c.push(l)}else t[a]=l}return t}function _y(n){let t="";for(let e in n){const s=n[e];if(e=hE(e),s==null){s!==void 0&&(t+=(t.length?"&":"")+e);continue}(Dr(s)?s.map(r=>r&&J0(r)):[s&&J0(s)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+e,r!=null&&(t+="="+r))})}return t}function GE(n){const t={};for(const e in n){const s=n[e];s!==void 0&&(t[e]=Dr(s)?s.map(i=>i==null?null:""+i):s==null?s:""+s)}return t}const YE=Symbol(""),xy=Symbol(""),ig=Symbol(""),A5=Symbol(""),tm=Symbol("");function _d(){let n=[];function t(s){return n.push(s),()=>{const i=n.indexOf(s);i>-1&&n.splice(i,1)}}function e(){n=[]}return{add:t,list:()=>n.slice(),reset:e}}function La(n,t,e,s,i,r=o=>o()){const o=s&&(s.enterCallbacks[i]=s.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=f=>{f===!1?l(Su(4,{from:e,to:t})):f instanceof Error?l(f):DE(f)?l(Su(2,{from:t,to:f})):(o&&s.enterCallbacks[i]===o&&typeof f=="function"&&o.push(f),a())},u=r(()=>n.call(s&&s.instances[i],t,e,c));let d=Promise.resolve(u);n.length<3&&(d=d.then(c)),d.catch(f=>l(f))})}function S2(n,t,e,s,i=r=>r()){const r=[];for(const o of n)for(const a in o.components){let l=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(i8(l)){const u=(l.__vccOpts||l)[t];u&&r.push(La(u,e,s,o,a,i))}else{let c=l();r.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=eE(u)?u.default:u;o.mods[a]=u,o.components[a]=d;const h=(d.__vccOpts||d)[t];return h&&La(h,e,s,o,a,i)()}))}}return r}function Cy(n){const t=lr(ig),e=lr(A5),s=cn(()=>{const l=Qe(n.to);return t.resolve(l)}),i=cn(()=>{const{matched:l}=s.value,{length:c}=l,u=l[c-1],d=e.matched;if(!u||!d.length)return-1;const f=d.findIndex(Au.bind(null,u));if(f>-1)return f;const h=ky(l[c-2]);return c>1&&ky(u)===h&&d[d.length-1].path!==h?d.findIndex(Au.bind(null,l[c-2])):f}),r=cn(()=>i.value>-1&&QE(e.params,s.value.params)),o=cn(()=>i.value>-1&&i.value===e.matched.length-1&&u8(e.params,s.value.params));function a(l={}){if(JE(l)){const c=t[Qe(n.replace)?"replace":"push"](Qe(n.to)).catch(th);return n.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:s,href:cn(()=>s.value.href),isActive:r,isExactActive:o,navigate:a}}function KE(n){return n.length===1?n[0]:n}const XE=Wh({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Cy,setup(n,{slots:t}){const e=ws(Cy(n)),{options:s}=lr(ig),i=cn(()=>({[Ay(n.activeClass,s.linkActiveClass,"router-link-active")]:e.isActive,[Ay(n.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const r=t.default&&KE(t.default(e));return n.custom?r:hi("a",{"aria-current":e.isExactActive?n.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:i.value},r)}}}),ZE=XE;function JE(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const t=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return n.preventDefault&&n.preventDefault(),!0}}function QE(n,t){for(const e in t){const s=t[e],i=n[e];if(typeof s=="string"){if(s!==i)return!1}else if(!Dr(i)||i.length!==s.length||s.some((r,o)=>r!==i[o]))return!1}return!0}function ky(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const Ay=(n,t,e)=>n??t??e,tT=Wh({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:t,slots:e}){const s=lr(tm),i=cn(()=>n.route||s.value),r=lr(xy,0),o=cn(()=>{let c=Qe(r);const{matched:u}=i.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),a=cn(()=>i.value.matched[o.value]);z1(xy,cn(()=>o.value+1)),z1(YE,a),z1(tm,i);const l=ut();return lo(()=>[l.value,a.value,n.name],([c,u,d],[f,h,g])=>{u&&(u.instances[d]=c,h&&h!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=h.leaveGuards),u.updateGuards.size||(u.updateGuards=h.updateGuards))),c&&u&&(!h||!Au(u,h)||!f)&&(u.enterCallbacks[d]||[]).forEach(m=>m(c))},{flush:"post"}),()=>{const c=i.value,u=n.name,d=a.value,f=d&&d.components[u];if(!f)return Sy(e.default,{Component:f,route:c});const h=d.props[u],g=h?h===!0?c.params:typeof h=="function"?h(c):h:null,b=hi(f,an({},g,t,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(d.instances[u]=null)},ref:l}));return Sy(e.default,{Component:b,route:c})||b}}});function Sy(n,t){if(!n)return null;const e=n(t);return e.length===1?e[0]:e}const eT=tT;function nT(n){const t=UE(n.routes,n),e=n.parseQuery||WE,s=n.stringifyQuery||_y,i=n.history,r=_d(),o=_d(),a=_d(),l=Qk(_a);let c=_a;Yc&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=k2.bind(null,nt=>""+nt),d=k2.bind(null,pE),f=k2.bind(null,Ch);function h(nt,ct){let G,rt;return h8(nt)?(G=t.getRecordMatcher(nt),rt=ct):rt=nt,t.addRoute(rt,G)}function g(nt){const ct=t.getRecordMatcher(nt);ct&&t.removeRoute(ct)}function m(){return t.getRoutes().map(nt=>nt.record)}function b(nt){return!!t.getRecordMatcher(nt)}function y(nt,ct){if(ct=an({},ct||l.value),typeof nt=="string"){const ot=A2(e,nt,ct.path),X=t.resolve({path:ot.path},ct),Pt=i.createHref(ot.fullPath);return an(ot,X,{params:f(X.params),hash:Ch(ot.hash),redirectedFrom:void 0,href:Pt})}let G;if(nt.path!=null)G=an({},nt,{path:A2(e,nt.path,ct.path).path});else{const ot=an({},nt.params);for(const X in ot)ot[X]==null&&delete ot[X];G=an({},nt,{params:d(ot)}),ct.params=d(ct.params)}const rt=t.resolve(G,ct),wt=nt.hash||"";rt.params=u(f(rt.params));const Q=bE(s,an({},nt,{hash:dE(wt),path:rt.path})),it=i.createHref(Q);return an({fullPath:Q,hash:wt,query:s===_y?GE(nt.query):nt.query||{}},rt,{redirectedFrom:void 0,href:it})}function x(nt){return typeof nt=="string"?A2(e,nt,l.value.path):an({},nt)}function _(nt,ct){if(c!==nt)return Su(8,{from:ct,to:nt})}function C(nt){return R(nt)}function A(nt){return C(an(x(nt),{replace:!0}))}function I(nt){const ct=nt.matched[nt.matched.length-1];if(ct&&ct.redirect){const{redirect:G}=ct;let rt=typeof G=="function"?G(nt):G;return typeof rt=="string"&&(rt=rt.includes("?")||rt.includes("#")?rt=x(rt):{path:rt},rt.params={}),an({query:nt.query,hash:nt.hash,params:rt.path!=null?{}:nt.params},rt)}}function R(nt,ct){const G=c=y(nt),rt=l.value,wt=nt.state,Q=nt.force,it=nt.replace===!0,ot=I(G);if(ot)return R(an(x(ot),{state:typeof ot=="object"?an({},wt,ot.state):wt,force:Q,replace:it}),ct||G);const X=G;X.redirectedFrom=ct;let Pt;return!Q&&vE(s,rt,G)&&(Pt=Su(16,{to:X,from:rt}),lt(rt,rt,!0,!1)),(Pt?Promise.resolve(Pt):V(X,rt)).catch(Tt=>Po(Tt)?Po(Tt,2)?Tt:gt(Tt):O(Tt,X,rt)).then(Tt=>{if(Tt){if(Po(Tt,2))return R(an({replace:it},x(Tt.to),{state:typeof Tt.to=="object"?an({},wt,Tt.to.state):wt,force:Q}),ct||X)}else Tt=D(X,rt,!0,it,wt);return T(X,rt,Tt),Tt})}function L(nt,ct){const G=_(nt,ct);return G?Promise.reject(G):Promise.resolve()}function P(nt){const ct=B.values().next().value;return ct&&typeof ct.runWithContext=="function"?ct.runWithContext(nt):nt()}function V(nt,ct){let G;const[rt,wt,Q]=sT(nt,ct);G=S2(rt.reverse(),"beforeRouteLeave",nt,ct);for(const ot of rt)ot.leaveGuards.forEach(X=>{G.push(La(X,nt,ct))});const it=L.bind(null,nt,ct);return G.push(it),pt(G).then(()=>{G=[];for(const ot of r.list())G.push(La(ot,nt,ct));return G.push(it),pt(G)}).then(()=>{G=S2(wt,"beforeRouteUpdate",nt,ct);for(const ot of wt)ot.updateGuards.forEach(X=>{G.push(La(X,nt,ct))});return G.push(it),pt(G)}).then(()=>{G=[];for(const ot of Q)if(ot.beforeEnter)if(Dr(ot.beforeEnter))for(const X of ot.beforeEnter)G.push(La(X,nt,ct));else G.push(La(ot.beforeEnter,nt,ct));return G.push(it),pt(G)}).then(()=>(nt.matched.forEach(ot=>ot.enterCallbacks={}),G=S2(Q,"beforeRouteEnter",nt,ct,P),G.push(it),pt(G))).then(()=>{G=[];for(const ot of o.list())G.push(La(ot,nt,ct));return G.push(it),pt(G)}).catch(ot=>Po(ot,8)?ot:Promise.reject(ot))}function T(nt,ct,G){a.list().forEach(rt=>P(()=>rt(nt,ct,G)))}function D(nt,ct,G,rt,wt){const Q=_(nt,ct);if(Q)return Q;const it=ct===_a,ot=Yc?history.state:{};G&&(rt||it?i.replace(nt.fullPath,an({scroll:it&&ot&&ot.scroll},wt)):i.push(nt.fullPath,wt)),l.value=nt,lt(nt,ct,G,it),gt()}let K;function $(){K||(K=i.listen((nt,ct,G)=>{if(!at.listening)return;const rt=y(nt),wt=I(rt);if(wt){R(an(wt,{replace:!0,force:!0}),rt).catch(th);return}c=rt;const Q=l.value;Yc&&SE(hy(Q.fullPath,G.delta),sg()),V(rt,Q).catch(it=>Po(it,12)?it:Po(it,2)?(R(an(x(it.to),{force:!0}),rt).then(ot=>{Po(ot,20)&&!G.delta&&G.type===kh.pop&&i.go(-1,!1)}).catch(th),Promise.reject()):(G.delta&&i.go(-G.delta,!1),O(it,rt,Q))).then(it=>{it=it||D(rt,Q,!1),it&&(G.delta&&!Po(it,8)?i.go(-G.delta,!1):G.type===kh.pop&&Po(it,20)&&i.go(-1,!1)),T(rt,Q,it)}).catch(th)}))}let q=_d(),W=_d(),F;function O(nt,ct,G){gt(nt);const rt=W.list();return rt.length?rt.forEach(wt=>wt(nt,ct,G)):console.error(nt),Promise.reject(nt)}function et(){return F&&l.value!==_a?Promise.resolve():new Promise((nt,ct)=>{q.add([nt,ct])})}function gt(nt){return F||(F=!nt,$(),q.list().forEach(([ct,G])=>nt?G(nt):ct()),q.reset()),nt}function lt(nt,ct,G,rt){const{scrollBehavior:wt}=n;if(!Yc||!wt)return Promise.resolve();const Q=!G&&EE(hy(nt.fullPath,0))||(rt||!G)&&history.state&&history.state.scroll||null;return Si().then(()=>wt(nt,ct,Q)).then(it=>it&&AE(it)).catch(it=>O(it,nt,ct))}const E=nt=>i.go(nt);let M;const B=new Set,at={currentRoute:l,listening:!0,addRoute:h,removeRoute:g,clearRoutes:t.clearRoutes,hasRoute:b,getRoutes:m,resolve:y,options:n,push:C,replace:A,go:E,back:()=>E(-1),forward:()=>E(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:W.add,isReady:et,install(nt){const ct=this;nt.component("RouterLink",ZE),nt.component("RouterView",eT),nt.config.globalProperties.$router=ct,Object.defineProperty(nt.config.globalProperties,"$route",{enumerable:!0,get:()=>Qe(l)}),Yc&&!M&&l.value===_a&&(M=!0,C(i.location).catch(wt=>{}));const G={};for(const wt in _a)Object.defineProperty(G,wt,{get:()=>l.value[wt],enumerable:!0});nt.provide(ig,ct),nt.provide(A5,o6(G)),nt.provide(tm,l);const rt=nt.unmount;B.add(nt),nt.unmount=function(){B.delete(nt),B.size<1&&(c=_a,K&&K(),K=null,l.value=_a,M=!1,F=!1),rt()}}};function pt(nt){return nt.reduce((ct,G)=>ct.then(()=>P(G)),Promise.resolve())}return at}function sT(n,t){const e=[],s=[],i=[],r=Math.max(t.matched.length,n.matched.length);for(let o=0;o<r;o++){const a=t.matched[o];a&&(n.matched.find(c=>Au(c,a))?s.push(a):e.push(a));const l=n.matched[o];l&&(t.matched.find(c=>Au(c,l))||i.push(l))}return[e,s,i]}function gi(){return lr(ig)}function Yh(n){return lr(A5)}const iT={__name:"App",setup(n){return Yh(),(t,e)=>{const s=Qo("router-view");return j(),Va(s)}}};let rT=class{#t;#e=new Set;constructor(t){this.#t=t}get current(){return this.#t}set current(t){this.#t!=t&&(this.#t=t,this.#e.forEach(e=>e(t)))}on(t){return this.#e.add(t),()=>this.#e.delete(t)}};const m8=n=>new rT(n),em=Symbol.for("atomico.hooks");globalThis[em]=globalThis[em]||{};let Eu=globalThis[em];const oT=Symbol.for("Atomico.suspense"),b8=Symbol.for("Atomico.effect"),aT=Symbol.for("Atomico.layoutEffect"),v8=Symbol.for("Atomico.insertionEffect"),$u=(n,t,e)=>{const{i:s,hooks:i}=Eu.c,r=i[s]=i[s]||{};return r.value=n(r.value),r.effect=t,r.tag=e,Eu.c.i++,i[s].value},lT=n=>$u((t=m8(n))=>t),Kh=()=>$u((n=m8(Eu.c.host))=>n),y8=()=>Eu.c.update,cT=(n,t,e=0)=>{let s={},i=!1;const r=()=>i,o=(a,l)=>{for(const c in s){const u=s[c];u.effect&&u.tag===a&&(u.value=u.effect(u.value,l))}};return{load:a=>{Eu.c={host:t,hooks:s,update:n,i:0,id:e};let l;try{i=!1,l=a()}catch(c){if(c!==oT)throw c;i=!0}finally{Eu.c=null}return l},cleanEffects:a=>(o(v8,a),()=>(o(aT,a),()=>{o(b8,a)})),isSuspense:r}},Bu=Symbol.for;function w8(n,t){const e=n.length;if(e!==t.length)return!1;for(let s=0;s<e;s++){let i=n[s],r=t[s];if(i!==r)return!1}return!0}const io=n=>typeof n=="function",nh=n=>typeof n=="object",{isArray:uT}=Array,nm=(n,t)=>(t?n instanceof HTMLStyleElement:!0)&&"hydrate"in(n?.dataset||{});function _8(n,t){let e;const s=i=>{let{length:r}=i;for(let o=0;o<r;o++){const a=i[o];if(a&&Array.isArray(a))s(a);else{const l=typeof a;if(a==null||l==="function"||l==="boolean")continue;l==="string"||l==="number"?(e==null&&(e=""),e+=a):(e!=null&&(t(e),e=null),t(a))}}};s(n),e!=null&&t(e)}const x8=(n,t,e)=>(n.addEventListener(t,e),()=>n.removeEventListener(t,e));let C8=class{constructor(t,e,s){this.message=e,this.target=t,this.value=s}},k8=class extends C8{},dT=class extends C8{};const bp="Custom",hT=null,fT={true:1,"":1,1:1};function pT(n,t,e,s,i){const{type:r,reflect:o,event:a,value:l,attr:c=gT(t)}=e?.name!=bp&&nh(e)&&e!=hT?e:{type:e},u=r?.name===bp&&r.map,d=l!=null?r==Function||!io(l)?()=>l:l:null;Object.defineProperty(n,t,{configurable:!0,set(f){const h=this[t];d&&r!=Boolean&&f==null&&(f=d());const{error:g,value:m}=(u?vT:yT)(r,f);if(g&&m!=null)throw new k8(this,`The value defined for prop '${t}' must be of type '${r.name}'`,m);h!=m&&(this._props[t]=m??void 0,this.update(),a&&A8(this,a),this.updated.then(()=>{o&&(this._ignoreAttr=c,mT(this,r,c,this[t]),this._ignoreAttr=null)}))},get(){return this._props[t]}}),d&&(i[t]=d()),s[c]={prop:t,type:r}}const A8=(n,{type:t,base:e=CustomEvent,...s})=>n.dispatchEvent(new e(t,s)),gT=n=>n.replace(/([A-Z])/g,"-$1").toLowerCase(),mT=(n,t,e,s)=>s==null||t==Boolean&&!s?n.removeAttribute(e):n.setAttribute(e,t?.name===bp&&t?.serialize?t?.serialize(s):nh(s)?JSON.stringify(s):t==Boolean?"":s),bT=(n,t)=>n==Boolean?!!fT[t]:n==Number?Number(t):n==String?t:n==Array||n==Object?JSON.parse(t):n.name==bp?t:new n(t),vT=({map:n},t)=>{try{return{value:n(t),error:!1}}catch{return{value:t,error:!0}}},yT=(n,t)=>n==null||t==null?{value:t,error:!1}:n!=String&&t===""?{value:void 0,error:!1}:n==Object||n==Array||n==Symbol?{value:t,error:{}.toString.call(t)!==`[object ${n.name}]`}:t instanceof n?{value:t,error:n==Number&&Number.isNaN(t.valueOf())}:n==String||n==Number||n==Boolean?{value:t,error:n==Number?typeof t!="number"?!0:Number.isNaN(t):n==String?typeof t!="string":typeof t!="boolean"}:{value:t,error:!0};let wT=0;const _T=n=>(n?.dataset||{})?.hydrate||""||"c"+wT++,Xh=(n,t=HTMLElement)=>{const e={},s={},i="prototype"in t&&t.prototype instanceof Element,r=i?t:"base"in t?t.base:HTMLElement,{props:o,styles:a}=i?n:t;class l extends r{constructor(){super(),this._setup(),this._render=()=>n({...this._props});for(const u in s)this[u]=s[u]}static get styles(){return[super.styles,a]}async _setup(){if(this._props)return;this._props={};let u,d;this.mounted=new Promise(b=>this.mount=()=>{b(),u!=this.parentNode&&(d!=u?this.unmounted.then(this.update):this.update()),u=this.parentNode}),this.unmounted=new Promise(b=>this.unmount=()=>{b(),(u!=this.parentNode||!this.isConnected)&&(f.cleanEffects(!0)()(),d=this.parentNode,u=null)}),this.symbolId=this.symbolId||Symbol(),this.symbolIdParent=Symbol();const f=cT(()=>this.update(),this,_T(this));let h,g=!0;const m=nm(this);this.update=()=>(h||(h=!0,this.updated=(this.updated||this.mounted).then(()=>{try{const b=f.load(this._render),y=f.cleanEffects();return b&&b.render(this,this.symbolId,m),h=!1,g&&!f.isSuspense()&&(g=!1,!m&&xT(this)),y()}finally{h=!1}}).then(b=>{b&&b()})),this.updated),this.update()}connectedCallback(){this.mount(),super.connectedCallback&&super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),this.unmount()}attributeChangedCallback(u,d,f){if(e[u]){if(u===this._ignoreAttr||d===f)return;const{prop:h,type:g}=e[u];try{this[h]=bT(g,f)}catch{throw new dT(this,`The value defined as attr '${u}' cannot be parsed by type '${g.name}'`,f)}}else super.attributeChangedCallback(u,d,f)}static get props(){return{...super.props,...o}}static get observedAttributes(){const u=super.observedAttributes||[];for(const d in o)pT(this.prototype,d,o[d],e,s);return Object.keys(e).concat(u)}}return l};function xT(n){const{styles:t}=n.constructor,{shadowRoot:e}=n;if(e&&t.length){const s=[];_8(t,i=>{i&&(i instanceof Element?e.appendChild(i.cloneNode(!0)):s.push(i))}),s.length&&(e.adoptedStyleSheets=s)}}const S8=n=>(t,e)=>{$u(([s,i]=[])=>((i||!i)&&(i&&w8(i,e)?s=s||!0:(io(s)&&s(),s=null)),[s,e]),([s,i],r)=>r?(io(s)&&s(),[]):[s||t(),i],n)},Ah=S8(b8),CT=S8(v8);let E8=class extends Array{constructor(t,e){let s=!0;const i=r=>{try{e(r,this,s)}finally{s=!1}};super(void 0,i,e),i(t)}};const S5=n=>{const t=y8();return $u((e=new E8(n,(s,i,r)=>{s=io(s)?s(i[0]):s,s!==i[0]&&(i[0]=s,r||t())}))=>e)},Ko=(n,t)=>{const[e]=$u(([s,i,r=0]=[])=>((!i||i&&!w8(i,t))&&(s=n()),[s,t,r]));return e},E5=n=>{const{current:t}=Kh();if(!(n in t))throw new k8(t,`For useProp("${n}"), the prop does not exist on the host.`,n);return $u((e=new E8(t[n],(s,i)=>{s=io(s)?s(t[n]):s,t[n]=s}))=>(e[0]=t[n],e))},ja=(n,t={})=>{const e=Kh();return e[n]||(e[n]=(s=t.detail)=>A8(e.current,{type:n,...t,detail:s})),e[n]},sm=Bu("atomico/options");globalThis[sm]=globalThis[sm]||{sheet:!!document.adoptedStyleSheets};const T8=globalThis[sm],kT={checked:1,value:1,selected:1},AT={list:1,type:1,size:1,form:1,width:1,height:1,src:1,href:1,slot:1},ST={shadowDom:1,staticNode:1,cloneNode:1,children:1,key:1},W1={},im=[];let rm=class extends Text{};const ET=Bu("atomico/id"),sh=Bu("atomico/type"),E2=Bu("atomico/ref"),L8=Bu("atomico/vnode"),TT=()=>{};function LT(n,t,e){return I8(this,n,t,e)}const P8=(n,t,...e)=>{const s=t||W1;let{children:i}=s;if(i=i??(e.length?e:im),n===TT)return i;const r=n?n instanceof Node?1:n.prototype instanceof HTMLElement&&2:0;if(r===!1&&n instanceof Function)return n(i!=im?{children:i,...s}:s);const o=T8.render||LT;return{[sh]:L8,type:n,props:s,children:i,key:s.key,shadow:s.shadowDom,static:s.staticNode,raw:r,is:s.is,clone:s.cloneNode,render:o}};function I8(n,t,e=ET,s,i){let r;if(t&&t[e]&&t[e].vnode==n||n[sh]!=L8)return t;(n||!t)&&(i=i||n.type=="svg",r=n.type!="host"&&(n.raw==1?(t&&n.clone?t[E2]:t)!=n.type:n.raw==2?!(t instanceof n.type):t?t[E2]||t.localName!=n.type:!t),r&&n.type!=null&&(n.raw==1&&n.clone?(s=!0,t=n.type.cloneNode(!0),t[E2]=n.type):t=n.raw==1?n.type:n.raw==2?new n.type:i?document.createElementNS("http://www.w3.org/2000/svg",n.type):document.createElement(n.type,n.is?{is:n.is}:void 0)));const o=t[e]?t[e]:W1,{vnode:a=W1,cycle:l=0}=o;let{fragment:c,handlers:u}=o;const{children:d=im,props:f=W1}=a;if(u=r?{}:u||{},n.static&&!r)return t;if(n.shadow&&!t.shadowRoot&&t.attachShadow({mode:"open",...n.shadow}),n.props!=f&&DT(t,f,n.props,u,i),n.children!==d){const h=n.shadow?t.shadowRoot:t;c=IT(n.children,c,h,e,!l&&s,i&&n.type=="foreignObject"?!1:i)}return t[e]={vnode:n,handlers:u,fragment:c,cycle:l+1},t}function PT(n,t){const e=new rm(""),s=new rm("");let i;if(n[t?"prepend":"append"](e),t){let{lastElementChild:r}=n;for(;r;){const{previousElementSibling:o}=r;if(nm(r,!0)&&!nm(o,!0)){i=r;break}r=o}}return i?i.before(s):n.append(s),{markStart:e,markEnd:s}}function IT(n,t,e,s,i,r){n=n==null?null:uT(n)?n:[n];const o=t||PT(e,i),{markStart:a,markEnd:l,keyes:c}=o;let u;const d=c&&new Set;let f=a;if(n&&_8(n,h=>{if(typeof h=="object"&&!h[sh])return;const g=h[sh]&&h.key,m=c&&g!=null&&c.get(g);f!=l&&f===m?d.delete(f):f=f==l?l:f.nextSibling;const b=c?m:f;let y=b;if(h[sh])y=I8(h,b,s,i,r);else{const x=h+"";!(y instanceof Text)||y instanceof rm?y=new Text(x):y.data!=x&&(y.data=x)}y!=f&&(c&&d.delete(y),!b||c?(e.insertBefore(y,f),c&&f!=l&&d.add(f)):b==l?e.insertBefore(y,l):(e.replaceChild(y,b),f=y)),g!=null&&(u=u||new Map,u.set(g,y))}),f=f==l?l:f.nextSibling,t&&f!=l)for(;f!=l;){const h=f;f=f.nextSibling,h.remove()}return d&&d.forEach(h=>h.remove()),o.keyes=u,o}function DT(n,t,e,s,i){for(const r in t)!(r in e)&&Ey(n,r,t[r],null,i,s);for(const r in e)Ey(n,r,t[r],e[r],i,s)}function Ey(n,t,e,s,i,r){if(t=t=="class"&&!i?"className":t,e=e??null,s=s??null,t in n&&kT[t]&&(e=n[t]),!(s===e||ST[t]||t[0]=="_"))if(t[0]=="o"&&t[1]=="n"&&(io(s)||io(e)))MT(n,t.slice(2),s,r);else if(t=="ref")s&&(io(s)?s(n):s.current=n);else if(t=="style"){const{style:o}=n;e=e||"",s=s||"";const a=nh(e),l=nh(s);if(a)for(const c in e)if(l)!(c in s)&&Ty(o,c,null);else break;if(l)for(const c in s){const u=s[c];a&&e[c]===u||Ty(o,c,u)}else o.cssText=s}else{const o=t[0]=="$"?t.slice(1):t;o===t&&(!i&&!AT[t]&&t in n||io(s)||io(e))?n[t]=s??"":s==null?n.removeAttribute(o):n.setAttribute(o,nh(s)?JSON.stringify(s):s)}}function MT(n,t,e,s){if(s.handleEvent||(s.handleEvent=i=>s[i.type].call(n,i)),e){if(!s[t]){const i=e.capture||e.once||e.passive?Object.assign({},e):null;n.addEventListener(t,s,i)}s[t]=e}else s[t]&&(n.removeEventListener(t,s),delete s[t])}function Ty(n,t,e){let s="setProperty";e==null&&(s="removeProperty",e=null),~t.indexOf("-")?n[s](t,e):n[t]=e}const Ly={};function rg(n,...t){const e=(n.raw||n).reduce((s,i,r)=>s+i+(t[r]||""),"");return Ly[e]=Ly[e]||RT(e)}function RT(n){if(T8.sheet){const t=new CSSStyleSheet;return t.replaceSync(n),t}else{const t=document.createElement("style");return t.textContent=n,t}}const NT=P8("host",{style:"display: contents"}),T2=Bu("atomico/context"),OT=(n,t)=>{const e=Kh();CT(()=>x8(e.current,"ConnectContext",s=>{n===s.detail.id&&(s.stopPropagation(),s.detail.connect(t))}),[n])},FT=n=>{const t=ja("ConnectContext",{bubbles:!0,composed:!0}),e=()=>{let r;return t({id:n,connect(o){r=o}}),r},[s,i]=S5(e);return Ah(()=>{s||(n[T2]||(n[T2]=customElements.whenDefined(new n().localName)),n[T2].then(()=>i(e)))},[n]),s},$T=n=>{const t=FT(n),e=y8();return Ah(()=>{if(t)return x8(t,"UpdatedValue",e)},[t]),(t||n).value},BT=n=>{const t=Xh(()=>(OT(t,Kh().current),NT),{props:{value:{type:Object,event:{type:"UpdatedValue"},value:()=>n}}});return t.value=n,t},Tn=(n,t,e)=>(t==null?t={key:e}:t.key=e,P8(n,t)),ih=Tn,D8=rg`*,*:before,*:after{box-sizing:border-box}button{padding:0;touch-action:manipulation;cursor:pointer;user-select:none}`,M8=rg`.vh{position:absolute;transform:scale(0)}`;function T5(){const n=new Date;return new hr(n.getFullYear(),n.getMonth()+1,n.getDate())}function L5(n,t=0){const e=Mr(n),s=e.getUTCDay(),i=(s<t?7:0)+s-t;return e.setUTCDate(e.getUTCDate()-i),hr.from(e)}function R8(n,t=0){return L5(n,t).add({days:6})}function N8(n){return hr.from(new Date(Date.UTC(n.year,n.month,0)))}function og(n,t,e){return t&&hr.compare(n,t)<0?t:e&&hr.compare(n,e)>0?e:n}const jT={days:1};function UT(n,t=0){let e=L5(n.toPlainDate(),t);const s=R8(N8(n),t),i=[];for(;hr.compare(e,s)<0;){const r=[];for(let o=0;o<7;o++)r.push(e),e=e.add(jT);i.push(r)}return i}function Mr(n){return new Date(Date.UTC(n.year,n.month-1,n.day??1))}const zT=/^(\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[0-1])$/,L2=(n,t)=>n.toString().padStart(t,"0");let hr=class Ol{constructor(t,e,s){this.year=t,this.month=e,this.day=s}add(t){const e=Mr(this);if("days"in t)return e.setUTCDate(this.day+t.days),Ol.from(e);let{year:s,month:i}=this;"months"in t?(i=this.month+t.months,e.setUTCMonth(i-1)):(s=this.year+t.years,e.setUTCFullYear(s));const r=Ol.from(Mr({year:s,month:i,day:1}));return og(Ol.from(e),r,N8(r))}toString(){return`${L2(this.year,4)}-${L2(this.month,2)}-${L2(this.day,2)}`}toPlainYearMonth(){return new O8(this.year,this.month)}equals(t){return Ol.compare(this,t)===0}static compare(t,e){return t.year<e.year?-1:t.year>e.year?1:t.month<e.month?-1:t.month>e.month?1:t.day<e.day?-1:t.day>e.day?1:0}static from(t){if(typeof t=="string"){const e=t.match(zT);if(!e)throw new TypeError(t);const[,s,i,r]=e;return new Ol(parseInt(s,10),parseInt(i,10),parseInt(r,10))}return new Ol(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate())}},O8=class F8{constructor(t,e){this.year=t,this.month=e}add(t){const e=Mr(this),s=(t.months??0)+(t.years??0)*12;return e.setUTCMonth(e.getUTCMonth()+s),new F8(e.getUTCFullYear(),e.getUTCMonth()+1)}equals(t){return this.year===t.year&&this.month===t.month}toPlainDate(){return new hr(this.year,this.month,1)}};function vp(n,t){if(t)try{return n.from(t)}catch{}}function Ua(n){const[t,e]=E5(n);return[Ko(()=>vp(hr,t),[t]),s=>e(s?.toString())]}function HT(n){const[t="",e]=E5(n);return[Ko(()=>{const[s,i]=t.split("/"),r=vp(hr,s),o=vp(hr,i);return r&&o?[r,o]:[]},[t]),s=>e(`${s[0]}/${s[1]}`)]}function VT(n){const[t="",e]=E5(n);return[Ko(()=>{const s=[];for(const i of t.trim().split(/\s+/)){const r=vp(hr,i);r&&s.push(r)}return s},[t]),s=>e(s.join(" "))]}function Sh(n,t){return Ko(()=>new Intl.DateTimeFormat(t,{timeZone:"UTC",...n}),[t,n])}function Py(n,t,e){const s=Sh(n,e);return Ko(()=>{const i=[],r=new Date;for(var o=0;o<7;o++){const a=(r.getUTCDay()-t+7)%7;i[a]=s.format(r),r.setUTCDate(r.getUTCDate()+1)}return i},[t,s])}const Iy=(n,t,e)=>og(n,t,e)===n,Dy=n=>n.target.matches(":dir(ltr)"),qT={month:"long",day:"numeric"},WT={month:"long"},GT={weekday:"long"},P2={bubbles:!0};function YT({props:n,context:t}){const{offset:e}=n,{firstDayOfWeek:s,isDateDisallowed:i,min:r,max:o,today:a,page:l,locale:c,focusedDate:u,formatWeekday:d}=t,f=a??T5(),h=Py(GT,s,c),g=Ko(()=>({weekday:d}),[d]),m=Py(g,s,c),b=Sh(qT,c),y=Sh(WT,c),x=Ko(()=>l.start.add({months:e}),[l,e]),_=Ko(()=>UT(x,s),[x,s]),C=ja("focusday",P2),A=ja("selectday",P2),I=ja("hoverday",P2);function R(V){C(og(V,r,o))}function L(V){let T;switch(V.key){case"ArrowRight":T=u.add({days:Dy(V)?1:-1});break;case"ArrowLeft":T=u.add({days:Dy(V)?-1:1});break;case"ArrowDown":T=u.add({days:7});break;case"ArrowUp":T=u.add({days:-7});break;case"PageUp":T=u.add(V.shiftKey?{years:-1}:{months:-1});break;case"PageDown":T=u.add(V.shiftKey?{years:1}:{months:1});break;case"Home":T=L5(u,s);break;case"End":T=R8(u,s);break;default:return}R(T),V.preventDefault()}function P(V){const T=x.equals(V);if(!t.showOutsideDays&&!T)return;const D=V.equals(u),K=V.equals(f),$=Mr(V),q=i?.($),W=!Iy(V,r,o);let F="",O;if(t.type==="range"){const[et,gt]=t.value,lt=et?.equals(V),E=gt?.equals(V);O=et&&gt&&Iy(V,et,gt),F=`${lt?"range-start":""} ${E?"range-end":""} ${O&&!lt&&!E?"range-inner":""}`}else t.type==="multi"?O=t.value.some(et=>et.equals(V)):O=t.value?.equals(V);return{part:`${`button day day-${$.getDay()} ${T?O?"selected":"":"outside"} ${q?"disallowed":""} ${K?"today":""} ${t.getDayParts?.($)??""}`} ${F}`,tabindex:T&&D?0:-1,disabled:W,"aria-disabled":q?"true":void 0,"aria-pressed":T&&O,"aria-current":K?"date":void 0,"aria-label":b.format($),onkeydown:L,onclick(){q||A(V),R(V)},onmouseover(){!q&&!W&&I(V)}}}return{weeks:_,yearMonth:x,daysLong:h,daysVisible:m,formatter:y,getDayProps:P}}const I2=T5(),P5=BT({type:"date",firstDayOfWeek:1,focusedDate:I2,page:{start:I2.toPlainYearMonth(),end:I2.toPlainYearMonth()}});customElements.define("calendar-ctx",P5);const KT=(n,t)=>(t+n)%7,$8=Xh(n=>{const t=$T(P5),e=lT(),s=YT({props:n,context:t});function i(){e.current.querySelector("button[tabindex='0']")?.focus()}return ih("host",{shadowDom:!0,focus:i,children:[Tn("div",{id:"h",part:"heading",children:s.formatter.format(Mr(s.yearMonth))}),ih("table",{ref:e,"aria-labelledby":"h",part:"table",children:[Tn("thead",{children:Tn("tr",{part:"tr head",children:s.daysLong.map((r,o)=>ih("th",{part:`th day day-${KT(t.firstDayOfWeek,o)}`,scope:"col",children:[Tn("span",{class:"vh",children:r}),Tn("span",{"aria-hidden":"true",children:s.daysVisible[o]})]}))})}),Tn("tbody",{children:s.weeks.map((r,o)=>Tn("tr",{part:"tr week",children:r.map((a,l)=>{const c=s.getDayProps(a);return Tn("td",{part:"td",children:c&&Tn("button",{...c,children:a.day})},l)})},o))})]})]})},{props:{offset:{type:Number,value:0}},styles:[D8,M8,rg`:host{--color-accent: black;--color-text-on-accent: white;display:flex;flex-direction:column;gap:.25rem;text-align:center;inline-size:fit-content}table{border-collapse:collapse;font-size:.875rem}th{font-weight:700;block-size:2.25rem}td{padding-inline:0}button{color:inherit;font-size:inherit;background:transparent;border:0;font-variant-numeric:tabular-nums;block-size:2.25rem;inline-size:2.25rem}button:hover:where(:not(:disabled,[aria-disabled])){background:#0000000d}button:is([aria-pressed=true],:focus-visible){background:var(--color-accent);color:var(--color-text-on-accent)}button:focus-visible{outline:1px solid var(--color-text-on-accent);outline-offset:-2px}button:disabled,:host::part(outside),:host::part(disallowed){cursor:default;opacity:.5}`]});customElements.define("calendar-month",$8);function My(n){return Tn("button",{part:`button ${n.name} ${n.onclick?"":"disabled"}`,onclick:n.onclick,"aria-disabled":n.onclick?null:"true",children:Tn("slot",{name:n.name,children:n.children})})}function I5(n){const t=Mr(n.page.start),e=Mr(n.page.end);return ih("div",{role:"group","aria-labelledby":"h",part:"container",children:[Tn("div",{id:"h",class:"vh","aria-live":"polite","aria-atomic":"true",children:n.formatVerbose.formatRange(t,e)}),ih("div",{part:"header",children:[Tn(My,{name:"previous",onclick:n.previous,children:"Previous"}),Tn("slot",{part:"heading",name:"heading",children:Tn("div",{"aria-hidden":"true",children:n.format.formatRange(t,e)})}),Tn(My,{name:"next",onclick:n.next,children:"Next"})]}),Tn(P5,{value:n,onselectday:n.onSelect,onfocusday:n.onFocus,onhoverday:n.onHover,children:Tn("slot",{})})]})}const D5={value:{type:String,value:""},min:{type:String,value:""},max:{type:String,value:""},today:{type:String,value:""},isDateDisallowed:{type:Function,value:n=>!1},formatWeekday:{type:String,value:()=>"narrow"},getDayParts:{type:Function,value:n=>""},firstDayOfWeek:{type:Number,value:()=>1},showOutsideDays:{type:Boolean,value:!1},locale:{type:String,value:()=>{}},months:{type:Number,value:1},focusedDate:{type:String,value:()=>{}},pageBy:{type:String,value:()=>"months"}},M5=[D8,M8,rg`:host{display:block;inline-size:fit-content}[role=group]{display:flex;flex-direction:column;gap:1em}:host::part(header){display:flex;align-items:center;justify-content:space-between}:host::part(heading){font-weight:700;font-size:1.25em}button{display:flex;align-items:center;justify-content:center}button[aria-disabled]{cursor:default;opacity:.5}`],XT={year:"numeric"},ZT={year:"numeric",month:"long"};function D2(n,t){return(t.year-n.year)*12+t.month-n.month}const Ry=(n,t)=>(n=t===12?new O8(n.year,1):n,{start:n,end:n.add({months:t-1})});function JT({pageBy:n,focusedDate:t,months:e,max:s,min:i,goto:r}){const o=n==="single"?1:e,[a,l]=S5(()=>Ry(t.toPlainYearMonth(),e)),c=d=>l(Ry(a.start.add({months:d}),e)),u=d=>{const f=D2(a.start,d.toPlainYearMonth());return f>=0&&f<e};return Ah(()=>{if(u(t))return;const d=D2(t.toPlainYearMonth(),a.start);r(t.add({months:d}))},[a.start]),Ah(()=>{if(u(t))return;const d=D2(a.start,t.toPlainYearMonth());c(d===-1?-o:d===e?o:Math.floor(d/e)*e)},[t,o,e]),{page:a,previous:!i||!u(i)?()=>c(-o):void 0,next:!s||!u(s)?()=>c(o):void 0}}function R5({months:n,pageBy:t,locale:e,focusedDate:s,setFocusedDate:i}){const[r]=Ua("min"),[o]=Ua("max"),[a]=Ua("today"),l=ja("focusday"),c=ja("change"),u=Ko(()=>og(s??a??T5(),r,o),[s,a,r,o]);function d(y){i(y),l(Mr(y))}const{next:f,previous:h,page:g}=JT({pageBy:t,focusedDate:u,months:n,min:r,max:o,goto:d}),m=Kh();function b(y){const x=y?.target??"day";x==="day"?m.current.querySelectorAll("calendar-month").forEach(_=>_.focus(y)):m.current.shadowRoot.querySelector(`[part~='${x}']`).focus(y)}return{format:Sh(XT,e),formatVerbose:Sh(ZT,e),page:g,focusedDate:u,dispatch:c,onFocus(y){y.stopPropagation(),d(y.detail),setTimeout(b)},min:r,max:o,today:a,next:f,previous:h,focus:b}}const B8=Xh(n=>{const[t,e]=Ua("value"),[s=t,i]=Ua("focusedDate"),r=R5({...n,focusedDate:s,setFocusedDate:i});function o(a){e(a.detail),r.dispatch()}return Tn("host",{shadowDom:!0,focus:r.focus,children:Tn(I5,{...n,...r,type:"date",value:t,onSelect:o})})},{props:D5,styles:M5});customElements.define("calendar-date",B8);const Ny=(n,t)=>hr.compare(n,t)<0?[n,t]:[t,n],j8=Xh(n=>{const[t,e]=HT("value"),[s=t[0],i]=Ua("focusedDate"),r=R5({...n,focusedDate:s,setFocusedDate:i}),o=ja("rangestart"),a=ja("rangeend"),[l,c]=Ua("tentative"),[u,d]=S5();Ah(()=>d(void 0),[l]);function f(b){r.onFocus(b),h(b)}function h(b){b.stopPropagation(),l&&d(b.detail)}function g(b){const y=b.detail;b.stopPropagation(),l?(e(Ny(l,y)),c(void 0),a(Mr(y)),r.dispatch()):(c(y),o(Mr(y)))}const m=l?Ny(l,u??l):t;return Tn("host",{shadowDom:!0,focus:r.focus,children:Tn(I5,{...n,...r,type:"range",value:m,onFocus:f,onHover:h,onSelect:g})})},{props:{...D5,tentative:{type:String,value:""}},styles:M5});customElements.define("calendar-range",j8);const U8=Xh(n=>{const[t,e]=VT("value"),[s=t[0],i]=Ua("focusedDate"),r=R5({...n,focusedDate:s,setFocusedDate:i});function o(a){const l=[...t],c=t.findIndex(u=>u.equals(a.detail));c<0?l.push(a.detail):l.splice(c,1),e(l),r.dispatch()}return Tn("host",{shadowDom:!0,focus:r.focus,children:Tn(I5,{...n,...r,type:"multi",value:t,onSelect:o})})},{props:D5,styles:M5});customElements.define("calendar-multi",U8);const QT=Object.freeze(Object.defineProperty({__proto__:null,CalendarDate:B8,CalendarMonth:$8,CalendarMulti:U8,CalendarRange:j8},Symbol.toStringTag,{value:"Module"}));function z8(n,t){return function(){return n.apply(t,arguments)}}const{toString:tL}=Object.prototype,{getPrototypeOf:N5}=Object,{iterator:ag,toStringTag:H8}=Symbol,lg=(n=>t=>{const e=tL.call(t);return n[e]||(n[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),Nr=n=>(n=n.toLowerCase(),t=>lg(t)===n),cg=n=>t=>typeof t===n,{isArray:ju}=Array,Tu=cg("undefined");function Zh(n){return n!==null&&!Tu(n)&&n.constructor!==null&&!Tu(n.constructor)&&ki(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const V8=Nr("ArrayBuffer");function eL(n){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(n):t=n&&n.buffer&&V8(n.buffer),t}const nL=cg("string"),ki=cg("function"),q8=cg("number"),Jh=n=>n!==null&&typeof n=="object",sL=n=>n===!0||n===!1,G1=n=>{if(lg(n)!=="object")return!1;const t=N5(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(H8 in n)&&!(ag in n)},iL=n=>{if(!Jh(n)||Zh(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},rL=Nr("Date"),oL=Nr("File"),aL=Nr("Blob"),lL=Nr("FileList"),cL=n=>Jh(n)&&ki(n.pipe),uL=n=>{let t;return n&&(typeof FormData=="function"&&n instanceof FormData||ki(n.append)&&((t=lg(n))==="formdata"||t==="object"&&ki(n.toString)&&n.toString()==="[object FormData]"))},dL=Nr("URLSearchParams"),[hL,fL,pL,gL]=["ReadableStream","Request","Response","Headers"].map(Nr),mL=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Qh(n,t,{allOwnKeys:e=!1}={}){if(n===null||typeof n>"u")return;let s,i;if(typeof n!="object"&&(n=[n]),ju(n))for(s=0,i=n.length;s<i;s++)t.call(null,n[s],s,n);else{if(Zh(n))return;const r=e?Object.getOwnPropertyNames(n):Object.keys(n),o=r.length;let a;for(s=0;s<o;s++)a=r[s],t.call(null,n[a],a,n)}}function W8(n,t){if(Zh(n))return null;t=t.toLowerCase();const e=Object.keys(n);let s=e.length,i;for(;s-- >0;)if(i=e[s],t===i.toLowerCase())return i;return null}const ql=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,G8=n=>!Tu(n)&&n!==ql;function om(){const{caseless:n,skipUndefined:t}=G8(this)&&this||{},e={},s=(i,r)=>{const o=n&&W8(e,r)||r;G1(e[o])&&G1(i)?e[o]=om(e[o],i):G1(i)?e[o]=om({},i):ju(i)?e[o]=i.slice():(!t||!Tu(i))&&(e[o]=i)};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&Qh(arguments[i],s);return e}const bL=(n,t,e,{allOwnKeys:s}={})=>(Qh(t,(i,r)=>{e&&ki(i)?n[r]=z8(i,e):n[r]=i},{allOwnKeys:s}),n),vL=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),yL=(n,t,e,s)=>{n.prototype=Object.create(t.prototype,s),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:t.prototype}),e&&Object.assign(n.prototype,e)},wL=(n,t,e,s)=>{let i,r,o;const a={};if(t=t||{},n==null)return t;do{for(i=Object.getOwnPropertyNames(n),r=i.length;r-- >0;)o=i[r],(!s||s(o,n,t))&&!a[o]&&(t[o]=n[o],a[o]=!0);n=e!==!1&&N5(n)}while(n&&(!e||e(n,t))&&n!==Object.prototype);return t},_L=(n,t,e)=>{n=String(n),(e===void 0||e>n.length)&&(e=n.length),e-=t.length;const s=n.indexOf(t,e);return s!==-1&&s===e},xL=n=>{if(!n)return null;if(ju(n))return n;let t=n.length;if(!q8(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=n[t];return e},CL=(n=>t=>n&&t instanceof n)(typeof Uint8Array<"u"&&N5(Uint8Array)),kL=(n,t)=>{const s=(n&&n[ag]).call(n);let i;for(;(i=s.next())&&!i.done;){const r=i.value;t.call(n,r[0],r[1])}},AL=(n,t)=>{let e;const s=[];for(;(e=n.exec(t))!==null;)s.push(e);return s},SL=Nr("HTMLFormElement"),EL=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,s,i){return s.toUpperCase()+i}),Oy=(({hasOwnProperty:n})=>(t,e)=>n.call(t,e))(Object.prototype),TL=Nr("RegExp"),Y8=(n,t)=>{const e=Object.getOwnPropertyDescriptors(n),s={};Qh(e,(i,r)=>{let o;(o=t(i,r,n))!==!1&&(s[r]=o||i)}),Object.defineProperties(n,s)},LL=n=>{Y8(n,(t,e)=>{if(ki(n)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const s=n[e];if(ki(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},PL=(n,t)=>{const e={},s=i=>{i.forEach(r=>{e[r]=!0})};return ju(n)?s(n):s(String(n).split(t)),e},IL=()=>{},DL=(n,t)=>n!=null&&Number.isFinite(n=+n)?n:t;function ML(n){return!!(n&&ki(n.append)&&n[H8]==="FormData"&&n[ag])}const RL=n=>{const t=new Array(10),e=(s,i)=>{if(Jh(s)){if(t.indexOf(s)>=0)return;if(Zh(s))return s;if(!("toJSON"in s)){t[i]=s;const r=ju(s)?[]:{};return Qh(s,(o,a)=>{const l=e(o,i+1);!Tu(l)&&(r[a]=l)}),t[i]=void 0,r}}return s};return e(n,0)},NL=Nr("AsyncFunction"),OL=n=>n&&(Jh(n)||ki(n))&&ki(n.then)&&ki(n.catch),K8=((n,t)=>n?setImmediate:t?((e,s)=>(ql.addEventListener("message",({source:i,data:r})=>{i===ql&&r===e&&s.length&&s.shift()()},!1),i=>{s.push(i),ql.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",ki(ql.postMessage)),FL=typeof queueMicrotask<"u"?queueMicrotask.bind(ql):typeof process<"u"&&process.nextTick||K8,$L=n=>n!=null&&ki(n[ag]),Lt={isArray:ju,isArrayBuffer:V8,isBuffer:Zh,isFormData:uL,isArrayBufferView:eL,isString:nL,isNumber:q8,isBoolean:sL,isObject:Jh,isPlainObject:G1,isEmptyObject:iL,isReadableStream:hL,isRequest:fL,isResponse:pL,isHeaders:gL,isUndefined:Tu,isDate:rL,isFile:oL,isBlob:aL,isRegExp:TL,isFunction:ki,isStream:cL,isURLSearchParams:dL,isTypedArray:CL,isFileList:lL,forEach:Qh,merge:om,extend:bL,trim:mL,stripBOM:vL,inherits:yL,toFlatObject:wL,kindOf:lg,kindOfTest:Nr,endsWith:_L,toArray:xL,forEachEntry:kL,matchAll:AL,isHTMLForm:SL,hasOwnProperty:Oy,hasOwnProp:Oy,reduceDescriptors:Y8,freezeMethods:LL,toObjectSet:PL,toCamelCase:EL,noop:IL,toFiniteNumber:DL,findKey:W8,global:ql,isContextDefined:G8,isSpecCompliantForm:ML,toJSONObject:RL,isAsyncFn:NL,isThenable:OL,setImmediate:K8,asap:FL,isIterable:$L};function Oe(n,t,e,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),s&&(this.request=s),i&&(this.response=i,this.status=i.status?i.status:null)}Lt.inherits(Oe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Lt.toJSONObject(this.config),code:this.code,status:this.status}}});const X8=Oe.prototype,Z8={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{Z8[n]={value:n}});Object.defineProperties(Oe,Z8);Object.defineProperty(X8,"isAxiosError",{value:!0});Oe.from=(n,t,e,s,i,r)=>{const o=Object.create(X8);Lt.toFlatObject(n,o,function(u){return u!==Error.prototype},c=>c!=="isAxiosError");const a=n&&n.message?n.message:"Error",l=t==null&&n?n.code:t;return Oe.call(o,a,l,e,s,i),n&&o.cause==null&&Object.defineProperty(o,"cause",{value:n,configurable:!0}),o.name=n&&n.name||"Error",r&&Object.assign(o,r),o};const BL=null;function am(n){return Lt.isPlainObject(n)||Lt.isArray(n)}function J8(n){return Lt.endsWith(n,"[]")?n.slice(0,-2):n}function Fy(n,t,e){return n?n.concat(t).map(function(i,r){return i=J8(i),!e&&r?"["+i+"]":i}).join(e?".":""):t}function jL(n){return Lt.isArray(n)&&!n.some(am)}const UL=Lt.toFlatObject(Lt,{},null,function(t){return/^is[A-Z]/.test(t)});function ug(n,t,e){if(!Lt.isObject(n))throw new TypeError("target must be an object");t=t||new FormData,e=Lt.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,b){return!Lt.isUndefined(b[m])});const s=e.metaTokens,i=e.visitor||u,r=e.dots,o=e.indexes,l=(e.Blob||typeof Blob<"u"&&Blob)&&Lt.isSpecCompliantForm(t);if(!Lt.isFunction(i))throw new TypeError("visitor must be a function");function c(g){if(g===null)return"";if(Lt.isDate(g))return g.toISOString();if(Lt.isBoolean(g))return g.toString();if(!l&&Lt.isBlob(g))throw new Oe("Blob is not supported. Use a Buffer instead.");return Lt.isArrayBuffer(g)||Lt.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,m,b){let y=g;if(g&&!b&&typeof g=="object"){if(Lt.endsWith(m,"{}"))m=s?m:m.slice(0,-2),g=JSON.stringify(g);else if(Lt.isArray(g)&&jL(g)||(Lt.isFileList(g)||Lt.endsWith(m,"[]"))&&(y=Lt.toArray(g)))return m=J8(m),y.forEach(function(_,C){!(Lt.isUndefined(_)||_===null)&&t.append(o===!0?Fy([m],C,r):o===null?m:m+"[]",c(_))}),!1}return am(g)?!0:(t.append(Fy(b,m,r),c(g)),!1)}const d=[],f=Object.assign(UL,{defaultVisitor:u,convertValue:c,isVisitable:am});function h(g,m){if(!Lt.isUndefined(g)){if(d.indexOf(g)!==-1)throw Error("Circular reference detected in "+m.join("."));d.push(g),Lt.forEach(g,function(y,x){(!(Lt.isUndefined(y)||y===null)&&i.call(t,y,Lt.isString(x)?x.trim():x,m,f))===!0&&h(y,m?m.concat(x):[x])}),d.pop()}}if(!Lt.isObject(n))throw new TypeError("data must be an object");return h(n),t}function $y(n){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function O5(n,t){this._pairs=[],n&&ug(n,this,t)}const Q8=O5.prototype;Q8.append=function(t,e){this._pairs.push([t,e])};Q8.toString=function(t){const e=t?function(s){return t.call(this,s,$y)}:$y;return this._pairs.map(function(i){return e(i[0])+"="+e(i[1])},"").join("&")};function zL(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function t_(n,t,e){if(!t)return n;const s=e&&e.encode||zL;Lt.isFunction(e)&&(e={serialize:e});const i=e&&e.serialize;let r;if(i?r=i(t,e):r=Lt.isURLSearchParams(t)?t.toString():new O5(t,e).toString(s),r){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+r}return n}class By{constructor(){this.handlers=[]}use(t,e,s){return this.handlers.push({fulfilled:t,rejected:e,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Lt.forEach(this.handlers,function(s){s!==null&&t(s)})}}const e_={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},HL=typeof URLSearchParams<"u"?URLSearchParams:O5,VL=typeof FormData<"u"?FormData:null,qL=typeof Blob<"u"?Blob:null,WL={isBrowser:!0,classes:{URLSearchParams:HL,FormData:VL,Blob:qL},protocols:["http","https","file","blob","url","data"]},F5=typeof window<"u"&&typeof document<"u",lm=typeof navigator=="object"&&navigator||void 0,GL=F5&&(!lm||["ReactNative","NativeScript","NS"].indexOf(lm.product)<0),YL=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",KL=F5&&window.location.href||"http://localhost",XL=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:F5,hasStandardBrowserEnv:GL,hasStandardBrowserWebWorkerEnv:YL,navigator:lm,origin:KL},Symbol.toStringTag,{value:"Module"})),ei={...XL,...WL};function ZL(n,t){return ug(n,new ei.classes.URLSearchParams,{visitor:function(e,s,i,r){return ei.isNode&&Lt.isBuffer(e)?(this.append(s,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...t})}function JL(n){return Lt.matchAll(/\w+|\[(\w*)]/g,n).map(t=>t[0]==="[]"?"":t[1]||t[0])}function QL(n){const t={},e=Object.keys(n);let s;const i=e.length;let r;for(s=0;s<i;s++)r=e[s],t[r]=n[r];return t}function n_(n){function t(e,s,i,r){let o=e[r++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=r>=e.length;return o=!o&&Lt.isArray(i)?i.length:o,l?(Lt.hasOwnProp(i,o)?i[o]=[i[o],s]:i[o]=s,!a):((!i[o]||!Lt.isObject(i[o]))&&(i[o]=[]),t(e,s,i[o],r)&&Lt.isArray(i[o])&&(i[o]=QL(i[o])),!a)}if(Lt.isFormData(n)&&Lt.isFunction(n.entries)){const e={};return Lt.forEachEntry(n,(s,i)=>{t(JL(s),i,e,0)}),e}return null}function tP(n,t,e){if(Lt.isString(n))try{return(t||JSON.parse)(n),Lt.trim(n)}catch(s){if(s.name!=="SyntaxError")throw s}return(e||JSON.stringify)(n)}const tf={transitional:e_,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const s=e.getContentType()||"",i=s.indexOf("application/json")>-1,r=Lt.isObject(t);if(r&&Lt.isHTMLForm(t)&&(t=new FormData(t)),Lt.isFormData(t))return i?JSON.stringify(n_(t)):t;if(Lt.isArrayBuffer(t)||Lt.isBuffer(t)||Lt.isStream(t)||Lt.isFile(t)||Lt.isBlob(t)||Lt.isReadableStream(t))return t;if(Lt.isArrayBufferView(t))return t.buffer;if(Lt.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(r){if(s.indexOf("application/x-www-form-urlencoded")>-1)return ZL(t,this.formSerializer).toString();if((a=Lt.isFileList(t))||s.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return ug(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return r||i?(e.setContentType("application/json",!1),tP(t)):t}],transformResponse:[function(t){const e=this.transitional||tf.transitional,s=e&&e.forcedJSONParsing,i=this.responseType==="json";if(Lt.isResponse(t)||Lt.isReadableStream(t))return t;if(t&&Lt.isString(t)&&(s&&!this.responseType||i)){const o=!(e&&e.silentJSONParsing)&&i;try{return JSON.parse(t,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?Oe.from(a,Oe.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ei.classes.FormData,Blob:ei.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Lt.forEach(["delete","get","head","post","put","patch"],n=>{tf.headers[n]={}});const eP=Lt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),nP=n=>{const t={};let e,s,i;return n&&n.split(`
`).forEach(function(o){i=o.indexOf(":"),e=o.substring(0,i).trim().toLowerCase(),s=o.substring(i+1).trim(),!(!e||t[e]&&eP[e])&&(e==="set-cookie"?t[e]?t[e].push(s):t[e]=[s]:t[e]=t[e]?t[e]+", "+s:s)}),t},jy=Symbol("internals");function xd(n){return n&&String(n).trim().toLowerCase()}function Y1(n){return n===!1||n==null?n:Lt.isArray(n)?n.map(Y1):String(n)}function sP(n){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=e.exec(n);)t[s[1]]=s[2];return t}const iP=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function M2(n,t,e,s,i){if(Lt.isFunction(s))return s.call(this,t,e);if(i&&(t=e),!!Lt.isString(t)){if(Lt.isString(s))return t.indexOf(s)!==-1;if(Lt.isRegExp(s))return s.test(t)}}function rP(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,s)=>e.toUpperCase()+s)}function oP(n,t){const e=Lt.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(n,s+e,{value:function(i,r,o){return this[s].call(this,t,i,r,o)},configurable:!0})})}let Ai=class{constructor(t){t&&this.set(t)}set(t,e,s){const i=this;function r(a,l,c){const u=xd(l);if(!u)throw new Error("header name must be a non-empty string");const d=Lt.findKey(i,u);(!d||i[d]===void 0||c===!0||c===void 0&&i[d]!==!1)&&(i[d||l]=Y1(a))}const o=(a,l)=>Lt.forEach(a,(c,u)=>r(c,u,l));if(Lt.isPlainObject(t)||t instanceof this.constructor)o(t,e);else if(Lt.isString(t)&&(t=t.trim())&&!iP(t))o(nP(t),e);else if(Lt.isObject(t)&&Lt.isIterable(t)){let a={},l,c;for(const u of t){if(!Lt.isArray(u))throw TypeError("Object iterator must return a key-value pair");a[c=u[0]]=(l=a[c])?Lt.isArray(l)?[...l,u[1]]:[l,u[1]]:u[1]}o(a,e)}else t!=null&&r(e,t,s);return this}get(t,e){if(t=xd(t),t){const s=Lt.findKey(this,t);if(s){const i=this[s];if(!e)return i;if(e===!0)return sP(i);if(Lt.isFunction(e))return e.call(this,i,s);if(Lt.isRegExp(e))return e.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=xd(t),t){const s=Lt.findKey(this,t);return!!(s&&this[s]!==void 0&&(!e||M2(this,this[s],s,e)))}return!1}delete(t,e){const s=this;let i=!1;function r(o){if(o=xd(o),o){const a=Lt.findKey(s,o);a&&(!e||M2(s,s[a],a,e))&&(delete s[a],i=!0)}}return Lt.isArray(t)?t.forEach(r):r(t),i}clear(t){const e=Object.keys(this);let s=e.length,i=!1;for(;s--;){const r=e[s];(!t||M2(this,this[r],r,t,!0))&&(delete this[r],i=!0)}return i}normalize(t){const e=this,s={};return Lt.forEach(this,(i,r)=>{const o=Lt.findKey(s,r);if(o){e[o]=Y1(i),delete e[r];return}const a=t?rP(r):String(r).trim();a!==r&&delete e[r],e[a]=Y1(i),s[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return Lt.forEach(this,(s,i)=>{s!=null&&s!==!1&&(e[i]=t&&Lt.isArray(s)?s.join(", "):s)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const s=new this(t);return e.forEach(i=>s.set(i)),s}static accessor(t){const s=(this[jy]=this[jy]={accessors:{}}).accessors,i=this.prototype;function r(o){const a=xd(o);s[a]||(oP(i,o),s[a]=!0)}return Lt.isArray(t)?t.forEach(r):r(t),this}};Ai.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Lt.reduceDescriptors(Ai.prototype,({value:n},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(s){this[e]=s}}});Lt.freezeMethods(Ai);function R2(n,t){const e=this||tf,s=t||e,i=Ai.from(s.headers);let r=s.data;return Lt.forEach(n,function(a){r=a.call(e,r,i.normalize(),t?t.status:void 0)}),i.normalize(),r}function s_(n){return!!(n&&n.__CANCEL__)}function Uu(n,t,e){Oe.call(this,n??"canceled",Oe.ERR_CANCELED,t,e),this.name="CanceledError"}Lt.inherits(Uu,Oe,{__CANCEL__:!0});function i_(n,t,e){const s=e.config.validateStatus;!e.status||!s||s(e.status)?n(e):t(new Oe("Request failed with status code "+e.status,[Oe.ERR_BAD_REQUEST,Oe.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function aP(n){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return t&&t[1]||""}function lP(n,t){n=n||10;const e=new Array(n),s=new Array(n);let i=0,r=0,o;return t=t!==void 0?t:1e3,function(l){const c=Date.now(),u=s[r];o||(o=c),e[i]=l,s[i]=c;let d=r,f=0;for(;d!==i;)f+=e[d++],d=d%n;if(i=(i+1)%n,i===r&&(r=(r+1)%n),c-o<t)return;const h=u&&c-u;return h?Math.round(f*1e3/h):void 0}}function cP(n,t){let e=0,s=1e3/t,i,r;const o=(c,u=Date.now())=>{e=u,i=null,r&&(clearTimeout(r),r=null),n(...c)};return[(...c)=>{const u=Date.now(),d=u-e;d>=s?o(c,u):(i=c,r||(r=setTimeout(()=>{r=null,o(i)},s-d)))},()=>i&&o(i)]}const yp=(n,t,e=3)=>{let s=0;const i=lP(50,250);return cP(r=>{const o=r.loaded,a=r.lengthComputable?r.total:void 0,l=o-s,c=i(l),u=o<=a;s=o;const d={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:r,lengthComputable:a!=null,[t?"download":"upload"]:!0};n(d)},e)},Uy=(n,t)=>{const e=n!=null;return[s=>t[0]({lengthComputable:e,total:n,loaded:s}),t[1]]},zy=n=>(...t)=>Lt.asap(()=>n(...t)),uP=ei.hasStandardBrowserEnv?((n,t)=>e=>(e=new URL(e,ei.origin),n.protocol===e.protocol&&n.host===e.host&&(t||n.port===e.port)))(new URL(ei.origin),ei.navigator&&/(msie|trident)/i.test(ei.navigator.userAgent)):()=>!0,dP=ei.hasStandardBrowserEnv?{write(n,t,e,s,i,r,o){if(typeof document>"u")return;const a=[`${n}=${encodeURIComponent(t)}`];Lt.isNumber(e)&&a.push(`expires=${new Date(e).toUTCString()}`),Lt.isString(s)&&a.push(`path=${s}`),Lt.isString(i)&&a.push(`domain=${i}`),r===!0&&a.push("secure"),Lt.isString(o)&&a.push(`SameSite=${o}`),document.cookie=a.join("; ")},read(n){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+n+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(n){this.write(n,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function hP(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function fP(n,t){return t?n.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):n}function r_(n,t,e){let s=!hP(t);return n&&(s||e==!1)?fP(n,t):t}const Hy=n=>n instanceof Ai?{...n}:n;function ac(n,t){t=t||{};const e={};function s(c,u,d,f){return Lt.isPlainObject(c)&&Lt.isPlainObject(u)?Lt.merge.call({caseless:f},c,u):Lt.isPlainObject(u)?Lt.merge({},u):Lt.isArray(u)?u.slice():u}function i(c,u,d,f){if(Lt.isUndefined(u)){if(!Lt.isUndefined(c))return s(void 0,c,d,f)}else return s(c,u,d,f)}function r(c,u){if(!Lt.isUndefined(u))return s(void 0,u)}function o(c,u){if(Lt.isUndefined(u)){if(!Lt.isUndefined(c))return s(void 0,c)}else return s(void 0,u)}function a(c,u,d){if(d in t)return s(c,u);if(d in n)return s(void 0,c)}const l={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u,d)=>i(Hy(c),Hy(u),d,!0)};return Lt.forEach(Object.keys({...n,...t}),function(u){const d=l[u]||i,f=d(n[u],t[u],u);Lt.isUndefined(f)&&d!==a||(e[u]=f)}),e}const o_=n=>{const t=ac({},n);let{data:e,withXSRFToken:s,xsrfHeaderName:i,xsrfCookieName:r,headers:o,auth:a}=t;if(t.headers=o=Ai.from(o),t.url=t_(r_(t.baseURL,t.url,t.allowAbsoluteUrls),n.params,n.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),Lt.isFormData(e)){if(ei.hasStandardBrowserEnv||ei.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(Lt.isFunction(e.getHeaders)){const l=e.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([u,d])=>{c.includes(u.toLowerCase())&&o.set(u,d)})}}if(ei.hasStandardBrowserEnv&&(s&&Lt.isFunction(s)&&(s=s(t)),s||s!==!1&&uP(t.url))){const l=i&&r&&dP.read(r);l&&o.set(i,l)}return t},pP=typeof XMLHttpRequest<"u",gP=pP&&function(n){return new Promise(function(e,s){const i=o_(n);let r=i.data;const o=Ai.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,u,d,f,h,g;function m(){h&&h(),g&&g(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let b=new XMLHttpRequest;b.open(i.method.toUpperCase(),i.url,!0),b.timeout=i.timeout;function y(){if(!b)return;const _=Ai.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),A={data:!a||a==="text"||a==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:_,config:n,request:b};i_(function(R){e(R),m()},function(R){s(R),m()},A),b=null}"onloadend"in b?b.onloadend=y:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(y)},b.onabort=function(){b&&(s(new Oe("Request aborted",Oe.ECONNABORTED,n,b)),b=null)},b.onerror=function(C){const A=C&&C.message?C.message:"Network Error",I=new Oe(A,Oe.ERR_NETWORK,n,b);I.event=C||null,s(I),b=null},b.ontimeout=function(){let C=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const A=i.transitional||e_;i.timeoutErrorMessage&&(C=i.timeoutErrorMessage),s(new Oe(C,A.clarifyTimeoutError?Oe.ETIMEDOUT:Oe.ECONNABORTED,n,b)),b=null},r===void 0&&o.setContentType(null),"setRequestHeader"in b&&Lt.forEach(o.toJSON(),function(C,A){b.setRequestHeader(A,C)}),Lt.isUndefined(i.withCredentials)||(b.withCredentials=!!i.withCredentials),a&&a!=="json"&&(b.responseType=i.responseType),c&&([f,g]=yp(c,!0),b.addEventListener("progress",f)),l&&b.upload&&([d,h]=yp(l),b.upload.addEventListener("progress",d),b.upload.addEventListener("loadend",h)),(i.cancelToken||i.signal)&&(u=_=>{b&&(s(!_||_.type?new Uu(null,n,b):_),b.abort(),b=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const x=aP(i.url);if(x&&ei.protocols.indexOf(x)===-1){s(new Oe("Unsupported protocol "+x+":",Oe.ERR_BAD_REQUEST,n));return}b.send(r||null)})},mP=(n,t)=>{const{length:e}=n=n?n.filter(Boolean):[];if(t||e){let s=new AbortController,i;const r=function(c){if(!i){i=!0,a();const u=c instanceof Error?c:this.reason;s.abort(u instanceof Oe?u:new Uu(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,r(new Oe(`timeout ${t} of ms exceeded`,Oe.ETIMEDOUT))},t);const a=()=>{n&&(o&&clearTimeout(o),o=null,n.forEach(c=>{c.unsubscribe?c.unsubscribe(r):c.removeEventListener("abort",r)}),n=null)};n.forEach(c=>c.addEventListener("abort",r));const{signal:l}=s;return l.unsubscribe=()=>Lt.asap(a),l}},bP=function*(n,t){let e=n.byteLength;if(e<t){yield n;return}let s=0,i;for(;s<e;)i=s+t,yield n.slice(s,i),s=i},vP=async function*(n,t){for await(const e of yP(n))yield*bP(e,t)},yP=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const t=n.getReader();try{for(;;){const{done:e,value:s}=await t.read();if(e)break;yield s}}finally{await t.cancel()}},Vy=(n,t,e,s)=>{const i=vP(n,t);let r=0,o,a=l=>{o||(o=!0,s&&s(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await i.next();if(c){a(),l.close();return}let d=u.byteLength;if(e){let f=r+=d;e(f)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},qy=64*1024,{isFunction:t1}=Lt,wP=(({Request:n,Response:t})=>({Request:n,Response:t}))(Lt.global),{ReadableStream:Wy,TextEncoder:Gy}=Lt.global,Yy=(n,...t)=>{try{return!!n(...t)}catch{return!1}},_P=n=>{n=Lt.merge.call({skipUndefined:!0},wP,n);const{fetch:t,Request:e,Response:s}=n,i=t?t1(t):typeof fetch=="function",r=t1(e),o=t1(s);if(!i)return!1;const a=i&&t1(Wy),l=i&&(typeof Gy=="function"?(g=>m=>g.encode(m))(new Gy):async g=>new Uint8Array(await new e(g).arrayBuffer())),c=r&&a&&Yy(()=>{let g=!1;const m=new e(ei.origin,{body:new Wy,method:"POST",get duplex(){return g=!0,"half"}}).headers.has("Content-Type");return g&&!m}),u=o&&a&&Yy(()=>Lt.isReadableStream(new s("").body)),d={stream:u&&(g=>g.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(g=>{!d[g]&&(d[g]=(m,b)=>{let y=m&&m[g];if(y)return y.call(m);throw new Oe(`Response type '${g}' is not supported`,Oe.ERR_NOT_SUPPORT,b)})});const f=async g=>{if(g==null)return 0;if(Lt.isBlob(g))return g.size;if(Lt.isSpecCompliantForm(g))return(await new e(ei.origin,{method:"POST",body:g}).arrayBuffer()).byteLength;if(Lt.isArrayBufferView(g)||Lt.isArrayBuffer(g))return g.byteLength;if(Lt.isURLSearchParams(g)&&(g=g+""),Lt.isString(g))return(await l(g)).byteLength},h=async(g,m)=>{const b=Lt.toFiniteNumber(g.getContentLength());return b??f(m)};return async g=>{let{url:m,method:b,data:y,signal:x,cancelToken:_,timeout:C,onDownloadProgress:A,onUploadProgress:I,responseType:R,headers:L,withCredentials:P="same-origin",fetchOptions:V}=o_(g),T=t||fetch;R=R?(R+"").toLowerCase():"text";let D=mP([x,_&&_.toAbortSignal()],C),K=null;const $=D&&D.unsubscribe&&(()=>{D.unsubscribe()});let q;try{if(I&&c&&b!=="get"&&b!=="head"&&(q=await h(L,y))!==0){let lt=new e(m,{method:"POST",body:y,duplex:"half"}),E;if(Lt.isFormData(y)&&(E=lt.headers.get("content-type"))&&L.setContentType(E),lt.body){const[M,B]=Uy(q,yp(zy(I)));y=Vy(lt.body,qy,M,B)}}Lt.isString(P)||(P=P?"include":"omit");const W=r&&"credentials"in e.prototype,F={...V,signal:D,method:b.toUpperCase(),headers:L.normalize().toJSON(),body:y,duplex:"half",credentials:W?P:void 0};K=r&&new e(m,F);let O=await(r?T(K,V):T(m,F));const et=u&&(R==="stream"||R==="response");if(u&&(A||et&&$)){const lt={};["status","statusText","headers"].forEach(at=>{lt[at]=O[at]});const E=Lt.toFiniteNumber(O.headers.get("content-length")),[M,B]=A&&Uy(E,yp(zy(A),!0))||[];O=new s(Vy(O.body,qy,M,()=>{B&&B(),$&&$()}),lt)}R=R||"text";let gt=await d[Lt.findKey(d,R)||"text"](O,g);return!et&&$&&$(),await new Promise((lt,E)=>{i_(lt,E,{data:gt,headers:Ai.from(O.headers),status:O.status,statusText:O.statusText,config:g,request:K})})}catch(W){throw $&&$(),W&&W.name==="TypeError"&&/Load failed|fetch/i.test(W.message)?Object.assign(new Oe("Network Error",Oe.ERR_NETWORK,g,K),{cause:W.cause||W}):Oe.from(W,W&&W.code,g,K)}}},xP=new Map,a_=n=>{let t=n&&n.env||{};const{fetch:e,Request:s,Response:i}=t,r=[s,i,e];let o=r.length,a=o,l,c,u=xP;for(;a--;)l=r[a],c=u.get(l),c===void 0&&u.set(l,c=a?new Map:_P(t)),u=c;return c};a_();const $5={http:BL,xhr:gP,fetch:{get:a_}};Lt.forEach($5,(n,t)=>{if(n){try{Object.defineProperty(n,"name",{value:t})}catch{}Object.defineProperty(n,"adapterName",{value:t})}});const Ky=n=>`- ${n}`,CP=n=>Lt.isFunction(n)||n===null||n===!1;function kP(n,t){n=Lt.isArray(n)?n:[n];const{length:e}=n;let s,i;const r={};for(let o=0;o<e;o++){s=n[o];let a;if(i=s,!CP(s)&&(i=$5[(a=String(s)).toLowerCase()],i===void 0))throw new Oe(`Unknown adapter '${a}'`);if(i&&(Lt.isFunction(i)||(i=i.get(t))))break;r[a||"#"+o]=i}if(!i){const o=Object.entries(r).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=e?o.length>1?`since :
`+o.map(Ky).join(`
`):" "+Ky(o[0]):"as no adapter specified";throw new Oe("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i}const l_={getAdapter:kP,adapters:$5};function N2(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Uu(null,n)}function Xy(n){return N2(n),n.headers=Ai.from(n.headers),n.data=R2.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),l_.getAdapter(n.adapter||tf.adapter,n)(n).then(function(s){return N2(n),s.data=R2.call(n,n.transformResponse,s),s.headers=Ai.from(s.headers),s},function(s){return s_(s)||(N2(n),s&&s.response&&(s.response.data=R2.call(n,n.transformResponse,s.response),s.response.headers=Ai.from(s.response.headers))),Promise.reject(s)})}const c_="1.13.1",dg={};["object","boolean","number","function","string","symbol"].forEach((n,t)=>{dg[n]=function(s){return typeof s===n||"a"+(t<1?"n ":" ")+n}});const Zy={};dg.transitional=function(t,e,s){function i(r,o){return"[Axios v"+c_+"] Transitional option '"+r+"'"+o+(s?". "+s:"")}return(r,o,a)=>{if(t===!1)throw new Oe(i(o," has been removed"+(e?" in "+e:"")),Oe.ERR_DEPRECATED);return e&&!Zy[o]&&(Zy[o]=!0,console.warn(i(o," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(r,o,a):!0}};dg.spelling=function(t){return(e,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function AP(n,t,e){if(typeof n!="object")throw new Oe("options must be an object",Oe.ERR_BAD_OPTION_VALUE);const s=Object.keys(n);let i=s.length;for(;i-- >0;){const r=s[i],o=t[r];if(o){const a=n[r],l=a===void 0||o(a,r,n);if(l!==!0)throw new Oe("option "+r+" must be "+l,Oe.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new Oe("Unknown option "+r,Oe.ERR_BAD_OPTION)}}const K1={assertOptions:AP,validators:dg},Gr=K1.validators;let ec=class{constructor(t){this.defaults=t||{},this.interceptors={request:new By,response:new By}}async request(t,e){try{return await this._request(t,e)}catch(s){if(s instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const r=i.stack?i.stack.replace(/^.+\n/,""):"";try{s.stack?r&&!String(s.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+r):s.stack=r}catch{}}throw s}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=ac(this.defaults,e);const{transitional:s,paramsSerializer:i,headers:r}=e;s!==void 0&&K1.assertOptions(s,{silentJSONParsing:Gr.transitional(Gr.boolean),forcedJSONParsing:Gr.transitional(Gr.boolean),clarifyTimeoutError:Gr.transitional(Gr.boolean)},!1),i!=null&&(Lt.isFunction(i)?e.paramsSerializer={serialize:i}:K1.assertOptions(i,{encode:Gr.function,serialize:Gr.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),K1.assertOptions(e,{baseUrl:Gr.spelling("baseURL"),withXsrfToken:Gr.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let o=r&&Lt.merge(r.common,r[e.method]);r&&Lt.forEach(["delete","get","head","post","put","patch","common"],g=>{delete r[g]}),e.headers=Ai.concat(o,r);const a=[];let l=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(e)===!1||(l=l&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const c=[];this.interceptors.response.forEach(function(m){c.push(m.fulfilled,m.rejected)});let u,d=0,f;if(!l){const g=[Xy.bind(this),void 0];for(g.unshift(...a),g.push(...c),f=g.length,u=Promise.resolve(e);d<f;)u=u.then(g[d++],g[d++]);return u}f=a.length;let h=e;for(;d<f;){const g=a[d++],m=a[d++];try{h=g(h)}catch(b){m.call(this,b);break}}try{u=Xy.call(this,h)}catch(g){return Promise.reject(g)}for(d=0,f=c.length;d<f;)u=u.then(c[d++],c[d++]);return u}getUri(t){t=ac(this.defaults,t);const e=r_(t.baseURL,t.url,t.allowAbsoluteUrls);return t_(e,t.params,t.paramsSerializer)}};Lt.forEach(["delete","get","head","options"],function(t){ec.prototype[t]=function(e,s){return this.request(ac(s||{},{method:t,url:e,data:(s||{}).data}))}});Lt.forEach(["post","put","patch"],function(t){function e(s){return function(r,o,a){return this.request(ac(a||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}ec.prototype[t]=e(),ec.prototype[t+"Form"]=e(!0)});let SP=class u_{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(r){e=r});const s=this;this.promise.then(i=>{if(!s._listeners)return;let r=s._listeners.length;for(;r-- >0;)s._listeners[r](i);s._listeners=null}),this.promise.then=i=>{let r;const o=new Promise(a=>{s.subscribe(a),r=a}).then(i);return o.cancel=function(){s.unsubscribe(r)},o},t(function(r,o,a){s.reason||(s.reason=new Uu(r,o,a),e(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=s=>{t.abort(s)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new u_(function(i){t=i}),cancel:t}}};function EP(n){return function(e){return n.apply(null,e)}}function TP(n){return Lt.isObject(n)&&n.isAxiosError===!0}const cm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(cm).forEach(([n,t])=>{cm[t]=n});function d_(n){const t=new ec(n),e=z8(ec.prototype.request,t);return Lt.extend(e,ec.prototype,t,{allOwnKeys:!0}),Lt.extend(e,t,null,{allOwnKeys:!0}),e.create=function(i){return d_(ac(n,i))},e}const At=d_(tf);At.Axios=ec;At.CanceledError=Uu;At.CancelToken=SP;At.isCancel=s_;At.VERSION=c_;At.toFormData=ug;At.AxiosError=Oe;At.Cancel=At.CanceledError;At.all=function(t){return Promise.all(t)};At.spread=EP;At.isAxiosError=TP;At.mergeConfig=ac;At.AxiosHeaders=Ai;At.formToJSON=n=>n_(Lt.isHTMLForm(n)?new FormData(n):n);At.getAdapter=l_.getAdapter;At.HttpStatusCode=cm;At.default=At;const{Axios:nat,AxiosError:sat,CanceledError:iat,isCancel:rat,CancelToken:oat,VERSION:aat,all:lat,Cancel:cat,isAxiosError:uat,spread:dat,toFormData:hat,AxiosHeaders:fat,HttpStatusCode:pat,formToJSON:gat,getAdapter:mat,mergeConfig:bat}=At;/*!
 * qrcode.vue v3.6.0
 * A Vue.js component to generate QRCode. Both support Vue 2 and Vue 3
 *  2017-PRESENT @scopewu(https://github.com/scopewu)
 * MIT License.
 */var ro=function(){return ro=Object.assign||function(t){for(var e,s=1,i=arguments.length;s<i;s++){e=arguments[s];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},ro.apply(this,arguments)};var lc;(function(n){var t=function(){function o(a,l,c,u){if(this.version=a,this.errorCorrectionLevel=l,this.modules=[],this.isFunction=[],a<o.MIN_VERSION||a>o.MAX_VERSION)throw new RangeError("Version value out of range");if(u<-1||u>7)throw new RangeError("Mask value out of range");this.size=a*4+17;for(var d=[],f=0;f<this.size;f++)d.push(!1);for(var f=0;f<this.size;f++)this.modules.push(d.slice()),this.isFunction.push(d.slice());this.drawFunctionPatterns();var h=this.addEccAndInterleave(c);if(this.drawCodewords(h),u==-1)for(var g=1e9,f=0;f<8;f++){this.applyMask(f),this.drawFormatBits(f);var m=this.getPenaltyScore();m<g&&(u=f,g=m),this.applyMask(f)}i(0<=u&&u<=7),this.mask=u,this.applyMask(u),this.drawFormatBits(u),this.isFunction=[]}return o.encodeText=function(a,l){var c=n.QrSegment.makeSegments(a);return o.encodeSegments(c,l)},o.encodeBinary=function(a,l){var c=n.QrSegment.makeBytes(a);return o.encodeSegments([c],l)},o.encodeSegments=function(a,l,c,u,d,f){if(c===void 0&&(c=1),u===void 0&&(u=40),d===void 0&&(d=-1),f===void 0&&(f=!0),!(o.MIN_VERSION<=c&&c<=u&&u<=o.MAX_VERSION)||d<-1||d>7)throw new RangeError("Invalid value");var h,g;for(h=c;;h++){var m=o.getNumDataCodewords(h,l)*8,b=r.getTotalBits(a,h);if(b<=m){g=b;break}if(h>=u)throw new RangeError("Data too long")}for(var y=0,x=[o.Ecc.MEDIUM,o.Ecc.QUARTILE,o.Ecc.HIGH];y<x.length;y++){var _=x[y];f&&g<=o.getNumDataCodewords(h,_)*8&&(l=_)}for(var C=[],A=0,I=a;A<I.length;A++){var R=I[A];e(R.mode.modeBits,4,C),e(R.numChars,R.mode.numCharCountBits(h),C);for(var L=0,P=R.getData();L<P.length;L++){var V=P[L];C.push(V)}}i(C.length==g);var T=o.getNumDataCodewords(h,l)*8;i(C.length<=T),e(0,Math.min(4,T-C.length),C),e(0,(8-C.length%8)%8,C),i(C.length%8==0);for(var D=236;C.length<T;D^=253)e(D,8,C);for(var K=[];K.length*8<C.length;)K.push(0);return C.forEach(function($,q){return K[q>>>3]|=$<<7-(q&7)}),new o(h,l,K,d)},o.prototype.getModule=function(a,l){return 0<=a&&a<this.size&&0<=l&&l<this.size&&this.modules[l][a]},o.prototype.getModules=function(){return this.modules},o.prototype.drawFunctionPatterns=function(){for(var a=0;a<this.size;a++)this.setFunctionModule(6,a,a%2==0),this.setFunctionModule(a,6,a%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);for(var l=this.getAlignmentPatternPositions(),c=l.length,a=0;a<c;a++)for(var u=0;u<c;u++)a==0&&u==0||a==0&&u==c-1||a==c-1&&u==0||this.drawAlignmentPattern(l[a],l[u]);this.drawFormatBits(0),this.drawVersion()},o.prototype.drawFormatBits=function(a){for(var l=this.errorCorrectionLevel.formatBits<<3|a,c=l,u=0;u<10;u++)c=c<<1^(c>>>9)*1335;var d=(l<<10|c)^21522;i(d>>>15==0);for(var u=0;u<=5;u++)this.setFunctionModule(8,u,s(d,u));this.setFunctionModule(8,7,s(d,6)),this.setFunctionModule(8,8,s(d,7)),this.setFunctionModule(7,8,s(d,8));for(var u=9;u<15;u++)this.setFunctionModule(14-u,8,s(d,u));for(var u=0;u<8;u++)this.setFunctionModule(this.size-1-u,8,s(d,u));for(var u=8;u<15;u++)this.setFunctionModule(8,this.size-15+u,s(d,u));this.setFunctionModule(8,this.size-8,!0)},o.prototype.drawVersion=function(){if(!(this.version<7)){for(var a=this.version,l=0;l<12;l++)a=a<<1^(a>>>11)*7973;var c=this.version<<12|a;i(c>>>18==0);for(var l=0;l<18;l++){var u=s(c,l),d=this.size-11+l%3,f=Math.floor(l/3);this.setFunctionModule(d,f,u),this.setFunctionModule(f,d,u)}}},o.prototype.drawFinderPattern=function(a,l){for(var c=-4;c<=4;c++)for(var u=-4;u<=4;u++){var d=Math.max(Math.abs(u),Math.abs(c)),f=a+u,h=l+c;0<=f&&f<this.size&&0<=h&&h<this.size&&this.setFunctionModule(f,h,d!=2&&d!=4)}},o.prototype.drawAlignmentPattern=function(a,l){for(var c=-2;c<=2;c++)for(var u=-2;u<=2;u++)this.setFunctionModule(a+u,l+c,Math.max(Math.abs(u),Math.abs(c))!=1)},o.prototype.setFunctionModule=function(a,l,c){this.modules[l][a]=c,this.isFunction[l][a]=!0},o.prototype.addEccAndInterleave=function(a){var l=this.version,c=this.errorCorrectionLevel;if(a.length!=o.getNumDataCodewords(l,c))throw new RangeError("Invalid argument");for(var u=o.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][l],d=o.ECC_CODEWORDS_PER_BLOCK[c.ordinal][l],f=Math.floor(o.getNumRawDataModules(l)/8),h=u-f%u,g=Math.floor(f/u),m=[],b=o.reedSolomonComputeDivisor(d),y=0,x=0;y<u;y++){var _=a.slice(x,x+g-d+(y<h?0:1));x+=_.length;var C=o.reedSolomonComputeRemainder(_,b);y<h&&_.push(0),m.push(_.concat(C))}for(var A=[],I=function(R){m.forEach(function(L,P){(R!=g-d||P>=h)&&A.push(L[R])})},y=0;y<m[0].length;y++)I(y);return i(A.length==f),A},o.prototype.drawCodewords=function(a){if(a.length!=Math.floor(o.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");for(var l=0,c=this.size-1;c>=1;c-=2){c==6&&(c=5);for(var u=0;u<this.size;u++)for(var d=0;d<2;d++){var f=c-d,h=(c+1&2)==0,g=h?this.size-1-u:u;!this.isFunction[g][f]&&l<a.length*8&&(this.modules[g][f]=s(a[l>>>3],7-(l&7)),l++)}}i(l==a.length*8)},o.prototype.applyMask=function(a){if(a<0||a>7)throw new RangeError("Mask value out of range");for(var l=0;l<this.size;l++)for(var c=0;c<this.size;c++){var u=void 0;switch(a){case 0:u=(c+l)%2==0;break;case 1:u=l%2==0;break;case 2:u=c%3==0;break;case 3:u=(c+l)%3==0;break;case 4:u=(Math.floor(c/3)+Math.floor(l/2))%2==0;break;case 5:u=c*l%2+c*l%3==0;break;case 6:u=(c*l%2+c*l%3)%2==0;break;case 7:u=((c+l)%2+c*l%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[l][c]&&u&&(this.modules[l][c]=!this.modules[l][c])}},o.prototype.getPenaltyScore=function(){for(var a=0,l=0;l<this.size;l++){for(var c=!1,u=0,d=[0,0,0,0,0,0,0],f=0;f<this.size;f++)this.modules[l][f]==c?(u++,u==5?a+=o.PENALTY_N1:u>5&&a++):(this.finderPenaltyAddHistory(u,d),c||(a+=this.finderPenaltyCountPatterns(d)*o.PENALTY_N3),c=this.modules[l][f],u=1);a+=this.finderPenaltyTerminateAndCount(c,u,d)*o.PENALTY_N3}for(var f=0;f<this.size;f++){for(var c=!1,h=0,d=[0,0,0,0,0,0,0],l=0;l<this.size;l++)this.modules[l][f]==c?(h++,h==5?a+=o.PENALTY_N1:h>5&&a++):(this.finderPenaltyAddHistory(h,d),c||(a+=this.finderPenaltyCountPatterns(d)*o.PENALTY_N3),c=this.modules[l][f],h=1);a+=this.finderPenaltyTerminateAndCount(c,h,d)*o.PENALTY_N3}for(var l=0;l<this.size-1;l++)for(var f=0;f<this.size-1;f++){var g=this.modules[l][f];g==this.modules[l][f+1]&&g==this.modules[l+1][f]&&g==this.modules[l+1][f+1]&&(a+=o.PENALTY_N2)}for(var m=0,b=0,y=this.modules;b<y.length;b++){var x=y[b];m=x.reduce(function(A,I){return A+(I?1:0)},m)}var _=this.size*this.size,C=Math.ceil(Math.abs(m*20-_*10)/_)-1;return i(0<=C&&C<=9),a+=C*o.PENALTY_N4,i(0<=a&&a<=2568888),a},o.prototype.getAlignmentPatternPositions=function(){if(this.version==1)return[];for(var a=Math.floor(this.version/7)+2,l=Math.floor((this.version*8+a*3+5)/(a*4-4))*2,c=[6],u=this.size-7;c.length<a;u-=l)c.splice(1,0,u);return c},o.getNumRawDataModules=function(a){if(a<o.MIN_VERSION||a>o.MAX_VERSION)throw new RangeError("Version number out of range");var l=(16*a+128)*a+64;if(a>=2){var c=Math.floor(a/7)+2;l-=(25*c-10)*c-55,a>=7&&(l-=36)}return i(208<=l&&l<=29648),l},o.getNumDataCodewords=function(a,l){return Math.floor(o.getNumRawDataModules(a)/8)-o.ECC_CODEWORDS_PER_BLOCK[l.ordinal][a]*o.NUM_ERROR_CORRECTION_BLOCKS[l.ordinal][a]},o.reedSolomonComputeDivisor=function(a){if(a<1||a>255)throw new RangeError("Degree out of range");for(var l=[],c=0;c<a-1;c++)l.push(0);l.push(1);for(var u=1,c=0;c<a;c++){for(var d=0;d<l.length;d++)l[d]=o.reedSolomonMultiply(l[d],u),d+1<l.length&&(l[d]^=l[d+1]);u=o.reedSolomonMultiply(u,2)}return l},o.reedSolomonComputeRemainder=function(a,l){for(var c=l.map(function(g){return 0}),u=function(g){var m=g^c.shift();c.push(0),l.forEach(function(b,y){return c[y]^=o.reedSolomonMultiply(b,m)})},d=0,f=a;d<f.length;d++){var h=f[d];u(h)}return c},o.reedSolomonMultiply=function(a,l){if(a>>>8||l>>>8)throw new RangeError("Byte out of range");for(var c=0,u=7;u>=0;u--)c=c<<1^(c>>>7)*285,c^=(l>>>u&1)*a;return i(c>>>8==0),c},o.prototype.finderPenaltyCountPatterns=function(a){var l=a[1];i(l<=this.size*3);var c=l>0&&a[2]==l&&a[3]==l*3&&a[4]==l&&a[5]==l;return(c&&a[0]>=l*4&&a[6]>=l?1:0)+(c&&a[6]>=l*4&&a[0]>=l?1:0)},o.prototype.finderPenaltyTerminateAndCount=function(a,l,c){return a&&(this.finderPenaltyAddHistory(l,c),l=0),l+=this.size,this.finderPenaltyAddHistory(l,c),this.finderPenaltyCountPatterns(c)},o.prototype.finderPenaltyAddHistory=function(a,l){l[0]==0&&(a+=this.size),l.pop(),l.unshift(a)},o.MIN_VERSION=1,o.MAX_VERSION=40,o.PENALTY_N1=3,o.PENALTY_N2=3,o.PENALTY_N3=40,o.PENALTY_N4=10,o.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],o.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],o}();n.QrCode=t;function e(o,a,l){if(a<0||a>31||o>>>a)throw new RangeError("Value out of range");for(var c=a-1;c>=0;c--)l.push(o>>>c&1)}function s(o,a){return(o>>>a&1)!=0}function i(o){if(!o)throw new Error("Assertion error")}var r=function(){function o(a,l,c){if(this.mode=a,this.numChars=l,this.bitData=c,l<0)throw new RangeError("Invalid argument");this.bitData=c.slice()}return o.makeBytes=function(a){for(var l=[],c=0,u=a;c<u.length;c++){var d=u[c];e(d,8,l)}return new o(o.Mode.BYTE,a.length,l)},o.makeNumeric=function(a){if(!o.isNumeric(a))throw new RangeError("String contains non-numeric characters");for(var l=[],c=0;c<a.length;){var u=Math.min(a.length-c,3);e(parseInt(a.substring(c,c+u),10),u*3+1,l),c+=u}return new o(o.Mode.NUMERIC,a.length,l)},o.makeAlphanumeric=function(a){if(!o.isAlphanumeric(a))throw new RangeError("String contains unencodable characters in alphanumeric mode");var l=[],c;for(c=0;c+2<=a.length;c+=2){var u=o.ALPHANUMERIC_CHARSET.indexOf(a.charAt(c))*45;u+=o.ALPHANUMERIC_CHARSET.indexOf(a.charAt(c+1)),e(u,11,l)}return c<a.length&&e(o.ALPHANUMERIC_CHARSET.indexOf(a.charAt(c)),6,l),new o(o.Mode.ALPHANUMERIC,a.length,l)},o.makeSegments=function(a){return a==""?[]:o.isNumeric(a)?[o.makeNumeric(a)]:o.isAlphanumeric(a)?[o.makeAlphanumeric(a)]:[o.makeBytes(o.toUtf8ByteArray(a))]},o.makeEci=function(a){var l=[];if(a<0)throw new RangeError("ECI assignment value out of range");if(a<128)e(a,8,l);else if(a<16384)e(2,2,l),e(a,14,l);else if(a<1e6)e(6,3,l),e(a,21,l);else throw new RangeError("ECI assignment value out of range");return new o(o.Mode.ECI,0,l)},o.isNumeric=function(a){return o.NUMERIC_REGEX.test(a)},o.isAlphanumeric=function(a){return o.ALPHANUMERIC_REGEX.test(a)},o.prototype.getData=function(){return this.bitData.slice()},o.getTotalBits=function(a,l){for(var c=0,u=0,d=a;u<d.length;u++){var f=d[u],h=f.mode.numCharCountBits(l);if(f.numChars>=1<<h)return 1/0;c+=4+h+f.bitData.length}return c},o.toUtf8ByteArray=function(a){a=encodeURI(a);for(var l=[],c=0;c<a.length;c++)a.charAt(c)!="%"?l.push(a.charCodeAt(c)):(l.push(parseInt(a.substring(c+1,c+3),16)),c+=2);return l},o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",o}();n.QrSegment=r})(lc||(lc={}));(function(n){(function(t){var e=function(){function s(i,r){this.ordinal=i,this.formatBits=r}return s.LOW=new s(0,1),s.MEDIUM=new s(1,0),s.QUARTILE=new s(2,3),s.HIGH=new s(3,2),s}();t.Ecc=e})(n.QrCode||(n.QrCode={}))})(lc||(lc={}));(function(n){(function(t){var e=function(){function s(i,r){this.modeBits=i,this.numBitsCharCount=r}return s.prototype.numCharCountBits=function(i){return this.numBitsCharCount[Math.floor((i+7)/17)]},s.NUMERIC=new s(1,[10,12,14]),s.ALPHANUMERIC=new s(2,[9,11,13]),s.BYTE=new s(4,[8,16,16]),s.KANJI=new s(8,[8,10,12]),s.ECI=new s(7,[0,0,0]),s}();t.Mode=e})(n.QrSegment||(n.QrSegment={}))})(lc||(lc={}));var nu=lc,B5="L",j5={L:nu.QrCode.Ecc.LOW,M:nu.QrCode.Ecc.MEDIUM,Q:nu.QrCode.Ecc.QUARTILE,H:nu.QrCode.Ecc.HIGH},LP=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}();function U5(n){return n in j5}function h_(n,t){t===void 0&&(t=0);var e=[];return n.forEach(function(s,i){var r=null;s.forEach(function(o,a){if(!o&&r!==null){e.push("M".concat(r+t," ").concat(i+t,"h").concat(a-r,"v1H").concat(r+t,"z")),r=null;return}if(a===s.length-1){if(!o)return;r===null?e.push("M".concat(a+t,",").concat(i+t," h1v1H").concat(a+t,"z")):e.push("M".concat(r+t,",").concat(i+t," h").concat(a+1-r,"v1H").concat(r+t,"z"));return}o&&r===null&&(r=a)})}),e.join("")}function f_(n,t,e,s){var i=s.width,r=s.height,o=s.x,a=s.y,l=n.length+e*2,c=Math.floor(t*.1),u=l/t,d=(i||c)*u,f=(r||c)*u,h=o==null?n.length/2-d/2:o*u,g=a==null?n.length/2-f/2:a*u,m=null;if(s.excavate){var b=Math.floor(h),y=Math.floor(g),x=Math.ceil(d+h-b),_=Math.ceil(f+g-y);m={x:b,y,w:x,h:_}}return{x:h,y:g,h:f,w:d,excavation:m}}function p_(n,t){return n.slice().map(function(e,s){return s<t.y||s>=t.y+t.h?e:e.map(function(i,r){return r<t.x||r>=t.x+t.w?i:!1})})}var z5={value:{type:String,required:!0,default:""},size:{type:Number,default:100},level:{type:String,default:B5,validator:function(n){return U5(n)}},background:{type:String,default:"#fff"},foreground:{type:String,default:"#000"},margin:{type:Number,required:!1,default:0},imageSettings:{type:Object,required:!1,default:function(){return{}}},gradient:{type:Boolean,required:!1,default:!1},gradientType:{type:String,required:!1,default:"linear",validator:function(n){return["linear","radial"].indexOf(n)>-1}},gradientStartColor:{type:String,required:!1,default:"#000"},gradientEndColor:{type:String,required:!1,default:"#fff"}},PP=ro(ro({},z5),{renderAs:{type:String,required:!1,default:"canvas",validator:function(n){return["canvas","svg"].indexOf(n)>-1}}}),IP=Wh({name:"QRCodeSvg",props:z5,setup:function(n){var t=ut(0),e=ut(""),s,i=function(){var o=n.value,a=n.level,l=n.margin,c=l>>>0,u=U5(a)?a:B5,d=nu.QrCode.encodeText(o,j5[u]).getModules();if(t.value=d.length+c*2,n.imageSettings.src){var f=f_(d,n.size,c,n.imageSettings);s={x:f.x+c,y:f.y+c,width:f.w,height:f.h},f.excavation&&(d=p_(d,f.excavation))}e.value=h_(d,c)},r=function(){if(!n.gradient)return null;var o=n.gradientType==="linear"?{x1:"0%",y1:"0%",x2:"100%",y2:"100%"}:{cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"};return hi(n.gradientType==="linear"?"linearGradient":"radialGradient",ro({id:"qr-gradient"},o),[hi("stop",{offset:"0%",style:{stopColor:n.gradientStartColor}}),hi("stop",{offset:"100%",style:{stopColor:n.gradientEndColor}})])};return i(),Xp(i),function(){return hi("svg",{width:n.size,height:n.size,"shape-rendering":"crispEdges",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(t.value," ").concat(t.value)},[hi("defs",{},[r()]),hi("rect",{width:"100%",height:"100%",fill:n.background}),hi("path",{fill:n.gradient?"url(#qr-gradient)":n.foreground,d:e.value}),n.imageSettings.src&&hi("image",ro({href:n.imageSettings.src},s))])}}}),DP=Wh({name:"QRCodeCanvas",props:z5,setup:function(n,t){var e=ut(null),s=ut(null),i=function(){var o=n.value,a=n.level,l=n.size,c=n.margin,u=n.background,d=n.foreground,f=n.gradient,h=n.gradientType,g=n.gradientStartColor,m=n.gradientEndColor,b=c>>>0,y=U5(a)?a:B5,x=e.value;if(x){var _=x.getContext("2d");if(_){var C=nu.QrCode.encodeText(o,j5[y]).getModules(),A=C.length+b*2,I=s.value,R={x:0,y:0,width:0,height:0},L=n.imageSettings.src&&I!=null&&I.naturalWidth!==0&&I.naturalHeight!==0;if(L){var P=f_(C,n.size,b,n.imageSettings);R={x:P.x+b,y:P.y+b,width:P.w,height:P.h},P.excavation&&(C=p_(C,P.excavation))}var V=window.devicePixelRatio||1,T=l/A*V;if(x.height=x.width=l*V,_.scale(T,T),_.fillStyle=u,_.fillRect(0,0,A,A),f){var D=void 0;h==="linear"?D=_.createLinearGradient(0,0,A,A):D=_.createRadialGradient(A/2,A/2,0,A/2,A/2,A/2),D.addColorStop(0,g),D.addColorStop(1,m),_.fillStyle=D}else _.fillStyle=d;LP?_.fill(new Path2D(h_(C,b))):C.forEach(function(K,$){K.forEach(function(q,W){q&&_.fillRect(W+b,$+b,1,1)})}),L&&_.drawImage(I,R.x,R.y,R.width,R.height)}}};je(i),Xp(i);var r=t.attrs.style;return function(){return hi(Kt,[hi("canvas",ro(ro({},t.attrs),{ref:e,style:ro(ro({},r),{width:"".concat(n.size,"px"),height:"".concat(n.size,"px")})})),n.imageSettings.src&&hi("img",{ref:s,src:n.imageSettings.src,style:{display:"none"},onLoad:i})])}}}),gc=Wh({name:"Qrcode",render:function(){var n=this.$props,t=n.renderAs,e=n.value,s=n.size,i=n.margin,r=n.level,o=n.background,a=n.foreground,l=n.imageSettings,c=n.gradient,u=n.gradientType,d=n.gradientStartColor,f=n.gradientEndColor;return hi(t==="svg"?IP:DP,{value:e,size:s,margin:i,level:r,background:o,foreground:a,imageSettings:l,gradient:c,gradientType:u,gradientStartColor:d,gradientEndColor:f})},props:PP});const MP={class:"flex flex-col items-center gap-4 mt-12 overflow-y-auto"},RP=["onClick"],NP={class:"bg-white w-full max-w-[250px] h-72 overflow-y-auto"},OP={class:"mb-2 text-sm text-gray-600"},FP={class:"font-medium"},$P={key:0,class:"text-gray-500 text-sm"},BP={key:1,class:"flex flex-col gap-2"},jP=["onClick"],UP={class:"font-semibold text-sm"},zP={key:0,class:"text-xs text-gray-500"},HP={key:2,open:"",class:"modal sm:modal-middle"},VP={class:"modal-box max-w-3xl relative font-poppins"},qP={class:"text-xl font-bold mb-2"},WP={class:"text-sm text-gray-600 mb-2"},GP={key:0},YP=["href"],KP={key:1},XP={key:2,class:"mt-6 text-center border-t pt-4"},ZP={class:"text-gray-500 text-xs mt-2"},JP={key:3},QP={key:3,style:{position:"fixed",inset:"0",display:"flex","justify-content":"center","align-items":"center","z-index":"9999"}},tI={class:"modal-box relative font-poppins"},eI={class:"text-xl font-bold mb-2"},nI={class:"text-sm text-gray-600 mb-2"},sI={key:0},iI={key:1},rI={key:2},oI=["href"],aI={key:3},H5={__name:"CalendarSidebar",props:{isOpen:{type:Boolean,required:!0}},emits:["open","close","eventClick"],setup(n,{emit:t}){const e=ws({});async function s(){const T=localStorage.getItem("token");if(T)try{(await At.get("https://pathfinder-development-production.up.railway.app/api/registrations",{headers:{Authorization:`Bearer ${T}`}})).data.forEach(K=>{e[K.trainingID]={registrationID:K.registrationID}}),console.log(" Registered trainings loaded:",e)}catch(D){console.error(" Failed to fetch registrations:",D)}}ut([]),ut([]);const i=ut({});je(s);async function r(){try{const T=JSON.parse(localStorage.getItem("user")),D=localStorage.getItem("token");if(!T||!D)return;const{data:K}=await At.get("https://pathfinder-development-production.up.railway.app/api/applications",{headers:{Authorization:`Bearer ${D}`}});console.log(" Applications API response:",K),console.log(" First application sample:",K[0]);const $=K.filter(q=>q.interviewSchedule).map(q=>(console.log(" Processing application:",{applicationID:q.applicationID,title:q.title,careerPosition:q.career?.position,hasCareer:!!q.career,allKeys:Object.keys(q)}),{id:q.applicationID,careerID:q.careerID,title:q.title||q.career?.position||"Career Interview",date:new Date(q.interviewSchedule).toISOString().split("T")[0],type:"career",interviewSchedule:q.interviewSchedule,interviewMode:q.interviewMode,interviewLink:q.interviewLink,interviewLocation:q.interviewLocation,organization:q.organizationName||q.career?.organization?.name||q.career?.organization||"Unknown Organization"}));$.forEach(q=>{_.value[q.date]||(_.value[q.date]=[]),_.value[q.date].push(q)}),console.log(" Career events merged:",$)}catch(T){console.error(" Failed to fetch career events:",T)}}const o=cn(()=>d.value?`https://pathfinder-development-production.up.railway.app/api/attendance?trainingID=${d.value.trainingID}&key=${d.value.attendance_key}`:"");async function a(T){const D=localStorage.getItem("token");if(!D)return console.error(" No token found  user may not be logged in."),null;try{const K=await At.get(`https://pathfinder-development-production.up.railway.app/api/careers/${T}`,{headers:{Authorization:`Bearer ${D}`,Accept:"application/json"}});return console.log(" Career details fetched:",K.data),K.data}catch(K){return console.error(" Failed to fetch career details:",K),null}}async function l(){try{const T=await At.get("/api/interviews");careerEvents.value=T.data}catch(T){console.error("Error fetching interviews:",T)}}ut({});const c=ut([]),u=ut(new Set),d=ut(null),f=ut(null);async function h(T){if(console.log("Opening modal for:",T),T.type==="training")d.value=T,f.value=null;else if(T.type==="career"){const D=await a(T.careerID),K={...T,...D};f.value=K}else console.warn("Unknown post type:",T)}function g(){f.value=null,d.value=null}function m(T){return T?new Date(T).toLocaleString("en-US",{dateStyle:"long",timeStyle:"short"}):""}function b(T){return T?new Date(T).toLocaleDateString("en-US",{dateStyle:"long"}):""}ut(null),ut(!1);const y=ut(null),x=ut(""),_=ut({}),C=ut([]);function A(T){x.value=L(T),R(x.value)}je(async()=>{await I(),await r(),A(new Date)});async function I(){try{const T=JSON.parse(localStorage.getItem("user")),D=localStorage.getItem("token");if(!T||!D){console.warn(" No user or token found in localStorage");return}const $=(await At.get(`https://pathfinder-development-production.up.railway.app/api/calendar/${T.applicantID}`,{headers:{Authorization:`Bearer ${D}`}})).data.events||[];console.log(" API Events Fetched:",$),$.forEach(q=>{q.date=new Date(q.date).toISOString().split("T")[0]}),_.value={},$.forEach(q=>{_.value[q.date]||(_.value[q.date]=[]),_.value[q.date].push(q)}),console.log(" Events Map:",_.value)}catch(T){console.error(" Error fetching events:",T)}}function R(T){x.value=T,C.value=_.value[T]||[],console.log(" Events for",T,":",C.value)}je(async()=>{await Si(),await I(),await l();const T=y.value;if(!T)return;const D=new Date().toISOString().split("T")[0];R(D);const K=()=>{T.querySelectorAll("[data-date]").forEach($=>{const q=$.getAttribute("data-date");$.classList.remove("event-day","today"),_.value[q]&&$.classList.add("event-day"),q===D&&$.classList.add("today")})};K(),T.addEventListener("render",K),T.addEventListener("change",$=>{const q=$.target.value;R(q)})});function L(T){return T?new Date(T).toISOString().split("T")[0]:""}ut(null),cn(()=>trainingsWithOrg.value.filter(T=>u.value.has(T.trainingID)).map(T=>{const D=qrActiveTrainingId.value===T.trainingID;return{...T,qrKey:T.attendance_key,qrExpires:T.end_Time,isActiveQR:D,qrCountdown:D?qrCountdown.value:null}}));function P(){Object.values(qrIntervals).forEach(clearInterval),qrIntervals={},ws({value:null,expiresAt:null,countdown:"00:00",interval:null})}je(async()=>{await fetchOrganizations(),console.log(" Organizations loaded:",i.value),await V(),console.log(" Trainings loaded:",c.value),await s(),await fetchBookmarks(),P(),buildEvents(),setupCalendarDOM(),setInterval(()=>V(),3e4)});async function V(){try{const T=await At.get("https://pathfinder-development-production.up.railway.app/api/trainings");c.value=T.data}catch(T){console.error("Error fetching trainings:",T),addToast("FAILED TO LOAD TRAININGS","error")}}return je(()=>{V()}),lo([c,u],async()=>{buildEvents(),await Si(),setupCalendarDOM()}),(T,D)=>{const K=Qo("calendar-month"),$=Qo("calendar-date");return j(),z("div",null,[n.isOpen?(j(),z("div",{key:0,class:"fixed inset-0 bg-black/40 z-30",onClick:D[0]||(D[0]=q=>T.$emit("close"))})):Ct("",!0),p("aside",{class:fe(["bg-white shadow-lg rounded-l-lg p-4 transition-transform duration-300 fixed top-0 right-0 h-full z-40 w-80 flex flex-col",n.isOpen?"translate-x-0":"translate-x-full"])},[p("button",{class:"absolute top-4 left-4 text-gray-600 hover:text-gray-900",onClick:D[1]||(D[1]=q=>T.$emit("close"))},"  "),p("div",MP,[Ce($,{ref_key:"calendarRef",ref:y,"first-day-of-week":"0",class:"cally bg-base-100 border border-base-300 shadow rounded-box p-3 flex-shrink-0"},{default:hs(()=>[Ce(K,null,{day:hs(({date:q})=>[p("div",{class:fe(["w-8 h-8 flex items-center justify-center rounded-full cursor-pointer",{"border-2 border-blue-500 bg-blue-50":L(q)===x.value,"bg-blue-100 text-blue-700 font-semibold":_.value[L(q)],"bg-gray-200 text-gray-600":!_.value[L(q)]}]),onClick:W=>A(q)},J(b(q)),11,RP)]),_:1})]),_:1},512),p("div",NP,[D[4]||(D[4]=p("h1",{class:"text-lg font-semibold mb-1"},"Upcoming Events",-1)),p("h2",OP,[D[3]||(D[3]=Dt(" on ")),p("span",FP,J(x.value||"Select a date"),1)]),C.value.length===0?(j(),z("div",$P," No events scheduled ")):(j(),z("div",BP,[(j(!0),z(Kt,null,pe(C.value,(q,W)=>(j(),z("div",{key:W,class:"bg-gray-100 p-2 rounded-lg shadow-sm cursor-pointer hover:bg-gray-200 break-words flex justify-between items-center",onClick:()=>{console.log("Clicked event:",q),h(q)}},[p("div",null,[p("h3",UP,J(q.title??(q.type==="career"?"Career Event":"Training Event")),1),q.type==="career"&&q.date?(j(),z("p",zP,J(q.organization??""),1)):Ct("",!0)]),p("span",{class:fe(["text-[10px] text-white px-2 py-1 rounded-full",q.type==="training"?"bg-blue-500":"bg-green-500"])},J(q.type==="training"?"Training":"Career"),3)],8,jP))),128))]))])])],2),n.isOpen?Ct("",!0):(j(),z("button",{key:1,class:"fixed bottom-6 right-6 bg-dark-slate text-white p-3 rounded-full shadow-lg z-50",onClick:D[2]||(D[2]=q=>T.$emit("open"))},[AA(T.$slots,"button",{},()=>[D[5]||(D[5]=p("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[p("path",{d:"M16.75 3.56V2C16.75 1.59 16.41 1.25 16 1.25C15.59 1.25 15.25 1.59 15.25 2V3.5H8.74999V2C8.74999 1.59 8.40999 1.25 7.99999 1.25C7.58999 1.25 7.24999 1.59 7.24999 2V3.56C4.54999 3.81 3.23999 5.42 3.03999 7.81C3.01999 8.1 3.25999 8.34 3.53999 8.34H20.46C20.75 8.34 20.99 8.09 20.96 7.81C20.76 5.42 19.45 3.81 16.75 3.56Z",fill:"white"}),p("path",{d:"M20 9.84003H4C3.45 9.84003 3 10.29 3 10.84V17C3 20 4.5 22 8 22H16C19.5 22 21 20 21 17V10.84C21 10.29 20.55 9.84003 20 9.84003Z",fill:"white"})],-1))])])),d.value?(j(),z("dialog",HP,[p("div",VP,[p("button",{class:"btn btn-sm btn-circle border-transparent bg-transparent absolute right-2 top-2",onClick:g},"  "),p("h2",qP,J(d.value.title),1),p("p",WP," Organization: "+J(d.value.organization),1),p("p",null,[D[6]||(D[6]=p("strong",null,"Mode:",-1)),Dt(" "+J(d.value.mode),1)]),p("p",null,[D[7]||(D[7]=p("strong",null,"Description: ",-1)),Dt(J(d.value.description),1)]),d.value.Mode?.toLowerCase()==="online"?(j(),z("p",GP,[D[8]||(D[8]=p("strong",null,"Link:",-1)),p("a",{href:d.value.trainingLink,target:"_blank",class:"text-blue-500 underline"},J(d.value.trainingLink),9,YP)])):d.value.Mode?.toLowerCase()==="on-site"?(j(),z("p",KP,[D[9]||(D[9]=p("strong",null,"Location:",-1)),Dt(" "+J(d.value.location),1)])):Ct("",!0),p("p",null,[D[10]||(D[10]=p("strong",null,"Schedule:",-1)),Dt(" "+J(b(d.value.date))+" at "+J(d.value.time),1)]),d.value.attendance_key?(j(),z("div",XP,[D[11]||(D[11]=p("p",{class:"text-sm font-semibold mb-2"}," Scan this QR Code for Attendance ",-1)),Ce(gc,{value:o.value,size:200,level:"H",class:"mx-auto"},null,8,["value"]),p("p",ZP," Expires at: "+J(m(d.value.end_time)),1)])):(j(),z("div",JP,D[12]||(D[12]=[p("div",{class:"divider"},null,-1),p("p",{class:"text-sm text-gray-500 text-center"}," QR Code not available yet or has expired. ",-1)])))])])):Ct("",!0),f.value?(j(),z("div",QP,[p("div",tI,[p("button",{class:"btn btn-sm btn-circle border-transparent bg-transparent absolute right-2 top-2",onClick:g},"  "),p("h2",eI,J(f.value.title),1),p("p",nI," Organization: "+J(f.value.organization||"Unknown Organization"),1),p("p",null,[D[13]||(D[13]=p("strong",null,"Details:",-1)),Dt(" "+J(f.value?.detailsAndInstructions||"N/A"),1)]),p("p",null,[D[14]||(D[14]=p("strong",null,"Qualifications:",-1)),Dt(" "+J(f.value?.qualifications||"N/A"),1)]),p("p",null,[D[15]||(D[15]=p("strong",null,"Requirements:",-1)),Dt(" "+J(f.value.requirements||"N/A"),1)]),p("p",null,[D[16]||(D[16]=p("strong",null,"Application Address:",-1)),Dt(" "+J(f.value.applicationLetterAddress||"N/A"),1)]),p("p",null,[D[17]||(D[17]=p("strong",null,"Deadline of Submission:",-1)),Dt(" "+J(b(f.value.deadlineOfSubmission)||"N/A"),1)]),D[22]||(D[22]=p("div",{class:"divider"},null,-1)),f.value.interviewSchedule?(j(),z("p",sI,[D[18]||(D[18]=p("strong",null,"Interview Schedule:",-1)),Dt(" "+J(m(f.value.interviewSchedule)),1)])):Ct("",!0),f.value.interviewMode?(j(),z("p",iI,[D[19]||(D[19]=p("strong",null,"Interview Mode:",-1)),Dt(" "+J(f.value.interviewMode),1)])):Ct("",!0),f.value.interviewMode?.toLowerCase()==="online"&&f.value.interviewLink?(j(),z("p",rI,[D[20]||(D[20]=p("strong",null,"Interview Link: ",-1)),p("a",{href:f.value.interviewLink,target:"_blank"},J(f.value.interviewLink),9,oI)])):Ct("",!0),f.value.interviewMode?.toLowerCase()==="on-site"&&f.value.interviewLocation?(j(),z("p",aI,[D[21]||(D[21]=p("strong",null,"Location:",-1)),Dt(" "+J(f.value.interviewLocation),1)])):Ct("",!0)])])):Ct("",!0)])}}},lI={class:"font-poppins"},cI={class:"relative font-poppins min-h-screen flex"},uI={class:"flex-1 bg-white m-3 px-4 rounded-lg flex flex-col min-h-0 overflow-hidden"},dI={class:"sticky top-0 z-10 bg-white pt-4 px-4 pb-2 border-b shadow-sm"},hI={class:"mt-4 mb-4"},fI=["value"],pI={class:"flex-1 overflow-y-auto space-y-4 pb-4 pt-4"},gI={key:0,class:"text-center text-gray-500 py-8"},mI={key:1,class:"text-center text-gray-500 py-8"},bI=["onClick"],vI={class:"flex items-center justify-between"},yI={class:"flex-1"},wI={class:"font-semibold text-lg"},_I={class:"text-gray-600 text-sm"},xI={key:0,class:"ml-2 px-2 py-1 text-xs bg-blue-500 text-white rounded-full"},CI={key:0,open:"",class:"modal sm:modal-middle"},kI={class:"modal-box max-w-3xl relative font-poppins"},AI={class:"text-xl font-bold mb-2"},SI={class:"text-sm text-gray-600 mb-2"},EI={class:"my-4 flex justify-end gap-2"},TI={class:"bg-white w-full max-w-[250px] h-72 overflow-y-auto"},LI={class:"mb-2"},PI={key:0,class:"text-gray-700"},II={key:1,class:"flex flex-col gap-2"},DI=["onClick"],MI={class:"font-semibold text-sm"},RI={class:"text-xs text-gray-600"},NI={key:1,open:"",class:"modal sm:modal-middle"},OI={class:"modal-box max-w-3xl relative font-poppins bg-gray-800 text-white"},FI={class:"text-xl font-bold mb-2"},$I={class:"text-sm text-gray-400 mb-2"},BI={class:"my-4 flex justify-end gap-2"},jI={class:"space-y-2 text-sm"},UI={class:"mt-6"},zI={key:0,class:"text-gray-400 text-sm"},HI={key:1,class:"flex overflow-x-auto space-x-3 pb-2 snap-x snap-mandatory",style:{"scrollbar-width":"thin"}},VI=["onClick"],qI={class:"font-semibold text-sm leading-snug mb-1"},WI={class:"text-[11px] text-gray-600 truncate"},GI={key:2,open:"",class:"modal sm:modal-middle"},YI={class:"modal-box max-w-3xl relative font-poppins bg-gray-800 text-white"},KI={class:"text-xl font-bold mb-2"},XI={class:"text-sm text-gray-400 mb-2"},ZI={class:"my-4 flex justify-end gap-2"},JI={key:0,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},QI={key:1,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},tD={class:"space-y-2 text-sm"},eD={key:0},nD={key:1},sD={key:3,open:"",class:"modal sm:modal-middle"},iD={class:"modal-box max-w-lg relative font-poppins"},rD={class:"text-xl font-bold mb-4"},oD={class:"mb-4"},aD={class:"toast toast-end toast-top z-50"},lD={__name:"Homepage",setup(n){const t=ut(!1),e=ut(!1),s=ws({}),i=ut({}),r=ut({}),o=ut(null),a=ut([]),l=ut([]),c=ut(null),u=ut(!1),d=ut(!1),f=ut(null),h=ut(null),g=ut([]),m=ut(new Set),b=ut(new Set),y=ut([]);ut({});const x=ut(""),_=ut([]);ut(null),ut(null);const C=ut(null),A=ut(!1);ut({});function I(ct,G="info"){const rt=Date.now();y.value.push({id:rt,message:ct,type:G}),setTimeout(()=>{y.value=y.value.filter(wt=>wt.id!==rt)},3e3)}async function R(){try{const ct=await At.get("https://pathfinder-development-production.up.railway.app/api/careers");l.value=Array.isArray(ct.data)?ct.data:[]}catch(ct){console.error(ct),I("Failed to fetch careers","error")}}async function L(){try{const ct=localStorage.getItem("token");if(!ct)return;const G=await At.get("https://pathfinder-development-production.up.railway.app/api/applications",{headers:{Authorization:`Bearer ${ct}`}});m.value=new Set(G.data.map(rt=>rt.careerID)),G.data.forEach(rt=>i.value[rt.careerID]=!0)}catch(ct){console.error(ct)}}async function P(){try{const ct=localStorage.getItem("token");if(!ct)return;const G=await At.get("https://pathfinder-development-production.up.railway.app/api/registrations",{headers:{Authorization:`Bearer ${ct}`}});b.value=new Set(G.data.map(rt=>rt.trainingID)),G.data.forEach(rt=>s[rt.trainingID]=!0)}catch(ct){console.error(ct)}}async function V(ct){try{console.log("Career Object:",ct);const G=parseInt(ct.careerID,10);console.log("Parsed Career ID:",G);const rt=await At.get(`https://pathfinder-development-production.up.railway.app/api/careers/${G}/details`);o.value=rt.data.career,a.value=rt.data.recommended_trainings||[],u.value=!0}catch(G){console.error("Error loading career details:",G),alert("Failed to load career details.")}}function T(){u.value=!1,o.value=null,a.value=[]}function D(ct){f.value=ct,d.value=!0}function K(){d.value=!1,f.value=null}function $(ct){const G=ct.careerID;i.value[G]=!1,m.value.delete(G)}async function q(ct){const G=localStorage.getItem("token");if(!G){I("PLEASE LOG IN FIRST","accent");return}const rt=ct.careerID,wt=r.value[rt];try{wt?(await At.delete(`https://pathfinder-development-production.up.railway.app/api/career-bookmarks/${rt}`,{headers:{Authorization:`Bearer ${G}`}}),r.value[rt]=!1,I("Bookmark removed","info")):(await At.post("https://pathfinder-development-production.up.railway.app/api/career-bookmarks",{careerID:rt},{headers:{Authorization:`Bearer ${G}`}}),r.value[rt]=!0,I("Bookmarked!","success"))}catch(Q){Q.response?.status===409?I("Already bookmarked","accent"):I("Failed to bookmark","error")}}async function W(ct){if(ct)try{const G=localStorage.getItem("token");if(!G){I("PLEASE LOG IN FIRST","accent");return}await At.post("https://pathfinder-development-production.up.railway.app/api/registrations",{trainingID:ct.trainingID},{headers:{Authorization:`Bearer ${G}`}}),I("REGISTRATION SUCCESSFUL!!!","success"),b.value.add(ct.trainingID),s.value[ct.trainingID]=!0}catch(G){G.response?.status===409?I("YOU ALREADY REGISTERED FOR THIS TRAINING","accent"):G.response?.status===401?I("UNAUTHORIZED. PLEASE LOG IN AGAIN","accent"):I("FAILED TO REGISTER","accent")}}async function F(ct){try{const G=localStorage.getItem("token");if(!G)return;const wt=(await At.get("https://pathfinder-development-production.up.railway.app/api/registrations",{headers:{Authorization:`Bearer ${G}`}})).data.find(Q=>Q.trainingID===ct.trainingID);wt&&(await At.delete(`https://pathfinder-development-production.up.railway.app/api/registrations/${wt.id}`,{headers:{Authorization:`Bearer ${G}`}}),b.value.delete(ct.trainingID),s.value[ct.trainingID]=!1,I("Unregistered successfully","info"))}catch(G){console.error("Error unregistering:",G),I("Failed to unregister","error")}}function O(ct){h.value=ct}function et(ct){h.value=ct,A.value=!0}function gt(){A.value=!1,C.value=null,h.value=null}function lt(ct){C.value=ct.target.files[0]}async function E(){if(!c.value){g.value=[];return}try{const ct=await At.get(`https://pathfinder-development-production.up.railway.app/api/careers/recommend/${c.value}`);g.value=Array.isArray(ct.data)?ct.data:[]}catch(ct){console.error("Error fetching recommended careers:",ct),g.value=[],I("Failed to load recommended careers","error")}}async function M(ct){const G=localStorage.getItem("token");if(!G)return I("Please log in first","accent");const rt=ct.trainingID,wt=r.value[rt];try{wt?(await At.delete(`https://pathfinder-development-production.up.railway.app/api/bookmarks/${rt}`,{headers:{Authorization:`Bearer ${G}`}}),r.value[rt]=!1,I("Bookmark removed","info")):(await At.post("https://pathfinder-development-production.up.railway.app/api/bookmarks",{trainingID:rt},{headers:{Authorization:`Bearer ${G}`}}),r.value[rt]=!0,I("Bookmarked!","success"))}catch{I("Failed to toggle bookmark","error")}}const B=ct=>!!ct.trainingID,at=ct=>B(ct)?b.value.has(ct.trainingID):m.value.has(ct.careerID);function pt(ct){return ct?new Date(ct).toLocaleString("en-US",{dateStyle:"long",timeStyle:"short"}):""}function nt(ct){return ct?new Date(ct).toLocaleDateString("en-US",{dateStyle:"long"}):""}return je(async()=>{await R(),await L(),await P()}),(ct,G)=>(j(),z("div",lI,[p("div",cI,[p("main",uI,[p("div",dI,[G[14]||(G[14]=p("h2",{class:"text-lg font-bold"},"Career-Training",-1)),G[15]||(G[15]=p("h2",{class:"text-2xl font-bold mb-2"},"Matching Engine",-1)),p("div",hI,[G[13]||(G[13]=p("label",{for:"career-select",class:"block text-sm font-medium text-gray-700 mb-2"}," Select Your Target Career ",-1)),Ut(p("select",{id:"career-select","onUpdate:modelValue":G[0]||(G[0]=rt=>c.value=rt),onChange:E,class:"block w-full px-4 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md bg-gray-100"},[G[12]||(G[12]=p("option",{value:null,disabled:""},"Select a target career",-1)),(j(!0),z(Kt,null,pe(l.value,rt=>(j(),z("option",{key:rt.careerID,value:rt.careerID},J(rt.position),9,fI))),128))],544),[[eg,c.value]])])]),p("div",pI,[g.value.length===0&&c.value?(j(),z("div",gI," No recommended careers found. ")):g.value.length===0?(j(),z("div",mI," Please select a target career to see recommendations. ")):Ct("",!0),(j(!0),z(Kt,null,pe(g.value,rt=>(j(),z("div",{key:rt.careerID,class:fe(["p-4 bg-blue-gray rounded-lg relative cursor-pointer hover:bg-gray-300 transition",{"ring-2 ring-blue-500":rt.careerID===c.value}]),onClick:wt=>V(rt)},[p("div",vI,[p("div",yI,[p("h3",wI,J(rt.position),1),p("p",_I,J(rt.organization||"Unknown Organization"),1)]),rt.careerID===c.value?(j(),z("span",xI," Target ")):Ct("",!0)])],10,bI))),128))])])]),Ce(H5,{isOpen:t.value,onOpen:G[1]||(G[1]=rt=>t.value=!0),onClose:G[2]||(G[2]=rt=>t.value=!1),onEventClick:ct.openModalCalendar},null,8,["isOpen","onEventClick"]),f.value?(j(),z("dialog",CI,[p("div",kI,[p("button",{class:"btn btn-sm btn-circle border-transparent bg-transparent absolute right-2 top-2",onClick:K},"  "),p("h2",AI,J(f.value.title),1),p("p",SI," Organization: "+J(f.value.organization),1),p("div",EI,[p("button",{class:"btn btn-outline btn-sm",onClick:G[3]||(G[3]=rt=>ct.toggleBookmark(f.value))},J(r.value[f.value.trainingID]?"Bookmarked":"Bookmark"),1),p("div",TI,[G[17]||(G[17]=p("h1",{class:"text-lg font-semibold"},"Upcoming Events",-1)),p("h2",LI,[G[16]||(G[16]=Dt(" on ")),p("span",null,J(x.value||"Select a date"),1)]),_.value.length===0?(j(),z("div",PI," No events scheduled ")):(j(),z("div",II,[(j(!0),z(Kt,null,pe(_.value,(rt,wt)=>(j(),z("div",{key:wt,onClick:Q=>O(rt),class:"bg-gray-100 p-2 rounded-lg shadow-sm cursor-pointer hover:bg-gray-200 break-words flex justify-between items-center"},[p("div",null,[p("h3",MI,J(B(rt)?rt.title:rt.position),1),p("p",RI,J(rt.organization||"Unknown"),1)]),at(rt)?(j(),z("span",{key:0,class:fe(["text-[10px] text-white px-2 py-1 rounded-full",B(rt)?"bg-blue-500":"bg-green-500"])},J(B(rt)?"Registered":"Applied"),3)):Ct("",!0)],8,DI))),128))]))])]),p("p",null,[G[18]||(G[18]=p("strong",null,"Mode:",-1)),Dt(" "+J(f.value.Mode),1)]),p("p",null,[G[19]||(G[19]=p("strong",null,"Description: ",-1)),Dt(J(f.value.description),1)]),e.value?Ct("",!0):(j(),z("button",{key:0,class:"fixed bottom-6 right-6 bg-dark-slate text-white p-3 rounded-full shadow-lg z-50",onClick:G[4]||(G[4]=rt=>e.value=!0)},G[20]||(G[20]=[p("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M16.75 3.56V2C16.75 1.59 16.41 1.25 16 1.25C15.59 1.25 15.25 1.59 15.25 2V3.5H8.74999V2C8.74999 1.59 8.40999 1.25 7.99999 1.25C7.58999 1.25 7.24999 1.59 7.24999 2V3.56C4.54999 3.81 3.23999 5.42 3.03999 7.81C3.01999 8.1 3.25999 8.34 3.53999 8.34H20.46C20.75 8.34 20.99 8.09 20.96 7.81C20.76 5.42 19.45 3.81 16.75 3.56Z",fill:"white"}),p("path",{d:"M20 9.84003H4C3.45 9.84003 3 10.29 3 10.84V17C3 20 4.5 22 8 22H16C19.5 22 21 20 21 17V10.84C21 10.29 20.55 9.84003 20 9.84003ZM9.21 18.21C9.16 18.25 9.11 18.3 9.06 18.33C9 18.37 8.94 18.4 8.88 18.42C8.82 18.45 8.76 18.47 8.7 18.48C8.63 18.49 8.57 18.5 8.5 18.5C8.37 18.5 8.24 18.47 8.12 18.42C7.99 18.37 7.89 18.3 7.79 18.21C7.61 18.02 7.5 17.76 7.5 17.5C7.5 17.24 7.61 16.98 7.79 16.79C7.89 16.7 7.99 16.63 8.12 16.58C8.3 16.5 8.5 16.48 8.7 16.52C8.76 16.53 8.82 16.55 8.88 16.58C8.94 16.6 9 16.63 9.06 16.67C9.11 16.71 9.16 16.75 9.21 16.79C9.39 16.98 9.5 17.24 9.5 17.5C9.5 17.76 9.39 18.02 9.21 18.21ZM9.21 14.71C9.02 14.89 8.76 15 8.5 15C8.24 15 7.98 14.89 7.79 14.71C7.61 14.52 7.5 14.26 7.5 14C7.5 13.74 7.61 13.48 7.79 13.29C8.07 13.01 8.51 12.92 8.88 13.08C9.01 13.13 9.12 13.2 9.21 13.29C9.39 13.48 9.5 13.74 9.5 14C9.5 14.26 9.39 14.52 9.21 14.71ZM12.71 18.21C12.52 18.39 12.26 18.5 12 18.5C11.74 18.5 11.48 18.39 11.29 18.21C11.11 18.02 11 17.76 11 17.5C11 17.24 11.11 16.98 11.29 16.79C11.66 16.42 12.34 16.42 12.71 16.79C12.89 16.98 13 17.24 13 17.5C13 17.76 12.89 18.02 12.71 18.21ZM12.71 14.71C12.66 14.75 12.61 14.79 12.56 14.83C12.5 14.87 12.44 14.9 12.38 14.92C12.32 14.95 12.26 14.97 12.2 14.98C12.13 14.99 12.07 15 12 15C11.74 15 11.48 14.89 11.29 14.71C11.11 14.52 11 14.26 11 14C11 13.74 11.11 13.48 11.29 13.29C11.38 13.2 11.49 13.13 11.62 13.08C11.99 12.92 12.43 13.01 12.71 13.29C12.89 13.48 13 13.74 13 14C13 14.26 12.89 14.52 12.71 14.71ZM16.21 18.21C16.02 18.39 15.76 18.5 15.5 18.5C15.24 18.5 14.98 18.39 14.79 18.21C14.61 18.02 14.5 17.76 14.5 17.5C14.5 17.24 14.61 16.98 14.79 16.79C15.16 16.42 15.84 16.42 16.21 16.79C16.39 16.98 16.5 17.24 16.5 17.5C16.5 17.76 16.39 18.02 16.21 18.21ZM16.21 14.71C16.16 14.75 16.11 14.79 16.06 14.83C16 14.87 15.94 14.9 15.88 14.92C15.82 14.95 15.76 14.97 15.7 14.98C15.63 14.99 15.56 15 15.5 15C15.24 15 14.98 14.89 14.79 14.71C14.61 14.52 14.5 14.26 14.5 14C14.5 13.74 14.61 13.48 14.79 13.29C14.89 13.2 14.99 13.13 15.12 13.08C15.3 13 15.5 12.98 15.7 13.02C15.76 13.03 15.82 13.05 15.88 13.08C15.94 13.1 16 13.13 16.06 13.17C16.11 13.21 16.16 13.25 16.21 13.29C16.39 13.48 16.5 13.74 16.5 14C16.5 14.26 16.39 14.52 16.21 14.71Z",fill:"white"})],-1)])))])])):Ct("",!0),u.value&&o.value?(j(),z("dialog",NI,[p("div",OI,[p("button",{class:"btn btn-sm btn-circle border-transparent bg-transparent absolute right-2 top-2 text-white",onClick:T},"  "),p("div",null,[p("h2",FI,J(o.value.position),1),p("p",$I," Organization: "+J(o.value.organization),1),p("div",BI,[p("button",{class:"btn btn-outline btn-sm border-white text-white hover:bg-white hover:text-gray-800",onClick:G[5]||(G[5]=rt=>q(o.value))},J(r.value[o.value.careerID]?"BOOKMARKED":"BOOKMARK"),1),m.value.has(o.value.careerID)?(j(),z("button",{key:1,class:"btn btn-sm bg-gray-500 text-white",onClick:G[7]||(G[7]=rt=>$(o.value))}," Cancel Application ")):(j(),z("button",{key:0,class:"btn btn-sm bg-blue-600 text-white hover:bg-blue-700",onClick:G[6]||(G[6]=rt=>et(o.value))}," APPLY "))]),p("div",jI,[p("p",null,[G[21]||(G[21]=p("strong",null,"Details:",-1)),Dt(" "+J(o.value.detailsAndInstructions),1)]),p("p",null,[G[22]||(G[22]=p("strong",null,"Qualifications:",-1)),Dt(" "+J(o.value.qualifications),1)]),p("p",null,[G[23]||(G[23]=p("strong",null,"Requirements:",-1)),Dt(" "+J(o.value.requirements),1)]),p("p",null,[G[24]||(G[24]=p("strong",null,"Application Address:",-1)),Dt(" "+J(o.value.applicationLetterAddress),1)]),p("p",null,[G[25]||(G[25]=p("strong",null,"Deadline:",-1)),Dt(" "+J(nt(o.value.deadlineOfSubmission)),1)])]),p("div",UI,[G[26]||(G[26]=p("h3",{class:"text-base font-semibold mb-3"},"Recommended Trainings",-1)),a.value.length===0?(j(),z("div",zI," No recommended trainings available. ")):(j(),z("div",HI,[(j(!0),z(Kt,null,pe(a.value,rt=>(j(),z("div",{key:rt.trainingID,class:"snap-start w-[180px] flex-shrink-0 p-3 bg-white text-gray-800 rounded-lg cursor-pointer hover:bg-gray-200 transition shadow-sm",onClick:me(wt=>D(rt),["stop"])},[p("h4",qI,J(rt.title),1),p("p",WI,J(rt.organizationName||rt.provider||rt.name||"Unknown"),1)],8,VI))),128))]))])])])])):Ct("",!0),d.value&&f.value?(j(),z("dialog",GI,[p("div",YI,[p("button",{class:"btn btn-sm btn-circle border-transparent bg-transparent absolute right-2 top-2 text-white",onClick:K},"  "),p("div",null,[p("h2",KI,J(f.value.title),1),p("p",XI," Organization: "+J(f.value.organizationName||f.value.provider||f.value.name||"Unknown"),1),p("div",ZI,[p("button",{class:"btn btn-outline btn-sm border-white text-white hover:bg-white hover:text-gray-800 flex items-center gap-2",onClick:G[8]||(G[8]=rt=>M(f.value))},[r.value[f.value.trainingID]?(j(),z("svg",QI,G[28]||(G[28]=[p("path",{d:"M12.89 5.87988H5.11C3.4 5.87988 2 7.27988 2 8.98988V20.3499C2 21.7999 3.04 22.4199 4.31 21.7099L8.24 19.5199C8.66 19.2899 9.34 19.2899 9.75 19.5199L13.68 21.7099C14.96 22.4099 16 21.7999 16 20.3499V8.98988C16 7.27988 14.6 5.87988 12.89 5.87988Z",fill:"currentColor"},null,-1)]))):(j(),z("svg",JI,G[27]||(G[27]=[p("path",{d:"M12.89 5.87988H5.10999C3.39999 5.87988 2 7.27987 2 8.98987V20.3499C2 21.7999 3.04 22.4199 4.31 21.7099L8.23999 19.5199C8.65999 19.2899 9.34 19.2899 9.75 19.5199L13.68 21.7099C14.95 22.4199 15.99 21.7999 15.99 20.3499V8.98987C16 7.27987 14.6 5.87988 12.89 5.87988Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])))]),b.value.has(f.value.trainingID)?(j(),z("button",{key:1,class:"btn btn-sm bg-gray-500 text-white",onClick:G[10]||(G[10]=rt=>F(f.value))}," Unregister ")):(j(),z("button",{key:0,class:"btn btn-sm bg-blue-600 text-white hover:bg-blue-700",onClick:G[9]||(G[9]=rt=>W(f.value))}," REGISTER "))]),G[34]||(G[34]=p("div",{class:"divider my-4"},null,-1)),p("div",tD,[p("p",null,[G[29]||(G[29]=p("strong",null,"Mode:",-1)),Dt(" "+J(f.value.mode||"Not specified"),1)]),p("p",null,[G[30]||(G[30]=p("strong",null,"Schedule:",-1)),Dt(" "+J(pt(f.value.schedule)),1)]),f.value.location?(j(),z("p",eD,[G[31]||(G[31]=p("strong",null,"Location:",-1)),Dt(" "+J(f.value.location),1)])):Ct("",!0),f.value.trainingLink?(j(),z("p",nD,[G[32]||(G[32]=p("strong",null,"Training Link:",-1)),Dt(" "+J(f.value.trainingLink),1)])):Ct("",!0),p("p",null,[G[33]||(G[33]=p("strong",null,"Description:",-1)),Dt(" "+J(f.value.description),1)])])])])])):Ct("",!0),A.value?(j(),z("dialog",sD,[p("div",iD,[p("button",{class:"btn btn-sm btn-circle border-transparent bg-transparent absolute right-2 top-2",onClick:gt},"  "),p("h2",rD," Apply for "+J(h.value?.position),1),p("form",{onSubmit:G[11]||(G[11]=me((...rt)=>ct.submitApplication&&ct.submitApplication(...rt),["prevent"]))},[p("div",oD,[G[35]||(G[35]=p("label",{class:"block text-sm font-medium mb-1"},"Upload PDF Requirements",-1)),p("input",{type:"file",accept:"application/pdf",onChange:lt,required:"",class:"file-input file-input-bordered w-full"},null,32)]),p("div",{class:"flex justify-end gap-2"},[p("button",{type:"button",class:"btn btn-outline btn-sm",onClick:gt}," Cancel "),G[36]||(G[36]=p("button",{type:"submit",class:"btn bg-customButton hover:bg-dark-slate text-white btn-sm"}," Submit ",-1))])],32)])])):Ct("",!0),p("div",aD,[(j(!0),z(Kt,null,pe(y.value,rt=>(j(),z("div",{key:rt.id,class:fe(["alert",{"alert-info":rt.type==="info","alert-success":rt.type==="success","alert-error":rt.type==="error","alert-warning":rt.type==="accent"}])},J(rt.message),3))),128))])]))}},cD="modulepreload",uD=function(n){return"/"+n},Jy={},Xo=function(t,e,s){let i=Promise.resolve();if(e&&e.length>0){let l=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");i=l(e.map(c=>{if(c=uD(c),c in Jy)return;Jy[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":cD,u||(f.as="script"),f.crossOrigin="",f.href=c,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((h,g)=>{f.addEventListener("load",h),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function r(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&r(a.reason);return t().catch(r)})},dD={class:"bg-gray-100 font-poppins"},hD={class:"lg:hidden block font-poppins"},fD={class:"text-black p-6"},pD={class:"flex flex-col items-center mt-4"},gD={class:"text-xl font-semibold mb-2"},mD={class:"w-full flex items-center justify-center gap-6 mt-2 relative"},bD={class:"relative"},vD={class:"absolute -top-2 -right-2 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-customButton rounded-full"},yD={class:"relative"},wD={class:"absolute -top-2 -right-2 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-customButton rounded-full"},_D={class:"bg-white p-4 rounded-lg"},xD={class:"space-y-4"},CD=["onClick"],kD={class:"text-sm"},AD={class:"text-sm"},SD={class:"font-semibold"},ED={class:"text-sm"},TD={class:"text-sm"},LD={class:"font-semibold"},PD=["onClick"],ID=["disabled","onClick"],DD={class:"min-h-screen p-3 font-poppins hidden lg:flex"},MD={class:"w-full lg:w-1/4 bg-white rounded-lg shadow p-6 flex flex-col items-center"},RD={class:"text-xl font-semibold mb-6"},ND={class:"w-full flex items-center justify-center gap-6 mb-6 relative"},OD={class:"relative"},FD={class:"absolute -top-2 -right-2 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-customButton rounded-full"},$D={class:"relative"},BD={class:"absolute -top-2 -right-2 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-customButton rounded-full"},jD={class:"w-full flex flex-col gap-3"},UD={class:"w-full lg:w-3/4 lg:pl-6 mt-6 lg:mt-0 flex flex-col gap-6"},zD={class:"bg-white rounded-lg shadow p-6 flex-1"},HD={class:"overflow-x-auto"},VD={class:"min-w-full divide-y divide-gray-200"},qD={class:"bg-white divide-y divide-gray-200"},WD=["onClick"],GD={class:"px-6 py-4 text-sm font-semibold text-gray-900"},YD={class:"px-6 py-4 text-sm text-gray-700"},KD={class:"px-6 py-4 whitespace-nowrap text-sm"},XD=["onClick"],ZD=["disabled","onClick"],JD={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50"},QD={class:"modal-box relative font-poppins"},tM={key:0},eM={class:"text-xl font-bold mb-2"},nM={class:"text-sm text-gray-600 mb-2"},sM={key:0,class:"text-center text-gray-500 text-sm mb-2"},iM={key:1},rM={key:0},oM={key:1},aM={key:2},lM=["href"],cM={key:3},uM={class:"modal-box max-w-3xl relative font-poppins"},dM={key:0},hM={class:"text-xl font-bold mb-2"},fM={class:"text-sm text-gray-600 mb-2"},pM={key:0},gM={key:1},mM=["href"],bM={key:2,class:"mt-6 text-center border-t pt-4"},vM={class:"text-gray-500 text-xs mt-2"},yM={key:3},wM={__name:"Profilepage",setup(n){const t=gi(),e=ut("Guest"),s=ut([]),i=ut(0),r=ut(0),o=ut(null),a=ut(null),l=ut(null),c=ut(null);async function u(R){if(console.log(" Activity clicked:",R),R.type==="career")try{const L=localStorage.getItem("token");if(!L)return console.error(" No token found.");const V=(await At.get("https://pathfinder-development-production.up.railway.app/api/applications",{headers:{Authorization:`Bearer ${L}`}})).data.find(T=>T.applicationID===R.applicationID);V?(console.log(" Application + interview found:",V),l.value=V):(console.log(" No application found, using activity data only."),l.value=R),await Si(),o.value&&o.value.showModal()}catch(L){console.error(" Error fetching application:",L)}else R.type==="training"?await d(R):console.warn(" Unknown activity type:",R)}async function d(R){try{const L=localStorage.getItem("token");if(!L)return console.error(" No token found.");const P=R.id||R.trainingID,V=await At.get(`https://pathfinder-development-production.up.railway.app/api/trainings/${P}`,{headers:{Authorization:`Bearer ${L}`}});c.value=V.data,await Si(),a.value&&a.value.showModal()}catch(L){console.error(" Error opening training modal:",L)}}const f=cn(()=>c.value?`https://pathfinder-development-production.up.railway.app/api/attendance?trainingID=${c.value.trainingID}&key=${c.value.attendance_key}`:"");function h(){o.value&&o.value.open&&o.value.close()}function g(){a.value&&a.value.open&&a.value.close()}const m=ws({});let b=null;function y(R){if(!R)return"N/A";const L=new Date(R);return isNaN(L)?R:L.toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}function x(){localStorage.removeItem("user"),localStorage.removeItem("token"),t.push({name:"Login"})}async function _(){const R=localStorage.getItem("user");if(!R)return;const L=JSON.parse(R);e.value=`${L.firstName||""} ${L.lastName||""}`.trim()||"Guest";try{const P=await At.get(`https://pathfinder-development-production.up.railway.app/api/my-activities/${L.applicantID}`);s.value=P.data.activities||[],console.log("Raw activities data:",s.value),i.value=s.value.filter(V=>["upcoming","registered"].includes(V.status?.toLowerCase())).length,r.value=s.value.filter(V=>V.status?.toLowerCase()==="completed").length,C(),console.log("Activities fetched:",s.value)}catch(P){console.error("Error fetching activities:",P)}}const C=()=>{b&&clearInterval(b),b=setInterval(()=>{const R=new Date().getTime();let L=0,P=0;s.value.forEach(V=>{if(V.end_time){const $=new Date(V.end_time).getTime()-R;if($>0){const q=Math.floor($/1e3/60),W=Math.floor($/1e3%60);m[V.id]=`${q}m ${W}s`}else m[V.id]="Expired"}const T=(V.status||"").toLowerCase(),D=V.end_time?R>new Date(V.end_time).getTime():!1;T==="completed"||D?P++:["upcoming","registered","scheduled"].includes(T)&&L++}),i.value=L,r.value=P},1e3)},A=async(R,L)=>{L&&(L.stopPropagation(),L.preventDefault());const P=R.applicationID,V=localStorage.getItem("token");if(!V){alert("Please log in to download requirements.");return}if(!P){console.error("Application ID not found in activity:",R),alert("Application ID not found. Please try refreshing the page.");return}let T=R.requirement_directory;if(console.log("Activity data:",R),console.log("Initial filePath from activity:",T),!T||T===null||T===""){console.log("requirement_directory not in activity, fetching from API...");try{const D=await At.get("https://pathfinder-development-production.up.railway.app/api/applications",{headers:{Authorization:`Bearer ${V}`}});console.log("Applications API response:",D.data);const K=D.data.find($=>$.applicationID===P);console.log("Found application:",K),K?(T=K.requirement_directory,console.log("filePath from API:",T),(!T||T===null||T==="")&&console.log("No filePath found, trying backend endpoint directly...")):(console.error("Application not found for applicationID:",P),T=null)}catch(D){console.error("Error fetching application details:",D),T=null}}try{if(T&&T!==null&&T!=="")try{const{getPDFUrl:D}=await Xo(async()=>{const{getPDFUrl:et}=await Promise.resolve().then(()=>Pu);return{getPDFUrl:et}},void 0),K=D(T,"Requirements"),$=await fetch(K);if(!$.ok)throw new Error("Failed to fetch PDF from Supabase");const q=await $.blob(),W=window.URL.createObjectURL(q),F=T.split("/").pop()||"requirement.pdf",O=document.createElement("a");O.href=W,O.download=F,document.body.appendChild(O),O.click(),document.body.removeChild(O),window.URL.revokeObjectURL(W);return}catch(D){console.warn("Supabase download failed, trying backend endpoint:",D)}try{const D=await At({url:`https://pathfinder-development-production.up.railway.app/api/applications/${P}/requirement`,method:"GET",responseType:"blob",headers:{Authorization:`Bearer ${V}`}}),K=window.URL.createObjectURL(new Blob([D.data],{type:"application/pdf"})),$=document.createElement("a");$.href=K,$.download="requirement.pdf",document.body.appendChild($),$.click(),document.body.removeChild($),window.URL.revokeObjectURL(K)}catch(D){console.error("Backend endpoint also failed:",D),D.response?.status===404?alert("No requirement file has been uploaded for this application."):alert("Failed to download requirements. Please try again.")}}catch(D){console.error("Error downloading requirements:",D),alert("Failed to download requirements. Please try again.")}},I=async(R,L)=>{L&&(L.stopPropagation(),L.preventDefault());const P=R.registrationID,V=localStorage.getItem("token");if(!V){alert("Please log in to download certificates.");return}if(!P){console.error("Registration ID not found in activity:",R),alert("Registration ID not found. Please try refreshing the page.");return}let T=R.certificate;if(console.log("Activity data:",R),console.log("Initial certificate path from activity:",T),!T||T===null||T===""){console.log("certificate not in activity, fetching from API...");try{const D=await At.get("https://pathfinder-development-production.up.railway.app/api/registrations",{headers:{Authorization:`Bearer ${V}`}});console.log("Registrations API response:",D.data);const K=D.data.find($=>$.registrationID===P||$.id===P);console.log("Found registration:",K),K&&(T=K.certificate||K.certificatePath,console.log("certificate path from API:",T))}catch(D){console.error("Error fetching registration details:",D)}}if(!T||T===null||T===""){alert("No certificate has been issued for this training yet.");return}try{if(T)try{const{getPDFUrl:D}=await Xo(async()=>{const{getPDFUrl:et}=await Promise.resolve().then(()=>Pu);return{getPDFUrl:et}},void 0),K=D(T,"Requirements"),$=await fetch(K);if(!$.ok)throw new Error("Failed to fetch certificate from Supabase");const q=await $.blob(),W=window.URL.createObjectURL(q),F=T.split("/").pop()||`certificate_${R.title||"training"}.pdf`,O=document.createElement("a");O.href=W,O.download=F,document.body.appendChild(O),O.click(),document.body.removeChild(O),window.URL.revokeObjectURL(W);return}catch(D){console.warn("Supabase download failed:",D),alert("Failed to download certificate from Supabase. Please try again.")}}catch(D){console.error("Error downloading certificate:",D),alert("Failed to download certificate. Please try again.")}};return je(_),(R,L)=>(j(),z("div",dD,[p("div",hD,[p("div",fD,[p("div",pD,[L[6]||(L[6]=p("div",{class:"avatar w-24 h-24 rounded-full bg-white mb-4"},[p("img",{src:"https://img.daisyui.com/images/profile/demo/yellingcat@192.webp",alt:"User Avatar",class:"w-full h-full object-cover rounded-full"})],-1)),p("h2",gD,J(e.value),1),p("div",mD,[p("div",bD,[L[4]||(L[4]=p("div",{class:"flex items-center justify-center bg-white shadow-sm rounded-full px-6 py-2"},[p("span",{class:"font-semibold text-gray-700"},"Upcoming")],-1)),p("span",vD,J(i.value),1)]),p("div",yD,[L[5]||(L[5]=p("div",{class:"flex items-center justify-center bg-white shadow-sm rounded-full px-6 py-2"},[p("span",{class:"font-semibold text-gray-700"},"Completed")],-1)),p("span",wD,J(r.value),1)])])])]),p("div",_D,[L[9]||(L[9]=p("h3",{class:"text-lg font-semibold mb-2"},"My Activity",-1)),p("ul",xD,[(j(!0),z(Kt,null,pe(s.value,P=>(j(),z("li",{key:P.registrationID||P.applicationID,class:"relative p-2 shadow-sm bg-blue-gray rounded-lg hover:bg-gray-300 transition cursor-pointer"},[p("div",null,[p("div",{class:"flex flex-col gap-2 p-4 rounded cursor-pointer",onClick:V=>u(P)},[p("div",kD,[L[7]||(L[7]=p("span",{class:"font-semibold"},"Title:",-1)),Dt(" "+J(P.title),1)]),p("div",AD,[p("span",SD,J(P.type==="training"?"Schedule:":"Deadline:"),1),Dt(" "+J(P.schedule?y(P.schedule):y(P.deadlineOfSubmission)||""),1)]),p("div",ED,[L[8]||(L[8]=p("span",{class:"font-semibold"},"Status: ",-1)),p("span",{class:fe({"text-green-600":["Applied","Registered","Completed"].includes(P.status),"text-yellow-600":P.status==="Ongoing","text-red-600":P.status==="Cancelled"})},J(P.status||"N/A"),3)]),p("div",TD,[p("span",LD,J(P.type==="career"?"Requirement:":"Certificate:"),1),P.type==="career"?(j(),z("button",{key:0,type:"button",class:fe(["px-3 py-1 rounded text-white",P.requirement_directory||P.applicationID?"bg-blue-500 hover:bg-blue-600 cursor-pointer":"bg-gray-300 cursor-not-allowed"]),onClick:me(V=>A(P,V),["stop"])}," Download Requirement ",10,PD)):(j(),z("button",{key:1,type:"button",class:fe(["ml-2 px-3 py-1 rounded text-white text-sm",[P.status?.toLowerCase()==="attended"?"bg-green-500 hover:bg-green-600 cursor-pointer":"bg-gray-300 cursor-not-allowed"]]),disabled:P.status?.toLowerCase()!=="attended",onClick:me(V=>P.status?.toLowerCase()==="attended"?I(P,V):null,["stop"])},J(P.status?.toLowerCase()==="attended"?"Download Certificate":"Certificate Unavailable"),11,ID))])],8,CD)])]))),128))])])]),p("div",DD,[p("div",MD,[L[18]||(L[18]=p("div",{class:"w-24 h-24 rounded-full bg-white mb-4"},[p("div",{class:"avatar w-24 h-24 rounded-full bg-white mb-4"},[p("img",{src:"https://img.daisyui.com/images/profile/demo/yellingcat@192.webp",alt:"User Avatar",class:"w-full h-full object-cover rounded-full"})])],-1)),p("h2",RD,J(e.value),1),p("div",ND,[p("div",OD,[L[10]||(L[10]=p("div",{class:"flex items-center justify-center bg-gray-100 rounded-full px-6 py-2"},[p("span",{class:"font-semibold text-gray-700"},"Upcoming")],-1)),p("span",FD,J(i.value),1)]),p("div",$D,[L[11]||(L[11]=p("div",{class:"flex items-center justify-center bg-gray-100 rounded-full px-6 py-2"},[p("span",{class:"font-semibold text-gray-700"},"Completed")],-1)),p("span",BD,J(r.value),1)])]),p("div",jD,[p("button",{class:"bg-customButton text-white py-2 px-10 rounded-md hover:bg-dark-slate flex items-center justify-start gap-2",onClick:L[0]||(L[0]=P=>R.$router.push({name:"ResumeEditorpage"}))},L[12]||(L[12]=[p("svg",{class:"size-6 flex-shrink-0",viewBox:"0 0 34 34",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M19.8333 3.21521V9.06681C19.8333 9.86022 19.8333 10.2569 19.9877 10.56C20.1235 10.8265 20.3402 11.0432 20.6068 11.1791C20.9098 11.3335 21.3066 11.3335 22.1 11.3335H27.9516M22.6666 18.4167H11.3333M22.6666 24.0834H11.3333M14.1666 12.75H11.3333M19.8333 2.83337H12.4666C10.0864 2.83337 8.89629 2.83337 7.98717 3.2966C7.18748 3.70406 6.53731 4.35423 6.12985 5.15391C5.66663 6.06304 5.66663 7.25315 5.66663 9.63337V24.3667C5.66663 26.7469 5.66663 27.937 6.12985 28.8462C6.53731 29.6459 7.18748 30.296 7.98717 30.7035C8.89629 31.1667 10.0864 31.1667 12.4666 31.1667H21.5333C23.9135 31.1667 25.1036 31.1667 26.0128 30.7035C26.8124 30.296 27.4626 29.6459 27.8701 28.8462C28.3333 27.937 28.3333 26.7469 28.3333 24.3667V11.3334L19.8333 2.83337Z",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),p("span",null,"Resume",-1)])),p("button",{class:"bg-customButton text-white py-2 px-10 rounded-md hover:bg-dark-slate flex items-center justify-start gap-2",onClick:L[1]||(L[1]=P=>R.$router.push({name:"Certificatespage"}))},L[13]||(L[13]=[p("svg",{class:"size-6 flex-shrink-0",viewBox:"0 0 35 35",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M9.47917 29.1666H7.29167C5.68084 29.1666 4.375 27.8608 4.375 26.25V5.83329C4.375 4.22246 5.68084 2.91663 7.29167 2.91663H27.7083C29.3192 2.91663 30.625 4.22246 30.625 5.83329V26.25C30.625 27.8608 29.3192 29.1666 27.7083 29.1666H25.5208M17.5 27.7083C19.9162 27.7083 21.875 25.7495 21.875 23.3333C21.875 20.917 19.9162 18.9583 17.5 18.9583C15.0838 18.9583 13.125 20.917 13.125 23.3333C13.125 25.7495 15.0838 27.7083 17.5 27.7083ZM17.5 27.7083L17.5313 27.708L12.8751 32.3641L8.75036 28.2393L13.1537 23.836M17.5 27.7083L22.1562 32.3641L26.281 28.2393L21.8777 23.836M13.125 8.74996H21.875M10.2083 13.8541H24.7917",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),p("span",null,"Certificates",-1)])),p("button",{class:"bg-customButton text-white py-2 px-10 rounded-md hover:bg-dark-slate flex items-center justify-start gap-2",onClick:L[2]||(L[2]=P=>R.$router.push({name:"Bookmarkpage"}))},L[14]||(L[14]=[p("svg",{class:"size-6 flex-shrink-0",viewBox:"0 0 31 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M7.75 3.75V30L17.4375 20.625L27.125 30V3.75H7.75ZM23.25 0H3.875V26.25L5.8125 24.375V1.875H23.25V0Z",fill:"white"})],-1),p("span",null,"Bookmark",-1)])),L[17]||(L[17]=p("div",{class:"divider"},null,-1)),p("button",{class:"bg-customButton text-white py-2 px-10 rounded-md hover:bg-dark-slate flex items-center justify-start gap-2",onClick:L[3]||(L[3]=P=>R.$router.push({name:"UpdateDeletepage"}))},L[15]||(L[15]=[p("svg",{class:"size-6 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M20.1 9.21994C18.29 9.21994 17.55 7.93994 18.45 6.36994C18.97 5.45994 18.66 4.29994 17.75 3.77994L16.02 2.78994C15.23 2.31994 14.21 2.59994 13.74 3.38994L13.63 3.57994C12.73 5.14994 11.25 5.14994 10.34 3.57994L10.23 3.38994C9.78 2.59994 8.76 2.31994 7.97 2.78994L6.24 3.77994C5.33 4.29994 5.02 5.46994 5.54 6.37994C6.45 7.93994 5.71 9.21994 3.9 9.21994C2.86 9.21994 2 10.0699 2 11.1199V12.8799C2 13.9199 2.85 14.7799 3.9 14.7799C5.71 14.7799 6.45 16.0599 5.54 17.6299C5.02 18.5399 5.33 19.6999 6.24 20.2199L7.97 21.2099C8.76 21.6799 9.78 21.3999 10.25 20.6099L10.36 20.4199C11.26 18.8499 12.74 18.8499 13.65 20.4199L13.76 20.6099C14.23 21.3999 15.25 21.6799 16.04 21.2099L17.77 20.2199C18.68 19.6999 18.99 18.5299 18.47 17.6299C17.56 16.0599 18.3 14.7799 20.11 14.7799C21.15 14.7799 22.01 13.9299 22.01 12.8799V11.1199C22 10.0799 21.15 9.21994 20.1 9.21994ZM12 15.2499C10.21 15.2499 8.75 13.7899 8.75 11.9999C8.75 10.2099 10.21 8.74994 12 8.74994C13.79 8.74994 15.25 10.2099 15.25 11.9999C15.25 13.7899 13.79 15.2499 12 15.2499Z",fill:"white"})],-1),p("span",null,"Account Setting",-1)])),p("button",{class:"bg-customButton text-white py-2 px-10 rounded-md hover:bg-dark-slate flex items-center justify-start gap-2",onClick:x},L[16]||(L[16]=[p("svg",{class:"size-6 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M15.24 22.27H15.11C10.67 22.27 8.53002 20.52 8.16002 16.6C8.12002 16.19 8.42002 15.82 8.84002 15.78C9.24002 15.74 9.62002 16.05 9.66002 16.46C9.95002 19.6 11.43 20.77 15.12 20.77H15.25C19.32 20.77 20.76 19.33 20.76 15.26V8.73998C20.76 4.66998 19.32 3.22998 15.25 3.22998H15.12C11.41 3.22998 9.93002 4.41998 9.66002 7.61998C9.61002 8.02998 9.26002 8.33998 8.84002 8.29998C8.42002 8.26998 8.12001 7.89998 8.15001 7.48998C8.49001 3.50998 10.64 1.72998 15.11 1.72998H15.24C20.15 1.72998 22.25 3.82998 22.25 8.73998V15.26C22.25 20.17 20.15 22.27 15.24 22.27Z",fill:"white"}),p("path",{d:"M15.0001 12.75H3.62012C3.21012 12.75 2.87012 12.41 2.87012 12C2.87012 11.59 3.21012 11.25 3.62012 11.25H15.0001C15.4101 11.25 15.7501 11.59 15.7501 12C15.7501 12.41 15.4101 12.75 15.0001 12.75Z",fill:"white"}),p("path",{d:"M5.84994 16.1C5.65994 16.1 5.46994 16.03 5.31994 15.88L1.96994 12.53C1.67994 12.24 1.67994 11.76 1.96994 11.47L5.31994 8.12003C5.60994 7.83003 6.08994 7.83003 6.37994 8.12003C6.66994 8.41003 6.66994 8.89003 6.37994 9.18003L3.55994 12L6.37994 14.82C6.66994 15.11 6.66994 15.59 6.37994 15.88C6.23994 16.03 6.03994 16.1 5.84994 16.1Z",fill:"white"})],-1),p("span",null,"Logout",-1)]))])]),p("div",UD,[p("div",zD,[L[20]||(L[20]=p("h3",{class:"text-2xl font-semibold mb-4"},"My Activity",-1)),p("div",HD,[p("table",VD,[L[19]||(L[19]=p("thead",{class:"bg-gray-50"},[p("tr",null,[p("th",{scope:"col",class:"px-6 py-3 text-left text-sm font-medium text-gray-700 uppercase tracking-wider"}," Title "),p("th",{scope:"col",class:"px-6 py-3 text-left text-sm font-medium text-gray-700 uppercase tracking-wider"}," Date/Time "),p("th",{scope:"col",class:"px-6 py-3 text-left text-sm font-medium text-gray-700 uppercase tracking-wider"}," Status "),p("th",{scope:"col",class:"px-6 py-3 text-left text-sm font-medium text-gray-700 uppercase tracking-wider"}," Requirement/Certificate ")])],-1)),p("tbody",qD,[(j(!0),z(Kt,null,pe(s.value,P=>(j(),z("tr",{key:P.title,class:"hover:bg-gray-100",onClick:V=>u(P)},[p("td",GD,J(P.title),1),p("td",YD,J(P.schedule?y(P.schedule):y(P.deadlineOfSubmission)||""),1),p("td",{class:fe(["px-6 py-4 text-sm font-medium",{"text-green-600":P.status==="Registered"||P.status==="Applied","text-yellow-600":P.status==="Scheduled","text-red-600":P.status==="Cancelled"}])},J(P.status),3),p("td",KD,[P.type==="career"?(j(),z("button",{key:0,type:"button",class:fe(["px-3 py-1 rounded text-white",P.requirement_directory||P.applicationID?"bg-blue-500 hover:bg-blue-600 cursor-pointer":"bg-gray-300 cursor-not-allowed"]),onClick:me(V=>A(P,V),["stop"])}," Download Requirement ",10,XD)):(j(),z("button",{key:1,type:"button",class:fe(["px-3 py-1 rounded text-white",P.status?.toLowerCase()==="attended"?"bg-green-500 hover:bg-green-600 cursor-pointer":"bg-gray-300 cursor-not-allowed"]),disabled:P.status?.toLowerCase()!=="attended",onClick:me(V=>P.status?.toLowerCase()==="attended"?I(P,V):null,["stop"])},J(P.status?.toLowerCase()==="attended"?"Download Certificate":"Certificate Unavailable"),11,ZD))])],8,WD))),128))])])])])])]),p("dialog",{ref_key:"careerModal",ref:o,class:"modal sm:modal-middle z-50"},[l.value?(j(),z("div",JD,[p("div",QD,[p("button",{onClick:h,class:"btn btn-sm btn-circle absolute right-2 top-2"},"  "),l.value?(j(),z("div",tM,[p("h2",eM,J(l.value.title||l.value.career?.position),1),p("p",nM," Organization: "+J(l.value.organizationName||l.value.organization),1),p("p",null,[L[21]||(L[21]=p("strong",null,"Details:",-1)),Dt(" "+J(l.value.detailsAndInstructions||l.value.career?.detailsAndInstructions),1)]),p("p",null,[L[22]||(L[22]=p("strong",null,"Qualifications:",-1)),Dt(" "+J(l.value.qualifications||l.value.career?.qualifications),1)]),p("p",null,[L[23]||(L[23]=p("strong",null,"Requirements: ",-1)),Dt(" "+J(l.value.requirements),1)]),p("p",null,[L[24]||(L[24]=p("strong",null,"Application Address:",-1)),Dt(" "+J(l.value.applicationLetterAddress||l.value.career?.applicationLetterAddress),1)]),p("p",null,[L[25]||(L[25]=p("strong",null,"Deadline:",-1)),Dt(" "+J(y(l.value.deadlineOfSubmission||l.value.career?.deadlineOfSubmission)),1)]),L[30]||(L[30]=p("div",{class:"divider"},null,-1)),l.value.interviewSchedule?Ct("",!0):(j(),z("p",sM," Application is still being processed. ")),l.value.interviewSchedule||l.value.interviewMode||l.value.interviewLink||l.value.interviewLocation?(j(),z("div",iM,[l.value.interviewSchedule?(j(),z("p",rM,[L[26]||(L[26]=p("strong",null,"Interview Schedule:",-1)),Dt(" "+J(y(l.value.interviewSchedule)),1)])):Ct("",!0),l.value.interviewMode?(j(),z("p",oM,[L[27]||(L[27]=p("strong",null,"Mode:",-1)),Dt(" "+J(l.value.interviewMode),1)])):Ct("",!0),l.value.interviewLink?(j(),z("p",aM,[L[28]||(L[28]=p("strong",null,"Link:",-1)),p("a",{href:l.value.interviewLink,target:"_blank"},J(l.value.interviewLink),9,lM)])):Ct("",!0),l.value.interviewLocation?(j(),z("p",cM,[L[29]||(L[29]=p("strong",null,"Location:",-1)),Dt(" "+J(l.value.interviewLocation),1)])):Ct("",!0)])):Ct("",!0)])):Ct("",!0)])])):Ct("",!0)],512),p("dialog",{ref_key:"trainingModal",ref:a,class:"modal sm:modal-middle z-50"},[p("div",uM,[p("button",{onClick:g,class:"btn btn-sm btn-circle absolute right-2 top-2"},"  "),c.value?(j(),z("div",dM,[p("h2",hM,J(c.value.title),1),p("p",fM," Organization: "+J(c.value.organization?.name),1),p("p",null,[L[31]||(L[31]=p("strong",null,"Mode:",-1)),Dt(" "+J(c.value.mode),1)]),p("p",null,[L[32]||(L[32]=p("strong",null,"Details:",-1)),Dt(" "+J(c.value.description),1)]),c.value.location?(j(),z("p",pM,[L[33]||(L[33]=p("strong",null,"Location:",-1)),Dt(" "+J(c.value.location),1)])):Ct("",!0),c.value.trainingLink?(j(),z("p",gM,[L[34]||(L[34]=p("strong",null,"Link:",-1)),p("a",{href:c.value.trainingLink,target:"_blank",class:"text-blue-500 underline"},J(c.value.trainingLink),9,mM)])):Ct("",!0),p("p",null,[L[35]||(L[35]=p("strong",null,"Schedule:",-1)),Dt(" "+J(y(c.value.schedule)),1)]),c.value.attendance_key?(j(),z("div",bM,[L[36]||(L[36]=p("p",{class:"text-sm font-semibold mb-2"}," Scan this QR Code for Attendance ",-1)),Ce(gc,{value:f.value,size:200,level:"H",class:"mx-auto"},null,8,["value"]),p("p",vM," Expires at: "+J(y(c.value.end_time)),1)])):(j(),z("div",yM,L[37]||(L[37]=[p("div",{class:"divider"},null,-1),p("p",{class:"text-sm text-gray-500 text-center"}," QR Code not available yet or has expired. ",-1)])))])):Ct("",!0)])],512)]))}},gr=(n,t)=>{const e=n.__vccOpts||n;for(const[s,i]of t)e[s]=i;return e},_M={class:"min-h-screen w-full bg-white overflow-y-auto flex justify-center"},xM={class:"font-poppins w-full md:w-3/4 lg:w-2/3 xl:w-1/2 p-6"},CM={class:"pt-4 pb-2"},kM={class:"form-control mb-4"},AM={class:"form-control mb-4"},SM={class:"form-control mb-4"},EM={class:"form-control mb-4"},TM={class:"form-control mb-4"},LM={class:"form-control mb-4"},PM={class:"form-control mb-4 relative"},IM=["type"],DM={key:0},MM={key:1},RM={class:"form-control mb-4"},NM={class:"relative"},OM=["type"],FM={key:0},$M={key:1},BM={key:0,class:"text-red-500 text-sm mt-1"},jM={class:"flex items-center space-x-2 cursor-pointer mb-2"},UM={key:0,class:"fixed inset-0 flex items-center justify-center z-50",style:{"background-color":"rgba(255, 255, 255, 0.3)"}},zM={class:"bg-white p-6 rounded-lg w-96 relative"},HM={key:0,class:"fixed inset-0 flex items-center justify-center z-50",style:{"background-color":"rgba(0, 0, 0, 0.3)"}},VM={class:"bg-white p-6 rounded-lg shadow-lg max-w-sm w-full text-center relative"},qM={class:"text-sm mb-6 text-gray-600"},WM={class:"space-y-2"},GM={__name:"A_RegistrationForm",setup(n){const t=gi(),e=ut({firstName:"",middleName:"",lastName:"",address:"",emailAddress:"",phoneNumber:"",password:"",confirmPassword:"",message:"password does not match"}),s=ut(!1),i=ut(!1),r=ut(!1),o=ut(null),a=ut(""),l=ut([]);je(async()=>{try{const g=await At.get("https://pathfinder-development-production.up.railway.app/api/careers");l.value=g.data}catch(g){console.error("Error fetching careers:",g)}});const c=async()=>{if(!s.value){alert("You must accept the terms and conditions.");return}if(e.value.password!==e.value.confirmPassword){alert("Passwords do not match.");return}try{const g=await At.post("https://pathfinder-development-production.up.railway.app/api/applicants",{...e.value});o.value=g.data,a.value=e.value.emailAddress,r.value=!0}catch(g){if(g.response&&g.response.data.errors){const m=g.response.data.errors;alert(Object.values(m).flat().join(`
`))}else alert("Registration failed. Please try again.")}},u=()=>{r.value=!1,t.push("Login")},d=()=>{o.value?.verification_url&&navigator.clipboard.writeText(o.value.verification_url).then(()=>{alert("Verification link copied to clipboard!")}).catch(()=>{alert(`Failed to copy link. Please copy manually:
`+o.value.verification_url)})},f=ut(!1),h=ut(!1);return(g,m)=>(j(),z("div",_M,[p("div",xM,[p("div",CM,[p("button",{class:"btn btn-ghost btn-xs sm:btn-sm md:btn-md lg:btn-lg xl:btn-xl text-dark-slate",onClick:m[0]||(m[0]=b=>g.$router.push("Login"))},m[14]||(m[14]=[p("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 18l-6-6 6-6"})],-1)]))]),m[27]||(m[27]=p("h2",{class:"text-3xl font-semibold text-left mb-6 text-dark-slate pl-3"}," Create Account ",-1)),p("form",{onSubmit:me(c,["prevent"])},[p("div",kM,[Ut(p("input",{class:"input w-full bg-gray-100",type:"text",required:"",placeholder:"First Name","onUpdate:modelValue":m[1]||(m[1]=b=>e.value.firstName=b)},null,512),[[Wt,e.value.firstName]])]),p("div",AM,[Ut(p("input",{class:"input w-full bg-gray-100",type:"text",placeholder:"Middle Name","onUpdate:modelValue":m[2]||(m[2]=b=>e.value.middleName=b)},null,512),[[Wt,e.value.middleName]])]),p("div",SM,[Ut(p("input",{class:"input w-full bg-gray-100",type:"text",required:"",placeholder:"Last Name","onUpdate:modelValue":m[3]||(m[3]=b=>e.value.lastName=b)},null,512),[[Wt,e.value.lastName]])]),p("div",EM,[Ut(p("input",{class:"input w-full bg-gray-100",type:"text",required:"",placeholder:"Address","onUpdate:modelValue":m[4]||(m[4]=b=>e.value.address=b)},null,512),[[Wt,e.value.address]])]),p("div",TM,[Ut(p("input",{class:"input validator w-full bg-gray-100",type:"email",required:"",placeholder:"Email","onUpdate:modelValue":m[5]||(m[5]=b=>e.value.emailAddress=b)},null,512),[[Wt,e.value.emailAddress]]),m[15]||(m[15]=p("p",{class:"validator-hint hidden"},"Invalid Email",-1))]),p("div",LM,[Ut(p("input",{type:"tel",class:"input validator tabular-nums w-full bg-gray-100",required:"",placeholder:"Phone Number",minlength:"11",maxlength:"11",pattern:"[0-9]*",title:"Must be 11 digits","onUpdate:modelValue":m[6]||(m[6]=b=>e.value.phoneNumber=b)},null,512),[[Wt,e.value.phoneNumber]]),m[16]||(m[16]=p("p",{class:"hidden validator-hint"},"Must be 11 digits",-1))]),p("div",PM,[Ut(p("input",{type:f.value?"text":"password",class:"input validator w-full pr-10 bg-gray-100",required:"",placeholder:"Password","onUpdate:modelValue":m[7]||(m[7]=b=>e.value.password=b),pattern:"(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}",title:"Must contain at least 8 characters, including a number, a lowercase and an uppercase letter"},null,8,IM),[[xh,e.value.password]]),p("button",{type:"button",class:"absolute right-2 top-1/3 -translate-y-1/2 text-gray-500","aria-label":"Toggle confirm password visibility",onClick:m[8]||(m[8]=b=>f.value=!f.value)},[f.value?(j(),z("span",DM,m[17]||(m[17]=[p("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M15.5799 11.9999C15.5799 13.9799 13.9799 15.5799 11.9999 15.5799C10.0199 15.5799 8.41992 13.9799 8.41992 11.9999C8.41992 10.0199 10.0199 8.41992 11.9999 8.41992C13.9799 8.41992 15.5799 10.0199 15.5799 11.9999Z",stroke:"#292D32","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),p("path",{d:"M12.0001 20.27C15.5301 20.27 18.8201 18.19 21.1101 14.59C22.0101 13.18 22.0101 10.81 21.1101 9.39997C18.8201 5.79997 15.5301 3.71997 12.0001 3.71997C8.47009 3.71997 5.18009 5.79997 2.89009 9.39997C1.99009 10.81 1.99009 13.18 2.89009 14.59C5.18009 18.19 8.47009 20.27 12.0001 20.27Z",stroke:"#292D32","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))):(j(),z("span",MM,m[18]||(m[18]=[si('<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-25b794b2><path d="M14.5299 9.46992L9.46992 14.5299C8.81992 13.8799 8.41992 12.9899 8.41992 11.9999C8.41992 10.0199 10.0199 8.41992 11.9999 8.41992C12.9899 8.41992 13.8799 8.81992 14.5299 9.46992Z" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-25b794b2></path><path d="M17.8201 5.76998C16.0701 4.44998 14.0701 3.72998 12.0001 3.72998C8.47009 3.72998 5.18009 5.80998 2.89009 9.40998C1.99009 10.82 1.99009 13.19 2.89009 14.6C3.68009 15.84 4.60009 16.91 5.60009 17.77" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-25b794b2></path><path d="M8.41992 19.5299C9.55992 20.0099 10.7699 20.2699 11.9999 20.2699C15.5299 20.2699 18.8199 18.1899 21.1099 14.5899C22.0099 13.1799 22.0099 10.8099 21.1099 9.39993C20.7799 8.87993 20.4199 8.38993 20.0499 7.92993" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-25b794b2></path><path d="M15.5099 12.7C15.2499 14.11 14.0999 15.26 12.6899 15.52" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-25b794b2></path><path d="M9.47 14.53L2 22" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-25b794b2></path><path d="M22 2L14.53 9.47" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-25b794b2></path></svg>',1)])))]),m[19]||(m[19]=p("p",{class:"validator-hint text-gray-500 text-sm mt-1"},[p("i",null," *Must be at least 8 characters, and include a number, a lowercase letter, and an uppercase letter. ")],-1))]),p("div",RM,[p("div",NM,[Ut(p("input",{type:h.value?"text":"password",class:"input w-full pr-10 focus:outline-none focus:border-transparent bg-gray-100",required:"",placeholder:"Confirm Password",minlength:"8","onUpdate:modelValue":m[9]||(m[9]=b=>e.value.confirmPassword=b)},null,8,OM),[[xh,e.value.confirmPassword]]),p("button",{type:"button",class:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500",onClick:m[10]||(m[10]=b=>h.value=!h.value),"aria-label":"Toggle confirm password visibility"},[h.value?(j(),z("span",FM,m[20]||(m[20]=[p("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M15.5799 11.9999C15.5799 13.9799 13.9799 15.5799 11.9999 15.5799C10.0199 15.5799 8.41992 13.9799 8.41992 11.9999C8.41992 10.0199 10.0199 8.41992 11.9999 8.41992C13.9799 8.41992 15.5799 10.0199 15.5799 11.9999Z",stroke:"#292D32","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),p("path",{d:"M12.0001 20.27C15.5301 20.27 18.8201 18.19 21.1101 14.59C22.0101 13.18 22.0101 10.81 21.1101 9.39997C18.8201 5.79997 15.5301 3.71997 12.0001 3.71997C8.47009 3.71997 5.18009 5.79997 2.89009 9.39997C1.99009 10.81 1.99009 13.18 2.89009 14.59C5.18009 18.19 8.47009 20.27 12.0001 20.27Z",stroke:"#292D32","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))):(j(),z("span",$M,m[21]||(m[21]=[si('<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-25b794b2><path d="M14.5299 9.46992L9.46992 14.5299C8.81992 13.8799 8.41992 12.9899 8.41992 11.9999C8.41992 10.0199 10.0199 8.41992 11.9999 8.41992C12.9899 8.41992 13.8799 8.81992 14.5299 9.46992Z" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-25b794b2></path><path d="M17.8201 5.76998C16.0701 4.44998 14.0701 3.72998 12.0001 3.72998C8.47009 3.72998 5.18009 5.80998 2.89009 9.40998C1.99009 10.82 1.99009 13.19 2.89009 14.6C3.68009 15.84 4.60009 16.91 5.60009 17.77" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-25b794b2></path><path d="M8.41992 19.5299C9.55992 20.0099 10.7699 20.2699 11.9999 20.2699C15.5299 20.2699 18.8199 18.1899 21.1099 14.5899C22.0099 13.1799 22.0099 10.8099 21.1099 9.39993C20.7799 8.87993 20.4199 8.38993 20.0499 7.92993" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-25b794b2></path><path d="M15.5099 12.7C15.2499 14.11 14.0999 15.26 12.6899 15.52" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-25b794b2></path><path d="M9.47 14.53L2 22" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-25b794b2></path><path d="M22 2L14.53 9.47" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-25b794b2></path></svg>',1)])))])]),e.value.confirmPassword&&e.value.password!==e.value.confirmPassword?(j(),z("p",BM," Passwords do not match. ")):Ct("",!0)]),m[25]||(m[25]=p("div",{class:"divider"},null,-1)),p("div",null,[p("label",jM,[Ut(p("input",{type:"checkbox",class:"checkbox validator",required:"","onUpdate:modelValue":m[11]||(m[11]=b=>s.value=b)},null,512),[[wh,s.value]]),p("span",null,[p("a",{href:"#",class:"text-blue-500 underline",onClick:m[12]||(m[12]=me(b=>i.value=!0,["prevent"]))}," Accept all terms and conditions. ")])]),i.value?(j(),z("div",UM,[p("div",zM,[m[22]||(m[22]=p("h2",{class:"text-lg font-bold mb-4"},"Terms and Conditions",-1)),m[23]||(m[23]=p("p",{class:"text-sm mb-4"}," By using this system and submitting your personal information, you acknowledge and agree that: ",-1)),m[24]||(m[24]=p("p",{class:"text-sm mb-4"},[Dt(" You voluntarily consent to the collection, processing, and storage of your personal data by the system. Your personal data will be handled in accordance with the Data Privacy Act of 2012 (Republic Act No. 10173), ensuring its confidentiality, integrity, and security. Your personal data will be used solely for legitimate purposes related to the services provided by this system. You have the right to access, correct, or request deletion of your personal data as provided under the law. "),p("br"),p("br"),Dt(" By checking the box and proceeding, you indicate your understanding and acceptance of these terms. ")],-1)),p("button",{class:"absolute top-2 right-2 text-gray-500 hover:text-gray-800",onClick:m[13]||(m[13]=b=>g.showModal=!1)},"  ")])])):Ct("",!0)]),m[26]||(m[26]=p("div",{class:"card-actions justify-end pt-4 pb-20"},[p("button",{type:"submit",class:"btn w-2/4 bg-customButton hover:bg-dark-slate text-white"}," Register ")],-1))],32)]),r.value?(j(),z("div",HM,[p("div",VM,[m[30]||(m[30]=si('<div class="mb-4" data-v-25b794b2><svg class="mx-auto h-16 w-16 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-25b794b2><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" data-v-25b794b2></path></svg></div><h2 class="text-lg font-bold text-blue-600 mb-4" data-v-25b794b2> Verify Your Email Address </h2><p class="text-sm mb-4 text-gray-700" data-v-25b794b2> Your account has been created successfully! </p>',3)),p("p",qM,[m[28]||(m[28]=Dt(" Please check your email (")),p("strong",null,J(a.value||e.value.emailAddress),1),m[29]||(m[29]=Dt(") and click the verification link to activate your account. "))]),p("div",WM,[p("button",{class:"btn btn-primary w-full bg-dark-slate text-white",onClick:u}," Go to Login "),o.value?.verification_url?(j(),z("button",{key:0,class:"btn btn-secondary w-full bg-gray-200 text-gray-700 text-xs",onClick:d}," Copy Verification Link ")):Ct("",!0)])])])):Ct("",!0)]))}},YM=gr(GM,[["__scopeId","data-v-25b794b2"]]),Er=At.create({baseURL:"https://pathfinder-development-production.up.railway.app/api"});Er.interceptors.request.use(n=>{const t=localStorage.getItem("token");return t&&(n.headers.Authorization=`Bearer ${t}`),n});const KM={class:"font-poppins pb-20 min-h-screen flex items-center justify-center p-4"},XM={class:"pt-10 pb-2"},ZM={class:"form-control mb-4"},JM={class:"form-control mb-4"},QM={class:"form-control mb-4"},tR={class:"form-control mb-4"},eR={class:"form-control mb-4"},nR={class:"form-control mb-4 relative"},sR=["type"],iR={key:0},rR={key:1},oR={class:"form-control mb-4"},aR={class:"relative"},lR=["type"],cR={key:0},uR={key:1},dR={key:0,class:"text-red-500 text-sm mt-1"},hR={class:"flex items-center space-x-2 cursor-pointer mb-2"},fR={key:0,class:"fixed inset-0 flex items-center justify-center z-50",style:{"background-color":"rgba(255, 255, 255, 0.3)"}},pR={class:"bg-white p-6 rounded-lg w-96 relative"},gR={key:0,class:"fixed inset-0 flex items-center justify-center",style:{"background-color":"rgba(0, 0, 0, 0.5)","z-index":"9999"}},mR={class:"bg-white p-6 rounded-lg shadow-lg max-w-sm w-full text-center relative"},bR={class:"text-sm mb-6 text-gray-600"},vR={class:"space-y-2"},yR={__name:"O_RegistrationForm",setup(n){const t=gi(),e=ut({name:"",location:"",websiteURL:"",emailAddress:"",phoneNumber:"",password:"",confirmPassword:""}),s=ut(!1),i=ut(!1),r=ut(!1),o=ut(null),a=ut(""),l=async()=>{if(s.value&&e.value.password===e.value.confirmPassword)try{const{confirmPassword:h,...g}=e.value,m=await At.post("https://pathfinder-development-production.up.railway.app/api/organization",g);console.log("Registration response:",m),console.log("Response status:",m.status),console.log("Response data:",m.data),o.value=m.data,m.data.verification_url&&(o.value.verification_url=m.data.verification_url),a.value=e.value.emailAddress,console.log("Setting showSuccessModal to true"),r.value=!0,console.log("showSuccessModal value:",r.value),await Si(),console.log("After nextTick, showSuccessModal:",r.value),e.value={name:"",location:"",websiteURL:"",emailAddress:"",phoneNumber:"",password:"",confirmPassword:""},s.value=!1}catch(h){if(console.error("Registration error:",h),console.error("Error response:",h.response),console.error("Error data:",h.response?.data),h.response?.status===201||h.response?.status>=200&&h.response?.status<300){o.value=h.response.data.organization||h.response.data,a.value=e.value.emailAddress,r.value=!0,e.value={name:"",location:"",websiteURL:"",emailAddress:"",phoneNumber:"",password:"",confirmPassword:""},s.value=!1;return}if(h.response?.status===422&&h.response?.data?.errors){const g=h.response.data.errors;let m=`Validation errors:
`;Object.keys(g).forEach(b=>{m+=`${b}: ${g[b].join(", ")}
`}),alert(m)}else alert(h.response?.data?.message||"Registration failed. Please try again.")}},c=()=>{r.value=!1,t.push("Login")},u=()=>{o.value?.verification_url&&navigator.clipboard.writeText(o.value.verification_url).then(()=>{alert("Verification link copied to clipboard!")}).catch(()=>{alert(`Failed to copy link. Please copy manually:
`+o.value.verification_url)})},d=ut(!1),f=ut(!1);return(h,g)=>(j(),z("div",KM,[p("div",null,[p("div",null,[p("div",XM,[p("button",{class:"btn btn-ghost btn-xs sm:btn-sm md:btn-md lg:btn-lg xl:btn-xl text-dark-slate",onClick:g[0]||(g[0]=m=>h.$router.push("Login"))},g[13]||(g[13]=[p("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 18l-6-6 6-6"})],-1)]))]),g[14]||(g[14]=p("h2",{class:"text-3xl font-semibold text-left mb-6 text-dark-slate pl-3"}," Create Account ",-1))]),p("form",{onSubmit:me(l,["prevent"])},[p("div",ZM,[Ut(p("input",{class:"input w-full bg-gray-100",type:"text",required:"",placeholder:"Organization Name",name:"name","onUpdate:modelValue":g[1]||(g[1]=m=>e.value.name=m)},null,512),[[Wt,e.value.name]])]),p("div",JM,[Ut(p("input",{class:"input w-full bg-gray-100",type:"text",required:"",placeholder:"Location",name:"location","onUpdate:modelValue":g[2]||(g[2]=m=>e.value.location=m)},null,512),[[Wt,e.value.location]])]),p("div",QM,[Ut(p("input",{class:"input w-full bg-gray-100",type:"url",placeholder:"Website URL",name:"websiteURL","onUpdate:modelValue":g[3]||(g[3]=m=>e.value.websiteURL=m)},null,512),[[Wt,e.value.websiteURL]])]),p("div",tR,[Ut(p("input",{class:"input validator w-full bg-gray-100",type:"email",required:"",placeholder:"Email",name:"emailAddress","onUpdate:modelValue":g[4]||(g[4]=m=>e.value.emailAddress=m)},null,512),[[Wt,e.value.emailAddress]]),g[15]||(g[15]=p("p",{class:"validator-hint hidden"},"Invalid Email",-1))]),p("div",eR,[Ut(p("input",{type:"tel",class:"input validator tabular-nums w-full bg-gray-100",required:"",placeholder:"Phone Number",minlength:"11",maxlength:"11",pattern:"[0-9]*",title:"Must be 11 digits","onUpdate:modelValue":g[5]||(g[5]=m=>e.value.phoneNumber=m)},null,512),[[Wt,e.value.phoneNumber]]),g[16]||(g[16]=p("p",{class:"hidden validator-hint"},"Must be 11 digits",-1))]),p("div",nR,[Ut(p("input",{type:d.value?"text":"password",class:"input validator w-full pr-10 bg-gray-100",required:"",placeholder:"Password","onUpdate:modelValue":g[6]||(g[6]=m=>e.value.password=m),pattern:"(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}",title:"Must contain at least 8 characters, including a number, a lowercase and an uppercase letter"},null,8,sR),[[xh,e.value.password]]),p("button",{type:"button",class:"absolute right-2 top-1/3 -translate-y-1/2 text-gray-500","aria-label":"Toggle confirm password visibility",onClick:g[7]||(g[7]=m=>d.value=!d.value)},[d.value?(j(),z("span",iR,g[17]||(g[17]=[p("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M15.5799 11.9999C15.5799 13.9799 13.9799 15.5799 11.9999 15.5799C10.0199 15.5799 8.41992 13.9799 8.41992 11.9999C8.41992 10.0199 10.0199 8.41992 11.9999 8.41992C13.9799 8.41992 15.5799 10.0199 15.5799 11.9999Z",stroke:"#292D32","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),p("path",{d:"M12.0001 20.27C15.5301 20.27 18.8201 18.19 21.1101 14.59C22.0101 13.18 22.0101 10.81 21.1101 9.39997C18.8201 5.79997 15.5301 3.71997 12.0001 3.71997C8.47009 3.71997 5.18009 5.79997 2.89009 9.39997C1.99009 10.81 1.99009 13.18 2.89009 14.59C5.18009 18.19 8.47009 20.27 12.0001 20.27Z",stroke:"#292D32","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))):(j(),z("span",rR,g[18]||(g[18]=[si('<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-863e4fd8><path d="M14.5299 9.46992L9.46992 14.5299C8.81992 13.8799 8.41992 12.9899 8.41992 11.9999C8.41992 10.0199 10.0199 8.41992 11.9999 8.41992C12.9899 8.41992 13.8799 8.81992 14.5299 9.46992Z" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-863e4fd8></path><path d="M17.8201 5.76998C16.0701 4.44998 14.0701 3.72998 12.0001 3.72998C8.47009 3.72998 5.18009 5.80998 2.89009 9.40998C1.99009 10.82 1.99009 13.19 2.89009 14.6C3.68009 15.84 4.60009 16.91 5.60009 17.77" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-863e4fd8></path><path d="M8.41992 19.5299C9.55992 20.0099 10.7699 20.2699 11.9999 20.2699C15.5299 20.2699 18.8199 18.1899 21.1099 14.5899C22.0099 13.1799 22.0099 10.8099 21.1099 9.39993C20.7799 8.87993 20.4199 8.38993 20.0499 7.92993" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-863e4fd8></path><path d="M15.5099 12.7C15.2499 14.11 14.0999 15.26 12.6899 15.52" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-863e4fd8></path><path d="M9.47 14.53L2 22" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-863e4fd8></path><path d="M22 2L14.53 9.47" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-863e4fd8></path></svg>',1)])))]),g[19]||(g[19]=p("p",{class:"validator-hint text-gray-500 text-sm mt-1"},[p("i",null," *Must be at least 8 characters, and include a number, a lowercase letter, and an uppercase letter. ")],-1))]),p("div",oR,[p("div",aR,[Ut(p("input",{type:f.value?"text":"password",class:"input w-full pr-10 focus:outline-none focus:border-transparent bg-gray-100",required:"",placeholder:"Confirm Password",minlength:"8","onUpdate:modelValue":g[8]||(g[8]=m=>e.value.confirmPassword=m)},null,8,lR),[[xh,e.value.confirmPassword]]),p("button",{type:"button",class:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500",onClick:g[9]||(g[9]=m=>f.value=!f.value),"aria-label":"Toggle confirm password visibility"},[f.value?(j(),z("span",cR,g[20]||(g[20]=[p("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M15.5799 11.9999C15.5799 13.9799 13.9799 15.5799 11.9999 15.5799C10.0199 15.5799 8.41992 13.9799 8.41992 11.9999C8.41992 10.0199 10.0199 8.41992 11.9999 8.41992C13.9799 8.41992 15.5799 10.0199 15.5799 11.9999Z",stroke:"#292D32","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),p("path",{d:"M12.0001 20.27C15.5301 20.27 18.8201 18.19 21.1101 14.59C22.0101 13.18 22.0101 10.81 21.1101 9.39997C18.8201 5.79997 15.5301 3.71997 12.0001 3.71997C8.47009 3.71997 5.18009 5.79997 2.89009 9.39997C1.99009 10.81 1.99009 13.18 2.89009 14.59C5.18009 18.19 8.47009 20.27 12.0001 20.27Z",stroke:"#292D32","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))):(j(),z("span",uR,g[21]||(g[21]=[si('<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-863e4fd8><path d="M14.5299 9.46992L9.46992 14.5299C8.81992 13.8799 8.41992 12.9899 8.41992 11.9999C8.41992 10.0199 10.0199 8.41992 11.9999 8.41992C12.9899 8.41992 13.8799 8.81992 14.5299 9.46992Z" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-863e4fd8></path><path d="M17.8201 5.76998C16.0701 4.44998 14.0701 3.72998 12.0001 3.72998C8.47009 3.72998 5.18009 5.80998 2.89009 9.40998C1.99009 10.82 1.99009 13.19 2.89009 14.6C3.68009 15.84 4.60009 16.91 5.60009 17.77" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-863e4fd8></path><path d="M8.41992 19.5299C9.55992 20.0099 10.7699 20.2699 11.9999 20.2699C15.5299 20.2699 18.8199 18.1899 21.1099 14.5899C22.0099 13.1799 22.0099 10.8099 21.1099 9.39993C20.7799 8.87993 20.4199 8.38993 20.0499 7.92993" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-863e4fd8></path><path d="M15.5099 12.7C15.2499 14.11 14.0999 15.26 12.6899 15.52" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-863e4fd8></path><path d="M9.47 14.53L2 22" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-863e4fd8></path><path d="M22 2L14.53 9.47" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-863e4fd8></path></svg>',1)])))])]),e.value.confirmPassword&&e.value.password!==e.value.confirmPassword?(j(),z("p",dR," Passwords do not match. ")):Ct("",!0)]),p("div",null,[p("label",hR,[Ut(p("input",{type:"checkbox",class:"checkbox validator",required:"","onUpdate:modelValue":g[10]||(g[10]=m=>s.value=m)},null,512),[[wh,s.value]]),p("span",null,[p("a",{href:"#",class:"text-blue-500 underline",onClick:g[11]||(g[11]=me(m=>i.value=!0,["prevent"]))}," Accept all terms and conditions. ")])]),i.value?(j(),z("div",fR,[p("div",pR,[g[22]||(g[22]=p("h2",{class:"text-lg font-bold mb-4"},"Terms and Conditions",-1)),g[23]||(g[23]=p("p",{class:"text-sm mb-4"}," By using this system and submitting your personal information, you acknowledge and agree that: ",-1)),g[24]||(g[24]=p("p",{class:"text-sm mb-4"},[Dt(" You voluntarily consent to the collection, processing, and storage of your personal data by the system. Your personal data will be handled in accordance with the Data Privacy Act of 2012 (Republic Act No. 10173), ensuring its confidentiality, integrity, and security. Your personal data will be used solely for legitimate purposes related to the services provided by this system. You have the right to access, correct, or request deletion of your personal data as provided under the law. "),p("br"),p("br"),Dt(" By checking the box and proceeding, you indicate your understanding and acceptance of these terms. ")],-1)),p("button",{class:"absolute top-2 right-2 text-gray-500 hover:text-gray-800",onClick:g[12]||(g[12]=m=>i.value=!1)},"  ")])])):Ct("",!0)]),g[25]||(g[25]=p("div",{class:"card-actions justify-end pt-4"},[p("button",{class:"btn w-2/4 bg-customButton hover:bg-dark-slate text-white"}," Register ")],-1))],32)]),r.value?(j(),z("div",gR,[p("div",mR,[g[28]||(g[28]=si('<div class="mb-4" data-v-863e4fd8><svg class="mx-auto h-16 w-16 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-863e4fd8><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" data-v-863e4fd8></path></svg></div><h2 class="text-lg font-bold text-blue-600 mb-4" data-v-863e4fd8> Verify Your Email Address </h2><p class="text-sm mb-4 text-gray-700" data-v-863e4fd8> Your organization account has been created successfully! </p>',3)),p("p",bR,[g[26]||(g[26]=Dt(" Please check your email (")),p("strong",null,J(a.value||e.value.emailAddress),1),g[27]||(g[27]=Dt(") and click the verification link to activate your account. "))]),p("div",vR,[p("button",{class:"btn btn-primary w-full bg-dark-slate text-white",onClick:c}," Go to Login "),o.value?.verification_url?(j(),z("button",{key:0,class:"btn btn-secondary w-full bg-gray-200 text-gray-700 text-xs",onClick:u}," Copy Verification Link ")):Ct("",!0)])])])):Ct("",!0)]))}},wR=gr(yR,[["__scopeId","data-v-863e4fd8"]]),V5=C5("regStore",()=>{const n=ws({}),t=ut(new Set),e=ut({});function s(f,h){e.value={...e.value,[f]:h}}const i=ut([]),r=ws({});async function o(){const f=localStorage.getItem("token");if(!f)return;const h=await At.get("https://pathfinder-development-production.up.railway.app/api/registrations",{headers:{Authorization:`Bearer ${f}`}});t.value.clear(),Object.keys(n).forEach(g=>delete n[g]),h.data.forEach(g=>{t.value.add(g.trainingID),n[g.trainingID]={registrationID:g.registrationID}}),localStorage.setItem("registeredPosts",JSON.stringify(n))}async function a(f){const h=typeof f=="object"?f.trainingID??f.TrainingID??f.id??f.ID:f;if(!h)return console.error("Invalid training ID:",f);const g=localStorage.getItem("token");if(!g)return alert("Please log in first");s(h,!0);try{if(t.value.has(h))await At.delete(`https://pathfinder-development-production.up.railway.app/api/registrations/${h}`,{headers:{Authorization:`Bearer ${g}`}}),t.value.delete(h),delete n[h];else{const m=await At.post("https://pathfinder-development-production.up.railway.app/api/registrations",{trainingID:h},{headers:{Authorization:`Bearer ${g}`}});t.value.add(h),n[h]={registrationID:m.data.data.registrationID}}localStorage.setItem("registeredPosts",JSON.stringify(n))}catch(m){throw console.error("Failed to toggle registration:",m),m}finally{s(h,!1)}}async function l(f){try{const h=localStorage.getItem("token"),g=await At.get(`https://pathfinder-development-production.up.railway.app/api/trainings/${f}`,{headers:{Authorization:`Bearer ${h}`}});g.data.attendance_link&&(n[f]||(n[f]={}),n[f].attendance_link=g.data.attendance_link,n[f].attendance_key=g.data.attendance_key)}catch(h){console.error("Failed to fetch QR:",h)}}async function c(){const f=localStorage.getItem("token");if(f)try{const{data:h}=await At.get("https://pathfinder-development-production.up.railway.app/api/bookmarks",{headers:{Authorization:`Bearer ${f}`}});i.value=h}catch(h){console.error("Failed to fetch bookmarks:",h)}}async function u(f){const h=localStorage.getItem("token");if(!h)return{error:"NO_TOKEN"};r[f]=!0;try{return i.value.includes(f)?await At.delete(`https://pathfinder-development-production.up.railway.app/api/bookmarks/${f}`,{headers:{Authorization:`Bearer ${h}`}}):await At.post("https://pathfinder-development-production.up.railway.app/api/bookmarks",{trainingID:f},{headers:{Authorization:`Bearer ${h}`}}),await c(),{success:!0}}catch(g){return console.error("Failed to toggle bookmark:",g),{error:!0}}finally{r[f]=!1}}function d(f){return i.value.includes(f)}return{registeredPosts:n,myRegistrations:t,loading:e,fetchMyRegistrations:o,toggleRegister:a,fetchTrainingQRCode:l,bookmarkedTrainings:i,bookmarkLoading:r,fetchBookmarks:c,toggleBookmark:u,isTrainingBookmarked:d}}),_R={class:"font-poppins min-h-screen flex items-center justify-center p-4"},xR={class:"relative w-full max-w-md"},CR={class:"card bg-base-200 border-base-300 rounded-box border p-6 shadow-lg transition duration-300"},kR={class:"form-control mb-2"},AR={key:0,class:"validator-hint"},SR={class:"form-control relative mb-4"},ER=["type"],TR={key:0},LR={key:1},PR={key:0,class:"text-center mt-4 text-red-600 font-medium"},IR={class:"text-center mt-4"},DR={class:"text-sm text-gray-600"},MR={key:1,class:"toast toast-end toast-top z-50"},RR={class:"alert alert-error text-white"},NR={class:"bg-white rounded-lg p-6 max-w-md w-full mx-4 shadow-xl"},OR={class:"flex justify-between items-center mb-4"},FR={class:"mb-4"},$R={class:"text-sm text-gray-600 mb-4"},BR={class:"flex flex-col gap-2"},jR=["disabled"],UR={key:0},zR={key:1},HR={class:"text-sm"},VR={__name:"LoginForm",setup(n){const t=V5(),e=gi(),s=ut(!1),i=ut(""),r=ut(""),o=ut(!1),a=ut(!1),l=ut(""),c=ut(""),u=ut(!1),d=ut(!1),f=ut(""),h=ut("");ut("");const g=x=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(x),m=x=>/(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}/.test(x),b=x=>{l.value=x,setTimeout(()=>{l.value=""},3e3)},y=async()=>{if(o.value=!g(i.value),a.value=!m(r.value),c.value="",!(o.value||a.value))try{const x=await At.post("https://pathfinder-development-production.up.railway.app/api/login",{emailAddress:i.value,password:r.value}),_=x.data.user||x.data.organization,C=x.data.token,A=_.role||(_.adminID?"organization":"applicant");if(A==="organization"&&_.status==="pending"){b("Your organization account is not yet approved by the admin.");return}if(A==="organization"&&_.status==="rejected"){const R=x.data.reason;b(`Your registration was rejected. Reason: ${R}`);return}let I="";A==="organization"?I=_.organizationName||_.name||"Organization":A==="admin"?I=_.name||"Admin":I=`${_.firstName} ${_.lastName}`,localStorage.setItem("token",C),localStorage.setItem("user",JSON.stringify({..._,role:A,displayName:I})),await t.fetchMyRegistrations(),A==="organization"?e.push("/organization"):A==="admin"?e.push("/admin"):e.push("/app")}catch(x){if(console.error("FULL ERROR RESPONSE:",x),x.response?.status===403){let _=x.response.data;console.log("FULL RESPONSE DATA:",_);const C=_&&typeof _=="object"?_.reason:void 0;console.log("REJECTION REASON:",C);const A=C?`Your registration was rejected. Reason: ${C}`:_.message||"Your registration is not approved.";b(A);return}b("Invalid credentials. Please try again.")}};return(x,_)=>{const C=Qo("router-link");return j(),z("div",_R,[p("div",xR,[p("div",CR,[_[12]||(_[12]=p("h2",{class:"text-2xl font-semibold text-center mb-4 text-dark-slate"}," Login ",-1)),p("form",{onSubmit:me(y,["prevent"])},[p("div",kR,[Ut(p("input",{"onUpdate:modelValue":_[0]||(_[0]=A=>i.value=A),class:"input validator w-full",type:"email",required:"",placeholder:"Email"},null,512),[[Wt,i.value]]),o.value?(j(),z("p",AR,"Invalid Email")):Ct("",!0)]),p("div",SR,[Ut(p("input",{type:s.value?"text":"password",class:"w-full border rounded-lg input",required:"",placeholder:"Password","onUpdate:modelValue":_[1]||(_[1]=A=>r.value=A),pattern:"(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}",title:"Must contain at least 8 characters, including a number, a lowercase and an uppercase letter"},null,8,ER),[[xh,r.value]]),p("button",{type:"button",class:"absolute right-3 top-3 text-gray-500","aria-label":"Toggle confirm password visibility",onClick:_[2]||(_[2]=A=>s.value=!s.value)},[s.value?(j(),z("span",TR,_[7]||(_[7]=[p("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M15.5799 11.9999C15.5799 13.9799 13.9799 15.5799 11.9999 15.5799C10.0199 15.5799 8.41992 13.9799 8.41992 11.9999C8.41992 10.0199 10.0199 8.41992 11.9999 8.41992C13.9799 8.41992 15.5799 10.0199 15.5799 11.9999Z",stroke:"#292D32","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),p("path",{d:"M12.0001 20.27C15.5301 20.27 18.8201 18.19 21.1101 14.59C22.0101 13.18 22.0101 10.81 21.1101 9.39997C18.8201 5.79997 15.5301 3.71997 12.0001 3.71997C8.47009 3.71997 5.18009 5.79997 2.89009 9.39997C1.99009 10.81 1.99009 13.18 2.89009 14.59C5.18009 18.19 8.47009 20.27 12.0001 20.27Z",stroke:"#292D32","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))):(j(),z("span",LR,_[8]||(_[8]=[si('<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.5299 9.46992L9.46992 14.5299C8.81992 13.8799 8.41992 12.9899 8.41992 11.9999C8.41992 10.0199 10.0199 8.41992 11.9999 8.41992C12.9899 8.41992 13.8799 8.81992 14.5299 9.46992Z" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M17.8201 5.76998C16.0701 4.44998 14.0701 3.72998 12.0001 3.72998C8.47009 3.72998 5.18009 5.80998 2.89009 9.40998C1.99009 10.82 1.99009 13.19 2.89009 14.6C3.68009 15.84 4.60009 16.91 5.60009 17.77" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M8.41992 19.5299C9.55992 20.0099 10.7699 20.2699 11.9999 20.2699C15.5299 20.2699 18.8199 18.1899 21.1099 14.5899C22.0099 13.1799 22.0099 10.8099 21.1099 9.39993C20.7799 8.87993 20.4199 8.38993 20.0499 7.92993" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M15.5099 12.7C15.2499 14.11 14.0999 15.26 12.6899 15.52" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M9.47 14.53L2 22" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M22 2L14.53 9.47" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',1)])))])]),_[9]||(_[9]=p("div",{class:"card-actions justify-center"},[p("button",{type:"submit",class:"btn btn-primary w-3/4 bg-dark-slate text-white"}," Log in ")],-1))],32),c.value?(j(),z("p",PR,J(c.value),1)):Ct("",!0),p("div",IR,[p("p",DR,[_[11]||(_[11]=Dt(" Don't have an account? ")),Ce(C,{to:"/typeofaccount",class:"text-primary"},{default:hs(()=>_[10]||(_[10]=[Dt(" Register here. ")])),_:1,__:[10]})])]),l.value?(j(),z("div",MR,[p("div",RR,[p("span",null,J(l.value),1)])])):Ct("",!0)])]),u.value?(j(),z("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:_[6]||(_[6]=me((...A)=>x.closeVerificationModal&&x.closeVerificationModal(...A),["self"]))},[p("div",NR,[p("div",OR,[_[14]||(_[14]=p("h3",{class:"text-xl font-semibold text-gray-800"},"Verify Your Email",-1)),p("button",{onClick:_[3]||(_[3]=(...A)=>x.closeVerificationModal&&x.closeVerificationModal(...A)),class:"text-gray-500 hover:text-gray-700"},_[13]||(_[13]=[p("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),p("div",FR,[_[17]||(_[17]=p("div",{class:"flex items-center justify-center mb-4"},[p("svg",{class:"w-16 h-16 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})])],-1)),_[18]||(_[18]=p("p",{class:"text-gray-700 mb-2"}," Please verify your email address before logging in. ",-1)),p("p",$R,[_[15]||(_[15]=Dt(" We've sent a verification link to ")),p("strong",null,J(i.value),1),_[16]||(_[16]=Dt(". Please check your inbox and click the verification link. "))]),_[19]||(_[19]=p("p",{class:"text-sm text-gray-500 mb-4"}," Didn't receive the email? Check your spam folder or click the button below to resend. ",-1))]),p("div",BR,[p("button",{onClick:_[4]||(_[4]=(...A)=>x.resendVerificationEmail&&x.resendVerificationEmail(...A)),disabled:d.value,class:"btn btn-primary w-full bg-dark-slate text-white disabled:opacity-50"},[d.value?(j(),z("span",UR,"Sending...")):(j(),z("span",zR,"Resend Verification Email"))],8,jR),p("button",{onClick:_[5]||(_[5]=(...A)=>x.closeVerificationModal&&x.closeVerificationModal(...A)),class:"btn btn-outline w-full"}," Close ")]),f.value?(j(),z("div",{key:0,class:fe(["mt-4 p-3 rounded",h.value==="success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"])},[p("p",HR,J(f.value),1)],2)):Ct("",!0)])])):Ct("",!0)])}}},g_=C5("trainingStore",{state:()=>({trainings:[],qrCodes:{},activeTrainingId:null,qrExpireTimeouts:{}}),actions:{async fetchTrainings(){try{const n=await At.get("https://pathfinder-development-production.up.railway.app/api/trainings");this.trainings=n.data,this.autoGenerateQRs()}catch(n){console.error("Error fetching trainings:",n)}},async generateQR(n){try{const t=localStorage.getItem("token"),e=t?{Authorization:`Bearer ${t}`}:{},s=await At.post("https://pathfinder-development-production.up.railway.app/api/trainings/generate-qr",{trainingID:n.trainingID},{headers:e});this.qrCodes={...this.qrCodes,[n.trainingID]:{value:`https://pathfinder-development-production.up.railway.app/attendance/checkin?trainingID=${n.trainingID}&key=${s.data.key}`,expires_at:new Date(s.data.expires_at)}}}catch(t){console.error("QR GENERATION FAILED:",t.response?.data||t)}},autoGenerateQRs(){this.trainings.forEach(n=>{const t=new Date(n.schedule),e=new Date(n.end_time),s=new Date;s>=t&&s<e&&(!this.qrCodes[n.trainingID]||new Date(this.qrCodes[n.trainingID].expires_at)<s)&&this.generateQR(n)})},startPolling(){this.fetchTrainings(),setInterval(()=>this.fetchTrainings(),3e4)}}}),qR={key:0,open:"",class:"modal sm:modal-middle"},WR={class:"modal-box max-w-3xl relative font-poppins"},GR={class:"text-xl font-bold"},YR={class:"text-sm text-gray-600 mb-2"},KR={class:"my-4 flex justify-end gap-2"},XR=["disabled"],ZR={key:0,class:"animate-spin h-4 w-4 text-gray-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},JR={key:1},QR=["disabled"],tN={key:0,class:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},eN={key:1},nN={key:0},sN=["href"],iN={key:1},rN={class:"mb-4"},oN={key:0},aN={key:2,class:"mt-4 text-center"},lN={key:0,class:"flex flex-col items-center"},cN={class:"text-sm text-gray-600 mt-1"},uN={key:1},dN={__name:"trainingmodal",props:{isOpen:Boolean,training:Object,isRegistered:Boolean,isBookmarked:Boolean,bookmarkLoading:Boolean,registerLoading:Boolean},emits:["close","toggle-register","bookmark"],setup(n,{emit:t}){const e=g_(),s=ut(""),i=n;function r(d){if(!d)return!1;const f=new Date,h=new Date(d);return f>=h}const o=ut(""),a=ut(!1);let l=null;lo(()=>i.training,async d=>{if(!d||!d.end_time){o.value="",a.value=!0,s.value="";return}const f=new Date(d.end_time);clearInterval(l);const h=async()=>{const m=f-new Date;if(m<=0)o.value="00:00",a.value=!0,s.value="",clearInterval(l);else{const b=Math.floor(m/6e4).toString().padStart(2,"0"),y=Math.floor(m%6e4/1e3).toString().padStart(2,"0");if(o.value=`${b}:${y}`,a.value=!1,i.isRegistered&&!s.value&&r(d.schedule)){await e.generateQR(d);const x=e.qrCodes[d.trainingID];s.value=x?.value||""}}};h(),l=setInterval(h,1e3)},{immediate:!0}),oc(()=>clearInterval(l));function c(d){return d?new Date(d).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}):"N/A"}function u(d){return d?new Date(d).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"N/A"}return(d,f)=>n.isOpen?(j(),z("dialog",qR,[p("div",WR,[p("button",{class:"btn btn-sm btn-circle border-transparent bg-transparent absolute right-2 top-2",onClick:f[0]||(f[0]=h=>d.$emit("close"))},"  "),n.training?(j(),z(Kt,{key:0},[p("h2",GR,J(n.training.title||"Untitled Training"),1),p("p",YR," Organization: "+J(n.training.organization?.name||n.training.organizationName||"Unknown"),1),p("div",KR,[p("button",{class:"btn btn-outline btn-sm flex items-center justify-center space-x-2",onClick:f[1]||(f[1]=h=>d.$emit("bookmark",n.training.trainingID)),disabled:n.bookmarkLoading},[n.bookmarkLoading?(j(),z("svg",ZR,f[3]||(f[3]=[p("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),p("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8h4l-3 3 3 3h-4z"},null,-1)]))):(j(),z("span",JR,J(n.isBookmarked?"Bookmarked":"Bookmark"),1))],8,XR),p("button",{class:fe(["btn btn-sm flex items-center justify-center space-x-2 text-white",n.isRegistered?"bg-gray-500":"bg-customButton"]),onClick:f[2]||(f[2]=h=>d.$emit("toggle-register",n.training)),disabled:n.registerLoading},[n.registerLoading?(j(),z("svg",tN,f[4]||(f[4]=[p("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),p("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8h4l-3 3 3 3h-4z"},null,-1)]))):(j(),z("span",eN,J(n.isRegistered?"Unregister":"Register"),1))],10,QR)]),p("p",null,[f[5]||(f[5]=p("strong",null,"Mode:",-1)),Dt(" "+J(n.training.mode||n.training.Mode),1)]),p("p",null,[f[6]||(f[6]=p("strong",null,"Description:",-1)),Dt(" "+J(n.training.description),1)]),n.training.mode?.toLowerCase()==="online"?(j(),z("p",nN,[f[7]||(f[7]=p("strong",null,"Link:",-1)),p("a",{href:n.training.trainingLink,target:"_blank",class:"text-blue-500 underline"},J(n.training.trainingLink),9,sN)])):(j(),z("p",iN,[f[8]||(f[8]=p("strong",null,"Location:",-1)),Dt(" "+J(n.training.location),1)])),p("p",rN,[f[9]||(f[9]=p("strong",null,"Schedule:",-1)),Dt(" "+J(c(n.training.schedule))+" ",1),n.training.schedule?(j(),z("span",oN,"at "+J(u(n.training.schedule)),1)):Ct("",!0)]),n.isRegistered?(j(),z("div",aN,[s.value&&!a.value?(j(),z("div",lN,[Ce(gc,{value:s.value,size:120},null,8,["value"]),p("p",cN,"Expires in: "+J(o.value),1)])):(j(),z("div",uN,f[10]||(f[10]=[p("p",{class:"text-sm text-gray-500"},"QR code not yet generated or expired.",-1)])))])):Ct("",!0)],64)):Ct("",!0)])])):Ct("",!0)}},hN={class:"font-poppins"},fN={class:"bg-white m-3 p-4 rounded-lg"},pN={class:"space-y-4"},gN=["onClick"],mN={class:"font-semibold"},bN={class:"text-gray-700"},vN={key:0},yN={key:0},wN={key:1},_N={class:"toast toast-end toast-top z-50"},xN={__name:"Trainingpage",setup(n){const t=g_(),e=V5(),s=cn(()=>e.myRegistrations),i=ws({});ws({}),je(()=>{e.fetchMyRegistrations().then(()=>{})});const r=ut([]);ut(!1),ws({}),ut(null);const o=ut(null);ut(!1);const a=ut([]);ut(null);const l=ut([]),c=cn(()=>t.trainings.map(A=>{const I=r.value.find(R=>R.organizationID===A.organizationID);return{...A,organizationName:I?I.name:"Unknown"}}));async function u(A){o.value=A,C.value=!0,s.value.has(A.trainingID)&&b(A.schedule)&&await t.generateQR(A)}async function d(A){const I=localStorage.getItem("token");if(!I){h("PLEASE LOG IN FIRST","accent");return}i[A]=!0;try{f(A)?(await At.delete(`https://pathfinder-development-production.up.railway.app/api/bookmarks/${A}`,{headers:{Authorization:`Bearer ${I}`}}),h("Bookmark removed","info")):(await At.post("https://pathfinder-development-production.up.railway.app/api/bookmarks",{trainingID:A},{headers:{Authorization:`Bearer ${I}`}}),h("Bookmarked!","success")),await g()}catch(R){console.error("Failed to toggle bookmark:",R),h("Failed to toggle bookmark","error")}finally{i[A]=!1}}function f(A){return l.value.includes(A)}function h(A,I="info"){const R=Date.now();a.value.push({id:R,message:A,type:I}),setTimeout(()=>{a.value=a.value.filter(L=>L.id!==R)},3e3)}async function g(){const A=localStorage.getItem("token");if(!A)return;const{data:I}=await At.get("https://pathfinder-development-production.up.railway.app/api/bookmarks",{headers:{Authorization:`Bearer ${A}`}});l.value=I}async function m(){try{const A=localStorage.getItem("token"),I=await At.get("https://pathfinder-development-production.up.railway.app/api/organization",{headers:{Authorization:`Bearer ${A}`}});r.value=I.data}catch{}}function b(A){if(!A)return!1;const I=new Date,R=new Date(A);return I>=R}async function y(A){await e.toggleRegister(A.trainingID)}cn(()=>t.trainings),je(async()=>{await t.fetchTrainings(),await m(),await e.fetchBookmarks(),await e.fetchMyRegistrations(),t.autoGenerateQRs()});const x=ut(!1);function _(A){console.log("Event clicked:",A)}const C=ut(!1);return(A,I)=>(j(),z("main",hN,[p("div",fN,[I[4]||(I[4]=p("div",{class:"sticky top-0 z-10 bg-white pt-4 px-4 pb-2 border-b shadow-sm"},[p("h2",{class:"text-2xl font-bold mb-3 sticky top-0 bg-white z-10"}," Training ")],-1)),p("div",pN,[(j(!0),z(Kt,null,pe(c.value,R=>(j(),z("div",{key:R.trainingID,class:"p-4 bg-blue-gray rounded-lg hover:bg-gray-300 transition cursor-pointer flex justify-between items-center",onClick:L=>u(R)},[p("div",null,[p("h3",mN,J(R.title),1),p("p",bN,J(R.organization.name),1)]),s.value.has(R.trainingID)?(j(),z("div",vN,[Qe(t).qrCodes[R.trainingID]?.value&&new Date(R.end_time)>new Date?(j(),z("div",yN,[Ce(gc,{value:Qe(t).qrCodes[R.trainingID].value,size:80},null,8,["value"])])):(j(),z("div",wN,I[3]||(I[3]=[p("p",{class:"text-sm text-gray-500 text-center"}," QR code not yet generated or expired. ",-1)])))])):Ct("",!0)],8,gN))),128))])]),Ce(H5,{isOpen:x.value,onOpen:I[0]||(I[0]=R=>x.value=!0),onClose:I[1]||(I[1]=R=>x.value=!1),onEventClick:_},null,8,["isOpen"]),Ce(dN,{isOpen:C.value,training:o.value,isRegistered:s.value.has(o.value?.trainingID),isBookmarked:l.value.includes(o.value?.trainingID),bookmarkLoading:i[o.value?.trainingID],registerLoading:Qe(e).loading[o.value?.trainingID],onClose:I[2]||(I[2]=R=>C.value=!1),onToggleRegister:y,onBookmark:d},null,8,["isOpen","training","isRegistered","isBookmarked","bookmarkLoading","registerLoading"]),p("div",_N,[(j(!0),z(Kt,null,pe(a.value,R=>(j(),z("div",{key:R.id,class:fe(["alert",{"alert-info":R.type==="info","alert-success":R.type==="success","alert-accent":R.type==="accent"}])},J(R.message),3))),128))])]))}};var um=function(n,t){return um=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,s){e.__proto__=s}||function(e,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])},um(n,t)};function m_(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");um(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var wp=function(){return wp=Object.assign||function(t){for(var e,s=1,i=arguments.length;s<i;s++){e=arguments[s];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},wp.apply(this,arguments)};function zu(n,t){var e={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&t.indexOf(s)<0&&(e[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(n);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(n,s[i])&&(e[s[i]]=n[s[i]]);return e}function b_(n,t,e,s){var i=arguments.length,r=i<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,e):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,t,e,s);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(i<3?o(r):i>3?o(t,e,r):o(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r}function v_(n,t){return function(e,s){t(e,s,n)}}function y_(n,t,e,s,i,r){function o(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var a=s.kind,l=a==="getter"?"get":a==="setter"?"set":"value",c=!t&&n?s.static?n:n.prototype:null,u=t||(c?Object.getOwnPropertyDescriptor(c,s.name):{}),d,f=!1,h=e.length-1;h>=0;h--){var g={};for(var m in s)g[m]=m==="access"?{}:s[m];for(var m in s.access)g.access[m]=s.access[m];g.addInitializer=function(y){if(f)throw new TypeError("Cannot add initializers after decoration has completed");r.push(o(y||null))};var b=(0,e[h])(a==="accessor"?{get:u.get,set:u.set}:u[l],g);if(a==="accessor"){if(b===void 0)continue;if(b===null||typeof b!="object")throw new TypeError("Object expected");(d=o(b.get))&&(u.get=d),(d=o(b.set))&&(u.set=d),(d=o(b.init))&&i.unshift(d)}else(d=o(b))&&(a==="field"?i.unshift(d):u[l]=d)}c&&Object.defineProperty(c,s.name,u),f=!0}function w_(n,t,e){for(var s=arguments.length>2,i=0;i<t.length;i++)e=s?t[i].call(n,e):t[i].call(n);return s?e:void 0}function __(n){return typeof n=="symbol"?n:"".concat(n)}function x_(n,t,e){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:e?"".concat(e," ",t):t})}function C_(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)}function ce(n,t,e,s){function i(r){return r instanceof e?r:new e(function(o){o(r)})}return new(e||(e=Promise))(function(r,o){function a(u){try{c(s.next(u))}catch(d){o(d)}}function l(u){try{c(s.throw(u))}catch(d){o(d)}}function c(u){u.done?r(u.value):i(u.value).then(a,l)}c((s=s.apply(n,t||[])).next())})}function k_(n,t){var e={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},s,i,r,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(s)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(e=0)),e;)try{if(s=1,i&&(r=c[0]&2?i.return:c[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,c[1])).done)return r;switch(i=0,r&&(c=[c[0]&2,r.value]),c[0]){case 0:case 1:r=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(r=e.trys,!(r=r.length>0&&r[r.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!r||c[1]>r[0]&&c[1]<r[3])){e.label=c[1];break}if(c[0]===6&&e.label<r[1]){e.label=r[1],r=c;break}if(r&&e.label<r[2]){e.label=r[2],e.ops.push(c);break}r[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(n,e)}catch(u){c=[6,u],i=0}finally{s=r=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var hg=Object.create?function(n,t,e,s){s===void 0&&(s=e);var i=Object.getOwnPropertyDescriptor(t,e);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,s,i)}:function(n,t,e,s){s===void 0&&(s=e),n[s]=t[e]};function A_(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&hg(t,n,e)}function _p(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],s=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function q5(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var s=e.call(n),i,r=[],o;try{for(;(t===void 0||t-- >0)&&!(i=s.next()).done;)r.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(e=s.return)&&e.call(s)}finally{if(o)throw o.error}}return r}function S_(){for(var n=[],t=0;t<arguments.length;t++)n=n.concat(q5(arguments[t]));return n}function E_(){for(var n=0,t=0,e=arguments.length;t<e;t++)n+=arguments[t].length;for(var s=Array(n),i=0,t=0;t<e;t++)for(var r=arguments[t],o=0,a=r.length;o<a;o++,i++)s[i]=r[o];return s}function T_(n,t,e){if(e||arguments.length===2)for(var s=0,i=t.length,r;s<i;s++)(r||!(s in t))&&(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return n.concat(r||Array.prototype.slice.call(t))}function Lu(n){return this instanceof Lu?(this.v=n,this):new Lu(n)}function L_(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=e.apply(n,t||[]),i,r=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(g){return Promise.resolve(g).then(h,d)}}function a(h,g){s[h]&&(i[h]=function(m){return new Promise(function(b,y){r.push([h,m,b,y])>1||l(h,m)})},g&&(i[h]=g(i[h])))}function l(h,g){try{c(s[h](g))}catch(m){f(r[0][3],m)}}function c(h){h.value instanceof Lu?Promise.resolve(h.value.v).then(u,d):f(r[0][2],h)}function u(h){l("next",h)}function d(h){l("throw",h)}function f(h,g){h(g),r.shift(),r.length&&l(r[0][0],r[0][1])}}function P_(n){var t,e;return t={},s("next"),s("throw",function(i){throw i}),s("return"),t[Symbol.iterator]=function(){return this},t;function s(i,r){t[i]=n[i]?function(o){return(e=!e)?{value:Lu(n[i](o)),done:!1}:r?r(o):o}:r}}function I_(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof _p=="function"?_p(n):n[Symbol.iterator](),e={},s("next"),s("throw"),s("return"),e[Symbol.asyncIterator]=function(){return this},e);function s(r){e[r]=n[r]&&function(o){return new Promise(function(a,l){o=n[r](o),i(a,l,o.done,o.value)})}}function i(r,o,a,l){Promise.resolve(l).then(function(c){r({value:c,done:a})},o)}}function D_(n,t){return Object.defineProperty?Object.defineProperty(n,"raw",{value:t}):n.raw=t,n}var CN=Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n.default=t},dm=function(n){return dm=Object.getOwnPropertyNames||function(t){var e=[];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[e.length]=s);return e},dm(n)};function M_(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var e=dm(n),s=0;s<e.length;s++)e[s]!=="default"&&hg(t,n,e[s]);return CN(t,n),t}function R_(n){return n&&n.__esModule?n:{default:n}}function N_(n,t,e,s){if(e==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?n!==t||!s:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?s:e==="a"?s.call(n):s?s.value:t.get(n)}function O_(n,t,e,s,i){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?n!==t||!i:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?i.call(n,e):i?i.value=e:t.set(n,e),e}function F_(n,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?t===n:n.has(t)}function $_(n,t,e){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var s,i;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=t[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=t[Symbol.dispose],e&&(i=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");i&&(s=function(){try{i.call(this)}catch(r){return Promise.reject(r)}}),n.stack.push({value:t,dispose:s,async:e})}else e&&n.stack.push({async:!0});return t}var kN=typeof SuppressedError=="function"?SuppressedError:function(n,t,e){var s=new Error(e);return s.name="SuppressedError",s.error=n,s.suppressed=t,s};function B_(n){function t(r){n.error=n.hasError?new kN(r,n.error,"An error was suppressed during disposal."):r,n.hasError=!0}var e,s=0;function i(){for(;e=n.stack.pop();)try{if(!e.async&&s===1)return s=0,n.stack.push(e),Promise.resolve().then(i);if(e.dispose){var r=e.dispose.call(e.value);if(e.async)return s|=2,Promise.resolve(r).then(i,function(o){return t(o),i()})}else s|=1}catch(o){t(o)}if(s===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return i()}function j_(n,t){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,s,i,r,o){return s?t?".jsx":".js":i&&(!r||!o)?e:i+r+"."+o.toLowerCase()+"js"}):n}const AN={__extends:m_,__assign:wp,__rest:zu,__decorate:b_,__param:v_,__esDecorate:y_,__runInitializers:w_,__propKey:__,__setFunctionName:x_,__metadata:C_,__awaiter:ce,__generator:k_,__createBinding:hg,__exportStar:A_,__values:_p,__read:q5,__spread:S_,__spreadArrays:E_,__spreadArray:T_,__await:Lu,__asyncGenerator:L_,__asyncDelegator:P_,__asyncValues:I_,__makeTemplateObject:D_,__importStar:M_,__importDefault:R_,__classPrivateFieldGet:N_,__classPrivateFieldSet:O_,__classPrivateFieldIn:F_,__addDisposableResource:$_,__disposeResources:B_,__rewriteRelativeImportExtension:j_},SN=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:$_,get __assign(){return wp},__asyncDelegator:P_,__asyncGenerator:L_,__asyncValues:I_,__await:Lu,__awaiter:ce,__classPrivateFieldGet:N_,__classPrivateFieldIn:F_,__classPrivateFieldSet:O_,__createBinding:hg,__decorate:b_,__disposeResources:B_,__esDecorate:y_,__exportStar:A_,__extends:m_,__generator:k_,__importDefault:R_,__importStar:M_,__makeTemplateObject:D_,__metadata:C_,__param:v_,__propKey:__,__read:q5,__rest:zu,__rewriteRelativeImportExtension:j_,__runInitializers:w_,__setFunctionName:x_,__spread:S_,__spreadArray:T_,__spreadArrays:E_,__values:_p,default:AN},Symbol.toStringTag,{value:"Module"})),EN=n=>n?(...t)=>n(...t):(...t)=>fetch(...t);class W5 extends Error{constructor(t,e="FunctionsError",s){super(t),this.name=e,this.context=s}}class TN extends W5{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Qy extends W5{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class t3 extends W5{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var hm;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(hm||(hm={}));class LN{constructor(t,{headers:e={},customFetch:s,region:i=hm.Any}={}){this.url=t,this.headers=e,this.region=i,this.fetch=EN(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return ce(this,arguments,void 0,function*(e,s={}){var i;let r,o;try{const{headers:a,method:l,body:c,signal:u,timeout:d}=s;let f={},{region:h}=s;h||(h=this.region);const g=new URL(`${this.url}/${e}`);h&&h!=="any"&&(f["x-region"]=h,g.searchParams.set("forceFunctionRegion",h));let m;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",m=c):typeof c=="string"?(f["Content-Type"]="text/plain",m=c):typeof FormData<"u"&&c instanceof FormData?m=c:(f["Content-Type"]="application/json",m=JSON.stringify(c)):m=c;let b=u;d&&(o=new AbortController,r=setTimeout(()=>o.abort(),d),u?(b=o.signal,u.addEventListener("abort",()=>o.abort())):b=o.signal);const y=yield this.fetch(g.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:m,signal:b}).catch(A=>{throw new TN(A)}),x=y.headers.get("x-relay-error");if(x&&x==="true")throw new Qy(y);if(!y.ok)throw new t3(y);let _=((i=y.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),C;return _==="application/json"?C=yield y.json():_==="application/octet-stream"||_==="application/pdf"?C=yield y.blob():_==="text/event-stream"?C=y:_==="multipart/form-data"?C=yield y.formData():C=yield y.text(),{data:C,error:null,response:y}}catch(a){return{data:null,error:a,response:a instanceof t3||a instanceof Qy?a.context:void 0}}finally{r&&clearTimeout(r)}})}}var vat=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function PN(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function IN(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var t=n.default;if(typeof t=="function"){var e=function s(){var i=!1;try{i=this instanceof s}catch{}return i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var i=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:function(){return n[s]}})}),e}var Ws={};const Hu=IN(SN);var e1={},n1={},s1={},i1={},r1={},o1={},e3;function U_(){if(e3)return o1;e3=1,Object.defineProperty(o1,"__esModule",{value:!0});class n extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}return o1.default=n,o1}var n3;function z_(){if(n3)return r1;n3=1,Object.defineProperty(r1,"__esModule",{value:!0});const t=Hu.__importDefault(U_());class e{constructor(i){var r,o;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(r=i.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=i.signal,this.isMaybeSingle=(o=i.isMaybeSingle)!==null&&o!==void 0?o:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,r){return this.headers=new Headers(this.headers),this.headers.set(i,r),this}then(i,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let a=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var c,u,d,f;let h=null,g=null,m=null,b=l.status,y=l.statusText;if(l.ok){if(this.method!=="HEAD"){const A=await l.text();A===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((c=this.headers.get("Accept"))===null||c===void 0)&&c.includes("application/vnd.pgrst.plan+text"))?g=A:g=JSON.parse(A))}const _=(u=this.headers.get("Prefer"))===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),C=(d=l.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");_&&C&&C.length>1&&(m=parseInt(C[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(h={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,m=null,b=406,y="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const _=await l.text();try{h=JSON.parse(_),Array.isArray(h)&&l.status===404&&(g=[],h=null,b=200,y="OK")}catch{l.status===404&&_===""?(b=204,y="No Content"):h={message:_}}if(h&&this.isMaybeSingle&&(!((f=h?.details)===null||f===void 0)&&f.includes("0 rows"))&&(h=null,b=200,y="OK"),h&&this.shouldThrowOnError)throw new t.default(h)}return{error:h,data:g,count:m,status:b,statusText:y}});return this.shouldThrowOnError||(a=a.catch(l=>{var c,u,d,f,h,g;let m="";const b=l?.cause;if(b){const y=(c=b?.message)!==null&&c!==void 0?c:"",x=(u=b?.code)!==null&&u!==void 0?u:"";m=`${(d=l?.name)!==null&&d!==void 0?d:"FetchError"}: ${l?.message}`,m+=`

Caused by: ${(f=b?.name)!==null&&f!==void 0?f:"Error"}: ${y}`,x&&(m+=` (${x})`),b?.stack&&(m+=`
${b.stack}`)}else m=(h=l?.stack)!==null&&h!==void 0?h:"";return{error:{message:`${(g=l?.name)!==null&&g!==void 0?g:"FetchError"}: ${l?.message}`,details:m,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(i,r)}returns(){return this}overrideTypes(){return this}}return r1.default=e,r1}var s3;function H_(){if(s3)return i1;s3=1,Object.defineProperty(i1,"__esModule",{value:!0});const t=Hu.__importDefault(z_());class e extends t.default{select(i){let r=!1;const o=(i??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:r=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${i}.${r?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:r,referencedTable:o=r}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${i}`),this}range(i,r,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(c,`${r-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:r=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:c="text"}={}){var u;const d=[i?"analyze":null,r?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),f=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${f}"; options=${d};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return i1.default=e,i1}var i3;function G5(){if(i3)return s1;i3=1,Object.defineProperty(s1,"__esModule",{value:!0});const t=Hu.__importDefault(H_()),e=new RegExp("[,()]");class s extends t.default{eq(r,o){return this.url.searchParams.append(r,`eq.${o}`),this}neq(r,o){return this.url.searchParams.append(r,`neq.${o}`),this}gt(r,o){return this.url.searchParams.append(r,`gt.${o}`),this}gte(r,o){return this.url.searchParams.append(r,`gte.${o}`),this}lt(r,o){return this.url.searchParams.append(r,`lt.${o}`),this}lte(r,o){return this.url.searchParams.append(r,`lte.${o}`),this}like(r,o){return this.url.searchParams.append(r,`like.${o}`),this}likeAllOf(r,o){return this.url.searchParams.append(r,`like(all).{${o.join(",")}}`),this}likeAnyOf(r,o){return this.url.searchParams.append(r,`like(any).{${o.join(",")}}`),this}ilike(r,o){return this.url.searchParams.append(r,`ilike.${o}`),this}ilikeAllOf(r,o){return this.url.searchParams.append(r,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(r,o){return this.url.searchParams.append(r,`ilike(any).{${o.join(",")}}`),this}is(r,o){return this.url.searchParams.append(r,`is.${o}`),this}in(r,o){const a=Array.from(new Set(o)).map(l=>typeof l=="string"&&e.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(r,`in.(${a})`),this}contains(r,o){return typeof o=="string"?this.url.searchParams.append(r,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(r,`cs.{${o.join(",")}}`):this.url.searchParams.append(r,`cs.${JSON.stringify(o)}`),this}containedBy(r,o){return typeof o=="string"?this.url.searchParams.append(r,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(r,`cd.{${o.join(",")}}`):this.url.searchParams.append(r,`cd.${JSON.stringify(o)}`),this}rangeGt(r,o){return this.url.searchParams.append(r,`sr.${o}`),this}rangeGte(r,o){return this.url.searchParams.append(r,`nxl.${o}`),this}rangeLt(r,o){return this.url.searchParams.append(r,`sl.${o}`),this}rangeLte(r,o){return this.url.searchParams.append(r,`nxr.${o}`),this}rangeAdjacent(r,o){return this.url.searchParams.append(r,`adj.${o}`),this}overlaps(r,o){return typeof o=="string"?this.url.searchParams.append(r,`ov.${o}`):this.url.searchParams.append(r,`ov.{${o.join(",")}}`),this}textSearch(r,o,{config:a,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const u=a===void 0?"":`(${a})`;return this.url.searchParams.append(r,`${c}fts${u}.${o}`),this}match(r){return Object.entries(r).forEach(([o,a])=>{this.url.searchParams.append(o,`eq.${a}`)}),this}not(r,o,a){return this.url.searchParams.append(r,`not.${o}.${a}`),this}or(r,{foreignTable:o,referencedTable:a=o}={}){const l=a?`${a}.or`:"or";return this.url.searchParams.append(l,`(${r})`),this}filter(r,o,a){return this.url.searchParams.append(r,`${o}.${a}`),this}}return s1.default=s,s1}var r3;function V_(){if(r3)return n1;r3=1,Object.defineProperty(n1,"__esModule",{value:!0});const t=Hu.__importDefault(G5());class e{constructor(i,{headers:r={},schema:o,fetch:a}){this.url=i,this.headers=new Headers(r),this.schema=o,this.fetch=a}select(i,r){const{head:o=!1,count:a}=r??{},l=o?"HEAD":"GET";let c=!1;const u=(i??"*").split("").map(d=>/\s/.test(d)&&!c?"":(d==='"'&&(c=!c),d)).join("");return this.url.searchParams.set("select",u),a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:r,defaultToNull:o=!0}={}){var a;const l="POST";if(r&&this.headers.append("Prefer",`count=${r}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const c=i.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(i,{onConflict:r,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){var c;const u="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const d=i.reduce((f,h)=>f.concat(Object.keys(h)),[]);if(d.length>0){const f=[...new Set(d)].map(h=>`"${h}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(i,{count:r}={}){var o;const a="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:i}={}){var r;const o="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}}return n1.default=e,n1}var o3;function DN(){if(o3)return e1;o3=1,Object.defineProperty(e1,"__esModule",{value:!0});const n=Hu,t=n.__importDefault(V_()),e=n.__importDefault(G5());class s{constructor(r,{headers:o={},schema:a,fetch:l}={}){this.url=r,this.headers=new Headers(o),this.schemaName=a,this.fetch=l}from(r){const o=new URL(`${this.url}/${r}`);return new t.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(r){return new s(this.url,{headers:this.headers,schema:r,fetch:this.fetch})}rpc(r,o={},{head:a=!1,get:l=!1,count:c}={}){var u;let d;const f=new URL(`${this.url}/rpc/${r}`);let h;a||l?(d=a?"HEAD":"GET",Object.entries(o).filter(([m,b])=>b!==void 0).map(([m,b])=>[m,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([m,b])=>{f.searchParams.append(m,b)})):(d="POST",h=o);const g=new Headers(this.headers);return c&&g.set("Prefer",`count=${c}`),new e.default({method:d,url:f,headers:g,schema:this.schemaName,body:h,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return e1.default=s,e1}var a3;function MN(){if(a3)return Ws;a3=1,Object.defineProperty(Ws,"__esModule",{value:!0}),Ws.PostgrestError=Ws.PostgrestBuilder=Ws.PostgrestTransformBuilder=Ws.PostgrestFilterBuilder=Ws.PostgrestQueryBuilder=Ws.PostgrestClient=void 0;const n=Hu,t=n.__importDefault(DN());Ws.PostgrestClient=t.default;const e=n.__importDefault(V_());Ws.PostgrestQueryBuilder=e.default;const s=n.__importDefault(G5());Ws.PostgrestFilterBuilder=s.default;const i=n.__importDefault(H_());Ws.PostgrestTransformBuilder=i.default;const r=n.__importDefault(z_());Ws.PostgrestBuilder=r.default;const o=n.__importDefault(U_());return Ws.PostgrestError=o.default,Ws.default={PostgrestClient:t.default,PostgrestQueryBuilder:e.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:r.default,PostgrestError:o.default},Ws}var q_=MN();const W_=PN(q_),RN=vk({__proto__:null,default:W_},[q_]),{PostgrestClient:NN,PostgrestQueryBuilder:yat,PostgrestFilterBuilder:wat,PostgrestTransformBuilder:_at,PostgrestBuilder:xat,PostgrestError:Cat}=W_||RN;class ON{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const e=process.versions;if(e&&e.node){const s=e.node,i=parseInt(s.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let e=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(e+=`

Suggested solution: ${t.workaround}`),new Error(e)}static createWebSocket(t,e){const s=this.getWebSocketConstructor();return new s(t,e)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const FN="2.83.0",$N=`realtime-js/${FN}`,G_="1.0.0",BN="2.0.0",l3=G_,fm=1e4,jN=1e3,UN=100;var Ul;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Ul||(Ul={}));var ys;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(ys||(ys={}));var or;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(or||(or={}));var pm;(function(n){n.websocket="websocket"})(pm||(pm={}));var zl;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(zl||(zl={}));class zN{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(t,e){if(this._isArrayBuffer(t.payload))return e(this._binaryEncodePush(t));if(t.event===this.BROADCAST&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return e(this._binaryEncodeUserBroadcastPush(t));let s=[t.join_ref,t.ref,t.topic,t.event,t.payload];return e(JSON.stringify(s))}_binaryEncodePush(t){var e,s;const{event:i,topic:r,payload:o}=t,a=(e=t.ref)!==null&&e!==void 0?e:"",l=(s=t.join_ref)!==null&&s!==void 0?s:"",c=this.META_LENGTH+l.length+a.length+r.length+i.length,u=new ArrayBuffer(this.HEADER_LENGTH+c);let d=new DataView(u),f=0;d.setUint8(f++,this.KINDS.push),d.setUint8(f++,l.length),d.setUint8(f++,a.length),d.setUint8(f++,r.length),d.setUint8(f++,i.length),Array.from(l,g=>d.setUint8(f++,g.charCodeAt(0))),Array.from(a,g=>d.setUint8(f++,g.charCodeAt(0))),Array.from(r,g=>d.setUint8(f++,g.charCodeAt(0))),Array.from(i,g=>d.setUint8(f++,g.charCodeAt(0)));var h=new Uint8Array(u.byteLength+o.byteLength);return h.set(new Uint8Array(u),0),h.set(new Uint8Array(o),u.byteLength),h.buffer}_binaryEncodeUserBroadcastPush(t){var e;return this._isArrayBuffer((e=t.payload)===null||e===void 0?void 0:e.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var e,s,i,r;const o=t.topic,a=(e=t.ref)!==null&&e!==void 0?e:"",l=(s=t.join_ref)!==null&&s!==void 0?s:"",c=t.payload.event,u=(r=(i=t.payload)===null||i===void 0?void 0:i.payload)!==null&&r!==void 0?r:new ArrayBuffer(0),d=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+c.length,f=new ArrayBuffer(this.HEADER_LENGTH+d);let h=new DataView(f),g=0;h.setUint8(g++,this.KINDS.userBroadcastPush),h.setUint8(g++,l.length),h.setUint8(g++,a.length),h.setUint8(g++,o.length),h.setUint8(g++,c.length),h.setUint8(g++,this.BINARY_ENCODING),Array.from(l,b=>h.setUint8(g++,b.charCodeAt(0))),Array.from(a,b=>h.setUint8(g++,b.charCodeAt(0))),Array.from(o,b=>h.setUint8(g++,b.charCodeAt(0))),Array.from(c,b=>h.setUint8(g++,b.charCodeAt(0)));var m=new Uint8Array(f.byteLength+u.byteLength);return m.set(new Uint8Array(f),0),m.set(new Uint8Array(u),f.byteLength),m.buffer}_encodeJsonUserBroadcastPush(t){var e,s,i,r;const o=t.topic,a=(e=t.ref)!==null&&e!==void 0?e:"",l=(s=t.join_ref)!==null&&s!==void 0?s:"",c=t.payload.event,u=(r=(i=t.payload)===null||i===void 0?void 0:i.payload)!==null&&r!==void 0?r:{},f=new TextEncoder().encode(JSON.stringify(u)).buffer,h=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+c.length,g=new ArrayBuffer(this.HEADER_LENGTH+h);let m=new DataView(g),b=0;m.setUint8(b++,this.KINDS.userBroadcastPush),m.setUint8(b++,l.length),m.setUint8(b++,a.length),m.setUint8(b++,o.length),m.setUint8(b++,c.length),m.setUint8(b++,this.JSON_ENCODING),Array.from(l,x=>m.setUint8(b++,x.charCodeAt(0))),Array.from(a,x=>m.setUint8(b++,x.charCodeAt(0))),Array.from(o,x=>m.setUint8(b++,x.charCodeAt(0))),Array.from(c,x=>m.setUint8(b++,x.charCodeAt(0)));var y=new Uint8Array(g.byteLength+f.byteLength);return y.set(new Uint8Array(g),0),y.set(new Uint8Array(f),g.byteLength),y.buffer}decode(t,e){if(this._isArrayBuffer(t)){let s=this._binaryDecode(t);return e(s)}if(typeof t=="string"){const s=JSON.parse(t),[i,r,o,a,l]=s;return e({join_ref:i,ref:r,topic:o,event:a,payload:l})}return e({})}_binaryDecode(t){const e=new DataView(t),s=e.getUint8(0),i=new TextDecoder;switch(s){case this.KINDS.push:return this._decodePush(t,e,i);case this.KINDS.reply:return this._decodeReply(t,e,i);case this.KINDS.broadcast:return this._decodeBroadcast(t,e,i);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,e,i)}}_decodePush(t,e,s){const i=e.getUint8(1),r=e.getUint8(2),o=e.getUint8(3);let a=this.HEADER_LENGTH+this.META_LENGTH-1;const l=s.decode(t.slice(a,a+i));a=a+i;const c=s.decode(t.slice(a,a+r));a=a+r;const u=s.decode(t.slice(a,a+o));a=a+o;const d=JSON.parse(s.decode(t.slice(a,t.byteLength)));return{join_ref:l,ref:null,topic:c,event:u,payload:d}}_decodeReply(t,e,s){const i=e.getUint8(1),r=e.getUint8(2),o=e.getUint8(3),a=e.getUint8(4);let l=this.HEADER_LENGTH+this.META_LENGTH;const c=s.decode(t.slice(l,l+i));l=l+i;const u=s.decode(t.slice(l,l+r));l=l+r;const d=s.decode(t.slice(l,l+o));l=l+o;const f=s.decode(t.slice(l,l+a));l=l+a;const h=JSON.parse(s.decode(t.slice(l,t.byteLength))),g={status:f,response:h};return{join_ref:c,ref:u,topic:d,event:or.reply,payload:g}}_decodeBroadcast(t,e,s){const i=e.getUint8(1),r=e.getUint8(2);let o=this.HEADER_LENGTH+2;const a=s.decode(t.slice(o,o+i));o=o+i;const l=s.decode(t.slice(o,o+r));o=o+r;const c=JSON.parse(s.decode(t.slice(o,t.byteLength)));return{join_ref:null,ref:null,topic:a,event:l,payload:c}}_decodeUserBroadcast(t,e,s){const i=e.getUint8(1),r=e.getUint8(2),o=e.getUint8(3),a=e.getUint8(4);let l=this.HEADER_LENGTH+4;const c=s.decode(t.slice(l,l+i));l=l+i;const u=s.decode(t.slice(l,l+r));l=l+r;const d=s.decode(t.slice(l,l+o));l=l+o;const f=t.slice(l,t.byteLength),h=a===this.JSON_ENCODING?JSON.parse(s.decode(f)):f,g={type:this.BROADCAST,event:u,payload:h};return o>0&&(g.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST,payload:g}}_isArrayBuffer(t){var e;return t instanceof ArrayBuffer||((e=t?.constructor)===null||e===void 0?void 0:e.name)==="ArrayBuffer"}}class Y_{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var kn;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(kn||(kn={}));const c3=(n,t,e={})=>{var s;const i=(s=e.skipTypes)!==null&&s!==void 0?s:[];return t?Object.keys(t).reduce((r,o)=>(r[o]=HN(o,n,t,i),r),{}):{}},HN=(n,t,e,s)=>{const i=t.find(a=>a.name===n),r=i?.type,o=e[n];return r&&!s.includes(r)?K_(r,o):gm(o)},K_=(n,t)=>{if(n.charAt(0)==="_"){const e=n.slice(1,n.length);return GN(t,e)}switch(n){case kn.bool:return VN(t);case kn.float4:case kn.float8:case kn.int2:case kn.int4:case kn.int8:case kn.numeric:case kn.oid:return qN(t);case kn.json:case kn.jsonb:return WN(t);case kn.timestamp:return YN(t);case kn.abstime:case kn.date:case kn.daterange:case kn.int4range:case kn.int8range:case kn.money:case kn.reltime:case kn.text:case kn.time:case kn.timestamptz:case kn.timetz:case kn.tsrange:case kn.tstzrange:return gm(t);default:return gm(t)}},gm=n=>n,VN=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},qN=n=>{if(typeof n=="string"){const t=parseFloat(n);if(!Number.isNaN(t))return t}return n},WN=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(t){return console.log(`JSON parse error: ${t}`),n}return n},GN=(n,t)=>{if(typeof n!="string")return n;const e=n.length-1,s=n[e];if(n[0]==="{"&&s==="}"){let r;const o=n.slice(1,e);try{r=JSON.parse("["+o+"]")}catch{r=o?o.split(","):[]}return r.map(a=>K_(t,a))}return n},YN=n=>typeof n=="string"?n.replace(" ","T"):n,X_=n=>{const t=new URL(n);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class O2{constructor(t,e,s={},i=fm){this.channel=t,this.event=e,this.payload=s,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,e){var s;return this._hasReceived(t)&&e((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:e}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:e}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(e))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var u3;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(u3||(u3={}));class rh{constructor(t,e){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=e?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},i=>{const{onJoin:r,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=rh.syncState(this.state,i,r,o),this.pendingDiffs.forEach(l=>{this.state=rh.syncDiff(this.state,l,r,o)}),this.pendingDiffs=[],a()}),this.channel._on(s.diff,{},i=>{const{onJoin:r,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=rh.syncDiff(this.state,i,r,o),a())}),this.onJoin((i,r,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:r,newPresences:o})}),this.onLeave((i,r,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:r,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,e,s,i){const r=this.cloneDeep(t),o=this.transformState(e),a={},l={};return this.map(r,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const d=r[c];if(d){const f=u.map(b=>b.presence_ref),h=d.map(b=>b.presence_ref),g=u.filter(b=>h.indexOf(b.presence_ref)<0),m=d.filter(b=>f.indexOf(b.presence_ref)<0);g.length>0&&(a[c]=g),m.length>0&&(l[c]=m)}else a[c]=u}),this.syncDiff(r,{joins:a,leaves:l},s,i)}static syncDiff(t,e,s,i){const{joins:r,leaves:o}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return s||(s=()=>{}),i||(i=()=>{}),this.map(r,(a,l)=>{var c;const u=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(l),u.length>0){const d=t[a].map(h=>h.presence_ref),f=u.filter(h=>d.indexOf(h.presence_ref)<0);t[a].unshift(...f)}s(a,u,l)}),this.map(o,(a,l)=>{let c=t[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),t[a]=c,i(a,c,l),c.length===0&&delete t[a]}),t}static map(t,e){return Object.getOwnPropertyNames(t).map(s=>e(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((e,s)=>{const i=t[s];return"metas"in i?e[s]=i.metas.map(r=>(r.presence_ref=r.phx_ref,delete r.phx_ref,delete r.phx_ref_prev,r)):e[s]=i,e},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var d3;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(d3||(d3={}));var oh;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(oh||(oh={}));var $o;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})($o||($o={}));class Y5{constructor(t,e={config:{}},s){var i,r;if(this.topic=t,this.params=e,this.socket=s,this.bindings={},this.state=ys.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new O2(this,or.join,this.params,this.timeout),this.rejoinTimer=new Y_(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ys.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ys.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ys.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ys.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ys.errored,this.rejoinTimer.scheduleTimeout())}),this._on(or.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new rh(this),this.broadcastEndpointURL=X_(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((r=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||r===void 0)&&r.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,e=this.timeout){var s,i,r;if(this.socket.isConnected()||this.socket.connect(),this.state==ys.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(i=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(h=>h.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[oh.PRESENCE]&&this.bindings[oh.PRESENCE].length>0||((r=this.params.config.presence)===null||r===void 0?void 0:r.enabled)===!0,d={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(h=>t?.($o.CHANNEL_ERROR,h)),this._onClose(()=>t?.($o.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",async({postgres_changes:h})=>{var g;if(this.socket.setAuth(),h===void 0){t?.($o.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,b=(g=m?.length)!==null&&g!==void 0?g:0,y=[];for(let x=0;x<b;x++){const _=m[x],{filter:{event:C,schema:A,table:I,filter:R}}=_,L=h&&h[x];if(L&&L.event===C&&L.schema===A&&L.table===I&&L.filter===R)y.push(Object.assign(Object.assign({},_),{id:L.id}));else{this.unsubscribe(),this.state=ys.errored,t?.($o.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t($o.SUBSCRIBED);return}}).receive("error",h=>{this.state=ys.errored,t?.($o.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{t?.($o.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,e={}){return await this.send({type:"presence",event:"track",payload:t},e.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,e,s){return this.state===ys.joined&&t===oh.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,e,s)}async httpSend(t,e,s={}){var i;const r=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(e==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:r,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:e,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=s.timeout)!==null&&i!==void 0?i:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(t,e={}){var s,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:r,payload:o}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=e.timeout)!==null&&s!==void 0?s:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(r=>{var o,a,l;const c=this._push(t.type,t,e.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&r("ok"),c.receive("ok",()=>r("ok")),c.receive("error",()=>r("error")),c.receive("timeout",()=>r("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ys.leaving;const e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(or.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(i=>{s=new O2(this,or.leave,{},t),s.receive("ok",()=>{e(),i("ok")}).receive("timeout",()=>{e(),i("timed out")}).receive("error",()=>{i("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ys.closed,this.bindings={}}async _fetchWithTimeout(t,e,s){const i=new AbortController,r=setTimeout(()=>i.abort(),s),o=await this.socket.fetch(t,Object.assign(Object.assign({},e),{signal:i.signal}));return clearTimeout(r),o}_push(t,e,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new O2(this,t,e,s);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>UN){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(t,e,s){return e}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,e,s){var i,r;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=or;if(s&&[a,l,c,u].indexOf(o)>=0&&s!==this._joinRef())return;let f=this._onMessage(o,e,s);if(e&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(h=>{var g,m,b;return((g=h.filter)===null||g===void 0?void 0:g.event)==="*"||((b=(m=h.filter)===null||m===void 0?void 0:m.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(h=>h.callback(f,s)):(r=this.bindings[o])===null||r===void 0||r.filter(h=>{var g,m,b,y,x,_;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in h){const C=h.id,A=(g=h.filter)===null||g===void 0?void 0:g.event;return C&&((m=e.ids)===null||m===void 0?void 0:m.includes(C))&&(A==="*"||A?.toLocaleLowerCase()===((b=e.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const C=(x=(y=h?.filter)===null||y===void 0?void 0:y.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return C==="*"||C===((_=e?.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===o}).map(h=>{if(typeof f=="object"&&"ids"in f){const g=f.data,{schema:m,table:b,commit_timestamp:y,type:x,errors:_}=g;f=Object.assign(Object.assign({},{schema:m,table:b,commit_timestamp:y,eventType:x,new:{},old:{},errors:_}),this._getPayloadRecords(g))}h.callback(f,s)})}_isClosed(){return this.state===ys.closed}_isJoined(){return this.state===ys.joined}_isJoining(){return this.state===ys.joining}_isLeaving(){return this.state===ys.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,e,s){const i=t.toLocaleLowerCase(),r={type:i,filter:e,callback:s};return this.bindings[i]?this.bindings[i].push(r):this.bindings[i]=[r],this}_off(t,e){const s=t.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(i=>{var r;return!(((r=i.type)===null||r===void 0?void 0:r.toLocaleLowerCase())===s&&Y5.isEqual(i.filter,e))})),this}static isEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(t[s]!==e[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(or.close,{},t)}_onError(t){this._on(or.error,{},e=>t(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ys.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const e={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(e.new=c3(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(e.old=c3(t.columns,t.old_record)),e}}const F2=()=>{},a1={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},KN=[1e3,2e3,5e3,1e4],XN=1e4,ZN=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class JN{constructor(t,e){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=fm,this.transport=null,this.heartbeatIntervalMs=a1.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=F2,this.ref=0,this.reconnectTimer=null,this.vsn=l3,this.logger=F2,this.conn=null,this.sendBuffer=[],this.serializer=new zN,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...r)=>i(...r):(...r)=>fetch(...r),!(!((s=e?.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=e.params.apikey,this.endPoint=`${t}/${pm.websocket}`,this.httpEndpoint=X_(t),this._initializeOptions(e),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(e?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=ON.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const e=t.message;throw e.includes("Node.js")?new Error(`${e}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${e}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,e){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,e??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const e=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),e}async removeAllChannels(){const t=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,e,s){this.logger(t,e,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Ul.connecting:return zl.Connecting;case Ul.open:return zl.Open;case Ul.closing:return zl.Closing;default:return zl.Closed}}isConnected(){return this.connectionState()===zl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,e={config:{}}){const s=`realtime:${t}`,i=this.getChannels().find(r=>r.topic===s);if(i)return i;{const r=new Y5(`realtime:${t}`,e,this);return this.channels.push(r),r}}push(t){const{topic:e,event:s,payload:i,ref:r}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${e} ${s} (${r})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(e){this.log("error","error in heartbeat callback",e)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(e){this.log("error","error in heartbeat callback",e)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(jN,"heartbeat timeout"),setTimeout(()=>{var e;this.isConnected()||(e=this.reconnectTimer)===null||e===void 0||e.scheduleTimeout()},a1.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(e){this.log("error","error in heartbeat callback",e)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let e=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${t}"`),e.unsubscribe())}_remove(t){this.channels=this.channels.filter(e=>e.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,e=>{if(e.topic==="phoenix"&&e.event==="phx_reply")try{this.heartbeatCallback(e.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:i,payload:r,ref:o}=e,a=o?`(${o})`:"",l=r.status||"";this.log("receive",`${l} ${s} ${i} ${a}`.trim(),r),this.channels.filter(c=>c._isMember(s)).forEach(c=>c._trigger(i,r,o)),this._triggerStateCallbacks("message",e)})}_clearTimer(t){var e;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((e=this.reconnectTimer)===null||e===void 0||e.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ul.open||this.conn.readyState===Ul.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(e=>{this.log("error","error waiting for auth on connect",e),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{e.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var e;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(e=this.reconnectTimer)===null||e===void 0||e.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(or.error))}_appendParams(t,e){if(Object.keys(e).length===0)return t;const s=t.match(/\?/)?"&":"?",i=new URLSearchParams(e);return`${t}${s}${i}`}_workerObjectUrl(t){let e;if(t)e=t;else{const s=new Blob([ZN],{type:"application/javascript"});e=URL.createObjectURL(s)}return e}_setConnectionState(t,e=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=e)}async _performAuth(t=null){let e;t?e=t:this.accessToken?e=await this.accessToken():e=this.accessTokenValue,this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(s=>{const i={access_token:e,version:$N};e&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(or.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(e=>{this.log("error",`error setting auth in ${t}`,e)})}_triggerStateCallbacks(t,e){try{this.stateChangeCallbacks[t].forEach(s=>{try{s(e)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(s){this.log("error",`error triggering ${t} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new Y_(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},a1.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var e,s,i,r,o,a,l,c,u,d,f,h;switch(this.transport=(e=t?.transport)!==null&&e!==void 0?e:null,this.timeout=(s=t?.timeout)!==null&&s!==void 0?s:fm,this.heartbeatIntervalMs=(i=t?.heartbeatIntervalMs)!==null&&i!==void 0?i:a1.HEARTBEAT_INTERVAL,this.worker=(r=t?.worker)!==null&&r!==void 0?r:!1,this.accessToken=(o=t?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=t?.heartbeatCallback)!==null&&a!==void 0?a:F2,this.vsn=(l=t?.vsn)!==null&&l!==void 0?l:l3,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t?.reconnectAfterMs)!==null&&c!==void 0?c:g=>KN[g-1]||XN,this.vsn){case G_:this.encode=(u=t?.encode)!==null&&u!==void 0?u:(g,m)=>m(JSON.stringify(g)),this.decode=(d=t?.decode)!==null&&d!==void 0?d:(g,m)=>m(JSON.parse(g));break;case BN:this.encode=(f=t?.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(h=t?.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}class K5 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function $n(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class QN extends K5{constructor(t,e,s){super(t),this.name="StorageApiError",this.status=e,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class mm extends K5{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}}const X5=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),tO=()=>Response,bm=n=>{if(Array.isArray(n))return n.map(e=>bm(e));if(typeof n=="function"||n!==Object(n))return n;const t={};return Object.entries(n).forEach(([e,s])=>{const i=e.replace(/([-_][a-z])/gi,r=>r.toUpperCase().replace(/[-_]/g,""));t[i]=bm(s)}),t},eO=n=>{if(typeof n!="object"||n===null)return!1;const t=Object.getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},$2=n=>{var t;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(t=n.error)===null||t===void 0?void 0:t.message)||JSON.stringify(n)},nO=(n,t,e)=>ce(void 0,void 0,void 0,function*(){const s=yield tO();n instanceof s&&!e?.noResolveJson?n.json().then(i=>{const r=n.status||500,o=i?.statusCode||r+"";t(new QN($2(i),r,o))}).catch(i=>{t(new mm($2(i),i))}):t(new mm($2(n),n))}),sO=(n,t,e,s)=>{const i={method:n,headers:t?.headers||{}};return n==="GET"||!s?i:(eO(s)?(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(s)):i.body=s,t?.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),e))};function ef(n,t,e,s,i,r){return ce(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(e,sO(t,s,i,r)).then(l=>{if(!l.ok)throw l;return s?.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>nO(l,a,s))})})}function Eh(n,t,e,s){return ce(this,void 0,void 0,function*(){return ef(n,"GET",t,e,s)})}function Ar(n,t,e,s,i){return ce(this,void 0,void 0,function*(){return ef(n,"POST",t,s,i,e)})}function vm(n,t,e,s,i){return ce(this,void 0,void 0,function*(){return ef(n,"PUT",t,s,i,e)})}function iO(n,t,e,s){return ce(this,void 0,void 0,function*(){return ef(n,"HEAD",t,Object.assign(Object.assign({},e),{noResolveJson:!0}),s)})}function Z5(n,t,e,s,i){return ce(this,void 0,void 0,function*(){return ef(n,"DELETE",t,s,i,e)})}class rO{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}execute(){return ce(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if($n(t))return{data:null,error:t};throw t}})}}var Z_;class oO{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[Z_]="BlobDownloadBuilder",this.promise=null}asStream(){return new rO(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ce(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if($n(t))return{data:null,error:t};throw t}})}}Z_=Symbol.toStringTag;const aO={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},h3={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class lO{constructor(t,e={},s,i){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=s,this.fetch=X5(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,e,s,i){return ce(this,void 0,void 0,function*(){try{let r;const o=Object.assign(Object.assign({},h3),i);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&s instanceof Blob?(r=new FormData,r.append("cacheControl",o.cacheControl),l&&r.append("metadata",this.encodeMetadata(l)),r.append("",s)):typeof FormData<"u"&&s instanceof FormData?(r=s,r.has("cacheControl")||r.append("cacheControl",o.cacheControl),l&&!r.has("metadata")&&r.append("metadata",this.encodeMetadata(l))):(r=s,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&r instanceof ReadableStream||r&&typeof r=="object"&&"pipe"in r&&typeof r.pipe=="function")&&!o.duplex&&(o.duplex="half")),i?.headers&&(a=Object.assign(Object.assign({},a),i.headers));const c=this._removeEmptyFolders(e),u=this._getFinalPath(c),d=yield(t=="PUT"?vm:Ar)(this.fetch,`${this.url}/object/${u}`,r,Object.assign({headers:a},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($n(r))return{data:null,error:r};throw r}})}upload(t,e,s){return ce(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,e,s)})}uploadToSignedUrl(t,e,s,i){return ce(this,void 0,void 0,function*(){const r=this._removeEmptyFolders(t),o=this._getFinalPath(r),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",e);try{let l;const c=Object.assign({upsert:h3.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.append("cacheControl",c.cacheControl)):(l=s,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield vm(this.fetch,a.toString(),l,{headers:u});return{data:{path:r,fullPath:d.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if($n(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,e){return ce(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t);const i=Object.assign({},this.headers);e?.upsert&&(i["x-upsert"]="true");const r=yield Ar(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:i}),o=new URL(this.url+r.url),a=o.searchParams.get("token");if(!a)throw new K5("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($n(s))return{data:null,error:s};throw s}})}update(t,e,s){return ce(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,e,s)})}move(t,e,s){return ce(this,void 0,void 0,function*(){try{return{data:yield Ar(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:s?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($n(i))return{data:null,error:i};throw i}})}copy(t,e,s){return ce(this,void 0,void 0,function*(){try{return{data:{path:(yield Ar(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:s?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($n(i))return{data:null,error:i};throw i}})}createSignedUrl(t,e,s){return ce(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),r=yield Ar(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:e},s?.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s?.download?`&download=${s.download===!0?"":s.download}`:"";return r={signedUrl:encodeURI(`${this.url}${r.signedURL}${o}`)},{data:r,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($n(i))return{data:null,error:i};throw i}})}createSignedUrls(t,e,s){return ce(this,void 0,void 0,function*(){try{const i=yield Ar(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:t},{headers:this.headers}),r=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${r}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($n(i))return{data:null,error:i};throw i}})}download(t,e){const i=typeof e?.transform<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString(e?.transform||{}),o=r?`?${r}`:"",a=this._getFinalPath(t),l=()=>Eh(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new oO(l,this.shouldThrowOnError)}info(t){return ce(this,void 0,void 0,function*(){const e=this._getFinalPath(t);try{const s=yield Eh(this.fetch,`${this.url}/object/info/${e}`,{headers:this.headers});return{data:bm(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($n(s))return{data:null,error:s};throw s}})}exists(t){return ce(this,void 0,void 0,function*(){const e=this._getFinalPath(t);try{return yield iO(this.fetch,`${this.url}/object/${e}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($n(s)&&s instanceof mm){const i=s.originalError;if([400,404].includes(i?.status))return{data:!1,error:s}}throw s}})}getPublicUrl(t,e){const s=this._getFinalPath(t),i=[],r=e?.download?`download=${e.download===!0?"":e.download}`:"";r!==""&&i.push(r);const a=typeof e?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(e?.transform||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${s}${c}`)}}}remove(t){return ce(this,void 0,void 0,function*(){try{return{data:yield Z5(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if($n(e))return{data:null,error:e};throw e}})}list(t,e,s){return ce(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},aO),e),{prefix:t||""});return{data:yield Ar(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},s),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($n(i))return{data:null,error:i};throw i}})}listV2(t,e){return ce(this,void 0,void 0,function*(){try{const s=Object.assign({},t);return{data:yield Ar(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},e),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($n(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}}const J_="2.83.0",Q_={"X-Client-Info":`storage-js/${J_}`};class cO{constructor(t,e={},s,i){this.shouldThrowOnError=!1;const r=new URL(t);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(r.hostname)&&!r.hostname.includes("storage.supabase.")&&(r.hostname=r.hostname.replace("supabase.","storage.supabase.")),this.url=r.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Q_),e),this.fetch=X5(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return ce(this,void 0,void 0,function*(){try{const e=this.listBucketOptionsToQueryString(t);return{data:yield Eh(this.fetch,`${this.url}/bucket${e}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if($n(e))return{data:null,error:e};throw e}})}getBucket(t){return ce(this,void 0,void 0,function*(){try{return{data:yield Eh(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if($n(e))return{data:null,error:e};throw e}})}createBucket(t){return ce(this,arguments,void 0,function*(e,s={public:!1}){try{return{data:yield Ar(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($n(i))return{data:null,error:i};throw i}})}updateBucket(t,e){return ce(this,void 0,void 0,function*(){try{return{data:yield vm(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($n(s))return{data:null,error:s};throw s}})}emptyBucket(t){return ce(this,void 0,void 0,function*(){try{return{data:yield Ar(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if($n(e))return{data:null,error:e};throw e}})}deleteBucket(t){return ce(this,void 0,void 0,function*(){try{return{data:yield Z5(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if($n(e))return{data:null,error:e};throw e}})}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}}class uO{constructor(t,e={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Q_),e),this.fetch=X5(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return ce(this,void 0,void 0,function*(){try{return{data:yield Ar(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if($n(e))return{data:null,error:e};throw e}})}listBuckets(t){return ce(this,void 0,void 0,function*(){try{const e=new URLSearchParams;t?.limit!==void 0&&e.set("limit",t.limit.toString()),t?.offset!==void 0&&e.set("offset",t.offset.toString()),t?.sortColumn&&e.set("sortColumn",t.sortColumn),t?.sortOrder&&e.set("sortOrder",t.sortOrder),t?.search&&e.set("search",t.search);const s=e.toString(),i=s?`${this.url}/bucket?${s}`:`${this.url}/bucket`;return{data:yield Eh(this.fetch,i,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if($n(e))return{data:null,error:e};throw e}})}deleteBucket(t){return ce(this,void 0,void 0,function*(){try{return{data:yield Z5(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if($n(e))return{data:null,error:e};throw e}})}}const J5={"X-Client-Info":`storage-js/${J_}`,"Content-Type":"application/json"};class t7 extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Ui(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}class B2 extends t7{constructor(t,e,s){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class dO extends t7{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}}var f3;(function(n){n.InternalError="InternalError",n.S3VectorConflictException="S3VectorConflictException",n.S3VectorNotFoundException="S3VectorNotFoundException",n.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",n.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",n.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(f3||(f3={}));const Q5=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),hO=n=>{if(typeof n!="object"||n===null)return!1;const t=Object.getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},p3=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),fO=(n,t,e)=>ce(void 0,void 0,void 0,function*(){if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!e?.noResolveJson){const i=n.status||500,r=n;if(typeof r.json=="function")r.json().then(o=>{const a=o?.statusCode||o?.code||i+"";t(new B2(p3(o),i,a))}).catch(()=>{const o=i+"",a=r.statusText||`HTTP ${i} error`;t(new B2(a,i,o))});else{const o=i+"",a=r.statusText||`HTTP ${i} error`;t(new B2(a,i,o))}}else t(new dO(p3(n),n))}),pO=(n,t,e,s)=>{const i={method:n,headers:t?.headers||{}};return s?(hO(s)?(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(s)):i.body=s,Object.assign(Object.assign({},i),e)):i};function gO(n,t,e,s,i,r){return ce(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(e,pO(t,s,i,r)).then(l=>{if(!l.ok)throw l;if(s?.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>fO(l,a,s))})})}function zi(n,t,e,s,i){return ce(this,void 0,void 0,function*(){return gO(n,"POST",t,s,i,e)})}class mO{constructor(t,e={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},J5),e),this.fetch=Q5(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return ce(this,void 0,void 0,function*(){try{return{data:(yield zi(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ui(e))return{data:null,error:e};throw e}})}getIndex(t,e){return ce(this,void 0,void 0,function*(){try{return{data:yield zi(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ui(s))return{data:null,error:s};throw s}})}listIndexes(t){return ce(this,void 0,void 0,function*(){try{return{data:yield zi(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ui(e))return{data:null,error:e};throw e}})}deleteIndex(t,e){return ce(this,void 0,void 0,function*(){try{return{data:(yield zi(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ui(s))return{data:null,error:s};throw s}})}}class bO{constructor(t,e={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},J5),e),this.fetch=Q5(s)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return ce(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield zi(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ui(e))return{data:null,error:e};throw e}})}getVectors(t){return ce(this,void 0,void 0,function*(){try{return{data:yield zi(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ui(e))return{data:null,error:e};throw e}})}listVectors(t){return ce(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield zi(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ui(e))return{data:null,error:e};throw e}})}queryVectors(t){return ce(this,void 0,void 0,function*(){try{return{data:yield zi(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ui(e))return{data:null,error:e};throw e}})}deleteVectors(t){return ce(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield zi(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ui(e))return{data:null,error:e};throw e}})}}class vO{constructor(t,e={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},J5),e),this.fetch=Q5(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return ce(this,void 0,void 0,function*(){try{return{data:(yield zi(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ui(e))return{data:null,error:e};throw e}})}getBucket(t){return ce(this,void 0,void 0,function*(){try{return{data:yield zi(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ui(e))return{data:null,error:e};throw e}})}listBuckets(){return ce(this,arguments,void 0,function*(t={}){try{return{data:yield zi(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ui(e))return{data:null,error:e};throw e}})}deleteBucket(t){return ce(this,void 0,void 0,function*(){try{return{data:(yield zi(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ui(e))return{data:null,error:e};throw e}})}}class yO extends vO{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new wO(this.url,this.headers,t,this.fetch)}}class wO extends mO{constructor(t,e,s,i){super(t,e,i),this.vectorBucketName=s}createIndex(t){const e=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ce(this,void 0,void 0,function*(){return e.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ce(this,arguments,void 0,function*(e={}){return t.listIndexes.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const e=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ce(this,void 0,void 0,function*(){return e.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const e=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ce(this,void 0,void 0,function*(){return e.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new _O(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class _O extends bO{constructor(t,e,s,i,r){super(t,e,r),this.vectorBucketName=s,this.indexName=i}putVectors(t){const e=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ce(this,void 0,void 0,function*(){return e.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const e=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ce(this,void 0,void 0,function*(){return e.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ce(this,arguments,void 0,function*(e={}){return t.listVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const e=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ce(this,void 0,void 0,function*(){return e.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const e=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ce(this,void 0,void 0,function*(){return e.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class xO extends cO{constructor(t,e={},s,i){super(t,e,s,i)}from(t){return new lO(this.url,this.headers,t,this.fetch)}get vectors(){return new yO(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new uO(this.url+"/iceberg",this.headers,this.fetch)}}const CO="2.83.0";let Bd="";typeof Deno<"u"?Bd="deno":typeof document<"u"?Bd="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Bd="react-native":Bd="node";const kO={"X-Client-Info":`supabase-js-${Bd}/${CO}`},AO={headers:kO},SO={schema:"public"},EO={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},TO={},LO=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),PO=()=>Headers,IO=(n,t,e)=>{const s=LO(e),i=PO();return async(r,o)=>{var a;const l=(a=await t())!==null&&a!==void 0?a:n;let c=new i(o?.headers);return c.has("apikey")||c.set("apikey",n),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),s(r,Object.assign(Object.assign({},o),{headers:c}))}};function DO(n){return n.endsWith("/")?n:n+"/"}function MO(n,t){var e,s;const{db:i,auth:r,realtime:o,global:a}=n,{db:l,auth:c,realtime:u,global:d}=t,f={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),r),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(e=d?.headers)!==null&&e!==void 0?e:{}),(s=a?.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return n.accessToken?f.accessToken=n.accessToken:delete f.accessToken,f}function RO(n){const t=n?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(DO(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const e7="2.83.0",Kc=30*1e3,ym=3,j2=ym*Kc,NO="http://localhost:9999",OO="supabase.auth.token",FO={"X-Client-Info":`gotrue-js/${e7}`},wm="X-Supabase-Api-Version",n7={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},$O=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,BO=10*60*1e3;class Th extends Error{constructor(t,e,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=e,this.code=s}}function he(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class jO extends Th{constructor(t,e,s){super(t,e,s),this.name="AuthApiError",this.status=e,this.code=s}}function UO(n){return he(n)&&n.name==="AuthApiError"}class Hl extends Th{constructor(t,e){super(t),this.name="AuthUnknownError",this.originalError=e}}class Ja extends Th{constructor(t,e,s,i){super(t,s,i),this.name=e,this.status=s}}class Fi extends Ja{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function zO(n){return he(n)&&n.name==="AuthSessionMissingError"}class Oc extends Ja{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class l1 extends Ja{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class c1 extends Ja{constructor(t,e=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function HO(n){return he(n)&&n.name==="AuthImplicitGrantRedirectError"}class g3 extends Ja{constructor(t,e=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class _m extends Ja{constructor(t,e){super(t,"AuthRetryableFetchError",e,void 0)}}function U2(n){return he(n)&&n.name==="AuthRetryableFetchError"}class m3 extends Ja{constructor(t,e,s){super(t,"AuthWeakPasswordError",e,"weak_password"),this.reasons=s}}class xm extends Ja{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const xp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),b3=` 	
\r=`.split(""),VO=(()=>{const n=new Array(128);for(let t=0;t<n.length;t+=1)n[t]=-1;for(let t=0;t<b3.length;t+=1)n[b3[t].charCodeAt(0)]=-2;for(let t=0;t<xp.length;t+=1)n[xp[t].charCodeAt(0)]=t;return n})();function v3(n,t,e){if(n!==null)for(t.queue=t.queue<<8|n,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;e(xp[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;e(xp[s]),t.queuedBits-=6}}function s7(n,t,e){const s=VO[n];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)e(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function y3(n){const t=[],e=o=>{t.push(String.fromCodePoint(o))},s={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},r=o=>{GO(o,s,e)};for(let o=0;o<n.length;o+=1)s7(n.charCodeAt(o),i,r);return t.join("")}function qO(n,t){if(n<=127){t(n);return}else if(n<=2047){t(192|n>>6),t(128|n&63);return}else if(n<=65535){t(224|n>>12),t(128|n>>6&63),t(128|n&63);return}else if(n<=1114111){t(240|n>>18),t(128|n>>12&63),t(128|n>>6&63),t(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function WO(n,t){for(let e=0;e<n.length;e+=1){let s=n.charCodeAt(e);if(s>55295&&s<=56319){const i=(s-55296)*1024&65535;s=(n.charCodeAt(e+1)-56320&65535|i)+65536,e+=1}qO(s,t)}}function GO(n,t,e){if(t.utf8seq===0){if(n<=127){e(n);return}for(let s=1;s<6;s+=1)if((n>>7-s&1)===0){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=n&31;else if(t.utf8seq===3)t.codepoint=n&15;else if(t.utf8seq===4)t.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|n&63,t.utf8seq-=1,t.utf8seq===0&&e(t.codepoint)}}function du(n){const t=[],e={queue:0,queuedBits:0},s=i=>{t.push(i)};for(let i=0;i<n.length;i+=1)s7(n.charCodeAt(i),e,s);return new Uint8Array(t)}function YO(n){const t=[];return WO(n,e=>t.push(e)),new Uint8Array(t)}function Wl(n){const t=[],e={queue:0,queuedBits:0},s=i=>{t.push(i)};return n.forEach(i=>v3(i,e,s)),v3(null,e,s),t.join("")}function KO(n){return Math.round(Date.now()/1e3)+n}function XO(){return Symbol("auth-callback")}const Os=()=>typeof window<"u"&&typeof document<"u",Ll={tested:!1,writable:!1},i7=()=>{if(!Os())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ll.tested)return Ll.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Ll.tested=!0,Ll.writable=!0}catch{Ll.tested=!0,Ll.writable=!1}return Ll.writable};function ZO(n){const t={},e=new URL(n);if(e.hash&&e.hash[0]==="#")try{new URLSearchParams(e.hash.substring(1)).forEach((i,r)=>{t[r]=i})}catch{}return e.searchParams.forEach((s,i)=>{t[i]=s}),t}const r7=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),JO=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Xc=async(n,t,e)=>{await n.setItem(t,JSON.stringify(e))},Pl=async(n,t)=>{const e=await n.getItem(t);if(!e)return null;try{return JSON.parse(e)}catch{return e}},xa=async(n,t)=>{await n.removeItem(t)};class fg{constructor(){this.promise=new fg.promiseConstructor((t,e)=>{this.resolve=t,this.reject=e})}}fg.promiseConstructor=Promise;function z2(n){const t=n.split(".");if(t.length!==3)throw new xm("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!$O.test(t[s]))throw new xm("JWT not in base64url format");return{header:JSON.parse(y3(t[0])),payload:JSON.parse(y3(t[1])),signature:du(t[2]),raw:{header:t[0],payload:t[1]}}}async function QO(n){return await new Promise(t=>{setTimeout(()=>t(null),n)})}function tF(n,t){return new Promise((s,i)=>{(async()=>{for(let r=0;r<1/0;r++)try{const o=await n(r);if(!t(r,null,o)){s(o);return}}catch(o){if(!t(r,o)){i(o);return}}})()})}function eF(n){return("0"+n.toString(16)).substr(-2)}function nF(){const t=new Uint32Array(56);if(typeof crypto>"u"){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=e.length;let i="";for(let r=0;r<56;r++)i+=e.charAt(Math.floor(Math.random()*s));return i}return crypto.getRandomValues(t),Array.from(t,eF).join("")}async function sF(n){const e=new TextEncoder().encode(n),s=await crypto.subtle.digest("SHA-256",e),i=new Uint8Array(s);return Array.from(i).map(r=>String.fromCharCode(r)).join("")}async function iF(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const e=await sF(n);return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Fc(n,t,e=!1){const s=nF();let i=s;e&&(i+="/PASSWORD_RECOVERY"),await Xc(n,`${t}-code-verifier`,i);const r=await iF(s);return[r,s===r?"plain":"s256"]}const rF=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function oF(n){const t=n.headers.get(wm);if(!t||!t.match(rF))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function aF(n){if(!n)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(n<=t)throw new Error("JWT has expired")}function lF(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const cF=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function $c(n){if(!cF.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function H2(){const n={};return new Proxy(n,{get:(t,e)=>{if(e==="__isUserNotAvailableProxy")return!0;if(typeof e=="symbol"){const s=e.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${e}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function uF(n,t){return new Proxy(n,{get:(e,s,i)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const r=s.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)"||r==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(e,s,i)}return!t.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(e,s,i)}})}function w3(n){return JSON.parse(JSON.stringify(n))}const Fl=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),dF=[502,503,504];async function _3(n){var t;if(!JO(n))throw new _m(Fl(n),0);if(dF.includes(n.status))throw new _m(Fl(n),n.status);let e;try{e=await n.json()}catch(r){throw new Hl(Fl(r),r)}let s;const i=oF(n);if(i&&i.getTime()>=n7["2024-01-01"].timestamp&&typeof e=="object"&&e&&typeof e.code=="string"?s=e.code:typeof e=="object"&&e&&typeof e.error_code=="string"&&(s=e.error_code),s){if(s==="weak_password")throw new m3(Fl(e),n.status,((t=e.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new Fi}else if(typeof e=="object"&&e&&typeof e.weak_password=="object"&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((r,o)=>r&&typeof o=="string",!0))throw new m3(Fl(e),n.status,e.weak_password.reasons);throw new jO(Fl(e),n.status||500,s)}const hF=(n,t,e,s)=>{const i={method:n,headers:t?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),i.body=JSON.stringify(s),Object.assign(Object.assign({},i),e))};async function xe(n,t,e,s){var i;const r=Object.assign({},s?.headers);r[wm]||(r[wm]=n7["2024-01-01"].name),s?.jwt&&(r.Authorization=`Bearer ${s.jwt}`);const o=(i=s?.query)!==null&&i!==void 0?i:{};s?.redirectTo&&(o.redirect_to=s.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await fF(n,t,e+a,{headers:r,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(l):{data:Object.assign({},l),error:null}}async function fF(n,t,e,s,i,r){const o=hF(t,s,i,r);let a;try{a=await n(e,Object.assign({},o))}catch(l){throw console.error(l),new _m(Fl(l),0)}if(a.ok||await _3(a),s?.noResolveJson)return a;try{return await a.json()}catch(l){await _3(l)}}function kr(n){var t;let e=null;mF(n)&&(e=Object.assign({},n),n.expires_at||(e.expires_at=KO(n.expires_in)));const s=(t=n.user)!==null&&t!==void 0?t:n;return{data:{session:e,user:s},error:null}}function x3(n){const t=kr(n);return!t.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((e,s)=>e&&typeof s=="string",!0)&&(t.data.weak_password=n.weak_password),t}function Ia(n){var t;return{data:{user:(t=n.user)!==null&&t!==void 0?t:n},error:null}}function pF(n){return{data:n,error:null}}function gF(n){const{action_link:t,email_otp:e,hashed_token:s,redirect_to:i,verification_type:r}=n,o=zu(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:e,hashed_token:s,redirect_to:i,verification_type:r},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function C3(n){return n}function mF(n){return n.access_token&&n.refresh_token&&n.expires_in}const V2=["global","local","others"];class bF{constructor({url:t="",headers:e={},fetch:s}){this.url=t,this.headers=e,this.fetch=r7(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,e=V2[0]){if(V2.indexOf(e)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${V2.join(", ")}`);try{return await xe(this.fetch,"POST",`${this.url}/logout?scope=${e}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(he(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,e={}){try{return await xe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:Ia})}catch(s){if(he(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:e}=t,s=zu(t,["options"]),i=Object.assign(Object.assign({},s),e);return"newEmail"in s&&(i.new_email=s?.newEmail,delete i.newEmail),await xe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:gF,redirectTo:e?.redirectTo})}catch(e){if(he(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(t){try{return await xe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ia})}catch(e){if(he(e))return{data:{user:null},error:e};throw e}}async listUsers(t){var e,s,i,r,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await xe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(e=t?.page)===null||e===void 0?void 0:e.toString())!==null&&s!==void 0?s:"",per_page:(r=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&r!==void 0?r:""},xform:C3});if(u.error)throw u.error;const d=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,h=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return h.length>0&&(h.forEach(g=>{const m=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(g.split(";")[1].split("=")[1]);c[`${b}Page`]=m}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(he(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){$c(t);try{return await xe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ia})}catch(e){if(he(e))return{data:{user:null},error:e};throw e}}async updateUserById(t,e){$c(t);try{return await xe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:e,headers:this.headers,xform:Ia})}catch(s){if(he(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,e=!1){$c(t);try{return await xe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:e},xform:Ia})}catch(s){if(he(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){$c(t.userId);try{const{data:e,error:s}=await xe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:e,error:s}}catch(e){if(he(e))return{data:null,error:e};throw e}}async _deleteFactor(t){$c(t.userId),$c(t.id);try{return{data:await xe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(e){if(he(e))return{data:null,error:e};throw e}}async _listOAuthClients(t){var e,s,i,r,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await xe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(e=t?.page)===null||e===void 0?void 0:e.toString())!==null&&s!==void 0?s:"",per_page:(r=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&r!==void 0?r:""},xform:C3});if(u.error)throw u.error;const d=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,h=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return h.length>0&&(h.forEach(g=>{const m=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(g.split(";")[1].split("=")[1]);c[`${b}Page`]=m}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(he(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(t){try{return await xe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(he(e))return{data:null,error:e};throw e}}async _getOAuthClient(t){try{return await xe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(he(e))return{data:null,error:e};throw e}}async _updateOAuthClient(t,e){try{return await xe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:e,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(he(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(t){try{return await xe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(e){if(he(e))return{data:null,error:e};throw e}}async _regenerateOAuthClientSecret(t){try{return await xe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(he(e))return{data:null,error:e};throw e}}}function k3(n={}){return{getItem:t=>n[t]||null,setItem:(t,e)=>{n[t]=e},removeItem:t=>{delete n[t]}}}const Bc={debug:!!(globalThis&&i7()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class o7 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class vF extends o7{}async function yF(n,t,e){Bc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),Bc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async i=>{if(i){Bc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await e()}finally{Bc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(t===0)throw Bc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new vF(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Bc.debug)try{const r=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(r,null,"  "))}catch(r){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",r)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await e()}}))}function wF(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function a7(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function _F(n){return parseInt(n,16)}function xF(n){const t=new TextEncoder().encode(n);return"0x"+Array.from(t,s=>s.toString(16).padStart(2,"0")).join("")}function CF(n){var t;const{chainId:e,domain:s,expirationTime:i,issuedAt:r=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:u,uri:d,version:f}=n;{if(!Number.isInteger(e))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${e}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=n.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const h=a7(n.address),g=u?`${u}://${s}`:s,m=n.statement?`${n.statement}
`:"",b=`${g} wants you to sign in with your Ethereum account:
${h}

${m}`;let y=`URI: ${d}
Version: ${f}
Chain ID: ${e}${o?`
Nonce: ${o}`:""}
Issued At: ${r.toISOString()}`;if(i&&(y+=`
Expiration Time: ${i.toISOString()}`),a&&(y+=`
Not Before: ${a.toISOString()}`),l&&(y+=`
Request ID: ${l}`),c){let x=`
Resources:`;for(const _ of c){if(!_||typeof _!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${_}`);x+=`
- ${_}`}y+=x}return`${b}
${y}`}class ds extends Error{constructor({message:t,code:e,cause:s,name:i}){var r;super(t,{cause:s}),this.__isWebAuthnError=!0,this.name=(r=i??(s instanceof Error?s.name:void 0))!==null&&r!==void 0?r:"Unknown Error",this.code=e}}class Cp extends ds{constructor(t,e){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e,message:t}),this.name="WebAuthnUnknownError",this.originalError=e}}function kF({error:n,options:t}){var e,s,i;const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ds({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((e=r.authenticatorSelection)===null||e===void 0?void 0:e.requireResidentKey)===!0)return new ds({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(t.mediation==="conditional"&&((s=r.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new ds({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((i=r.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new ds({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new ds({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new ds({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return r.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new ds({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new ds({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const o=window.location.hostname;if(l7(o)){if(r.rp.id!==o)return new ds({message:`The RP ID "${r.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new ds({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(r.user.id.byteLength<1||r.user.id.byteLength>64)return new ds({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new ds({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new ds({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function AF({error:n,options:t}){const{publicKey:e}=t;if(!e)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ds({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new ds({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const s=window.location.hostname;if(l7(s)){if(e.rpId!==s)return new ds({message:`The RP ID "${e.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new ds({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new ds({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new ds({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class SF{createNewAbortSignal(){if(this.controller){const e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const EF=new SF;function TF(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:t,user:e,excludeCredentials:s}=n,i=zu(n,["challenge","user","excludeCredentials"]),r=du(t).buffer,o=Object.assign(Object.assign({},e),{id:du(e.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:r,user:o});if(s&&s.length>0){a.excludeCredentials=new Array(s.length);for(let l=0;l<s.length;l++){const c=s[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:du(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function LF(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:t,allowCredentials:e}=n,s=zu(n,["challenge","allowCredentials"]),i=du(t).buffer,r=Object.assign(Object.assign({},s),{challenge:i});if(e&&e.length>0){r.allowCredentials=new Array(e.length);for(let o=0;o<e.length;o++){const a=e[o];r.allowCredentials[o]=Object.assign(Object.assign({},a),{id:du(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return r}function PF(n){var t;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const e=n;return{id:n.id,rawId:n.id,response:{attestationObject:Wl(new Uint8Array(n.response.attestationObject)),clientDataJSON:Wl(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(t=e.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function IF(n){var t;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const e=n,s=n.getClientExtensionResults(),i=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:Wl(new Uint8Array(i.authenticatorData)),clientDataJSON:Wl(new Uint8Array(i.clientDataJSON)),signature:Wl(new Uint8Array(i.signature)),userHandle:i.userHandle?Wl(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(t=e.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function l7(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function A3(){var n,t;return!!(Os()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function DF(n){try{const t=await navigator.credentials.create(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Cp("Browser returned unexpected credential type",t)}:{data:null,error:new Cp("Empty credential response",t)}}catch(t){return{data:null,error:kF({error:t,options:n})}}}async function MF(n){try{const t=await navigator.credentials.get(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Cp("Browser returned unexpected credential type",t)}:{data:null,error:new Cp("Empty credential response",t)}}catch(t){return{data:null,error:AF({error:t,options:n})}}}const RF={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},NF={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function kp(...n){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),e=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),s={};for(const i of n)if(i)for(const r in i){const o=i[r];if(o!==void 0)if(Array.isArray(o))s[r]=o;else if(e(o))s[r]=o;else if(t(o)){const a=s[r];t(a)?s[r]=kp(a,o):s[r]=kp(o)}else s[r]=o}return s}function OF(n,t){return kp(RF,n,t||{})}function FF(n,t){return kp(NF,n,t||{})}class $F{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:e,friendlyName:s,signal:i},r){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:t,webauthn:e});if(!o)return{data:null,error:a};const l=i??EF.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${s}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=OF(o.webauthn.credential_options.publicKey,r?.create),{data:u,error:d}=await DF({publicKey:c,signal:l});return u?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:d}}case"request":{const c=FF(o.webauthn.credential_options.publicKey,r?.request),{data:u,error:d}=await MF(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:l}));return u?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:d}}}}catch(o){return he(o)?{data:null,error:o}:{data:null,error:new Hl("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:e,webauthn:s}){return this.client.mfa.verify({factorId:e,challengeId:t,webauthn:s})}async _authenticate({factorId:t,webauthn:{rpId:e=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},r){if(!e)return{data:null,error:new Th("rpId is required for WebAuthn authentication")};try{if(!A3())return{data:null,error:new Hl("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:t,webauthn:{rpId:e,rpOrigins:s},signal:i},{request:r});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:l.type,rpId:e,rpOrigins:s,credential_response:l.credential_response}})}catch(o){return he(o)?{data:null,error:o}:{data:null,error:new Hl("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:e=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},r){if(!e)return{data:null,error:new Th("rpId is required for WebAuthn registration")};try{if(!A3())return{data:null,error:new Hl("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(u=>{var d;return(d=u.data)===null||d===void 0?void 0:d.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===t&&f.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u?.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:e,rpOrigins:s},signal:i},{create:r});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:e,rpOrigins:s,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return he(o)?{data:null,error:o}:{data:null,error:new Hl("Unexpected error in register",o)}}}}wF();const BF={url:NO,storageKey:OO,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:FO,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function S3(n,t,e){return await e()}const jc={};class Lh{get jwks(){var t,e;return(e=(t=jc[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&e!==void 0?e:{keys:[]}}set jwks(t){jc[this.storageKey]=Object.assign(Object.assign({},jc[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,e;return(e=(t=jc[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&e!==void 0?e:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){jc[this.storageKey]=Object.assign(Object.assign({},jc[this.storageKey]),{cachedAt:t})}constructor(t){var e,s,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const r=Object.assign(Object.assign({},BF),t);if(this.storageKey=r.storageKey,this.instanceID=(e=Lh.nextInstanceID[this.storageKey])!==null&&e!==void 0?e:0,Lh.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.instanceID>0&&Os()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=r.persistSession,this.autoRefreshToken=r.autoRefreshToken,this.admin=new bF({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=r7(r.fetch),this.lock=r.lock||S3,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,this.throwOnError=r.throwOnError,r.lock?this.lock=r.lock:Os()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=yF:this.lock=S3,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new $F(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:i7()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=k3(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=k3(this.memoryStorage)),Os()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${e7}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let e={},s="none";if(Os()&&(e=ZO(window.location.href),this._isImplicitGrantCallback(e)?s="implicit":await this._isPKCECallback(e)&&(s="pkce")),Os()&&this.detectSessionInUrl&&s!=="none"){const{data:i,error:r}=await this._getSessionFromURL(e,s);if(r){if(this._debug("#_initialize()","error detecting session from URL",r),HO(r)){const l=(t=r.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:r}}return await this._removeSession(),{error:r}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return he(e)?this._returnResult({error:e}):this._returnResult({error:new Hl("Unexpected error during initialization",e)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var e,s,i;try{const r=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(e=t?.options)===null||e===void 0?void 0:e.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(i=t?.options)===null||i===void 0?void 0:i.captchaToken}},xform:kr}),{data:o,error:a}=r;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(r){if(he(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signUp(t){var e,s,i;try{let r;if("email"in t){const{email:u,password:d,options:f}=t;let h=null,g=null;this.flowType==="pkce"&&([h,g]=await Fc(this.storage,this.storageKey)),r=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:u,password:d,data:(e=f?.data)!==null&&e!==void 0?e:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:h,code_challenge_method:g},xform:kr})}else if("phone"in t){const{phone:u,password:d,options:f}=t;r=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(s=f?.data)!==null&&s!==void 0?s:{},channel:(i=f?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:kr})}else throw new l1("You must provide either an email or phone number and a password");const{data:o,error:a}=r;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(r){if(he(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithPassword(t){try{let e;if("email"in t){const{email:r,password:o,options:a}=t;e=await xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:x3})}else if("phone"in t){const{phone:r,password:o,options:a}=t;e=await xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:x3})}else throw new l1("You must provide either an email or phone number and a password");const{data:s,error:i}=e;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!s||!s.session||!s.user){const r=new Oc;return this._returnResult({data:{user:null,session:null},error:r})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:i})}catch(e){if(he(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithOAuth(t){var e,s,i,r;return await this._handleProviderSignIn(t.provider,{redirectTo:(e=t.options)===null||e===void 0?void 0:e.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(r=t.options)===null||r===void 0?void 0:r.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:e}=t;switch(e){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${e}"`)}}async signInWithEthereum(t){var e,s,i,r,o,a,l,c,u,d,f;let h,g;if("message"in t)h=t.message,g=t.signature;else{const{chain:m,wallet:b,statement:y,options:x}=t;let _;if(Os())if(typeof b=="object")_=b;else{const P=window;if("ethereum"in P&&typeof P.ethereum=="object"&&"request"in P.ethereum&&typeof P.ethereum.request=="function")_=P.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!x?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=b}const C=new URL((e=x?.url)!==null&&e!==void 0?e:window.location.href),A=await _.request({method:"eth_requestAccounts"}).then(P=>P).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!A||A.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const I=a7(A[0]);let R=(s=x?.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!R){const P=await _.request({method:"eth_chainId"});R=_F(P)}const L={domain:C.host,address:I,statement:y,uri:C.href,version:"1",chainId:R,nonce:(i=x?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(r=x?.signInWithEthereum)===null||r===void 0?void 0:r.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=x?.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=x?.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=x?.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(u=x?.signInWithEthereum)===null||u===void 0?void 0:u.resources};h=CF(L),g=await _.request({method:"personal_sign",params:[xF(h),I]})}try{const{data:m,error:b}=await xe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:g},!((d=t.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:kr});if(b)throw b;if(!m||!m.session||!m.user){const y=new Oc;return this._returnResult({data:{user:null,session:null},error:y})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:Object.assign({},m),error:b})}catch(m){if(he(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async signInWithSolana(t){var e,s,i,r,o,a,l,c,u,d,f,h;let g,m;if("message"in t)g=t.message,m=t.signature;else{const{chain:b,wallet:y,statement:x,options:_}=t;let C;if(Os())if(typeof y=="object")C=y;else{const I=window;if("solana"in I&&typeof I.solana=="object"&&("signIn"in I.solana&&typeof I.solana.signIn=="function"||"signMessage"in I.solana&&typeof I.solana.signMessage=="function"))C=I.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!_?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=y}const A=new URL((e=_?.url)!==null&&e!==void 0?e:window.location.href);if("signIn"in C&&C.signIn){const I=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_?.signInWithSolana),{version:"1",domain:A.host,uri:A.href}),x?{statement:x}:null));let R;if(Array.isArray(I)&&I[0]&&typeof I[0]=="object")R=I[0];else if(I&&typeof I=="object"&&"signedMessage"in I&&"signature"in I)R=I;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in R&&"signature"in R&&(typeof R.signedMessage=="string"||R.signedMessage instanceof Uint8Array)&&R.signature instanceof Uint8Array)g=typeof R.signedMessage=="string"?R.signedMessage:new TextDecoder().decode(R.signedMessage),m=R.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${A.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${A.href}`,`Issued At: ${(i=(s=_?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((r=_?.signInWithSolana)===null||r===void 0)&&r.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((o=_?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((a=_?.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((l=_?.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((c=_?.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((d=(u=_?.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",..._.signInWithSolana.resources.map(R=>`- ${R}`)]:[]].join(`
`);const I=await C.signMessage(new TextEncoder().encode(g),"utf8");if(!I||!(I instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=I}}try{const{data:b,error:y}=await xe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:Wl(m)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:kr});if(y)throw y;if(!b||!b.session||!b.user){const x=new Oc;return this._returnResult({data:{user:null,session:null},error:x})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:y})}catch(b){if(he(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(t){const e=await Pl(this.storage,`${this.storageKey}-code-verifier`),[s,i]=(e??"").split("/");try{const{data:r,error:o}=await xe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:kr});if(await xa(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!r||!r.session||!r.user){const a=new Oc;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign(Object.assign({},r),{redirectType:i??null}),error:o})}catch(r){if(he(r))return this._returnResult({data:{user:null,session:null,redirectType:null},error:r});throw r}}async signInWithIdToken(t){try{const{options:e,provider:s,token:i,access_token:r,nonce:o}=t,a=await xe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:i,access_token:r,nonce:o,gotrue_meta_security:{captcha_token:e?.captchaToken}},xform:kr}),{data:l,error:c}=a;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const u=new Oc;return this._returnResult({data:{user:null,session:null},error:u})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(e){if(he(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithOtp(t){var e,s,i,r,o;try{if("email"in t){const{email:a,options:l}=t;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Fc(this.storage,this.storageKey));const{error:d}=await xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(e=l?.data)!==null&&e!==void 0?e:{},create_user:(s=l?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in t){const{phone:a,options:l}=t,{data:c,error:u}=await xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l?.data)!==null&&i!==void 0?i:{},create_user:(r=l?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(o=l?.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c?.message_id},error:u})}throw new l1("You must provide either an email or phone number.")}catch(a){if(he(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(t){var e,s;try{let i,r;"options"in t&&(i=(e=t.options)===null||e===void 0?void 0:e.redirectTo,r=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:a}=await xe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:r}}),redirectTo:i,xform:kr});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l?.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(he(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(t){var e,s,i,r,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await Fc(this.storage,this.storageKey));const c=await xe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(e=t.options)===null||e===void 0?void 0:e.redirectTo)!==null&&s!==void 0?s:void 0}),!((i=t?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:pF});return!((r=c.data)===null||r===void 0)&&r.url&&Os()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(a){if(he(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:e},error:s}=t;if(s)throw s;if(!e)throw new Fi;const{error:i}=await xe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:e.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(t){if(he(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const e=`${this.url}/resend`;if("email"in t){const{email:s,type:i,options:r}=t,{error:o}=await xe(this.fetch,"POST",e,{headers:this.headers,body:{email:s,type:i,gotrue_meta_security:{captcha_token:r?.captchaToken}},redirectTo:r?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:s,type:i,options:r}=t,{data:o,error:a}=await xe(this.fetch,"POST",e,{headers:this.headers,body:{phone:s,type:i,gotrue_meta_security:{captcha_token:r?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o?.message_id},error:a})}throw new l1("You must provide either an email or phone number and a type")}catch(e){if(he(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(t,e){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await s,await e()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=e();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const e=await this.__loadSession();return await t(e)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const e=await Pl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",e),e!==null&&(this._isValidSession(e)?t=e:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<j2:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.userStorage){const o=await Pl(this.userStorage,this.storageKey+"-user");o?.user?t.user=o.user:t.user=H2()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=uF(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:i,error:r}=await this._callRefreshToken(t.refresh_token);return r?this._returnResult({data:{session:null},error:r}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ia}):await this._useSession(async e=>{var s,i,r;const{data:o,error:a}=e;if(a)throw a;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Fi}:await xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(r=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&r!==void 0?r:void 0,xform:Ia})})}catch(e){if(he(e))return zO(e)&&(await this._removeSession(),await xa(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:e});throw e}}async updateUser(t,e={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,e))}async _updateUser(t,e={}){try{return await this._useSession(async s=>{const{data:i,error:r}=s;if(r)throw r;if(!i.session)throw new Fi;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await Fc(this.storage,this.storageKey));const{data:c,error:u}=await xe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:e?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Ia});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(s){if(he(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Fi;const e=Date.now()/1e3;let s=e,i=!0,r=null;const{payload:o}=z2(t.access_token);if(o.exp&&(s=o.exp,i=s<=e),i){const{data:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};r=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;r={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:s-e,expires_at:s},await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)}return this._returnResult({data:{user:r.user,session:r},error:null})}catch(e){if(he(e))return this._returnResult({data:{session:null,user:null},error:e});throw e}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async e=>{var s;if(!t){const{data:o,error:a}=e;if(a)throw a;t=(s=o.session)!==null&&s!==void 0?s:void 0}if(!t?.refresh_token)throw new Fi;const{data:i,error:r}=await this._callRefreshToken(t.refresh_token);return r?this._returnResult({data:{user:null,session:null},error:r}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(e){if(he(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async _getSessionFromURL(t,e){try{if(!Os())throw new c1("No browser detected.");if(t.error||t.error_description||t.error_code)throw new c1(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(e){case"implicit":if(this.flowType==="pkce")throw new g3("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new c1("Not a valid implicit grant flow url.");break;default:}if(e==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new g3("No code detected.");const{data:x,error:_}=await this._exchangeCodeForSession(t.code);if(_)throw _;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:i,access_token:r,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=t;if(!r||!a||!o||!c)throw new c1("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let f=u+d;l&&(f=parseInt(l));const h=f-u;h*1e3<=Kc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${d}s`);const g=f-d;u-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,f,u):u-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,f,u);const{data:m,error:b}=await this._getUser(r);if(b)throw b;const y={provider_token:s,provider_refresh_token:i,access_token:r,expires_in:d,expires_at:f,refresh_token:o,token_type:c,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:y,redirectType:t.type},error:null})}catch(s){if(he(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const e=await Pl(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&e)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async e=>{var s;const{data:i,error:r}=e;if(r)return this._returnResult({error:r});const o=(s=i.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(UO(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return t!=="others"&&(await this._removeSession(),await xa(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const e=XO(),s={id:e,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",e),this.stateChangeEmitters.delete(e)}};return this._debug("#onAuthStateChange()","registered callback with id",e),this.stateChangeEmitters.set(e,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(e)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async e=>{var s,i;try{const{data:{session:r},error:o}=e;if(o)throw o;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",t,"session",r)}catch(r){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",r),console.error(r)}})}async resetPasswordForEmail(t,e={}){let s=null,i=null;this.flowType==="pkce"&&([s,i]=await Fc(this.storage,this.storageKey,!0));try{return await xe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:i,gotrue_meta_security:{captcha_token:e.captchaToken}},headers:this.headers,redirectTo:e.redirectTo})}catch(r){if(he(r))return this._returnResult({data:null,error:r});throw r}}async getUserIdentities(){var t;try{const{data:e,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(t=e.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(e){if(he(e))return this._returnResult({data:null,error:e});throw e}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var e;try{const{data:s,error:i}=await this._useSession(async r=>{var o,a,l,c,u;const{data:d,error:f}=r;if(f)throw f;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await xe(this.fetch,"GET",h,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return Os()&&!(!((e=t.options)===null||e===void 0)&&e.skipBrowserRedirect)&&window.location.assign(s?.url),this._returnResult({data:{provider:t.provider,url:s?.url},error:null})}catch(s){if(he(s))return this._returnResult({data:{provider:t.provider,url:null},error:s});throw s}}async linkIdentityIdToken(t){return await this._useSession(async e=>{var s;try{const{error:i,data:{session:r}}=e;if(i)throw i;const{options:o,provider:a,token:l,access_token:c,nonce:u}=t,d=await xe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=r?.access_token)!==null&&s!==void 0?s:void 0,body:{provider:a,id_token:l,access_token:c,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:kr}),{data:f,error:h}=d;return h?this._returnResult({data:{user:null,session:null},error:h}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Oc}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:h}))}catch(i){if(he(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(t){try{return await this._useSession(async e=>{var s,i;const{data:r,error:o}=e;if(o)throw o;return await xe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(s=r.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0})})}catch(e){if(he(e))return this._returnResult({data:null,error:e});throw e}}async _refreshAccessToken(t){const e=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(e,"begin");try{const s=Date.now();return await tF(async i=>(i>0&&await QO(200*Math.pow(2,i-1)),this._debug(e,"refreshing attempt",i),await xe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:kr})),(i,r)=>{const o=200*Math.pow(2,i);return r&&U2(r)&&Date.now()+o-s<Kc})}catch(s){if(this._debug(e,"error",s),he(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(e,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,e){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:e.redirectTo,scopes:e.scopes,queryParams:e.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",e,"url",s),Os()&&!e.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t,e;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const i=await Pl(this.storage,this.storageKey);if(i&&this.userStorage){let o=await Pl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await Xc(this.userStorage,this.storageKey+"-user",o)),i.user=(t=o?.user)!==null&&t!==void 0?t:H2()}else if(i&&!i.user&&!i.user){const o=await Pl(this.storage,this.storageKey+"-user");o&&o?.user?(i.user=o.user,await xa(this.storage,this.storageKey+"-user"),await Xc(this.storage,this.storageKey,i)):i.user=H2()}if(this._debug(s,"session from storage",i),!this._isValidSession(i)){this._debug(s,"session is not valid"),i!==null&&await this._removeSession();return}const r=((e=i.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<j2;if(this._debug(s,`session has${r?"":" not"} expired with margin of ${j2}s`),r){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),U2(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(i.access_token);!a&&o?.user?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(s,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(s,"error",i),console.error(i);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var e,s;if(!t)throw new Fi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new fg;const{data:r,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!r.session)throw new Fi;await this._saveSession(r.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",r.session);const a={data:r.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(r){if(this._debug(i,"error",r),he(r)){const o={data:null,error:r};return U2(r)||await this._removeSession(),(e=this.refreshingDeferred)===null||e===void 0||e.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(r),r}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,e,s=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",e,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:e});const r=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,e)}catch(l){r.push(l)}});if(await Promise.all(o),r.length>0){for(let a=0;a<r.length;a+=1)console.error(r[a]);throw r[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const e=Object.assign({},t),s=e.user&&e.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&e.user&&await Xc(this.userStorage,this.storageKey+"-user",{user:e.user});const i=Object.assign({},e);delete i.user;const r=w3(i);await Xc(this.storage,this.storageKey,r)}else{const i=w3(e);await Xc(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await xa(this.storage,this.storageKey),await xa(this.storage,this.storageKey+"-code-verifier"),await xa(this.storage,this.storageKey+"-user"),this.userStorage&&await xa(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Os()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(e){console.error("removing visibilitychange callback failed",e)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Kc);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:s}}=e;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((s.expires_at*1e3-t)/Kc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Kc}ms, refresh threshold is ${ym} ticks`),i<=ym&&await this._callRefreshToken(s.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof o7)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Os()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const e=`#_onVisibilityChanged(${t})`;this._debug(e,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(e,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,e,s){const i=[`provider=${encodeURIComponent(e)}`];if(s?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&i.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[r,o]=await Fc(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(r)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(s?.queryParams){const r=new URLSearchParams(s.queryParams);i.push(r.toString())}return s?.skipBrowserRedirect&&i.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async e=>{var s;const{data:i,error:r}=e;return r?this._returnResult({data:null,error:r}):await xe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=i?.session)===null||s===void 0?void 0:s.access_token})})}catch(e){if(he(e))return this._returnResult({data:null,error:e});throw e}}async _enroll(t){try{return await this._useSession(async e=>{var s,i;const{data:r,error:o}=e;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:c}=await xe(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(s=r?.session)===null||s===void 0?void 0:s.access_token});return c?this._returnResult({data:null,error:c}):(t.factorType==="totp"&&l.type==="totp"&&(!((i=l?.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(e){if(he(e))return this._returnResult({data:null,error:e});throw e}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async e=>{var s;const{data:i,error:r}=e;if(r)return this._returnResult({data:null,error:r});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?PF(t.webauthn.credential_response):IF(t.webauthn.credential_response)})}:{code:t.code}),{data:a,error:l}=await xe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(s=i?.session)===null||s===void 0?void 0:s.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(e){if(he(e))return this._returnResult({data:null,error:e});throw e}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async e=>{var s;const{data:i,error:r}=e;if(r)return this._returnResult({data:null,error:r});const o=await xe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(s=i?.session)===null||s===void 0?void 0:s.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:TF(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:LF(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(e){if(he(e))return this._returnResult({data:null,error:e});throw e}})}async _challengeAndVerify(t){const{data:e,error:s}=await this._challenge({factorId:t.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:t.factorId,challengeId:e.id,code:t.code})}async _listFactors(){var t;const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const i={all:[],phone:[],totp:[],webauthn:[]};for(const r of(t=e?.factors)!==null&&t!==void 0?t:[])i.all.push(r),r.status==="verified"&&i[r.factor_type].push(r);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var t,e;const{data:{session:s},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:r}=z2(s.access_token);let o=null;r.aal&&(o=r.aal);let a=o;((e=(t=s.user.factors)===null||t===void 0?void 0:t.filter(u=>u.status==="verified"))!==null&&e!==void 0?e:[]).length>0&&(a="aal2");const c=r.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async e=>{const{data:{session:s},error:i}=e;return i?this._returnResult({data:null,error:i}):s?await xe(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:s.access_token,xform:r=>({data:r,error:null})}):this._returnResult({data:null,error:new Fi})})}catch(e){if(he(e))return this._returnResult({data:null,error:e});throw e}}async _approveAuthorization(t,e){try{return await this._useSession(async s=>{const{data:{session:i},error:r}=s;if(r)return this._returnResult({data:null,error:r});if(!i)return this._returnResult({data:null,error:new Fi});const o=await xe(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Os()&&!e?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(s){if(he(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(t,e){try{return await this._useSession(async s=>{const{data:{session:i},error:r}=s;if(r)return this._returnResult({data:null,error:r});if(!i)return this._returnResult({data:null,error:new Fi});const o=await xe(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Os()&&!e?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(s){if(he(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:e},error:s}=t;return s?this._returnResult({data:null,error:s}):e?await xe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:e.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Fi})})}catch(t){if(he(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async e=>{const{data:{session:s},error:i}=e;return i?this._returnResult({data:null,error:i}):s?await xe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:t.clientId},xform:()=>({data:{},error:null})}):this._returnResult({data:null,error:new Fi})})}catch(e){if(he(e))return this._returnResult({data:null,error:e});throw e}}async fetchJwk(t,e={keys:[]}){let s=e.keys.find(a=>a.kid===t);if(s)return s;const i=Date.now();if(s=this.jwks.keys.find(a=>a.kid===t),s&&this.jwks_cached_at+BO>i)return s;const{data:r,error:o}=await xe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!r.keys||r.keys.length===0||(this.jwks=r,this.jwks_cached_at=i,s=r.keys.find(a=>a.kid===t),!s)?null:s}async getClaims(t,e={}){try{let s=t;if(!s){const{data:h,error:g}=await this.getSession();if(g||!h.session)return this._returnResult({data:null,error:g});s=h.session.access_token}const{header:i,payload:r,signature:o,raw:{header:a,payload:l}}=z2(s);e?.allowExpired||aF(r.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,e?.keys?{keys:e.keys}:e?.jwks);if(!c){const{error:h}=await this.getUser(s);if(h)throw h;return{data:{claims:r,header:i,signature:o},error:null}}const u=lF(i.alg),d=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,d,o,YO(`${a}.${l}`)))throw new xm("Invalid JWT signature");return{data:{claims:r,header:i,signature:o},error:null}}catch(s){if(he(s))return this._returnResult({data:null,error:s});throw s}}}Lh.nextInstanceID={};const jF=Lh;class UF extends jF{constructor(t){super(t)}}class zF{constructor(t,e,s){var i,r,o;this.supabaseUrl=t,this.supabaseKey=e;const a=RO(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,c={db:SO,realtime:TO,auth:Object.assign(Object.assign({},EO),{storageKey:l}),global:AO},u=MO(s??{},c);this.storageKey=(i=u.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(r=u.global.headers)!==null&&r!==void 0?r:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=IO(e,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new NN(new URL("rest/v1",a).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new xO(this.storageUrl.href,this.headers,this.fetch,s?.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new LN(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,s)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,e;if(this.accessToken)return await this.accessToken();const{data:s}=await this.auth.getSession();return(e=(t=s.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:s,storage:i,userStorage:r,storageKey:o,flowType:a,lock:l,debug:c,throwOnError:u},d,f){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new UF({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:o,autoRefreshToken:t,persistSession:e,detectSessionInUrl:s,storage:i,userStorage:r,flowType:a,lock:l,debug:c,throwOnError:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new JN(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,s)=>{this._handleTokenChanged(e,"CLIENT",s?.access_token)})}_handleTokenChanged(t,e,s){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const HF=(n,t,e)=>new zF(n,t,e);function VF(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const t=n.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}VF()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const qF="https://hmevengvfponcwslnyye.supabase.co",WF="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhtZXZlbmd2ZnBvbmN3c2xueXllIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM1MDQ3OTcsImV4cCI6MjA3OTA4MDc5N30.snwgdLRRFtxv_6UAKnpdkbDPGdF8IKl3w8zzYOIqVk4",tb=HF(qF,WF),GF="Requirements";async function c7(n,t=GF,e="requirement_directory"){if(!n)return null;if(n.type!=="application/pdf")return console.error("Only PDF files are allowed."),null;const s=`${e}/${Date.now()}_${n.name}`;console.log(`Uploading file to ${t}/${e}:`,s);try{const{data:i,error:r}=await tb.storage.from(t).upload(s,n,{cacheControl:"3600",upsert:!1});return r?(console.error(`Supabase upload error (${t}/${e}):`,r),null):s}catch(i){return console.error(`Upload error (${t}/${e}):`,i),null}}function Cm(n,t="Requirements"){const{data:e}=tb.storage.from(t).getPublicUrl(n);return e?.publicUrl||null}const Pu=Object.freeze(Object.defineProperty({__proto__:null,getPDFUrl:Cm,supabase:tb,uploadPDF:c7},Symbol.toStringTag,{value:"Module"})),YF={key:0,open:"",class:"modal sm:modal-middle"},KF={class:"modal-box max-w-3xl relative font-poppins"},XF={class:"text-xl font-bold mb-2"},ZF={class:"text-sm text-gray-600 mb-2"},JF={class:"my-4 flex justify-end gap-2"},QF=["disabled"],t$={key:0,class:"loading loading-spinner loading-sm"},e$={key:1},n$={key:1,class:"btn btn-sm bg-gray-500 text-white",disabled:""},s$={key:1,open:"",class:"modal sm:modal-middle"},i$={class:"modal-box max-w-lg relative font-poppins"},r$={class:"text-xl font-bold mb-4"},o$={class:"mb-4"},a$={class:"toast toast-end toast-top z-50"},l$={__name:"careermodal",props:{show:Boolean,career:Object,myApplications:[Set,Object],bookmarkedCareers:[Set,Object]},emits:["close","update-applications","update-bookmarks"],setup(n,{emit:t}){const e=n,s=t,i=ut(!1),r=ut(null),o=ut([]),a=ut(!1),l=ut(null);lo(()=>e.show,async x=>{await Si(),x?l.value?.showModal():l.value?.close()});function c(x,_="info"){const C=Date.now();o.value.push({id:C,message:x,type:_}),setTimeout(()=>{o.value=o.value.filter(A=>A.id!==C)},3e3)}const u=cn(()=>e.bookmarkedCareers.has(e.career?.careerID??e.career?.id)),d=cn(()=>e.myApplications.has(e.career?.careerID??e.career?.id));async function f(){const x=localStorage.getItem("token");if(!x){c("PLEASE LOG IN FIRST","accent");return}const _=e.career?.careerID??e.career?.id;a.value=!0;try{u.value?(await At.delete(`https://pathfinder-development-production.up.railway.app/api/career-bookmarks/${_}`,{headers:{Authorization:`Bearer ${x}`}}),e.bookmarkedCareers.delete(_),s("update-bookmarks",new Set(e.bookmarkedCareers)),c("Bookmark removed","success")):(await At.post("https://pathfinder-development-production.up.railway.app/api/career-bookmarks",{careerID:_},{headers:{Authorization:`Bearer ${x}`}}),e.bookmarkedCareers.add(_),s("update-bookmarks",new Set(e.bookmarkedCareers)),c("Bookmark added","success"))}catch(C){console.error(C),c("Error toggling bookmark","accent")}finally{a.value=!1}}function h(){i.value=!0}function g(){i.value=!1,r.value=null}function m(x){r.value=x.target.files[0],console.log("Uploaded file:",r.value)}async function b(){if(!e.career)return;const x=localStorage.getItem("token");if(!x){c("PLEASE LOG IN FIRST","accent");return}let _=null;if(r.value){if(c("Uploading file to Supabase...","info"),_=await c7(r.value,"Requirements","requirement_directory"),!_){c("FAILED TO UPLOAD FILE TO SUPABASE","accent");return}c("File uploaded successfully!","success")}try{const C={careerID:e.career.careerID??e.career.id,requirement_directory:_};await At.post("https://pathfinder-development-production.up.railway.app/api/applications",C,{headers:{Authorization:`Bearer ${x}`,"Content-Type":"application/json"}}),c("APPLICATION SUBMITTED SUCCESSFULLY","success");const A=e.career.careerID??e.career.id;e.myApplications.add(A),s("update-applications",new Set(e.myApplications)),g(),s("close")}catch(C){C.response?.status===409?c("YOU ALREADY APPLIED TO THIS CAREER","accent"):C.response?.status===401?c("UNAUTHORIZED. PLEASE LOG IN AGAIN","accent"):C.response?.status===422?c("INVALID INPUT. ONLY PDF UP TO 5MB","accent"):(c("FAILED TO SUBMIT APPLICATION","accent"),console.error("Application submission error:",C))}}function y(x){return x?new Date(x).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"N/A"}return(x,_)=>(j(),z("div",null,[n.show?(j(),z("dialog",YF,[p("div",KF,[p("button",{class:"btn btn-sm btn-circle border-transparent bg-transparent absolute right-2 top-2",onClick:_[0]||(_[0]=C=>x.$emit("close"))},"  "),p("h2",XF,J(n.career.position),1),p("p",ZF," Organization: "+J(n.career.organization),1),p("div",JF,[p("button",{class:"btn btn-outline btn-sm",onClick:f,disabled:a.value},[a.value?(j(),z("span",t$)):(j(),z("span",e$,J(u.value?"Bookmarked":"Bookmark"),1))],8,QF),d.value?(j(),z("button",n$," Applied ")):(j(),z("button",{key:0,class:"btn btn-sm bg-customButton text-white",onClick:h}," Apply "))]),p("p",null,[_[1]||(_[1]=p("strong",null,"Details:",-1)),Dt(" "+J(n.career.detailsAndInstructions),1)]),p("p",null,[_[2]||(_[2]=p("strong",null,"Qualifications:",-1)),Dt(" "+J(n.career.qualifications),1)]),p("p",null,[_[3]||(_[3]=p("strong",null,"Requirements:",-1)),Dt(" "+J(n.career.requirements),1)]),p("p",null,[_[4]||(_[4]=p("strong",null,"Application Address:",-1)),Dt(" "+J(n.career.applicationLetterAddress),1)]),p("p",null,[_[5]||(_[5]=p("strong",null,"Deadline:",-1)),Dt(" "+J(y(n.career.deadlineOfSubmission)),1)])])])):Ct("",!0),i.value?(j(),z("dialog",s$,[p("div",i$,[p("button",{class:"btn btn-sm btn-circle border-transparent bg-transparent absolute right-2 top-2",onClick:g},"  "),p("h2",r$,"Apply for "+J(n.career?.position),1),p("form",{onSubmit:me(b,["prevent"])},[p("div",o$,[_[6]||(_[6]=p("label",{class:"block text-sm font-medium mb-1"}," Upload PDF Requirements ",-1)),p("input",{type:"file",accept:"application/pdf",onChange:m,required:"",class:"file-input file-input-bordered w-full"},null,32)]),p("div",{class:"flex justify-end gap-2"},[p("button",{type:"button",class:"btn btn-outline btn-sm",onClick:g}," Cancel "),_[7]||(_[7]=p("button",{type:"submit",class:"btn bg-customButton hover:bg-dark-slate text-white btn-sm"}," Submit ",-1))])],32)])])):Ct("",!0),p("div",a$,[(j(!0),z(Kt,null,pe(o.value,C=>(j(),z("div",{key:C.id,class:fe(["alert",{"alert-info":C.type==="info","alert-success":C.type==="success","alert-accent":C.type==="accent"}])},J(C.message),3))),128))])]))}},c$={class:"font-poppins"},u$={class:"bg-white m-3 p-4 rounded-lg"},d$={class:"space-y-4"},h$=["onClick"],f$={class:"font-semibold"},p$={class:"text-gray-700"},g$={class:"toast toast-end toast-top z-50"},m$={__name:"Careerpage",setup(n){const t=ut(!1),e=ut(!1);function s(A){console.log("Event clicked:",A)}const i=ut([]),r=ut(new Set),o=ut(new Set);async function a(){try{const A=localStorage.getItem("token");if(!A)return;const I=await At.get("https://pathfinder-development-production.up.railway.app/api/career-bookmarks",{headers:{Authorization:`Bearer ${A}`}});o.value=new Set(I.data.map(R=>R.careerID))}catch(A){console.error("Error fetching career bookmarks:",A)}}je(async()=>{try{const A=await At.get("https://pathfinder-development-production.up.railway.app/api/careers");g.value=A.data}catch(A){console.error("Error fetching careers:",A)}await _(),await a()}),cn(()=>g.value.map(A=>({...A,organizationName:A.organizationName||"Unknown"}))),ut(!1),ut(null);const l=ut({}),c=ut(""),u=ut([]),d=ut(null);function f(){l.value={},posts.value.forEach(A=>{const I=A.trainingID?A.schedule.split("T")[0]:A.deadlineOfSubmission;l.value[I]||(l.value[I]=[]),l.value[I].push(A)})}function h(A){c.value=A,u.value=l.value[A]||[]}je(async()=>{await Si(),f();const A=d.value,I=new Date().toISOString().split("T")[0];A.addEventListener("render",()=>{A.querySelectorAll("[data-date]").forEach(L=>{const P=L.getAttribute("data-date");L.classList.remove("event-day","today"),l.value[P]&&L.classList.add("event-day"),P===I&&L.classList.add("today")})}),A.addEventListener("change",L=>{const P=L.target.value;h(P),A.querySelectorAll("[data-date]").forEach(T=>T.classList.remove("selected-day"));const V=A.querySelector(`[data-date="${P}"]`);V&&V.classList.add("selected-day")}),A.value=I,h(I);const R=new Event("change",{bubbles:!0});A.dispatchEvent(R)});const g=ut([]),m=ut(null),b=ut(!1);function y(A){m.value=A,b.value=!0,console.log("Opening modal for career:",A)}function x(){b.value=!1,m.value=null}async function _(){const A=localStorage.getItem("token");if(!A)return;const I=await At.get("https://pathfinder-development-production.up.railway.app/api/applications",{headers:{Authorization:`Bearer ${A}`}});r.value=new Set(I.data.map(R=>R.careerID))}async function C(){const A=localStorage.getItem("token");if(!A)return;const I=await At.get("https://pathfinder-development-production.up.railway.app/api/career-bookmarks",{headers:{Authorization:`Bearer ${A}`}});o.value=new Set(I.data.map(R=>R.careerID))}return je(async()=>{await fetchCareers(),await _(),await C()}),(A,I)=>(j(),z("main",c$,[p("div",u$,[I[4]||(I[4]=p("div",{class:"sticky top-0 z-10 bg-white pt-4 px-4 pb-2 border-b shadow-sm"},[p("h2",{class:"text-2xl font-bold mb-3 sticky top-0 bg-white z-10"}," Career ")],-1)),p("div",d$,[(j(!0),z(Kt,null,pe(g.value,R=>(j(),z("div",{key:R.careerID,class:"p-4 bg-blue-gray rounded-lg relative hover:bg-gray-300 transition cursor-pointer",onClick:L=>y(R)},[p("h3",f$,J(R.position),1),p("p",p$,J(R.organization),1)],8,h$))),128))])]),Ce(H5,{isOpen:t.value,onOpen:I[0]||(I[0]=R=>t.value=!0),onClose:I[1]||(I[1]=R=>t.value=!1),onEventClick:s},null,8,["isOpen"]),Ce(l$,{show:b.value,career:m.value,myApplications:r.value,bookmarkedCareers:o.value,careerBookmarkLoading:e.value,onClose:x,onUpdateApplications:I[2]||(I[2]=R=>r.value=R),onUpdateBookmarks:I[3]||(I[3]=R=>o.value=R)},null,8,["show","career","myApplications","bookmarkedCareers","careerBookmarkLoading"]),p("div",g$,[(j(!0),z(Kt,null,pe(i.value,R=>(j(),z("div",{key:R.id,class:fe(["alert",{"alert-info":R.type==="info","alert-success":R.type==="success","alert-accent":R.type==="accent"}])},J(R.message),3))),128))])]))}},b$={class:"font-poppins"},v$={class:"bg-white m-3 p-4 rounded-lg"},y$={key:0,class:"text-gray-500"},w$={key:1,class:"text-red-500"},_$={key:2,class:"space-y-4"},x$={class:"font-semibold"},C$={class:"text-gray-600"},k$={__name:"Organizationpage",setup(n){const t=ut({}),e=ut(""),s=ut([]),i=ut(null);function r(u){e.value=u,s.value=t.value[u]||[]}const o=ut([]),a=ut(!0),l=ut(null);async function c(){try{const u=await At.get("https://pathfinder-development-production.up.railway.app/api/organizations/");o.value=u.data.map(d=>({id:d.organizationID,name:d.name,location:d.location||"N/A"}))}catch(u){console.error("Failed to fetch organizations:",u),l.value=u.response?.data?.message||"Failed to fetch organizations"}finally{a.value=!1}}return je(async()=>{await c();const u=i.value,d=new Date().toISOString().split("T")[0];if(u){u.addEventListener("render",()=>{u.querySelectorAll("[data-date]").forEach(h=>{const g=h.getAttribute("data-date");h.classList.remove("event-day","today"),t.value[g]&&h.classList.add("event-day"),g===d&&h.classList.add("today")})}),u.addEventListener("change",h=>{const g=h.target.value;r(g),u.querySelectorAll("[data-date]").forEach(b=>b.classList.remove("selected-day"));const m=u.querySelector(`[data-date="${g}"]`);m&&m.classList.add("selected-day")}),u.value=d,r(d);const f=new Event("change",{bubbles:!0});u.dispatchEvent(f)}}),(u,d)=>(j(),z("div",null,[p("main",b$,[p("div",v$,[d[0]||(d[0]=p("div",{class:"sticky top-0 z-10 bg-white pt-4 px-4 pb-2 border-b shadow-sm"},[p("h2",{class:"text-2xl font-bold mb-3"},"Organizations")],-1)),a.value?(j(),z("div",y$,"Loading organizations...")):Ct("",!0),l.value?(j(),z("div",w$,J(l.value),1)):Ct("",!0),!a.value&&!l.value?(j(),z("ul",_$,[(j(!0),z(Kt,null,pe(o.value,f=>(j(),z("li",{key:f.id,class:"p-4 bg-blue-gray rounded-lg relative hover:bg-gray-300 transition cursor-pointer"},[p("p",x$,J(f.name),1),p("p",C$,J(f.location),1)]))),128))])):Ct("",!0)])])]))}},A$={class:"flex flex-col min-h-screen font-poppins p-4"},S$={class:"mb-8 text-center hidden lg:block"},E$={class:"flex items-center justify-center mt-2"},T$={class:"text-xl text-black font-semibold mx-4 w-40"},L$={class:"w-full max-w-6xl p-6 rounded-2xl hidden lg:block"},P$={class:"grid grid-cols-7 gap-1 sm:gap-2 text-center text-gray-500 font-semibold mb-4"},I$={class:"grid grid-cols-7 gap-2"},D$={class:"text-lg font-bold text-gray-800"},M$=["onClick"],R$={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-4 z-50 hidden lg:block"},N$={class:"rounded-2xl p-6 shadow-xl w-full max-w-sm transform transition-all"},O$={class:"text-lg text-gray-600 mb-2"},F$={class:"text-lg text-gray-600 mb-4"},$$={class:"flex gap-4"},B$={class:"p-4 rounded-lg lg:hidden"},j$={class:"bg-blue-gray p-4 rounded-md cally bg-base-100 border border-base-300 shadow-lg rounded-box flex justify-center"},U$=["data-date"],z$={class:"mt-8"},H$={key:0,class:"text-gray-500"},V$={class:"font-semibold hover:text-dark-slate"},q$={class:"text-gray-600 text-sm"},W$={class:"text-gray-600 text-sm"},G$={class:"text-gray-600 text-sm"},Y$=["href"],K$={__name:"Calendarpage",setup(n){const t=ut(null),e=ut([]),s=ut({}),i=ut([]),r=ut("");async function o(){try{const u=localStorage.getItem("token"),d=await At.get("https://pathfinder-development-production.up.railway.app/api/trainings",{headers:{Authorization:`Bearer ${u}`}});e.value=d.data.map(f=>({trainingID:f.trainingID,title:f.title,schedule:f.schedule,organizationID:f.organizationID,location:f.location,trainingLink:f.trainingLink,mode:f.mode,description:f.description})),a(),l(),console.log(" Trainings fetched:",e.value)}catch(u){console.error(" Error fetching trainings:",u)}}function a(){s.value={},e.value.forEach(u=>{const d=new Date(u.schedule).toISOString().split("T")[0];s.value[d]||(s.value[d]=[]),s.value[d].push(u)})}function l(){const u=t.value;u&&u.querySelectorAll("[data-date]").forEach(d=>{const f=d.getAttribute("data-date");d.classList.remove("highlight-day"),s.value[f]&&d.classList.add("highlight-day")})}function c(u){r.value=u,i.value=s.value[u]||[]}return je(async()=>{await Si(),await o();const u=t.value;if(!u)return;const d=new Date().toISOString().split("T")[0];u.addEventListener("change",f=>{const h=f.target.value;c(h),u.querySelectorAll("[data-date]").forEach(m=>m.classList.remove("selected-day"));const g=u.querySelector(`[data-date="${h}"]`);g&&g.classList.add("selected-day")}),u.value=d,c(d)}),(u,d)=>{const f=Qo("calendar-month"),h=Qo("calendar-date");return j(),z("div",A$,[p("div",S$,[p("div",E$,[p("button",{onClick:d[0]||(d[0]=(...g)=>u.handlePreviousMonth&&u.handlePreviousMonth(...g)),class:"p-2 text-black hover:text-gray-900 transition-colors duration-200"},d[4]||(d[4]=[p("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",class:"w-6 h-6"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})],-1)])),p("p",T$,J(u.monthYearDisplay),1),p("button",{onClick:d[1]||(d[1]=(...g)=>u.handleNextMonth&&u.handleNextMonth(...g)),class:"p-2 text-black hover:text-gray-900 transition-colors duration-200"},d[5]||(d[5]=[p("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",class:"w-6 h-6"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})],-1)]))])]),p("div",L$,[p("div",P$,[(j(),z(Kt,null,pe(["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],g=>p("div",{key:g,class:"p-2"},J(g),1)),64))]),p("div",I$,[(j(!0),z(Kt,null,pe(u.firstDayOfMonth,g=>(j(),z("div",{key:`blank-${g}`,class:"p-2"}))),128)),(j(!0),z(Kt,null,pe(u.daysInMonth,g=>(j(),z("div",{key:g,class:"bg-gray-50 h-32 md:h-40 rounded-lg p-2 flex flex-col items-start overflow-auto shadow-sm hover:bg-gray-100 transition-colors duration-200"},[p("div",D$,J(g),1),(j(!0),z(Kt,null,pe(u.getSchedulesForDay(g),m=>(j(),z("div",{key:m.trainingID,onClick:b=>u.handleScheduleClick(m),class:"cursor-pointer mt-1 w-full bg-blue-100 text-blue-800 text-sm p-1 rounded-md hover:bg-blue-200 transition-colors duration-200 truncate"},J(m.title),9,M$))),128))]))),128))])]),u.isModalOpen&&u.selectedSchedule?(j(),z("div",R$,[p("div",N$,[d[8]||(d[8]=p("h3",{class:"text-2xl font-bold text-gray-800 mb-4"},"Schedule Details",-1)),p("p",O$,[d[6]||(d[6]=p("span",{class:"font-semibold"},"Event:",-1)),Dt(" "+J(u.selectedSchedule.title),1)]),p("p",F$,[d[7]||(d[7]=p("span",{class:"font-semibold"},"Date:",-1)),Dt(" "+J(u.selectedSchedule.date),1)]),p("div",$$,[p("button",{onClick:d[2]||(d[2]=g=>u.handleDeleteSchedule(u.selectedSchedule.id)),class:"flex-grow p-3 bg-dark-slate text-white font-semibold rounded-lg shadow-md hover:bg-red-700 transition-colors duration-200"}," Delete "),p("button",{onClick:d[3]||(d[3]=g=>u.isModalOpen=!1),class:"flex-grow p-3 bg-gray-300 text-gray-800 font-semibold rounded-lg shadow-md hover:bg-gray-400 transition-colors duration-200"}," Close ")])])])):Ct("",!0),p("div",null,[p("div",B$,[p("div",j$,[Ce(h,{ref_key:"calendarRef",ref:t,"first-day-of-week":"0",class:"cally bg-base-100 border border-base-300 shadow rounded-box p-3 flex-shrink-0"},{default:hs(()=>[Ce(f,null,{day:hs(({date:g,label:m})=>[p("div",{class:"w-8 h-8 flex items-center justify-center rounded-full","data-date":g},J(m),9,U$)]),_:1})]),_:1},512)]),p("div",z$,[d[10]||(d[10]=p("h2",{class:"text-xl font-bold mb-4"},"Upcoming Trainings",-1)),i.value.length===0?(j(),z("div",H$," No events scheduled for "+J(r.value||"this day")+". ",1)):Ct("",!0),(j(!0),z(Kt,null,pe(i.value,g=>(j(),z("div",{key:g.trainingID,class:"p-4 bg-gray-100 rounded-lg mb-3"},[p("h3",V$,J(g.title),1),p("p",q$,"  "+J(new Date(g.schedule).toLocaleString()),1),p("p",W$," "+J(g.location),1),p("p",G$,[d[9]||(d[9]=Dt("  ")),p("a",{href:g.trainingLink,target:"_blank",class:"text-blue-500 underline"},"Open Link",8,Y$)])]))),128))])])])])}}},X$={class:"font-poppins"},Z$={class:"min-h-screen p-3 rounded-lg font-poppins"},J$={class:"min-h-screen font-poppins lg:flex"},Q$={class:"w-full lg:w-1/4 bg-white rounded-lg shadow p-6 flex flex-col items-center hidden lg:flex"},tB={class:"text-xl font-semibold mb-6"},eB={class:"w-full flex items-center justify-center gap-6 mb-6 relative"},nB={class:"relative"},sB={class:"absolute -top-2 -right-2 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-customButton rounded-full"},iB={class:"relative"},rB={class:"absolute -top-2 -right-2 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-customButton rounded-full"},oB={class:"w-full flex flex-col gap-3"},aB={class:"w-full lg:w-3/4 lg:pl-6 flex"},lB={class:"bg-white p-4 rounded-lg flex flex-col w-full min-h-screen flex-1"},cB={class:"font-poppins min-h-screen flex flex-col"},uB={class:"flex justify-center bg-white shadow-sm"},dB={key:0,class:"p-4"},hB={key:0,class:"space-y-3"},fB=["onClick"],pB={class:"text-base font-semibold"},gB={class:"text-sm text-gray-600"},mB={key:1,class:"text-center text-gray-500 mt-6"},bB={key:1,class:"p-4"},vB={key:0,class:"space-y-3"},yB=["onClick"],wB={class:"text-base font-semibold"},_B={class:"text-sm text-gray-600"},xB={key:1,class:"text-center text-gray-500 mt-6"},CB={key:2,open:"",class:"modal sm:modal-middle"},kB={class:"modal-box max-w-3xl relative font-poppins"},AB={key:0},SB={class:"text-xl font-bold mb-2"},EB={class:"text-sm text-gray-600 mb-2"},TB={class:"my-4 flex justify-end gap-2"},LB={key:0},PB=["href"],IB={key:1},DB={key:2,class:"mt-4 text-center"},MB={key:0,class:"flex flex-col items-center"},RB={class:"text-sm text-gray-600 mt-1"},NB={key:1},OB={key:1},FB={class:"text-xl font-bold mb-2"},$B={class:"text-sm text-gray-600 mb-2"},BB={class:"my-4 flex justify-end gap-2"},jB=["disabled"],UB={key:3,open:"",class:"modal sm:modal-middle"},zB={class:"modal-box max-w-lg relative font-poppins"},HB={class:"text-xl font-bold mb-4"},VB={class:"mb-4"},qB={class:"flex justify-end gap-2"},WB=["disabled"],GB={class:"toast toast-end toast-top z-50"},YB={__name:"Bookmarkpage",setup(n){gi(),ut(null);const t=ut(""),e=ut([]),s=ut([]),i=ut("career"),r=ut(window.innerWidth>=1024),o=ut(new Set),a=ut([]),l=ut(0),c=ut(0),u=ut(!1),d=ut(new Set),f=ut(""),h=ut(!1),g=ut(null),m=ut(!1),b=ut(null),y=gt=>{const lt=gt.target.files[0];if(lt){if(lt.type!=="application/pdf"){addToast("Only PDF files are allowed","error"),gt.target.value="";return}b.value=lt}};function x(){r.value=window.innerWidth>=1024}je(()=>window.addEventListener("resize",x)),Zp(()=>window.removeEventListener("resize",x));const _=async()=>{try{const{data:gt}=await At.get("https://pathfinder-development-production.up.railway.app/api/organization");s.value=gt.map(lt=>({...lt,organizationID:Number(lt.organizationID)})),console.log(" Organizations:",s.value),console.log(" Organizations:",gt)}catch(gt){console.error(" Failed to fetch organizations:",gt)}},C=async()=>{try{const gt=localStorage.getItem("token");if(!gt)return console.warn(" No token found");const[lt,E]=await Promise.all([At.get("https://pathfinder-development-production.up.railway.app/api/bookmarks",{headers:{Authorization:`Bearer ${gt}`}}),At.get("https://pathfinder-development-production.up.railway.app/api/career-bookmarks",{headers:{Authorization:`Bearer ${gt}`}})]),[M,B]=await Promise.all([At.get("https://pathfinder-development-production.up.railway.app/api/trainings"),At.get("https://pathfinder-development-production.up.railway.app/api/careers")]);console.log(" Trainings data from API:",M.data),console.log(" Careers data from API:",B.data),e.value=[...lt.data.map(at=>({trainingID:at,training:M.data.find(pt=>Number(pt.trainingID)===Number(at))||null})),...E.data.map(at=>({careerID:at.careerID,career:B.data.find(pt=>Number(pt.id)===Number(at.careerID))||null}))],console.log(" Career bookmarks:",E.data),console.log(" All careers:",B.data),console.log(" Mapped careers:",e.value.filter(at=>at.career))}catch(gt){console.error(" Failed to load bookmarks:",gt.response?.data||gt)}},A=cn(()=>e.value.filter(gt=>gt.training).map(gt=>({...gt.training,trainingID:gt.trainingID,registered:o.value.has(gt.trainingID)}))),I=cn(()=>e.value.filter(gt=>gt.career).map(gt=>{const lt=s.value.find(E=>E.organizationID===gt.career.organization_id);return{...gt.career,careerID:gt.careerID,organization:lt||null}})),R=gt=>$(gt)?e.value.some(lt=>lt.trainingID===gt.trainingID):e.value.some(lt=>lt.careerID===gt.careerID);async function L(){try{const gt=localStorage.getItem("token");if(!gt)return;const E=(await At.get("https://pathfinder-development-production.up.railway.app/api/registrations",{headers:{Authorization:`Bearer ${gt}`}})).data||[];let M=0,B=0;const at=new Date().getTime();E.forEach(pt=>{const nt=(pt.registrationStatus||"").toLowerCase(),ct=pt.end_time?at>new Date(pt.end_time).getTime():!1;nt==="completed"||ct?B++:["upcoming","registered"].includes(nt)&&M++}),l.value=M,c.value=B}catch(gt){console.error(" Error fetching training counters:",gt)}}const P=async()=>{try{const gt=localStorage.getItem("token");if(!gt)return;const{data:lt}=await At.get("https://pathfinder-development-production.up.railway.app/api/registrations",{headers:{Authorization:`Bearer ${gt}`}});console.log(" /api/registrations response:",lt),o.value=new Set(lt.map(E=>Number(E.trainingID))),console.log(" Registered trainings:",[...o.value])}catch(gt){console.error(" Failed to load registrations:",gt.response?.data||gt)}},V=gt=>{g.value=gt},T=()=>{g.value=null},D=gt=>{g.value=gt,m.value=!0,u.value=d.value.has(gt.careerID)},K=()=>{m.value=!1,b.value=null,u.value=!1,g.value=null},$=gt=>!!gt.title,q=gt=>new Date(gt).toLocaleDateString("en-PH",{dateStyle:"medium"}),W=async gt=>{try{const lt=localStorage.getItem("token");if(!lt)return console.warn(" No token found");R(gt)?$(gt)?(await At.delete(`https://pathfinder-development-production.up.railway.app/api/bookmarks/${gt.trainingID}`,{headers:{Authorization:`Bearer ${lt}`}}),e.value=e.value.filter(E=>E.trainingID!==gt.trainingID)):(await At.delete(`https://pathfinder-development-production.up.railway.app/api/career-bookmarks/${gt.careerID}`,{headers:{Authorization:`Bearer ${lt}`}}),e.value=e.value.filter(E=>E.careerID!==gt.careerID)):$(gt)?(await At.post("https://pathfinder-development-production.up.railway.app/api/bookmarks",{trainingID:gt.trainingID},{headers:{Authorization:`Bearer ${lt}`}}),e.value.push({trainingID:gt.trainingID,training:gt})):(await At.post("https://pathfinder-development-production.up.railway.app/api/career-bookmarks",{careerID:gt.careerID},{headers:{Authorization:`Bearer ${lt}`}}),e.value.push({careerID:gt.careerID,career:gt}))}catch(lt){console.error(" Failed to toggle bookmark:",lt.response?.data||lt)}},F=async gt=>{const lt=localStorage.getItem("token");if(!lt)return console.warn(" No token found");if(o.value.has(gt.trainingID))try{const M=(await At.get("https://pathfinder-development-production.up.railway.app/api/registrations",{headers:{Authorization:`Bearer ${lt}`}})).data.find(B=>B.trainingID===gt.trainingID);if(!M){addToast("Registration not found","error");return}await At.delete(`https://pathfinder-development-production.up.railway.app/api/registrations/${M.registrationID}`,{headers:{Authorization:`Bearer ${lt}`}}),o.value.delete(gt.trainingID),addToast("You have been unregistered","info"),o.value=new Set([...o.value])}catch(E){console.error(E),addToast("Failed to unregister","error")}else try{await At.post("https://pathfinder-development-production.up.railway.app/api/registrations",{trainingID:gt.trainingID},{headers:{Authorization:`Bearer ${lt}`}}),o.value.add(gt.trainingID),addToast("Registered successfully!","success"),o.value=new Set([...o.value])}catch(E){E.response?.status===409?addToast("Already registered","accent"):addToast("Failed to register","error")}},O=async()=>{if(!b.value)return addToast("Please select a PDF","error");const gt=localStorage.getItem("token");if(!gt)return addToast("You must be logged in","error");const lt=new FormData;lt.append("file",b.value),lt.append("careerID",g.value.careerID);try{const E=await At.post("https://pathfinder-development-production.up.railway.app/api/applications",lt,{headers:{Authorization:`Bearer ${gt}`,"Content-Type":"multipart/form-data"}}),M=Number(g.value?.careerID);isNaN(M)||d.value.add(M),K(),b.value=null}catch(E){E.response?.status===409?(addToast("Already applied","info"),Number(g.value?.careerID),d.value.add(g.value.careerID)):(console.error(" Application error:",E.response?.data||E),addToast("Failed to submit application","error"))}};ut(new Set);const et=async()=>{try{const gt=localStorage.getItem("token");if(!gt)return;const{data:lt}=await At.get("https://pathfinder-development-production.up.railway.app/api/applications",{headers:{Authorization:`Bearer ${gt}`}});d.value=new Set(lt.map(E=>Number(E.careerID||E.career_id))),console.log(" Applied careers:",d.value),console.log(" diplayed career length",I.value.length)}catch(gt){console.error(gt)}};return je(()=>{_(),C(),L(),P(),et();const gt=localStorage.getItem("user");if(gt)try{const lt=JSON.parse(gt);t.value=`${lt.firstName} ${lt.lastName}`}catch{t.value="Guest"}else t.value="Guest"}),(gt,lt)=>(j(),z("main",X$,[p("div",Z$,[p("div",J$,[p("div",Q$,[lt[19]||(lt[19]=p("div",{class:"w-24 h-24 rounded-full bg-white mb-4"},[p("img",{src:"https://img.daisyui.com/images/profile/demo/yellingcat@192.webp",alt:"User Avatar",class:"w-full h-full object-cover rounded-full"})],-1)),p("h2",tB,J(t.value),1),p("div",eB,[p("div",nB,[lt[11]||(lt[11]=p("div",{class:"flex items-center justify-center bg-gray-100 rounded-full px-6 py-2"},[p("span",{class:"font-semibold text-gray-700"},"Upcoming")],-1)),p("span",sB,J(l.value),1)]),p("div",iB,[lt[12]||(lt[12]=p("div",{class:"flex items-center justify-center bg-gray-100 rounded-full px-6 py-2"},[p("span",{class:"font-semibold text-gray-700"},"Completed")],-1)),p("span",rB,J(c.value),1)])]),p("div",oB,[p("button",{class:"bg-customButton text-white py-2 px-10 rounded-md hover:bg-dark-slate flex items-center justify-start gap-2",onClick:lt[0]||(lt[0]=E=>gt.$router.push({name:"ResumeEditorpage"}))},lt[13]||(lt[13]=[p("svg",{class:"size-6 flex-shrink-0",viewBox:"0 0 34 34",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M19.8333 3.21521V9.06681C19.8333 9.86022 19.8333 10.2569 19.9877 10.56C20.1235 10.8265 20.3402 11.0432 20.6068 11.1791C20.9098 11.3335 21.3066 11.3335 22.1 11.3335H27.9516M22.6666 18.4167H11.3333M22.6666 24.0834H11.3333M14.1666 12.75H11.3333M19.8333 2.83337H12.4666C10.0864 2.83337 8.89629 2.83337 7.98717 3.2966C7.18748 3.70406 6.53731 4.35423 6.12985 5.15391C5.66663 6.06304 5.66663 7.25315 5.66663 9.63337V24.3667C5.66663 26.7469 5.66663 27.937 6.12985 28.8462C6.53731 29.6459 7.18748 30.296 7.98717 30.7035C8.89629 31.1667 10.0864 31.1667 12.4666 31.1667H21.5333C23.9135 31.1667 25.1036 31.1667 26.0128 30.7035C26.8124 30.296 27.4626 29.6459 27.8701 28.8462C28.3333 27.937 28.3333 26.7469 28.3333 24.3667V11.3334L19.8333 2.83337Z",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),p("span",null,"Resume",-1)])),p("button",{class:"bg-customButton text-white py-2 px-10 rounded-md hover:bg-dark-slate flex items-center justify-start gap-2",onClick:lt[1]||(lt[1]=E=>gt.$router.push({name:"Certificatespage"}))},lt[14]||(lt[14]=[p("svg",{class:"size-6 flex-shrink-0",viewBox:"0 0 35 35",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M9.47917 29.1666H7.29167C5.68084 29.1666 4.375 27.8608 4.375 26.25V5.83329C4.375 4.22246 5.68084 2.91663 7.29167 2.91663H27.7083C29.3192 2.91663 30.625 4.22246 30.625 5.83329V26.25C30.625 27.8608 29.3192 29.1666 27.7083 29.1666H25.5208M17.5 27.7083C19.9162 27.7083 21.875 25.7495 21.875 23.3333C21.875 20.917 19.9162 18.9583 17.5 18.9583C15.0838 18.9583 13.125 20.917 13.125 23.3333C13.125 25.7495 15.0838 27.7083 17.5 27.7083ZM17.5 27.7083L17.5313 27.708L12.8751 32.3641L8.75036 28.2393L13.1537 23.836M17.5 27.7083L22.1562 32.3641L26.281 28.2393L21.8777 23.836M13.125 8.74996H21.875M10.2083 13.8541H24.7917",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),p("span",null,"Certificates",-1)])),p("button",{class:"bg-customButton text-white py-2 px-10 rounded-md hover:bg-dark-slate flex items-center justify-start gap-2",onClick:lt[2]||(lt[2]=E=>gt.$router.push({name:"Bookmarkpage"}))},lt[15]||(lt[15]=[p("svg",{class:"size-6 flex-shrink-0",viewBox:"0 0 31 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M7.75 3.75V30L17.4375 20.625L27.125 30V3.75H7.75ZM23.25 0H3.875V26.25L5.8125 24.375V1.875H23.25V0Z",fill:"white"})],-1),p("span",null,"Bookmark",-1)])),lt[18]||(lt[18]=p("div",{class:"divider"},null,-1)),p("button",{class:"bg-customButton text-white py-2 px-10 rounded-md hover:bg-dark-slate flex items-center justify-start gap-2",onClick:lt[3]||(lt[3]=E=>gt.$router.push({name:"UpdateDeletepage"}))},lt[16]||(lt[16]=[p("svg",{class:"size-6 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M20.1 9.21994C18.29 9.21994 17.55 7.93994 18.45 6.36994C18.97 5.45994 18.66 4.29994 17.75 3.77994L16.02 2.78994C15.23 2.31994 14.21 2.59994 13.74 3.38994L13.63 3.57994C12.73 5.14994 11.25 5.14994 10.34 3.57994L10.23 3.38994C9.78 2.59994 8.76 2.31994 7.97 2.78994L6.24 3.77994C5.33 4.29994 5.02 5.46994 5.54 6.37994C6.45 7.93994 5.71 9.21994 3.9 9.21994C2.86 9.21994 2 10.0699 2 11.1199V12.8799C2 13.9199 2.85 14.7799 3.9 14.7799C5.71 14.7799 6.45 16.0599 5.54 17.6299C5.02 18.5399 5.33 19.6999 6.24 20.2199L7.97 21.2099C8.76 21.6799 9.78 21.3999 10.25 20.6099L10.36 20.4199C11.26 18.8499 12.74 18.8499 13.65 20.4199L13.76 20.6099C14.23 21.3999 15.25 21.6799 16.04 21.2099L17.77 20.2199C18.68 19.6999 18.99 18.5299 18.47 17.6299C17.56 16.0599 18.3 14.7799 20.11 14.7799C21.15 14.7799 22.01 13.9299 22.01 12.8799V11.1199C22 10.0799 21.15 9.21994 20.1 9.21994ZM12 15.2499C10.21 15.2499 8.75 13.7899 8.75 11.9999C8.75 10.2099 10.21 8.74994 12 8.74994C13.79 8.74994 15.25 10.2099 15.25 11.9999C15.25 13.7899 13.79 15.2499 12 15.2499Z",fill:"white"})],-1),p("span",null,"Account Setting",-1)])),p("button",{class:"bg-customButton text-white py-2 px-10 rounded-md hover:bg-dark-slate flex items-center justify-start gap-2",onClick:lt[4]||(lt[4]=(...E)=>gt.logout&&gt.logout(...E))},lt[17]||(lt[17]=[p("svg",{class:"size-6 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M15.24 22.27H15.11C10.67 22.27 8.53002 20.52 8.16002 16.6C8.12002 16.19 8.42002 15.82 8.84002 15.78C9.24002 15.74 9.62002 16.05 9.66002 16.46C9.95002 19.6 11.43 20.77 15.12 20.77H15.25C19.32 20.77 20.76 19.33 20.76 15.26V8.73998C20.76 4.66998 19.32 3.22998 15.25 3.22998H15.12C11.41 3.22998 9.93002 4.41998 9.66002 7.61998C9.61002 8.02998 9.26002 8.33998 8.84002 8.29998C8.42002 8.26998 8.12001 7.89998 8.15001 7.48998C8.49001 3.50998 10.64 1.72998 15.11 1.72998H15.24C20.15 1.72998 22.25 3.82998 22.25 8.73998V15.26C22.25 20.17 20.15 22.27 15.24 22.27Z",fill:"white"}),p("path",{d:"M15.0001 12.75H3.62012C3.21012 12.75 2.87012 12.41 2.87012 12C2.87012 11.59 3.21012 11.25 3.62012 11.25H15.0001C15.4101 11.25 15.7501 11.59 15.7501 12C15.7501 12.41 15.4101 12.75 15.0001 12.75Z",fill:"white"}),p("path",{d:"M5.84994 16.1C5.65994 16.1 5.46994 16.03 5.31994 15.88L1.96994 12.53C1.67994 12.24 1.67994 11.76 1.96994 11.47L5.31994 8.12003C5.60994 7.83003 6.08994 7.83003 6.37994 8.12003C6.66994 8.41003 6.66994 8.89003 6.37994 9.18003L3.55994 12L6.37994 14.82C6.66994 15.11 6.66994 15.59 6.37994 15.88C6.23994 16.03 6.03994 16.1 5.84994 16.1Z",fill:"white"})],-1),p("span",null,"Logout",-1)]))])]),p("div",aB,[p("div",lB,[p("div",cB,[p("div",uB,[p("button",{class:fe(["px-4 py-2 text-md font-medium",i.value==="career"?"border-b-2 border-dark-slate text-black font-semibold":"text-gray-500"]),onClick:lt[5]||(lt[5]=E=>i.value="career")}," Careers ",2),p("button",{class:fe(["px-4 py-2 text-md font-medium",i.value==="training"?"border-b-2 border-dark-slate text-black font-semibold":"text-gray-500"]),onClick:lt[6]||(lt[6]=E=>i.value="training")}," Trainings ",2)]),i.value==="career"?(j(),z("div",dB,[I.value.length?(j(),z("div",hB,[(j(!0),z(Kt,null,pe(I.value,E=>(j(),z("div",{key:E.careerID,onClick:M=>V(E),class:"p-4 rounded-lg cursor-pointer bg-blue-gray hover:bg-gray-300 transition"},[p("h3",pB,J(E.position),1),p("p",gB,J(E.organizationName||"Unknown Org"),1)],8,fB))),128))])):(j(),z("p",mB," No bookmarked careers found. "))])):(j(),z("div",bB,[A.value.length?(j(),z("div",vB,[(j(!0),z(Kt,null,pe(A.value,E=>(j(),z("div",{key:E.trainingID,onClick:M=>V(E),class:"p-4 border rounded-lg cursor-pointer bg-blue-gray hover:bg-gray-300 transition"},[p("h3",wB,J(E.title),1),p("p",_B,J(E.organization?.name||"Unknown Org"),1)],8,yB))),128))])):(j(),z("p",xB," No bookmarked trainings found. "))])),g.value?(j(),z("dialog",CB,[p("div",kB,[p("button",{class:"btn btn-sm btn-circle border-transparent bg-transparent absolute right-2 top-2",onClick:T},"  "),$(g.value)?(j(),z("div",AB,[p("h2",SB,J(g.value.title),1),p("p",EB," Organization: "+J(g.value.organization?.name||"Unknown Org"),1),p("div",TB,[p("button",{class:"btn btn-outline btn-sm",onClick:lt[7]||(lt[7]=E=>W(g.value))},J(R(g.value)?"Bookmarked":"Bookmark"),1),p("button",{class:fe(["btn bg-customButton btn-sm text-white",o.value.has(g.value.trainingID)?"bg-gray-500":"bg-customButton"]),onClick:lt[8]||(lt[8]=E=>F(g.value))},J(o.value.has(g.value.trainingID)?"Registered":"Register"),3)]),p("p",null,[lt[20]||(lt[20]=p("strong",null,"Mode:",-1)),Dt(" "+J(g.value.mode||"Not specified"),1)]),p("p",null,[lt[21]||(lt[21]=p("strong",null,"Description:",-1)),Dt(" "+J(g.value.description),1)]),g.value.mode?.toLowerCase()==="online"?(j(),z("p",LB,[lt[22]||(lt[22]=p("strong",null,"Link:",-1)),p("a",{href:g.value.trainingLink,target:"_blank",class:"text-blue-500 underline"},J(g.value.trainingLink),9,PB)])):(j(),z("p",IB,[lt[23]||(lt[23]=p("strong",null,"Location:",-1)),Dt(" "+J(g.value.location),1)])),gt.isRegistered?(j(),z("div",DB,[g.value.attendance_key&&!h.value?(j(),z("div",MB,[Ce(gc,{value:g.value.attendance_key,size:120},null,8,["value"]),p("p",RB," Expires in: "+J(f.value),1)])):(j(),z("div",NB,lt[24]||(lt[24]=[p("p",{class:"text-sm text-gray-500"}," QR code not yet generated or expired. ",-1)])))])):Ct("",!0)])):(j(),z("div",OB,[p("h2",FB,J(g.value.position),1),p("p",$B," Organization: "+J(g.value.organizationName||"Unknown Org"),1),p("div",BB,[p("button",{class:"btn btn-outline btn-sm",onClick:lt[9]||(lt[9]=E=>W(g.value))},J(R(g.value)?"Bookmarked":"Bookmark"),1),p("button",{class:"btn btn-sm bg-customButton text-white",onClick:lt[10]||(lt[10]=E=>D(g.value)),disabled:d.value.has(Number(g.value?.careerID))},J(d.value.has(Number(g.value?.careerID))?"Applied":"Apply"),9,jB)]),p("p",null,[lt[25]||(lt[25]=p("strong",null,"Details:",-1)),Dt(" "+J(g.value.detailsAndInstructions),1)]),p("p",null,[lt[26]||(lt[26]=p("strong",null,"Qualifications:",-1)),Dt(" "+J(g.value.qualifications),1)]),p("p",null,[lt[27]||(lt[27]=p("strong",null,"Requirements:",-1)),Dt(" "+J(g.value.requirements),1)]),p("p",null,[lt[28]||(lt[28]=p("strong",null,"Application Address:",-1)),Dt(" "+J(g.value.applicationLetterAddress),1)]),p("p",null,[lt[29]||(lt[29]=p("strong",null,"Deadline:",-1)),Dt(" "+J(q(g.value.deadlineOfSubmission)),1)])]))])])):Ct("",!0),m.value&&d.value?(j(),z("dialog",UB,[p("div",zB,[p("button",{class:"btn btn-sm btn-circle border-transparent bg-transparent absolute right-2 top-2",onClick:K},"  "),p("h2",HB," Apply for "+J(g.value?.position),1),p("form",{onSubmit:me(O,["prevent"])},[p("div",VB,[lt[30]||(lt[30]=p("label",{class:"block text-sm font-medium mb-1"},"Upload PDF Requirements",-1)),p("input",{type:"file",accept:"application/pdf",onChange:y,required:"",class:"file-input file-input-bordered w-full"},null,32)]),p("div",qB,[p("button",{type:"button",class:"btn btn-outline btn-sm",onClick:K}," Cancel "),p("button",{type:"submit",class:"btn bg-customButton hover:bg-dark-slate text-white btn-sm",disabled:d.value.has(Number(g.value?.careerID))},J(d.value.has(Number(g.value?.careerID))?"Applied":"Submit Application"),9,WB)])],32)])])):Ct("",!0),p("div",GB,[(j(!0),z(Kt,null,pe(a.value,E=>(j(),z("div",{key:E.id,class:fe(["alert",{"alert-info":E.type==="info","alert-success":E.type==="success","alert-accent":E.type==="accent"}])},J(E.message),3))),128))])])])])])])]))}},KB={class:"min-h-screen p-3 rounded-lg font-poppins"},XB={class:"min-h-screen font-poppins lg:flex"},ZB={class:"w-full lg:w-1/4 bg-white rounded-lg shadow p-6 flex flex-col items-center hidden lg:flex"},JB={class:"text-xl font-semibold mb-6"},QB={class:"w-full flex items-center justify-center gap-6 mb-6 relative"},tj={class:"relative"},ej={class:"absolute -top-2 -right-2 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-customButton rounded-full"},nj={class:"relative"},sj={class:"absolute -top-2 -right-2 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-customButton rounded-full"},ij={class:"w-full flex flex-col gap-3"},rj={class:"w-full lg:w-3/4 lg:pl-6 lg:mt-0 flex flex-col gap-6"},oj={class:"border bg-white rounded-lg p-4 space-y-4 relative"},aj=["onClick"],lj={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},cj=["onUpdate:modelValue"],uj=["onChange"],dj={key:0,class:"h-32 w-full flex items-center justify-center border rounded bg-gray-50"},hj=["src"],fj={key:1,class:"h-32 w-full flex items-center justify-center border rounded text-gray-400 text-sm"},pj={class:"flex justify-end mt-2"},gj=["onClick"],mj={class:"bg-white rounded-lg shadow p-6 flex-1"},bj={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},vj={class:"relative ml-auto"},yj={key:0,class:"absolute right-0 mt-2 w-44 bg-white border border-gray-200 rounded-md shadow-lg z-10"},wj=["onClick"],_j=["src"],xj={key:1,class:"text-gray-500"},Cj={class:"flex justify-between items-center px-4 py-3"},kj={class:"text-gray-800 font-medium truncate w-2/3"},Aj={class:"flex items-center gap-3"},Sj={class:"flex items-center justify-center",title:"Show on Resume"},Ej=["checked","disabled","onChange"],Tj=["onClick"],Lj={key:1,class:"text-xs text-green-600 font-semibold px-2 py-1 bg-green-100 rounded",title:"Organization-issued certificate"},Pj={class:"bg-white rounded-lg shadow-lg max-w-5xl w-full mx-4 relative flex flex-col",style:{"max-height":"90vh"}},Ij={class:"flex justify-between items-center p-4 border-b"},Dj={class:"text-lg font-semibold"},Mj={class:"flex-1 overflow-auto p-4"},Rj={key:0,class:"flex justify-center items-center min-h-[70vh]"},Nj=["src","alt"],Oj={key:1,class:"flex items-center justify-center h-64 text-gray-500"},Fj={class:"fixed top-5 right-5 space-y-2 z-50"},$j={key:1,class:"fixed inset-0 flex items-center justify-center z-50"},Bj={class:"bg-white p-6 rounded-xl shadow-xl w-80 text-center"},jj={class:"text-sm text-gray-600 mb-5"},Uj={class:"flex justify-center gap-3"},zj={__name:"Certificatespage",setup(n){const t=ut([]),e=gi(),s=ut([]),i=ut([]),r=ut(""),o=ut(!1),a=ut(null),l=ut(null),c=ut(0),u=ut(0);let d=null,f=null;const h=ut(new Set);function g(){s.value.push({title:"",image:null,file:null})}function m(E){s.value.splice(E,1)}function b(){A(),console.log("upcoming:",c.value,"completed:",u.value),d=setInterval(A,60*1e3)}function y(){d&&clearInterval(d)}function x(){const E=localStorage.getItem("user");if(E){const M=JSON.parse(E);M.applicantID&&(f=setInterval(()=>{I(M.applicantID)},30*1e3))}}function _(){f&&clearInterval(f)}function C(E,M){const B=E.target.files[0];if(!B)return;if(!B.type.startsWith("image/")){F("Please upload an image file","error");return}s.value[M].file=B;const at=new FileReader;at.onload=pt=>{s.value[M].image=pt.target.result},at.readAsDataURL(B)}async function A(){try{const E=localStorage.getItem("token");if(!E)return;const B=(await At.get("https://pathfinder-development-production.up.railway.app/api/registrations",{headers:{Authorization:`Bearer ${E}`}})).data||[];let at=0,pt=0;const nt=new Date().getTime();B.forEach(ct=>{console.log("end_time:",ct.end_time,"parsed:",Date.parse(ct.end_time));const G=(ct.registrationStatus||"").toLowerCase(),rt=ct.end_time?nt>Date.parse(ct.end_time):!1;G==="completed"||rt?pt++:["upcoming","registered"].includes(G)&&at++}),c.value=at,u.value=pt}catch(E){console.error(" Error fetching training counters:",E)}}async function I(E){try{const M=localStorage.getItem("token");if(!M){console.error(" No token found in localStorage"),F("Please log in to view certificates","error"),setTimeout(()=>{e.push({name:"Login"})},2e3);return}let B=[];try{B=((await At.get(`https://pathfinder-development-production.up.railway.app/api/certificates/${E}`,{headers:{Authorization:`Bearer ${M}`}})).data||[]).filter(nt=>nt.certificate&&!nt.certificate.startsWith("http")||!nt.certificate_path&&nt.certificate).map(nt=>({certificationID:nt.certificationID,certificationName:nt.certificationName,image:nt.certificate,IsSelected:nt.IsSelected===1||nt.IsSelected===!0,source:"manual",certificate_path:nt.certificate_path||null})),console.log(" Manual certificates loaded:",B.length)}catch(pt){console.warn(" Could not fetch manual certificates:",pt.message)}const{getPDFUrl:at}=await Xo(async()=>{const{getPDFUrl:pt}=await Promise.resolve().then(()=>Pu);return{getPDFUrl:pt}},void 0);try{const pt=await At.get("https://pathfinder-development-production.up.railway.app/api/registrations",{headers:{Authorization:`Bearer ${M}`}});console.log(" Registrations API response:",pt.data?.length||0,"registrations");const nt=(pt.data||[]).filter(rt=>rt.applicantID===E&&(rt.certificatePath||rt.certificate)&&rt.certificatePath!==null&&rt.certificatePath!=="");console.log(" Registrations with certificates for applicantID",E,":",nt.length);const G=(await Promise.all(nt.map(async rt=>{const wt=rt.certificatePath||rt.certificate;if(!wt)return null;const Q=at(wt,"Requirements"),ot=`${rt.title||rt.training?.title||`Training #${rt.trainingID||"Unknown"}`} - Certificate of Completion`;return{certificationID:"REG_"+rt.registrationID,certificationName:ot,image:Q,IsSelected:!1,source:"organization",registrationID:rt.registrationID,certGivenDate:rt.certGivenDate||null,certificate_path:wt}}))).filter(rt=>rt!==null);console.log(" Organization certificates loaded:",G.length),i.value=[...B,...G],console.log(" Total certificates loaded:",i.value.length),console.log("  - Manual:",B.length),console.log("  - Organization:",G.length),i.value.length===0&&console.log(" No certificates found for applicantID:",E)}catch(pt){if(console.error(" Error fetching registrations:",pt.response?.data||pt),i.value=B,pt.response?.status===401){F("Your session has expired. Please log in again.","error"),localStorage.removeItem("token"),localStorage.removeItem("user"),setTimeout(()=>{e.push({name:"Login"})},2e3);return}F("Failed to load some certificates. Please try again.","error")}}catch(M){if(console.error(" Error fetching certificates:",M.response?.data||M),M.response?.status===401){F("Your session has expired. Please log in again.","error"),localStorage.removeItem("token"),localStorage.removeItem("user"),setTimeout(()=>{e.push({name:"Login"})},2e3);return}F("Failed to load certificates. Please try again.","error")}}async function R(E,M){const B=localStorage.getItem("token"),at=JSON.parse(localStorage.getItem("user"));if(!B||!at){console.error("No token or user found");return}if(!(E.file instanceof File)){console.error(" cert.file is not a valid File object:",E.file);return}const pt=new FormData;pt.append("certificationName",E.title||"Untitled"),pt.append("certificate",E.file),pt.append("applicantID",at.applicantID);try{const nt=await At.post("https://pathfinder-development-production.up.railway.app/api/certificates",pt,{headers:{Authorization:`Bearer ${B}`,"Content-Type":"multipart/form-data"}});console.log(" Upload success:",nt.data),s.value.splice(M,1),await I(at.applicantID),F(`Certificate "${E.title||"Untitled"}" uploaded successfully!`,"success")}catch(nt){console.error(" Upload error:",nt.response?.data||nt),F("Failed to upload certificate","error")}}const L=ut(!1),P=ut(null);function V(E){P.value=E,L.value=!0}async function T(){const E=localStorage.getItem("token"),M=P.value.certificationID||P.value.id;if((P.value.source||"manual")==="organization"||M?.toString().startsWith("REG_")){F("Cannot delete organization-issued certificates","error"),L.value=!1,P.value=null;return}try{await At.delete(`https://pathfinder-development-production.up.railway.app/api/certificates/${M}`,{headers:{Authorization:`Bearer ${E}`}}),i.value=i.value.filter(at=>at.certificationID!==M&&at.id!==M),F("Certificate deleted successfully","success")}catch(at){console.error(" Delete error:",at.response?.data||at),F("Failed to delete certificate","error")}finally{L.value=!1,P.value=null}}async function D(E){const M=localStorage.getItem("token"),B=E.source||"manual",at=E.certificationID||E.id,pt=JSON.parse(localStorage.getItem("user")),nt=at?.toString()||E.certificate_path||"unknown";if(h.value.has(nt)){console.log(" Certificate toggle already in progress:",nt);return}if(h.value.add(nt),B==="organization"||at?.toString().startsWith("REG_")){try{const rt=((await At.get(`https://pathfinder-development-production.up.railway.app/api/certificates/${pt.applicantID}`,{headers:{Authorization:`Bearer ${M}`}})).data||[]).find(wt=>wt.certificate_path===E.certificate_path&&wt.certificationID&&!wt.certificationID.toString().startsWith("REG_"));if(rt){const wt=await At.patch(`https://pathfinder-development-production.up.railway.app/api/certificates/${rt.certificationID}/toggle`,{},{headers:{Authorization:`Bearer ${M}`,"Content-Type":"application/json"}});E.IsSelected=wt.data.IsSelected===1||wt.data.IsSelected===!0,E.certificationID=rt.certificationID}else{if(!E.certificate_path){console.error(" certificate_path is missing for organization certificate:",E),F("Certificate path is missing. Please refresh the page and try again.","error"),E.IsSelected=!E.IsSelected;return}const wt=new FormData;wt.append("certificationName",E.certificationName||"Certificate"),wt.append("certificate_path",E.certificate_path),wt.append("applicantID",pt.applicantID.toString()),wt.append("IsSelected","1"),console.log(" Creating Certification entry with:",{certificationName:E.certificationName,certificate_path:E.certificate_path,applicantID:pt.applicantID});const Q=await At.post("https://pathfinder-development-production.up.railway.app/api/certificates",wt,{headers:{Authorization:`Bearer ${M}`,"Content-Type":"multipart/form-data"}});E.IsSelected=!0,E.certificationID=Q.data.data?.certificationID||Q.data.certificationID,console.log(" Created Certification entry for organization certificate:",E.certificationID)}F(E.IsSelected?`"${E.certificationName}" added to resume!`:`"${E.certificationName}" removed from resume!`,"success"),await I(pt.applicantID)}catch(G){console.error(" Toggle organization certificate error:",G.response?.data||G),F("Failed to update selection. Please try again.","error"),E.IsSelected=!E.IsSelected}finally{h.value.delete(nt)}return}const ct=E.IsSelected;if(!at){console.error(" Certificate ID is missing:",E),F("Certificate ID is missing. Please refresh the page and try again.","error");return}try{E.IsSelected=!E.IsSelected;const G=await At.patch(`https://pathfinder-development-production.up.railway.app/api/certificates/${at}/toggle`,{},{headers:{Authorization:`Bearer ${M}`}});E.IsSelected=G.data.IsSelected===1||G.data.IsSelected===!0,F(E.IsSelected?`"${E.certificationName}" added to resume!`:`"${E.certificationName}" removed from resume!`,"success")}catch(G){E.IsSelected=ct,console.error(" Toggle selection error:",{error:G.response?.data||G.message,status:G.response?.status,certificateID:at,certificate:E});let rt="Failed to update selection. Please try again.";G.response?.status===404?rt="Certificate not found. Please refresh the page.":G.response?.status===401?rt="Session expired. Please log in again.":G.response?.data?.message&&(rt=G.response.data.message),F(rt,"error")}finally{h.value.delete(nt)}}function K(E){console.error("Image failed to load:",{src:E.target.src?.substring(0,100),error:E}),E.target.alt,E.target.style.display="none";const M=E.target.parentElement;M&&(M.innerHTML=`
      <div class="p-4 text-center">
        <svg class="w-12 h-12 text-red-400 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
        </svg>
        <p class="text-sm text-red-600 font-semibold mb-1">Failed to load image</p>
        <p class="text-xs text-gray-500">Please try re-uploading this certificate</p>
      </div>
    `)}function $(E,M){a.value=E,l.value=M,o.value=!0}function q(){o.value=!1}function W(){localStorage.removeItem("user"),e.push({name:"Login"})}je(async()=>{const E=localStorage.getItem("user");if(!localStorage.getItem("token")){console.error(" No token found - redirecting to login"),F("Please log in to view certificates","error"),setTimeout(()=>{e.push({name:"Login"})},2e3);return}if(E)try{const B=JSON.parse(E);r.value=B.firstName&&B.lastName?`${B.firstName} ${B.lastName}`:"Guest",B.applicantID?(await I(B.applicantID),x()):(console.warn(" No applicantID found in user data"),F("User data incomplete. Please log in again.","error"),setTimeout(()=>{e.push({name:"Login"})},2e3))}catch(B){console.error(" Error parsing user data:",B),localStorage.removeItem("user"),localStorage.removeItem("token"),F("Session data corrupted. Please log in again.","error"),setTimeout(()=>{e.push({name:"Login"})},2e3);return}else{console.error(" No user data found - redirecting to login"),F("Please log in to view certificates","error"),setTimeout(()=>{e.push({name:"Login"})},2e3);return}b(),await A()}),Zp(()=>{y(),_()});function F(E,M="success",B=3e3){const at=Date.now();t.value.push({id:at,message:E,type:M}),setTimeout(()=>{t.value=t.value.filter(pt=>pt.id!==at)},B)}const O=ut(!1),et=()=>{O.value=!O.value},gt=async()=>{const E=localStorage.getItem("token");try{await Promise.all(i.value.map(async M=>{if(!M.IsSelected){const B=M.source||"manual",at=M.certificationID||M.id;B==="organization"||at?.toString().startsWith("REG_")||await At.patch(`https://pathfinder-development-production.up.railway.app/api/certificates/${at}/toggle`,{},{headers:{Authorization:`Bearer ${E}`}}),M.IsSelected=!0}})),F("All certificates selected for resume!","success")}catch(M){console.error("Error selecting all certificates:",M),F("Failed to select all certificates","error")}finally{O.value=!1}},lt=async()=>{const E=localStorage.getItem("token");try{await Promise.all(i.value.map(async M=>{if(M.IsSelected){const B=M.source||"manual",at=M.certificationID||M.id;B==="organization"||at?.toString().startsWith("REG_")||await At.patch(`https://pathfinder-development-production.up.railway.app/api/certificates/${at}/toggle`,{},{headers:{Authorization:`Bearer ${E}`}}),M.IsSelected=!1}})),F("All certificates removed from resume!","success")}catch(M){console.error("Error deselecting all certificates:",M),F("Failed to deselect all certificates","error")}finally{O.value=!1}};return(E,M)=>(j(),z("div",KB,[p("div",XB,[p("div",ZB,[M[15]||(M[15]=p("div",{class:"w-24 h-24 rounded-full bg-white mb-4"},[p("img",{src:"https://img.daisyui.com/images/profile/demo/yellingcat@192.webp",alt:"User Avatar",class:"w-full h-full object-cover rounded-full"})],-1)),p("h2",JB,J(r.value),1),p("div",QB,[p("div",tj,[M[7]||(M[7]=p("div",{class:"flex items-center justify-center bg-gray-100 rounded-full px-6 py-2"},[p("span",{class:"font-semibold text-gray-700"},"Upcoming")],-1)),p("span",ej,J(c.value),1)]),p("div",nj,[M[8]||(M[8]=p("div",{class:"flex items-center justify-center bg-gray-100 rounded-full px-6 py-2"},[p("span",{class:"font-semibold text-gray-700"},"Completed")],-1)),p("span",sj,J(u.value),1)])]),p("div",ij,[p("button",{class:"bg-customButton text-white py-2 px-10 rounded-md hover:bg-dark-slate flex items-center justify-start gap-2",onClick:M[0]||(M[0]=B=>E.$router.push({name:"ResumeEditorpage"}))},M[9]||(M[9]=[p("svg",{class:"size-6 flex-shrink-0",viewBox:"0 0 34 34",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M19.8333 3.21521V9.06681C19.8333 9.86022 19.8333 10.2569 19.9877 10.56C20.1235 10.8265 20.3402 11.0432 20.6068 11.1791C20.9098 11.3335 21.3066 11.3335 22.1 11.3335H27.9516M22.6666 18.4167H11.3333M22.6666 24.0834H11.3333M14.1666 12.75H11.3333M19.8333 2.83337H12.4666C10.0864 2.83337 8.89629 2.83337 7.98717 3.2966C7.18748 3.70406 6.53731 4.35423 6.12985 5.15391C5.66663 6.06304 5.66663 7.25315 5.66663 9.63337V24.3667C5.66663 26.7469 5.66663 27.937 6.12985 28.8462C6.53731 29.6459 7.18748 30.296 7.98717 30.7035C8.89629 31.1667 10.0864 31.1667 12.4666 31.1667H21.5333C23.9135 31.1667 25.1036 31.1667 26.0128 30.7035C26.8124 30.296 27.4626 29.6459 27.8701 28.8462C28.3333 27.937 28.3333 26.7469 28.3333 24.3667V11.3334L19.8333 2.83337Z",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),p("span",null,"Resume",-1)])),p("button",{class:"bg-customButton text-white py-2 px-10 rounded-md hover:bg-dark-slate flex items-center justify-start gap-2",onClick:M[1]||(M[1]=B=>E.$router.push({name:"Certificatespage"}))},M[10]||(M[10]=[p("svg",{class:"size-6 flex-shrink-0",viewBox:"0 0 35 35",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M9.47917 29.1666H7.29167C5.68084 29.1666 4.375 27.8608 4.375 26.25V5.83329C4.375 4.22246 5.68084 2.91663 7.29167 2.91663H27.7083C29.3192 2.91663 30.625 4.22246 30.625 5.83329V26.25C30.625 27.8608 29.3192 29.1666 27.7083 29.1666H25.5208M17.5 27.7083C19.9162 27.7083 21.875 25.7495 21.875 23.3333C21.875 20.917 19.9162 18.9583 17.5 18.9583C15.0838 18.9583 13.125 20.917 13.125 23.3333C13.125 25.7495 15.0838 27.7083 17.5 27.7083ZM17.5 27.7083L17.5313 27.708L12.8751 32.3641L8.75036 28.2393L13.1537 23.836M17.5 27.7083L22.1562 32.3641L26.281 28.2393L21.8777 23.836M13.125 8.74996H21.875M10.2083 13.8541H24.7917",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),p("span",null,"Certificates",-1)])),p("button",{class:"bg-customButton text-white py-2 px-10 rounded-md hover:bg-dark-slate flex items-center justify-start gap-2",onClick:M[2]||(M[2]=B=>E.$router.push({name:"Bookmarkpage"}))},M[11]||(M[11]=[p("svg",{class:"size-6 flex-shrink-0",viewBox:"0 0 31 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M7.75 3.75V30L17.4375 20.625L27.125 30V3.75H7.75ZM23.25 0H3.875V26.25L5.8125 24.375V1.875H23.25V0Z",fill:"white"})],-1),p("span",null,"Bookmark",-1)])),M[14]||(M[14]=p("div",{class:"divider"},null,-1)),p("button",{class:"bg-customButton text-white py-2 px-10 rounded-md hover:bg-dark-slate flex items-center justify-start gap-2",onClick:M[3]||(M[3]=B=>E.$router.push({name:"UpdateDeletepage"}))},M[12]||(M[12]=[p("svg",{class:"size-6 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M20.1 9.21994C18.29 9.21994 17.55 7.93994 18.45 6.36994C18.97 5.45994 18.66 4.29994 17.75 3.77994L16.02 2.78994C15.23 2.31994 14.21 2.59994 13.74 3.38994L13.63 3.57994C12.73 5.14994 11.25 5.14994 10.34 3.57994L10.23 3.38994C9.78 2.59994 8.76 2.31994 7.97 2.78994L6.24 3.77994C5.33 4.29994 5.02 5.46994 5.54 6.37994C6.45 7.93994 5.71 9.21994 3.9 9.21994C2.86 9.21994 2 10.0699 2 11.1199V12.8799C2 13.9199 2.85 14.7799 3.9 14.7799C5.71 14.7799 6.45 16.0599 5.54 17.6299C5.02 18.5399 5.33 19.6999 6.24 20.2199L7.97 21.2099C8.76 21.6799 9.78 21.3999 10.25 20.6099L10.36 20.4199C11.26 18.8499 12.74 18.8499 13.65 20.4199L13.76 20.6099C14.23 21.3999 15.25 21.6799 16.04 21.2099L17.77 20.2199C18.68 19.6999 18.99 18.5299 18.47 17.6299C17.56 16.0599 18.3 14.7799 20.11 14.7799C21.15 14.7799 22.01 13.9299 22.01 12.8799V11.1199C22 10.0799 21.15 9.21994 20.1 9.21994ZM12 15.2499C10.21 15.2499 8.75 13.7899 8.75 11.9999C8.75 10.2099 10.21 8.74994 12 8.74994C13.79 8.74994 15.25 10.2099 15.25 11.9999C15.25 13.7899 13.79 15.2499 12 15.2499Z",fill:"white"})],-1),p("span",null,"Account Setting",-1)])),p("button",{class:"bg-customButton text-white py-2 px-10 rounded-md hover:bg-dark-slate flex items-center justify-start gap-2",onClick:W},M[13]||(M[13]=[p("svg",{class:"size-6 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M15.24 22.27H15.11C10.67 22.27 8.53002 20.52 8.16002 16.6C8.12002 16.19 8.42002 15.82 8.84002 15.78C9.24002 15.74 9.62002 16.05 9.66002 16.46C9.95002 19.6 11.43 20.77 15.12 20.77H15.25C19.32 20.77 20.76 19.33 20.76 15.26V8.73998C20.76 4.66998 19.32 3.22998 15.25 3.22998H15.12C11.41 3.22998 9.93002 4.41998 9.66002 7.61998C9.61002 8.02998 9.26002 8.33998 8.84002 8.29998C8.42002 8.26998 8.12001 7.89998 8.15001 7.48998C8.49001 3.50998 10.64 1.72998 15.11 1.72998H15.24C20.15 1.72998 22.25 3.82998 22.25 8.73998V15.26C22.25 20.17 20.15 22.27 15.24 22.27Z",fill:"white"}),p("path",{d:"M15.0001 12.75H3.62012C3.21012 12.75 2.87012 12.41 2.87012 12C2.87012 11.59 3.21012 11.25 3.62012 11.25H15.0001C15.4101 11.25 15.7501 11.59 15.7501 12C15.7501 12.41 15.4101 12.75 15.0001 12.75Z",fill:"white"}),p("path",{d:"M5.84994 16.1C5.65994 16.1 5.46994 16.03 5.31994 15.88L1.96994 12.53C1.67994 12.24 1.67994 11.76 1.96994 11.47L5.31994 8.12003C5.60994 7.83003 6.08994 7.83003 6.37994 8.12003C6.66994 8.41003 6.66994 8.89003 6.37994 9.18003L3.55994 12L6.37994 14.82C6.66994 15.11 6.66994 15.59 6.37994 15.88C6.23994 16.03 6.03994 16.1 5.84994 16.1Z",fill:"white"})],-1),p("span",null,"Logout",-1)]))])]),p("div",rj,[p("div",oj,[p("div",{class:"flex justify-between items-center"},[M[16]||(M[16]=p("h2",{class:"text-lg font-semibold"},"Upload Certificates",-1)),p("button",{type:"button",onClick:g,class:"w-8 h-8 flex items-center justify-center rounded-full bg-customButton text-white hover:bg-dark-slate"}," + ")]),(j(!0),z(Kt,null,pe(s.value,(B,at)=>(j(),z("div",{key:at,class:"space-y-2 border p-3 rounded relative"},[p("button",{type:"button",onClick:pt=>m(at),class:"absolute top-2 right-2 text-gray-500 hover:text-red-500"},"  ",8,aj),p("div",lj,[Ut(p("input",{"onUpdate:modelValue":pt=>B.title=pt,type:"text",placeholder:"Certificate Title",class:"input-field border rounded p-2"},null,8,cj),[[Wt,B.title]]),p("input",{type:"file",accept:"image/*",class:"file-input",onChange:pt=>C(pt,at)},null,40,uj)]),B.image?(j(),z("div",dj,[p("img",{src:B.image,alt:"Preview",class:"h-full w-full object-cover rounded-lg"},null,8,hj)])):(j(),z("div",fj," Certificate Preview ")),p("div",pj,[p("button",{type:"button",onClick:pt=>R(B,at),class:"px-4 py-2 bg-customButton text-white rounded hover:bg-dark-slate"}," Upload ",8,gj)])]))),128))]),p("div",mj,[p("div",bj,[M[18]||(M[18]=p("div",{class:"text-gray-500"}," Select certificates to appear in the resume. ",-1)),p("div",vj,[p("button",{onClick:et,class:"bg-customButton hover:bg-dark-slate text-white text-sm px-3 py-2 rounded-md transition"}," Manage Selection  "),O.value?(j(),z("div",yj,[p("button",{onClick:gt,class:"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100"}," Select All "),p("button",{onClick:lt,class:"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100"}," Deselect All ")])):Ct("",!0)]),(j(!0),z(Kt,null,pe(i.value,(B,at)=>(j(),z("div",{key:"uploaded-"+at,class:"flex flex-col bg-white shadow rounded-lg overflow-hidden relative"},[p("div",{class:"w-full h-48 bg-gray-200 flex items-center justify-center cursor-pointer hover:opacity-90 transition overflow-hidden",onClick:pt=>$(B.image,B.certificationName)},[B.image?(j(),z("img",{key:0,src:B.image,alt:"Certificate Image",class:"h-full w-full object-contain bg-white",onError:M[4]||(M[4]=pt=>K(pt))},null,40,_j)):(j(),z("span",xj,"No Certificate"))],8,wj),p("div",Cj,[p("p",kj,J(B.certificationName),1),p("div",Aj,[p("div",Sj,[p("input",{type:"checkbox",checked:B.IsSelected,disabled:h.value.has(B.certificationID?.toString()||B.certificate_path||"unknown"),onChange:()=>D(B),class:"w-4 h-4 accent-customButton cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed"},null,40,Ej)]),B.source!=="organization"&&!B.certificationID?.toString().startsWith("REG_")?(j(),z("button",{key:0,onClick:me(pt=>V(B),["stop"]),title:"Delete certificate"},M[17]||(M[17]=[p("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M7 21C6.45 21 5.97917 20.8042 5.5875 20.4125C5.19583 20.0208 5 19.55 5 19V6H4V4H9V3H15V4H20V6H19V19C19 19.55 18.8042 20.0208 18.4125 20.4125C18.0208 20.8042 17.55 21 17 21H7ZM17 6H7V19H17V6ZM9 17H11V8H9V17ZM13 17H15V8H13V17Z",fill:"#7A838F"})],-1)]),8,Tj)):Ct("",!0),B.source==="organization"||B.certificationID?.toString().startsWith("REG_")?(j(),z("span",Lj,"  Issued ")):Ct("",!0)])])]))),128))]),o.value?(j(),z("div",{key:0,class:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50",onClick:me(q,["self"])},[p("div",Pj,[p("div",Ij,[p("h3",Dj,J(l.value),1),p("button",{class:"text-gray-500 hover:text-gray-800 text-2xl font-bold",onClick:q},"  ")]),p("div",Mj,[a.value?(j(),z("div",Rj,[p("img",{src:a.value,alt:l.value,class:"max-h-[80vh] max-w-full w-auto rounded shadow-lg",onError:M[5]||(M[5]=B=>K(B))},null,40,Nj)])):(j(),z("div",Oj,M[19]||(M[19]=[p("div",{class:"text-center"},[p("p",{class:"mb-2"},"No certificate to display"),p("p",{class:"text-sm text-gray-400"},"Image data is missing")],-1)])))])])])):Ct("",!0),p("div",Fj,[(j(!0),z(Kt,null,pe(t.value,B=>(j(),z("div",{key:B.id,class:fe(["px-4 py-2 rounded shadow ",B.type==="success"?"bg-white text-black":B.type==="error"?"bg-red-500 text-white":"bg-gray-500"])},J(B.message),3))),128))]),L.value?(j(),z("div",$j,[p("div",Bj,[M[22]||(M[22]=p("h3",{class:"text-lg font-semibold mb-3 text-gray-800"}," Delete Certificate? ",-1)),p("p",jj,[M[20]||(M[20]=Dt(" Are you sure you want to delete ")),p("strong",null,J(P.value?.certificationName||P.value?.title),1),M[21]||(M[21]=Dt("? This action cannot be undone. "))]),p("div",Uj,[p("button",{onClick:M[6]||(M[6]=B=>L.value=!1),class:"px-4 py-2 bg-gray-300 rounded-lg text-gray-800 hover:bg-gray-400"}," Cancel "),p("button",{onClick:T,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700"}," Delete ")])])])):Ct("",!0)])])])]))}},Hj={class:"min-h-screen p-3 rounded-lg font-poppins"},Vj={class:"min-h-screen font-poppins lg:flex"},qj={class:"w-full lg:w-1/4 lg:mr-3 bg-white rounded-lg shadow p-6 flex flex-col items-center hidden lg:flex"},Wj={class:"text-xl font-semibold mb-6"},Gj={class:"w-full flex items-center justify-center gap-6 mb-6 relative"},Yj={class:"relative"},Kj={class:"absolute -top-2 -right-2 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-customButton rounded-full"},Xj={class:"relative"},Zj={class:"absolute -top-2 -right-2 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-customButton rounded-full"},Jj={class:"w-full flex flex-col gap-3"},Qj={class:"w-full lg:mt-0 lg:ml-3 flex flex-col gap-6"},tU={class:"bg-white rounded-lg shadow p-6 flex-1"},eU={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},nU={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},sU={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},iU={class:"w-full"},rU={key:0,class:"text-red-500 text-sm mt-1"},oU={__name:"UpdateDeletepage",setup(n){const t=gi(),e=ut(0),s=ut(0),i=ut({firstName:"",middleName:"",lastName:"",address:"",emailAddress:"",phoneNumber:"",newPassword:"",confirmPassword:"",currentPassword:""}),r=ut(""),o=cn(()=>!i.value.newPassword&&!i.value.confirmPassword?!0:i.value.newPassword===i.value.confirmPassword),a=cn(()=>o.value?"border-gray-300":"border-red-500"),l=cn(()=>i.value.confirmPassword&&!o.value);je(async()=>{c();try{const h=(await At.get("https://pathfinder-development-production.up.railway.app/api/user",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data;console.log(i.value.newPassword,i.value.confirmPassword),i.value={...i.value,firstName:h.firstName||h.first_name||"",middleName:h.middleName||h.middle_name||"",lastName:h.lastName||h.last_name||"",emailAddress:h.emailAddress||h.email||"",phoneNumber:h.phoneNumber||h.phone||"",address:h.address||""},r.value=`${i.value.firstName} ${i.value.lastName}`.trim(),localStorage.setItem("user",JSON.stringify(h))}catch(f){console.error("API failed, fallback to localStorage:",f);const h=localStorage.getItem("user");if(h){const g=JSON.parse(h);i.value={...i.value,firstName:g.firstName||g.first_name||"",middleName:g.middleName||g.middle_name||"",lastName:g.lastName||g.last_name||"",emailAddress:g.emailAddress||g.email||"",phoneNumber:g.phoneNumber||g.phone||"",address:g.address||""},r.value=`${i.value.firstName} ${i.value.lastName}`.trim()}}});async function c(){try{const f=localStorage.getItem("token");if(!f)return;const g=(await At.get("https://pathfinder-development-production.up.railway.app/api/registrations",{headers:{Authorization:`Bearer ${f}`}})).data||[];let m=0,b=0;const y=new Date().getTime();g.forEach(x=>{const _=(x.registrationStatus||"").toLowerCase(),C=x.end_time?y>new Date(x.end_time).getTime():!1;_==="completed"||C?b++:["upcoming","registered"].includes(_)&&m++}),e.value=m,s.value=b}catch(f){console.error(" Error fetching training counters:",f)}}const u=async()=>{const f=localStorage.getItem("token");if(!f){alert("You are not logged in.");return}try{if(await At.put("https://pathfinder-development-production.up.railway.app/api/user",i.value,{headers:{Authorization:`Bearer ${f}`}}),i.value.newPassword!==i.value.confirmPassword){alert("New password and confirmation do not match.");return}i.value.currentPassword&&i.value.newPassword&&i.value.confirmPassword&&(await At.post("https://pathfinder-development-production.up.railway.app/api/update-password",{currentPassword:i.value.currentPassword,newPassword:i.value.newPassword,newPassword_confirmation:i.value.confirmPassword},{headers:{Authorization:`Bearer ${f}`}}),alert("Password updated successfully!"),i.value.currentPassword="",i.value.newPassword="",i.value.confirmPassword=""),alert("Profile updated successfully!"),i.value.currentPassword=""}catch(h){console.error("Error during update:",h),alert(h.response?.data?.message||"Update failed.")}},d=()=>{localStorage.removeItem("user"),t.push({name:"Login"})};return(f,h)=>(j(),z("div",Hj,[p("div",Vj,[p("div",qj,[h[21]||(h[21]=p("div",{class:"w-24 h-24 rounded-full bg-white mb-4"},[p("div",{class:"avatar w-24 h-24 rounded-full bg-white mb-4"},[p("img",{src:"https://img.daisyui.com/images/profile/demo/yellingcat@192.webp",alt:"User Avatar",class:"w-full h-full object-cover rounded-full"})])],-1)),p("h2",Wj,J(r.value),1),p("div",Gj,[p("div",Yj,[h[13]||(h[13]=p("div",{class:"flex items-center justify-center bg-gray-100 rounded-full px-6 py-2"},[p("span",{class:"font-semibold text-gray-700"},"Upcoming")],-1)),p("span",Kj,J(e.value),1)]),p("div",Xj,[h[14]||(h[14]=p("div",{class:"flex items-center justify-center bg-gray-100 rounded-full px-6 py-2"},[p("span",{class:"font-semibold text-gray-700"},"Completed")],-1)),p("span",Zj,J(s.value),1)])]),p("div",Jj,[p("button",{class:"bg-customButton text-white py-2 px-10 rounded-md hover:bg-dark-slate flex items-center justify-start gap-2",onClick:h[0]||(h[0]=g=>f.$router.push({name:"ResumeEditorpage"}))},h[15]||(h[15]=[p("svg",{class:"size-6 flex-shrink-0",viewBox:"0 0 34 34",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M19.8333 3.21521V9.06681C19.8333 9.86022 19.8333 10.2569 19.9877 10.56C20.1235 10.8265 20.3402 11.0432 20.6068 11.1791C20.9098 11.3335 21.3066 11.3335 22.1 11.3335H27.9516M22.6666 18.4167H11.3333M22.6666 24.0834H11.3333M14.1666 12.75H11.3333M19.8333 2.83337H12.4666C10.0864 2.83337 8.89629 2.83337 7.98717 3.2966C7.18748 3.70406 6.53731 4.35423 6.12985 5.15391C5.66663 6.06304 5.66663 7.25315 5.66663 9.63337V24.3667C5.66663 26.7469 5.66663 27.937 6.12985 28.8462C6.53731 29.6459 7.18748 30.296 7.98717 30.7035C8.89629 31.1667 10.0864 31.1667 12.4666 31.1667H21.5333C23.9135 31.1667 25.1036 31.1667 26.0128 30.7035C26.8124 30.296 27.4626 29.6459 27.8701 28.8462C28.3333 27.937 28.3333 26.7469 28.3333 24.3667V11.3334L19.8333 2.83337Z",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),p("span",null,"Resume",-1)])),p("button",{class:"bg-customButton text-white py-2 px-10 rounded-md hover:bg-dark-slate flex items-center justify-start gap-2",onClick:h[1]||(h[1]=g=>f.$router.push({name:"Certificatespage"}))},h[16]||(h[16]=[p("svg",{class:"size-6 flex-shrink-0",viewBox:"0 0 35 35",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M9.47917 29.1666H7.29167C5.68084 29.1666 4.375 27.8608 4.375 26.25V5.83329C4.375 4.22246 5.68084 2.91663 7.29167 2.91663H27.7083C29.3192 2.91663 30.625 4.22246 30.625 5.83329V26.25C30.625 27.8608 29.3192 29.1666 27.7083 29.1666H25.5208M17.5 27.7083C19.9162 27.7083 21.875 25.7495 21.875 23.3333C21.875 20.917 19.9162 18.9583 17.5 18.9583C15.0838 18.9583 13.125 20.917 13.125 23.3333C13.125 25.7495 15.0838 27.7083 17.5 27.7083ZM17.5 27.7083L17.5313 27.708L12.8751 32.3641L8.75036 28.2393L13.1537 23.836M17.5 27.7083L22.1562 32.3641L26.281 28.2393L21.8777 23.836M13.125 8.74996H21.875M10.2083 13.8541H24.7917",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),p("span",null,"Certificates",-1)])),p("button",{class:"bg-customButton text-white py-2 px-10 rounded-md hover:bg-dark-slate flex items-center justify-start gap-2",onClick:h[2]||(h[2]=g=>f.$router.push({name:"Bookmarkpage"}))},h[17]||(h[17]=[p("svg",{class:"size-6 flex-shrink-0",viewBox:"0 0 31 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M7.75 3.75V30L17.4375 20.625L27.125 30V3.75H7.75ZM23.25 0H3.875V26.25L5.8125 24.375V1.875H23.25V0Z",fill:"white"})],-1),p("span",null,"Bookmark",-1)])),h[20]||(h[20]=p("div",{class:"divider"},null,-1)),p("button",{class:"bg-customButton text-white py-2 px-10 rounded-md hover:bg-dark-slate flex items-center justify-start gap-2",onClick:h[3]||(h[3]=g=>f.$router.push({name:"UpdateDeletepage"}))},h[18]||(h[18]=[p("svg",{class:"size-6 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M20.1 9.21994C18.29 9.21994 17.55 7.93994 18.45 6.36994C18.97 5.45994 18.66 4.29994 17.75 3.77994L16.02 2.78994C15.23 2.31994 14.21 2.59994 13.74 3.38994L13.63 3.57994C12.73 5.14994 11.25 5.14994 10.34 3.57994L10.23 3.38994C9.78 2.59994 8.76 2.31994 7.97 2.78994L6.24 3.77994C5.33 4.29994 5.02 5.46994 5.54 6.37994C6.45 7.93994 5.71 9.21994 3.9 9.21994C2.86 9.21994 2 10.0699 2 11.1199V12.8799C2 13.9199 2.85 14.7799 3.9 14.7799C5.71 14.7799 6.45 16.0599 5.54 17.6299C5.02 18.5399 5.33 19.6999 6.24 20.2199L7.97 21.2099C8.76 21.6799 9.78 21.3999 10.25 20.6099L10.36 20.4199C11.26 18.8499 12.74 18.8499 13.65 20.4199L13.76 20.6099C14.23 21.3999 15.25 21.6799 16.04 21.2099L17.77 20.2199C18.68 19.6999 18.99 18.5299 18.47 17.6299C17.56 16.0599 18.3 14.7799 20.11 14.7799C21.15 14.7799 22.01 13.9299 22.01 12.8799V11.1199C22 10.0799 21.15 9.21994 20.1 9.21994ZM12 15.2499C10.21 15.2499 8.75 13.7899 8.75 11.9999C8.75 10.2099 10.21 8.74994 12 8.74994C13.79 8.74994 15.25 10.2099 15.25 11.9999C15.25 13.7899 13.79 15.2499 12 15.2499Z",fill:"white"})],-1),p("span",null,"Account Setting",-1)])),p("button",{class:"bg-customButton text-white py-2 px-10 rounded-md hover:bg-dark-slate flex items-center justify-start gap-2",onClick:d},h[19]||(h[19]=[p("svg",{class:"size-6 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M15.24 22.27H15.11C10.67 22.27 8.53002 20.52 8.16002 16.6C8.12002 16.19 8.42002 15.82 8.84002 15.78C9.24002 15.74 9.62002 16.05 9.66002 16.46C9.95002 19.6 11.43 20.77 15.12 20.77H15.25C19.32 20.77 20.76 19.33 20.76 15.26V8.73998C20.76 4.66998 19.32 3.22998 15.25 3.22998H15.12C11.41 3.22998 9.93002 4.41998 9.66002 7.61998C9.61002 8.02998 9.26002 8.33998 8.84002 8.29998C8.42002 8.26998 8.12001 7.89998 8.15001 7.48998C8.49001 3.50998 10.64 1.72998 15.11 1.72998H15.24C20.15 1.72998 22.25 3.82998 22.25 8.73998V15.26C22.25 20.17 20.15 22.27 15.24 22.27Z",fill:"white"}),p("path",{d:"M15.0001 12.75H3.62012C3.21012 12.75 2.87012 12.41 2.87012 12C2.87012 11.59 3.21012 11.25 3.62012 11.25H15.0001C15.4101 11.25 15.7501 11.59 15.7501 12C15.7501 12.41 15.4101 12.75 15.0001 12.75Z",fill:"white"}),p("path",{d:"M5.84994 16.1C5.65994 16.1 5.46994 16.03 5.31994 15.88L1.96994 12.53C1.67994 12.24 1.67994 11.76 1.96994 11.47L5.31994 8.12003C5.60994 7.83003 6.08994 7.83003 6.37994 8.12003C6.66994 8.41003 6.66994 8.89003 6.37994 9.18003L3.55994 12L6.37994 14.82C6.66994 15.11 6.66994 15.59 6.37994 15.88C6.23994 16.03 6.03994 16.1 5.84994 16.1Z",fill:"white"})],-1),p("span",null,"Logout",-1)]))])]),p("div",Qj,[p("div",tU,[h[29]||(h[29]=p("div",{class:"flex justify-start gap-4 mb-4 py-4"},[p("h2",{class:"text-2xl font-bold"},"Account Setting")],-1)),p("form",{onSubmit:me(u,["prevent"]),class:"space-y-4 pt-4"},[h[22]||(h[22]=p("div",{class:"divider sm:hidden"},null,-1)),p("div",eU,[Ut(p("input",{class:"border border-gray-300 input w-full",type:"text",placeholder:"First Name","onUpdate:modelValue":h[4]||(h[4]=g=>i.value.firstName=g)},null,512),[[Wt,i.value.firstName]]),Ut(p("input",{class:"border border-gray-300 input w-full",type:"text",placeholder:"Middle Name","onUpdate:modelValue":h[5]||(h[5]=g=>i.value.middleName=g)},null,512),[[Wt,i.value.middleName]]),Ut(p("input",{class:"border border-gray-300 input w-full",type:"text",placeholder:"Last Name","onUpdate:modelValue":h[6]||(h[6]=g=>i.value.lastName=g)},null,512),[[Wt,i.value.lastName]])]),h[23]||(h[23]=p("div",{class:"hidden lg:block h-px bg-gray-300"},null,-1)),p("div",null,[Ut(p("input",{class:"border border-gray-300 input w-full",type:"text",placeholder:"Address","onUpdate:modelValue":h[7]||(h[7]=g=>i.value.address=g)},null,512),[[Wt,i.value.address]])]),h[24]||(h[24]=p("div",{class:"hidden lg:block h-px bg-gray-300"},null,-1)),p("div",nU,[Ut(p("input",{class:"border border-gray-300 input w-full text-gray-600",type:"email",placeholder:"Email","onUpdate:modelValue":h[8]||(h[8]=g=>i.value.emailAddress=g),readonly:""},null,512),[[Wt,i.value.emailAddress]]),Ut(p("input",{type:"tel",class:"border border-gray-300 input w-full",placeholder:"Phone Number",minlength:"11",maxlength:"11",pattern:"[0-9]*","onUpdate:modelValue":h[9]||(h[9]=g=>i.value.phoneNumber=g)},null,512),[[Wt,i.value.phoneNumber]])]),h[25]||(h[25]=p("div",{class:"hidden lg:block h-px bg-gray-300"},null,-1)),p("div",sU,[Ut(p("input",{type:"password",class:"border border-gray-300 input w-full",placeholder:"New Password (optional)","onUpdate:modelValue":h[10]||(h[10]=g=>i.value.newPassword=g)},null,512),[[Wt,i.value.newPassword]]),p("div",iU,[Ut(p("input",{type:"password",class:fe(["border input w-full",a.value]),placeholder:"Confirm New Password","onUpdate:modelValue":h[11]||(h[11]=g=>i.value.confirmPassword=g)},null,2),[[Wt,i.value.confirmPassword]]),l.value?(j(),z("p",rU," Passwords do not match. ")):Ct("",!0)])]),h[26]||(h[26]=p("div",{class:"hidden lg:block h-px bg-gray-300"},null,-1)),p("div",null,[Ut(p("input",{type:"password",class:"border border-gray-300 input w-full",placeholder:"Current Password","onUpdate:modelValue":h[12]||(h[12]=g=>i.value.currentPassword=g),required:""},null,512),[[Wt,i.value.currentPassword]])]),h[27]||(h[27]=p("div",{class:"hidden lg:block h-px bg-gray-300"},null,-1)),h[28]||(h[28]=p("div",{class:"flex justify-end pt-6"},[p("button",{type:"submit",class:"btn bg-customButton hover:bg-dark-slate text-white w-full sm:w-auto"}," Save Changes ")],-1))],32)])])])]))}};function fn(n){"@babel/helpers - typeof";return fn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fn(n)}var Rr=Uint8Array,Vi=Uint16Array,eb=Int32Array,nb=new Rr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),sb=new Rr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),E3=new Rr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),u7=function(n,t){for(var e=new Vi(31),s=0;s<31;++s)e[s]=t+=1<<n[s-1];for(var i=new eb(e[30]),s=1;s<30;++s)for(var r=e[s];r<e[s+1];++r)i[r]=r-e[s]<<5|s;return{b:e,r:i}},d7=u7(nb,2),aU=d7.b,km=d7.r;aU[28]=258,km[258]=28;var lU=u7(sb,0),T3=lU.r,Am=new Vi(32768);for(var Ln=0;Ln<32768;++Ln){var Ca=(Ln&43690)>>1|(Ln&21845)<<1;Ca=(Ca&52428)>>2|(Ca&13107)<<2,Ca=(Ca&61680)>>4|(Ca&3855)<<4,Am[Ln]=((Ca&65280)>>8|(Ca&255)<<8)>>1}var ah=function(n,t,e){for(var s=n.length,i=0,r=new Vi(t);i<s;++i)n[i]&&++r[n[i]-1];var o=new Vi(t);for(i=1;i<t;++i)o[i]=o[i-1]+r[i-1]<<1;var a;if(e){a=new Vi(1<<t);var l=15-t;for(i=0;i<s;++i)if(n[i])for(var c=i<<4|n[i],u=t-n[i],d=o[n[i]-1]++<<u,f=d|(1<<u)-1;d<=f;++d)a[Am[d]>>l]=c}else for(a=new Vi(s),i=0;i<s;++i)n[i]&&(a[i]=Am[o[n[i]-1]++]>>15-n[i]);return a},cc=new Rr(288);for(var Ln=0;Ln<144;++Ln)cc[Ln]=8;for(var Ln=144;Ln<256;++Ln)cc[Ln]=9;for(var Ln=256;Ln<280;++Ln)cc[Ln]=7;for(var Ln=280;Ln<288;++Ln)cc[Ln]=8;var Ap=new Rr(32);for(var Ln=0;Ln<32;++Ln)Ap[Ln]=5;var cU=ah(cc,9,0),uU=ah(Ap,5,0),h7=function(n){return(n+7)/8|0},dU=function(n,t,e){return(e==null||e>n.length)&&(e=n.length),new Rr(n.subarray(t,e))},Io=function(n,t,e){e<<=t&7;var s=t/8|0;n[s]|=e,n[s+1]|=e>>8},Cd=function(n,t,e){e<<=t&7;var s=t/8|0;n[s]|=e,n[s+1]|=e>>8,n[s+2]|=e>>16},q2=function(n,t){for(var e=[],s=0;s<n.length;++s)n[s]&&e.push({s,f:n[s]});var i=e.length,r=e.slice();if(!i)return{t:p7,l:0};if(i==1){var o=new Rr(e[0].s+1);return o[e[0].s]=1,{t:o,l:1}}e.sort(function(A,I){return A.f-I.f}),e.push({s:-1,f:25001});var a=e[0],l=e[1],c=0,u=1,d=2;for(e[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=i-1;)a=e[e[c].f<e[d].f?c++:d++],l=e[c!=u&&e[c].f<e[d].f?c++:d++],e[u++]={s:-1,f:a.f+l.f,l:a,r:l};for(var f=r[0].s,s=1;s<i;++s)r[s].s>f&&(f=r[s].s);var h=new Vi(f+1),g=Sm(e[u-1],h,0);if(g>t){var s=0,m=0,b=g-t,y=1<<b;for(r.sort(function(I,R){return h[R.s]-h[I.s]||I.f-R.f});s<i;++s){var x=r[s].s;if(h[x]>t)m+=y-(1<<g-h[x]),h[x]=t;else break}for(m>>=b;m>0;){var _=r[s].s;h[_]<t?m-=1<<t-h[_]++-1:++s}for(;s>=0&&m;--s){var C=r[s].s;h[C]==t&&(--h[C],++m)}g=t}return{t:new Rr(h),l:g}},Sm=function(n,t,e){return n.s==-1?Math.max(Sm(n.l,t,e+1),Sm(n.r,t,e+1)):t[n.s]=e},L3=function(n){for(var t=n.length;t&&!n[--t];);for(var e=new Vi(++t),s=0,i=n[0],r=1,o=function(l){e[s++]=l},a=1;a<=t;++a)if(n[a]==i&&a!=t)++r;else{if(!i&&r>2){for(;r>138;r-=138)o(32754);r>2&&(o(r>10?r-11<<5|28690:r-3<<5|12305),r=0)}else if(r>3){for(o(i),--r;r>6;r-=6)o(8304);r>2&&(o(r-3<<5|8208),r=0)}for(;r--;)o(i);r=1,i=n[a]}return{c:e.subarray(0,s),n:t}},kd=function(n,t){for(var e=0,s=0;s<t.length;++s)e+=n[s]*t[s];return e},f7=function(n,t,e){var s=e.length,i=h7(t+2);n[i]=s&255,n[i+1]=s>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var r=0;r<s;++r)n[i+r+4]=e[r];return(i+4+s)*8},P3=function(n,t,e,s,i,r,o,a,l,c,u){Io(t,u++,e),++i[256];for(var d=q2(i,15),f=d.t,h=d.l,g=q2(r,15),m=g.t,b=g.l,y=L3(f),x=y.c,_=y.n,C=L3(m),A=C.c,I=C.n,R=new Vi(19),L=0;L<x.length;++L)++R[x[L]&31];for(var L=0;L<A.length;++L)++R[A[L]&31];for(var P=q2(R,7),V=P.t,T=P.l,D=19;D>4&&!V[E3[D-1]];--D);var K=c+5<<3,$=kd(i,cc)+kd(r,Ap)+o,q=kd(i,f)+kd(r,m)+o+14+3*D+kd(R,V)+2*R[16]+3*R[17]+7*R[18];if(l>=0&&K<=$&&K<=q)return f7(t,u,n.subarray(l,l+c));var W,F,O,et;if(Io(t,u,1+(q<$)),u+=2,q<$){W=ah(f,h,0),F=f,O=ah(m,b,0),et=m;var gt=ah(V,T,0);Io(t,u,_-257),Io(t,u+5,I-1),Io(t,u+10,D-4),u+=14;for(var L=0;L<D;++L)Io(t,u+3*L,V[E3[L]]);u+=3*D;for(var lt=[x,A],E=0;E<2;++E)for(var M=lt[E],L=0;L<M.length;++L){var B=M[L]&31;Io(t,u,gt[B]),u+=V[B],B>15&&(Io(t,u,M[L]>>5&127),u+=M[L]>>12)}}else W=cU,F=cc,O=uU,et=Ap;for(var L=0;L<a;++L){var at=s[L];if(at>255){var B=at>>18&31;Cd(t,u,W[B+257]),u+=F[B+257],B>7&&(Io(t,u,at>>23&31),u+=nb[B]);var pt=at&31;Cd(t,u,O[pt]),u+=et[pt],pt>3&&(Cd(t,u,at>>5&8191),u+=sb[pt])}else Cd(t,u,W[at]),u+=F[at]}return Cd(t,u,W[256]),u+F[256]},hU=new eb([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),p7=new Rr(0),fU=function(n,t,e,s,i,r){var o=r.z||n.length,a=new Rr(s+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(s,a.length-i),c=r.l,u=(r.r||0)&7;if(t){u&&(l[0]=r.r>>3);for(var d=hU[t-1],f=d>>13,h=d&8191,g=(1<<e)-1,m=r.p||new Vi(32768),b=r.h||new Vi(g+1),y=Math.ceil(e/3),x=2*y,_=function(ot){return(n[ot]^n[ot+1]<<y^n[ot+2]<<x)&g},C=new eb(25e3),A=new Vi(288),I=new Vi(32),R=0,L=0,P=r.i||0,V=0,T=r.w||0,D=0;P+2<o;++P){var K=_(P),$=P&32767,q=b[K];if(m[$]=q,b[K]=$,T<=P){var W=o-P;if((R>7e3||V>24576)&&(W>423||!c)){u=P3(n,l,0,C,A,I,L,V,D,P-D,u),V=R=L=0,D=P;for(var F=0;F<286;++F)A[F]=0;for(var F=0;F<30;++F)I[F]=0}var O=2,et=0,gt=h,lt=$-q&32767;if(W>2&&K==_(P-lt))for(var E=Math.min(f,W)-1,M=Math.min(32767,P),B=Math.min(258,W);lt<=M&&--gt&&$!=q;){if(n[P+O]==n[P+O-lt]){for(var at=0;at<B&&n[P+at]==n[P+at-lt];++at);if(at>O){if(O=at,et=lt,at>E)break;for(var pt=Math.min(lt,at-2),nt=0,F=0;F<pt;++F){var ct=P-lt+F&32767,G=m[ct],rt=ct-G&32767;rt>nt&&(nt=rt,q=ct)}}}$=q,q=m[$],lt+=$-q&32767}if(et){C[V++]=268435456|km[O]<<18|T3[et];var wt=km[O]&31,Q=T3[et]&31;L+=nb[wt]+sb[Q],++A[257+wt],++I[Q],T=P+O,++R}else C[V++]=n[P],++A[n[P]]}}for(P=Math.max(P,T);P<o;++P)C[V++]=n[P],++A[n[P]];u=P3(n,l,c,C,A,I,L,V,D,P-D,u),c||(r.r=u&7|l[u/8|0]<<3,u-=7,r.h=b,r.p=m,r.i=P,r.w=T)}else{for(var P=r.w||0;P<o+c;P+=65535){var it=P+65535;it>=o&&(l[u/8|0]=c,it=o),u=f7(l,u+1,n.subarray(P,it))}r.i=o}return dU(a,0,s+h7(u)+i)},g7=function(){var n=1,t=0;return{p:function(e){for(var s=n,i=t,r=e.length|0,o=0;o!=r;){for(var a=Math.min(o+2655,r);o<a;++o)i+=s+=e[o];s=(s&65535)+15*(s>>16),i=(i&65535)+15*(i>>16)}n=s,t=i},d:function(){return n%=65521,t%=65521,(n&255)<<24|(n&65280)<<8|(t&255)<<8|t>>8}}},pU=function(n,t,e,s,i){if(!i&&(i={l:1},t.dictionary)){var r=t.dictionary.subarray(-32768),o=new Rr(r.length+n.length);o.set(r),o.set(n,r.length),n=o,i.w=r.length}return fU(n,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+t.mem,e,s,i)},m7=function(n,t,e){for(;e;++t)n[t]=e,e>>>=8},gU=function(n,t){var e=t.level,s=e==0?0:e<6?1:e==9?3:2;if(n[0]=120,n[1]=s<<6|(t.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,t.dictionary){var i=g7();i.p(t.dictionary),m7(n,2,i.d())}};function Em(n,t){t||(t={});var e=g7();e.p(n);var s=pU(n,t,t.dictionary?6:2,4);return gU(s,t),m7(s,s.length-4,e.d()),s}var mU=typeof TextDecoder<"u"&&new TextDecoder,bU=0;try{mU.decode(p7,{stream:!0}),bU=1}catch{}function vU(n){if(Array.isArray(n))return n}function yU(n,t){var e=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(e!=null){var s,i,r,o,a=[],l=!0,c=!1;try{if(r=(e=e.call(n)).next,t!==0)for(;!(l=(s=r.call(e)).done)&&(a.push(s.value),a.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&e.return!=null&&(o=e.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function I3(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,s=Array(t);e<t;e++)s[e]=n[e];return s}function wU(n,t){if(n){if(typeof n=="string")return I3(n,t);var e={}.toString.call(n).slice(8,-1);return e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set"?Array.from(n):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?I3(n,t):void 0}}function _U(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D3(n,t){return vU(n)||yU(n,t)||wU(n,t)||_U()}function M3(n,t="utf8"){return new TextDecoder(t).decode(n)}const xU=new TextEncoder;function CU(n){return xU.encode(n)}const kU=1024*8,AU=(()=>{const n=new Uint8Array(4),t=new Uint32Array(n.buffer);return!((t[0]=1)&n[0])})(),W2={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class ib{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(t=kU,e={}){let s=!1;typeof t=="number"?t=new ArrayBuffer(t):(s=!0,this.lastWrittenByte=t.byteLength);const i=e.offset?e.offset>>>0:0,r=t.byteLength-i;let o=i;(ArrayBuffer.isView(t)||t instanceof ib)&&(t.byteLength!==t.buffer.byteLength&&(o=t.byteOffset+i),t=t.buffer),s?this.lastWrittenByte=r:this.lastWrittenByte=0,this.buffer=t,this.length=r,this.byteLength=r,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,r),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const s=(this.offset+t)*2,i=new Uint8Array(s);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=s,this.byteLength=s,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,e){const s=W2[e].BYTES_PER_ELEMENT*t,i=this.byteOffset+this.offset,r=this.buffer.slice(i,i+s);if(this.littleEndian===AU&&e!=="uint8"&&e!=="int8"){const a=new Uint8Array(this.buffer.slice(i,i+s));a.reverse();const l=new W2[e](a.buffer);return this.offset+=s,l.reverse(),l}const o=new W2[e](r);return this.offset+=s,o}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let e="";for(let s=0;s<t;s++)e+=this.readChar();return e}readUtf8(t=1){return M3(this.readBytes(t))}decodeText(t=1,e="utf8"){return M3(this.readBytes(t),e)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let e=0;e<t.length;e++)this._data.setUint8(this.offset++,t[e]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let e=0;e<t.length;e++)this.writeUint8(t.charCodeAt(e));return this}writeUtf8(t){return this.writeBytes(CU(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Vu(n){let t=n.length;for(;--t>=0;)n[t]=0}const SU=3,EU=258,b7=29,TU=256,LU=TU+1+b7,v7=30,PU=512,IU=new Array((LU+2)*2);Vu(IU);const DU=new Array(v7*2);Vu(DU);const MU=new Array(PU);Vu(MU);const RU=new Array(EU-SU+1);Vu(RU);const NU=new Array(b7);Vu(NU);const OU=new Array(v7);Vu(OU);const FU=(n,t,e,s)=>{let i=n&65535|0,r=n>>>16&65535|0,o=0;for(;e!==0;){o=e>2e3?2e3:e,e-=o;do i=i+t[s++]|0,r=r+i|0;while(--o);i%=65521,r%=65521}return i|r<<16|0};var Tm=FU;const $U=()=>{let n,t=[];for(var e=0;e<256;e++){n=e;for(var s=0;s<8;s++)n=n&1?3988292384^n>>>1:n>>>1;t[e]=n}return t},BU=new Uint32Array($U()),jU=(n,t,e,s)=>{const i=BU,r=s+e;n^=-1;for(let o=s;o<r;o++)n=n>>>8^i[(n^t[o])&255];return n^-1};var Yr=jU,Lm={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},y7={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const UU=(n,t)=>Object.prototype.hasOwnProperty.call(n,t);var zU=function(n){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const e=t.shift();if(e){if(typeof e!="object")throw new TypeError(e+"must be non-object");for(const s in e)UU(e,s)&&(n[s]=e[s])}}return n},HU=n=>{let t=0;for(let s=0,i=n.length;s<i;s++)t+=n[s].length;const e=new Uint8Array(t);for(let s=0,i=0,r=n.length;s<r;s++){let o=n[s];e.set(o,i),i+=o.length}return e},w7={assign:zU,flattenChunks:HU};let _7=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{_7=!1}const Ph=new Uint8Array(256);for(let n=0;n<256;n++)Ph[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;Ph[254]=Ph[254]=1;var VU=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let t,e,s,i,r,o=n.length,a=0;for(i=0;i<o;i++)e=n.charCodeAt(i),(e&64512)===55296&&i+1<o&&(s=n.charCodeAt(i+1),(s&64512)===56320&&(e=65536+(e-55296<<10)+(s-56320),i++)),a+=e<128?1:e<2048?2:e<65536?3:4;for(t=new Uint8Array(a),r=0,i=0;r<a;i++)e=n.charCodeAt(i),(e&64512)===55296&&i+1<o&&(s=n.charCodeAt(i+1),(s&64512)===56320&&(e=65536+(e-55296<<10)+(s-56320),i++)),e<128?t[r++]=e:e<2048?(t[r++]=192|e>>>6,t[r++]=128|e&63):e<65536?(t[r++]=224|e>>>12,t[r++]=128|e>>>6&63,t[r++]=128|e&63):(t[r++]=240|e>>>18,t[r++]=128|e>>>12&63,t[r++]=128|e>>>6&63,t[r++]=128|e&63);return t};const qU=(n,t)=>{if(t<65534&&n.subarray&&_7)return String.fromCharCode.apply(null,n.length===t?n:n.subarray(0,t));let e="";for(let s=0;s<t;s++)e+=String.fromCharCode(n[s]);return e};var WU=(n,t)=>{const e=t||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,t));let s,i;const r=new Array(e*2);for(i=0,s=0;s<e;){let o=n[s++];if(o<128){r[i++]=o;continue}let a=Ph[o];if(a>4){r[i++]=65533,s+=a-1;continue}for(o&=a===2?31:a===3?15:7;a>1&&s<e;)o=o<<6|n[s++]&63,a--;if(a>1){r[i++]=65533;continue}o<65536?r[i++]=o:(o-=65536,r[i++]=55296|o>>10&1023,r[i++]=56320|o&1023)}return qU(r,i)},GU=(n,t)=>{t=t||n.length,t>n.length&&(t=n.length);let e=t-1;for(;e>=0&&(n[e]&192)===128;)e--;return e<0||e===0?t:e+Ph[n[e]]>t?e:t},Pm={string2buf:VU,buf2string:WU,utf8border:GU};function YU(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var KU=YU;const u1=16209,XU=16191;var ZU=function(t,e){let s,i,r,o,a,l,c,u,d,f,h,g,m,b,y,x,_,C,A,I,R,L,P,V;const T=t.state;s=t.next_in,P=t.input,i=s+(t.avail_in-5),r=t.next_out,V=t.output,o=r-(e-t.avail_out),a=r+(t.avail_out-257),l=T.dmax,c=T.wsize,u=T.whave,d=T.wnext,f=T.window,h=T.hold,g=T.bits,m=T.lencode,b=T.distcode,y=(1<<T.lenbits)-1,x=(1<<T.distbits)-1;t:do{g<15&&(h+=P[s++]<<g,g+=8,h+=P[s++]<<g,g+=8),_=m[h&y];e:for(;;){if(C=_>>>24,h>>>=C,g-=C,C=_>>>16&255,C===0)V[r++]=_&65535;else if(C&16){A=_&65535,C&=15,C&&(g<C&&(h+=P[s++]<<g,g+=8),A+=h&(1<<C)-1,h>>>=C,g-=C),g<15&&(h+=P[s++]<<g,g+=8,h+=P[s++]<<g,g+=8),_=b[h&x];n:for(;;){if(C=_>>>24,h>>>=C,g-=C,C=_>>>16&255,C&16){if(I=_&65535,C&=15,g<C&&(h+=P[s++]<<g,g+=8,g<C&&(h+=P[s++]<<g,g+=8)),I+=h&(1<<C)-1,I>l){t.msg="invalid distance too far back",T.mode=u1;break t}if(h>>>=C,g-=C,C=r-o,I>C){if(C=I-C,C>u&&T.sane){t.msg="invalid distance too far back",T.mode=u1;break t}if(R=0,L=f,d===0){if(R+=c-C,C<A){A-=C;do V[r++]=f[R++];while(--C);R=r-I,L=V}}else if(d<C){if(R+=c+d-C,C-=d,C<A){A-=C;do V[r++]=f[R++];while(--C);if(R=0,d<A){C=d,A-=C;do V[r++]=f[R++];while(--C);R=r-I,L=V}}}else if(R+=d-C,C<A){A-=C;do V[r++]=f[R++];while(--C);R=r-I,L=V}for(;A>2;)V[r++]=L[R++],V[r++]=L[R++],V[r++]=L[R++],A-=3;A&&(V[r++]=L[R++],A>1&&(V[r++]=L[R++]))}else{R=r-I;do V[r++]=V[R++],V[r++]=V[R++],V[r++]=V[R++],A-=3;while(A>2);A&&(V[r++]=V[R++],A>1&&(V[r++]=V[R++]))}}else if((C&64)===0){_=b[(_&65535)+(h&(1<<C)-1)];continue n}else{t.msg="invalid distance code",T.mode=u1;break t}break}}else if((C&64)===0){_=m[(_&65535)+(h&(1<<C)-1)];continue e}else if(C&32){T.mode=XU;break t}else{t.msg="invalid literal/length code",T.mode=u1;break t}break}}while(s<i&&r<a);A=g>>3,s-=A,g-=A<<3,h&=(1<<g)-1,t.next_in=s,t.next_out=r,t.avail_in=s<i?5+(i-s):5-(s-i),t.avail_out=r<a?257+(a-r):257-(r-a),T.hold=h,T.bits=g};const Uc=15,R3=852,N3=592,O3=0,G2=1,F3=2,JU=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),QU=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),tz=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ez=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),nz=(n,t,e,s,i,r,o,a)=>{const l=a.bits;let c=0,u=0,d=0,f=0,h=0,g=0,m=0,b=0,y=0,x=0,_,C,A,I,R,L=null,P;const V=new Uint16Array(Uc+1),T=new Uint16Array(Uc+1);let D=null,K,$,q;for(c=0;c<=Uc;c++)V[c]=0;for(u=0;u<s;u++)V[t[e+u]]++;for(h=l,f=Uc;f>=1&&V[f]===0;f--);if(h>f&&(h=f),f===0)return i[r++]=1<<24|64<<16|0,i[r++]=1<<24|64<<16|0,a.bits=1,0;for(d=1;d<f&&V[d]===0;d++);for(h<d&&(h=d),b=1,c=1;c<=Uc;c++)if(b<<=1,b-=V[c],b<0)return-1;if(b>0&&(n===O3||f!==1))return-1;for(T[1]=0,c=1;c<Uc;c++)T[c+1]=T[c]+V[c];for(u=0;u<s;u++)t[e+u]!==0&&(o[T[t[e+u]]++]=u);if(n===O3?(L=D=o,P=20):n===G2?(L=JU,D=QU,P=257):(L=tz,D=ez,P=0),x=0,u=0,c=d,R=r,g=h,m=0,A=-1,y=1<<h,I=y-1,n===G2&&y>R3||n===F3&&y>N3)return 1;for(;;){K=c-m,o[u]+1<P?($=0,q=o[u]):o[u]>=P?($=D[o[u]-P],q=L[o[u]-P]):($=96,q=0),_=1<<c-m,C=1<<g,d=C;do C-=_,i[R+(x>>m)+C]=K<<24|$<<16|q|0;while(C!==0);for(_=1<<c-1;x&_;)_>>=1;if(_!==0?(x&=_-1,x+=_):x=0,u++,--V[c]===0){if(c===f)break;c=t[e+o[u]]}if(c>h&&(x&I)!==A){for(m===0&&(m=h),R+=d,g=c-m,b=1<<g;g+m<f&&(b-=V[g+m],!(b<=0));)g++,b<<=1;if(y+=1<<g,n===G2&&y>R3||n===F3&&y>N3)return 1;A=x&I,i[A]=h<<24|g<<16|R-r|0}}return x!==0&&(i[R+x]=c-m<<24|64<<16|0),a.bits=h,0};var lh=nz;const sz=0,x7=1,C7=2,{Z_FINISH:$3,Z_BLOCK:iz,Z_TREES:d1,Z_OK:uc,Z_STREAM_END:rz,Z_NEED_DICT:oz,Z_STREAM_ERROR:fr,Z_DATA_ERROR:k7,Z_MEM_ERROR:A7,Z_BUF_ERROR:az,Z_DEFLATED:B3}=y7,pg=16180,j3=16181,U3=16182,z3=16183,H3=16184,V3=16185,q3=16186,W3=16187,G3=16188,Y3=16189,Sp=16190,Do=16191,Y2=16192,K3=16193,K2=16194,X3=16195,Z3=16196,J3=16197,Q3=16198,h1=16199,f1=16200,tw=16201,ew=16202,nw=16203,sw=16204,iw=16205,X2=16206,rw=16207,ow=16208,Dn=16209,S7=16210,E7=16211,lz=852,cz=592,uz=15,dz=uz,aw=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function hz(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const mc=n=>{if(!n)return 1;const t=n.state;return!t||t.strm!==n||t.mode<pg||t.mode>E7?1:0},T7=n=>{if(mc(n))return fr;const t=n.state;return n.total_in=n.total_out=t.total=0,n.msg="",t.wrap&&(n.adler=t.wrap&1),t.mode=pg,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(lz),t.distcode=t.distdyn=new Int32Array(cz),t.sane=1,t.back=-1,uc},L7=n=>{if(mc(n))return fr;const t=n.state;return t.wsize=0,t.whave=0,t.wnext=0,T7(n)},P7=(n,t)=>{let e;if(mc(n))return fr;const s=n.state;return t<0?(e=0,t=-t):(e=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?fr:(s.window!==null&&s.wbits!==t&&(s.window=null),s.wrap=e,s.wbits=t,L7(n))},I7=(n,t)=>{if(!n)return fr;const e=new hz;n.state=e,e.strm=n,e.window=null,e.mode=pg;const s=P7(n,t);return s!==uc&&(n.state=null),s},fz=n=>I7(n,dz);let lw=!0,Z2,J2;const pz=n=>{if(lw){Z2=new Int32Array(512),J2=new Int32Array(32);let t=0;for(;t<144;)n.lens[t++]=8;for(;t<256;)n.lens[t++]=9;for(;t<280;)n.lens[t++]=7;for(;t<288;)n.lens[t++]=8;for(lh(x7,n.lens,0,288,Z2,0,n.work,{bits:9}),t=0;t<32;)n.lens[t++]=5;lh(C7,n.lens,0,32,J2,0,n.work,{bits:5}),lw=!1}n.lencode=Z2,n.lenbits=9,n.distcode=J2,n.distbits=5},D7=(n,t,e,s)=>{let i;const r=n.state;return r.window===null&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Uint8Array(r.wsize)),s>=r.wsize?(r.window.set(t.subarray(e-r.wsize,e),0),r.wnext=0,r.whave=r.wsize):(i=r.wsize-r.wnext,i>s&&(i=s),r.window.set(t.subarray(e-s,e-s+i),r.wnext),s-=i,s?(r.window.set(t.subarray(e-s,e),0),r.wnext=s,r.whave=r.wsize):(r.wnext+=i,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=i))),0},gz=(n,t)=>{let e,s,i,r,o,a,l,c,u,d,f,h,g,m,b=0,y,x,_,C,A,I,R,L;const P=new Uint8Array(4);let V,T;const D=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(mc(n)||!n.output||!n.input&&n.avail_in!==0)return fr;e=n.state,e.mode===Do&&(e.mode=Y2),o=n.next_out,i=n.output,l=n.avail_out,r=n.next_in,s=n.input,a=n.avail_in,c=e.hold,u=e.bits,d=a,f=l,L=uc;t:for(;;)switch(e.mode){case pg:if(e.wrap===0){e.mode=Y2;break}for(;u<16;){if(a===0)break t;a--,c+=s[r++]<<u,u+=8}if(e.wrap&2&&c===35615){e.wbits===0&&(e.wbits=15),e.check=0,P[0]=c&255,P[1]=c>>>8&255,e.check=Yr(e.check,P,2,0),c=0,u=0,e.mode=j3;break}if(e.head&&(e.head.done=!1),!(e.wrap&1)||(((c&255)<<8)+(c>>8))%31){n.msg="incorrect header check",e.mode=Dn;break}if((c&15)!==B3){n.msg="unknown compression method",e.mode=Dn;break}if(c>>>=4,u-=4,R=(c&15)+8,e.wbits===0&&(e.wbits=R),R>15||R>e.wbits){n.msg="invalid window size",e.mode=Dn;break}e.dmax=1<<e.wbits,e.flags=0,n.adler=e.check=1,e.mode=c&512?Y3:Do,c=0,u=0;break;case j3:for(;u<16;){if(a===0)break t;a--,c+=s[r++]<<u,u+=8}if(e.flags=c,(e.flags&255)!==B3){n.msg="unknown compression method",e.mode=Dn;break}if(e.flags&57344){n.msg="unknown header flags set",e.mode=Dn;break}e.head&&(e.head.text=c>>8&1),e.flags&512&&e.wrap&4&&(P[0]=c&255,P[1]=c>>>8&255,e.check=Yr(e.check,P,2,0)),c=0,u=0,e.mode=U3;case U3:for(;u<32;){if(a===0)break t;a--,c+=s[r++]<<u,u+=8}e.head&&(e.head.time=c),e.flags&512&&e.wrap&4&&(P[0]=c&255,P[1]=c>>>8&255,P[2]=c>>>16&255,P[3]=c>>>24&255,e.check=Yr(e.check,P,4,0)),c=0,u=0,e.mode=z3;case z3:for(;u<16;){if(a===0)break t;a--,c+=s[r++]<<u,u+=8}e.head&&(e.head.xflags=c&255,e.head.os=c>>8),e.flags&512&&e.wrap&4&&(P[0]=c&255,P[1]=c>>>8&255,e.check=Yr(e.check,P,2,0)),c=0,u=0,e.mode=H3;case H3:if(e.flags&1024){for(;u<16;){if(a===0)break t;a--,c+=s[r++]<<u,u+=8}e.length=c,e.head&&(e.head.extra_len=c),e.flags&512&&e.wrap&4&&(P[0]=c&255,P[1]=c>>>8&255,e.check=Yr(e.check,P,2,0)),c=0,u=0}else e.head&&(e.head.extra=null);e.mode=V3;case V3:if(e.flags&1024&&(h=e.length,h>a&&(h=a),h&&(e.head&&(R=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Uint8Array(e.head.extra_len)),e.head.extra.set(s.subarray(r,r+h),R)),e.flags&512&&e.wrap&4&&(e.check=Yr(e.check,s,h,r)),a-=h,r+=h,e.length-=h),e.length))break t;e.length=0,e.mode=q3;case q3:if(e.flags&2048){if(a===0)break t;h=0;do R=s[r+h++],e.head&&R&&e.length<65536&&(e.head.name+=String.fromCharCode(R));while(R&&h<a);if(e.flags&512&&e.wrap&4&&(e.check=Yr(e.check,s,h,r)),a-=h,r+=h,R)break t}else e.head&&(e.head.name=null);e.length=0,e.mode=W3;case W3:if(e.flags&4096){if(a===0)break t;h=0;do R=s[r+h++],e.head&&R&&e.length<65536&&(e.head.comment+=String.fromCharCode(R));while(R&&h<a);if(e.flags&512&&e.wrap&4&&(e.check=Yr(e.check,s,h,r)),a-=h,r+=h,R)break t}else e.head&&(e.head.comment=null);e.mode=G3;case G3:if(e.flags&512){for(;u<16;){if(a===0)break t;a--,c+=s[r++]<<u,u+=8}if(e.wrap&4&&c!==(e.check&65535)){n.msg="header crc mismatch",e.mode=Dn;break}c=0,u=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),n.adler=e.check=0,e.mode=Do;break;case Y3:for(;u<32;){if(a===0)break t;a--,c+=s[r++]<<u,u+=8}n.adler=e.check=aw(c),c=0,u=0,e.mode=Sp;case Sp:if(e.havedict===0)return n.next_out=o,n.avail_out=l,n.next_in=r,n.avail_in=a,e.hold=c,e.bits=u,oz;n.adler=e.check=1,e.mode=Do;case Do:if(t===iz||t===d1)break t;case Y2:if(e.last){c>>>=u&7,u-=u&7,e.mode=X2;break}for(;u<3;){if(a===0)break t;a--,c+=s[r++]<<u,u+=8}switch(e.last=c&1,c>>>=1,u-=1,c&3){case 0:e.mode=K3;break;case 1:if(pz(e),e.mode=h1,t===d1){c>>>=2,u-=2;break t}break;case 2:e.mode=Z3;break;case 3:n.msg="invalid block type",e.mode=Dn}c>>>=2,u-=2;break;case K3:for(c>>>=u&7,u-=u&7;u<32;){if(a===0)break t;a--,c+=s[r++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){n.msg="invalid stored block lengths",e.mode=Dn;break}if(e.length=c&65535,c=0,u=0,e.mode=K2,t===d1)break t;case K2:e.mode=X3;case X3:if(h=e.length,h){if(h>a&&(h=a),h>l&&(h=l),h===0)break t;i.set(s.subarray(r,r+h),o),a-=h,r+=h,l-=h,o+=h,e.length-=h;break}e.mode=Do;break;case Z3:for(;u<14;){if(a===0)break t;a--,c+=s[r++]<<u,u+=8}if(e.nlen=(c&31)+257,c>>>=5,u-=5,e.ndist=(c&31)+1,c>>>=5,u-=5,e.ncode=(c&15)+4,c>>>=4,u-=4,e.nlen>286||e.ndist>30){n.msg="too many length or distance symbols",e.mode=Dn;break}e.have=0,e.mode=J3;case J3:for(;e.have<e.ncode;){for(;u<3;){if(a===0)break t;a--,c+=s[r++]<<u,u+=8}e.lens[D[e.have++]]=c&7,c>>>=3,u-=3}for(;e.have<19;)e.lens[D[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,V={bits:e.lenbits},L=lh(sz,e.lens,0,19,e.lencode,0,e.work,V),e.lenbits=V.bits,L){n.msg="invalid code lengths set",e.mode=Dn;break}e.have=0,e.mode=Q3;case Q3:for(;e.have<e.nlen+e.ndist;){for(;b=e.lencode[c&(1<<e.lenbits)-1],y=b>>>24,x=b>>>16&255,_=b&65535,!(y<=u);){if(a===0)break t;a--,c+=s[r++]<<u,u+=8}if(_<16)c>>>=y,u-=y,e.lens[e.have++]=_;else{if(_===16){for(T=y+2;u<T;){if(a===0)break t;a--,c+=s[r++]<<u,u+=8}if(c>>>=y,u-=y,e.have===0){n.msg="invalid bit length repeat",e.mode=Dn;break}R=e.lens[e.have-1],h=3+(c&3),c>>>=2,u-=2}else if(_===17){for(T=y+3;u<T;){if(a===0)break t;a--,c+=s[r++]<<u,u+=8}c>>>=y,u-=y,R=0,h=3+(c&7),c>>>=3,u-=3}else{for(T=y+7;u<T;){if(a===0)break t;a--,c+=s[r++]<<u,u+=8}c>>>=y,u-=y,R=0,h=11+(c&127),c>>>=7,u-=7}if(e.have+h>e.nlen+e.ndist){n.msg="invalid bit length repeat",e.mode=Dn;break}for(;h--;)e.lens[e.have++]=R}}if(e.mode===Dn)break;if(e.lens[256]===0){n.msg="invalid code -- missing end-of-block",e.mode=Dn;break}if(e.lenbits=9,V={bits:e.lenbits},L=lh(x7,e.lens,0,e.nlen,e.lencode,0,e.work,V),e.lenbits=V.bits,L){n.msg="invalid literal/lengths set",e.mode=Dn;break}if(e.distbits=6,e.distcode=e.distdyn,V={bits:e.distbits},L=lh(C7,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,V),e.distbits=V.bits,L){n.msg="invalid distances set",e.mode=Dn;break}if(e.mode=h1,t===d1)break t;case h1:e.mode=f1;case f1:if(a>=6&&l>=258){n.next_out=o,n.avail_out=l,n.next_in=r,n.avail_in=a,e.hold=c,e.bits=u,ZU(n,f),o=n.next_out,i=n.output,l=n.avail_out,r=n.next_in,s=n.input,a=n.avail_in,c=e.hold,u=e.bits,e.mode===Do&&(e.back=-1);break}for(e.back=0;b=e.lencode[c&(1<<e.lenbits)-1],y=b>>>24,x=b>>>16&255,_=b&65535,!(y<=u);){if(a===0)break t;a--,c+=s[r++]<<u,u+=8}if(x&&(x&240)===0){for(C=y,A=x,I=_;b=e.lencode[I+((c&(1<<C+A)-1)>>C)],y=b>>>24,x=b>>>16&255,_=b&65535,!(C+y<=u);){if(a===0)break t;a--,c+=s[r++]<<u,u+=8}c>>>=C,u-=C,e.back+=C}if(c>>>=y,u-=y,e.back+=y,e.length=_,x===0){e.mode=iw;break}if(x&32){e.back=-1,e.mode=Do;break}if(x&64){n.msg="invalid literal/length code",e.mode=Dn;break}e.extra=x&15,e.mode=tw;case tw:if(e.extra){for(T=e.extra;u<T;){if(a===0)break t;a--,c+=s[r++]<<u,u+=8}e.length+=c&(1<<e.extra)-1,c>>>=e.extra,u-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=ew;case ew:for(;b=e.distcode[c&(1<<e.distbits)-1],y=b>>>24,x=b>>>16&255,_=b&65535,!(y<=u);){if(a===0)break t;a--,c+=s[r++]<<u,u+=8}if((x&240)===0){for(C=y,A=x,I=_;b=e.distcode[I+((c&(1<<C+A)-1)>>C)],y=b>>>24,x=b>>>16&255,_=b&65535,!(C+y<=u);){if(a===0)break t;a--,c+=s[r++]<<u,u+=8}c>>>=C,u-=C,e.back+=C}if(c>>>=y,u-=y,e.back+=y,x&64){n.msg="invalid distance code",e.mode=Dn;break}e.offset=_,e.extra=x&15,e.mode=nw;case nw:if(e.extra){for(T=e.extra;u<T;){if(a===0)break t;a--,c+=s[r++]<<u,u+=8}e.offset+=c&(1<<e.extra)-1,c>>>=e.extra,u-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){n.msg="invalid distance too far back",e.mode=Dn;break}e.mode=sw;case sw:if(l===0)break t;if(h=f-l,e.offset>h){if(h=e.offset-h,h>e.whave&&e.sane){n.msg="invalid distance too far back",e.mode=Dn;break}h>e.wnext?(h-=e.wnext,g=e.wsize-h):g=e.wnext-h,h>e.length&&(h=e.length),m=e.window}else m=i,g=o-e.offset,h=e.length;h>l&&(h=l),l-=h,e.length-=h;do i[o++]=m[g++];while(--h);e.length===0&&(e.mode=f1);break;case iw:if(l===0)break t;i[o++]=e.length,l--,e.mode=f1;break;case X2:if(e.wrap){for(;u<32;){if(a===0)break t;a--,c|=s[r++]<<u,u+=8}if(f-=l,n.total_out+=f,e.total+=f,e.wrap&4&&f&&(n.adler=e.check=e.flags?Yr(e.check,i,f,o-f):Tm(e.check,i,f,o-f)),f=l,e.wrap&4&&(e.flags?c:aw(c))!==e.check){n.msg="incorrect data check",e.mode=Dn;break}c=0,u=0}e.mode=rw;case rw:if(e.wrap&&e.flags){for(;u<32;){if(a===0)break t;a--,c+=s[r++]<<u,u+=8}if(e.wrap&4&&c!==(e.total&4294967295)){n.msg="incorrect length check",e.mode=Dn;break}c=0,u=0}e.mode=ow;case ow:L=rz;break t;case Dn:L=k7;break t;case S7:return A7;case E7:default:return fr}return n.next_out=o,n.avail_out=l,n.next_in=r,n.avail_in=a,e.hold=c,e.bits=u,(e.wsize||f!==n.avail_out&&e.mode<Dn&&(e.mode<X2||t!==$3))&&D7(n,n.output,n.next_out,f-n.avail_out),d-=n.avail_in,f-=n.avail_out,n.total_in+=d,n.total_out+=f,e.total+=f,e.wrap&4&&f&&(n.adler=e.check=e.flags?Yr(e.check,i,f,n.next_out-f):Tm(e.check,i,f,n.next_out-f)),n.data_type=e.bits+(e.last?64:0)+(e.mode===Do?128:0)+(e.mode===h1||e.mode===K2?256:0),(d===0&&f===0||t===$3)&&L===uc&&(L=az),L},mz=n=>{if(mc(n))return fr;let t=n.state;return t.window&&(t.window=null),n.state=null,uc},bz=(n,t)=>{if(mc(n))return fr;const e=n.state;return(e.wrap&2)===0?fr:(e.head=t,t.done=!1,uc)},vz=(n,t)=>{const e=t.length;let s,i,r;return mc(n)||(s=n.state,s.wrap!==0&&s.mode!==Sp)?fr:s.mode===Sp&&(i=1,i=Tm(i,t,e,0),i!==s.check)?k7:(r=D7(n,t,e,e),r?(s.mode=S7,A7):(s.havedict=1,uc))};var yz=L7,wz=P7,_z=T7,xz=fz,Cz=I7,kz=gz,Az=mz,Sz=bz,Ez=vz,Tz="pako inflate (from Nodeca project)",jo={inflateReset:yz,inflateReset2:wz,inflateResetKeep:_z,inflateInit:xz,inflateInit2:Cz,inflate:kz,inflateEnd:Az,inflateGetHeader:Sz,inflateSetDictionary:Ez,inflateInfo:Tz};function Lz(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Pz=Lz;const M7=Object.prototype.toString,{Z_NO_FLUSH:Iz,Z_FINISH:Dz,Z_OK:Ih,Z_STREAM_END:Q2,Z_NEED_DICT:t0,Z_STREAM_ERROR:Mz,Z_DATA_ERROR:cw,Z_MEM_ERROR:Rz}=y7;function nf(n){this.options=w7.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(n&&n.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new KU,this.strm.avail_out=0;let e=jo.inflateInit2(this.strm,t.windowBits);if(e!==Ih)throw new Error(Lm[e]);if(this.header=new Pz,jo.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Pm.string2buf(t.dictionary):M7.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(e=jo.inflateSetDictionary(this.strm,t.dictionary),e!==Ih)))throw new Error(Lm[e])}nf.prototype.push=function(n,t){const e=this.strm,s=this.options.chunkSize,i=this.options.dictionary;let r,o,a;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?Dz:Iz,M7.call(n)==="[object ArrayBuffer]"?e.input=new Uint8Array(n):e.input=n,e.next_in=0,e.avail_in=e.input.length;;){for(e.avail_out===0&&(e.output=new Uint8Array(s),e.next_out=0,e.avail_out=s),r=jo.inflate(e,o),r===t0&&i&&(r=jo.inflateSetDictionary(e,i),r===Ih?r=jo.inflate(e,o):r===cw&&(r=t0));e.avail_in>0&&r===Q2&&e.state.wrap>0&&n[e.next_in]!==0;)jo.inflateReset(e),r=jo.inflate(e,o);switch(r){case Mz:case cw:case t0:case Rz:return this.onEnd(r),this.ended=!0,!1}if(a=e.avail_out,e.next_out&&(e.avail_out===0||r===Q2))if(this.options.to==="string"){let l=Pm.utf8border(e.output,e.next_out),c=e.next_out-l,u=Pm.buf2string(e.output,l);e.next_out=c,e.avail_out=s-c,c&&e.output.set(e.output.subarray(l,l+c),0),this.onData(u)}else this.onData(e.output.length===e.next_out?e.output:e.output.subarray(0,e.next_out));if(!(r===Ih&&a===0)){if(r===Q2)return r=jo.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(e.avail_in===0)break}}return!0};nf.prototype.onData=function(n){this.chunks.push(n)};nf.prototype.onEnd=function(n){n===Ih&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=w7.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function Nz(n,t){const e=new nf(t);if(e.push(n),e.err)throw e.msg||Lm[e.err];return e.result}var Oz=nf,Fz=Nz,$z={Inflate:Oz,inflate:Fz};const{Inflate:Bz,inflate:jz}=$z;var uw=Bz,Uz=jz;const R7=[];for(let n=0;n<256;n++){let t=n;for(let e=0;e<8;e++)t&1?t=3988292384^t>>>1:t=t>>>1;R7[n]=t}const dw=4294967295;function zz(n,t,e){let s=n;for(let i=0;i<e;i++)s=R7[(s^t[i])&255]^s>>>8;return s}function Hz(n,t){return(zz(dw,n,t)^dw)>>>0}function hw(n,t,e){const s=n.readUint32(),i=Hz(new Uint8Array(n.buffer,n.byteOffset+n.offset-t-4,t),t);if(i!==s)throw new Error(`CRC mismatch for chunk ${e}. Expected ${s}, found ${i}`)}function N7(n,t,e){for(let s=0;s<e;s++)t[s]=n[s]}function O7(n,t,e,s){let i=0;for(;i<s;i++)t[i]=n[i];for(;i<e;i++)t[i]=n[i]+t[i-s]&255}function F7(n,t,e,s){let i=0;if(e.length===0)for(;i<s;i++)t[i]=n[i];else for(;i<s;i++)t[i]=n[i]+e[i]&255}function $7(n,t,e,s,i){let r=0;if(e.length===0){for(;r<i;r++)t[r]=n[r];for(;r<s;r++)t[r]=n[r]+(t[r-i]>>1)&255}else{for(;r<i;r++)t[r]=n[r]+(e[r]>>1)&255;for(;r<s;r++)t[r]=n[r]+(t[r-i]+e[r]>>1)&255}}function B7(n,t,e,s,i){let r=0;if(e.length===0){for(;r<i;r++)t[r]=n[r];for(;r<s;r++)t[r]=n[r]+t[r-i]&255}else{for(;r<i;r++)t[r]=n[r]+e[r]&255;for(;r<s;r++)t[r]=n[r]+Vz(t[r-i],e[r],e[r-i])&255}}function Vz(n,t,e){const s=n+t-e,i=Math.abs(s-n),r=Math.abs(s-t),o=Math.abs(s-e);return i<=r&&i<=o?n:r<=o?t:e}function qz(n,t,e,s,i,r){switch(n){case 0:N7(t,e,i);break;case 1:O7(t,e,i,r);break;case 2:F7(t,e,s,i);break;case 3:$7(t,e,s,i,r);break;case 4:B7(t,e,s,i,r);break;default:throw new Error(`Unsupported filter: ${n}`)}}const Wz=new Uint16Array([255]),Gz=new Uint8Array(Wz.buffer),Yz=Gz[0]===255;function Kz(n){const{data:t,width:e,height:s,channels:i,depth:r}=n,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],a=Math.ceil(r/8)*i,l=new Uint8Array(s*e*a);let c=0;for(let u=0;u<7;u++){const d=o[u],f=Math.ceil((e-d.x)/d.xStep),h=Math.ceil((s-d.y)/d.yStep);if(f<=0||h<=0)continue;const g=f*a,m=new Uint8Array(g);for(let b=0;b<h;b++){const y=t[c++],x=t.subarray(c,c+g);c+=g;const _=new Uint8Array(g);qz(y,x,_,m,g,a),m.set(_);for(let C=0;C<f;C++){const A=d.x+C*d.xStep,I=d.y+b*d.yStep;if(!(A>=e||I>=s))for(let R=0;R<a;R++)l[(I*e+A)*a+R]=_[C*a+R]}}}if(r===16){const u=new Uint16Array(l.buffer);if(Yz)for(let d=0;d<u.length;d++)u[d]=Xz(u[d]);return u}else return l}function Xz(n){return(n&255)<<8|n>>8&255}const Zz=new Uint16Array([255]),Jz=new Uint8Array(Zz.buffer),Qz=Jz[0]===255,tH=new Uint8Array(0);function fw(n){const{data:t,width:e,height:s,channels:i,depth:r}=n,o=Math.ceil(r/8)*i,a=Math.ceil(r/8*i*e),l=new Uint8Array(s*a);let c=tH,u=0,d,f;for(let h=0;h<s;h++){switch(d=t.subarray(u+1,u+1+a),f=l.subarray(h*a,(h+1)*a),t[u]){case 0:N7(d,f,a);break;case 1:O7(d,f,a,o);break;case 2:F7(d,f,c,a);break;case 3:$7(d,f,c,a,o);break;case 4:B7(d,f,c,a,o);break;default:throw new Error(`Unsupported filter: ${t[u]}`)}c=f,u+=a+1}if(r===16){const h=new Uint16Array(l.buffer);if(Qz)for(let g=0;g<h.length;g++)h[g]=eH(h[g]);return h}else return l}function eH(n){return(n&255)<<8|n>>8&255}const X1=Uint8Array.of(137,80,78,71,13,10,26,10);function pw(n){if(!nH(n.readBytes(X1.length)))throw new Error("wrong PNG signature")}function nH(n){if(n.length<X1.length)return!1;for(let t=0;t<X1.length;t++)if(n[t]!==X1[t])return!1;return!0}const sH="tEXt",iH=0,j7=new TextDecoder("latin1");function rH(n){if(aH(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}const oH=/^[\u0000-\u00FF]*$/;function aH(n){if(!oH.test(n))throw new Error("invalid latin1 text")}function lH(n,t,e){const s=U7(t);n[s]=cH(t,e-s.length-1)}function U7(n){for(n.mark();n.readByte()!==iH;);const t=n.offset;n.reset();const e=j7.decode(n.readBytes(t-n.offset-1));return n.skip(1),rH(e),e}function cH(n,t){return j7.decode(n.readBytes(t))}const Oi={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},e0={UNKNOWN:-1,DEFLATE:0},gw={UNKNOWN:-1,ADAPTIVE:0},n0={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},p1={NONE:0,BACKGROUND:1,PREVIOUS:2},s0={SOURCE:0,OVER:1};class uH extends ib{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(t,e={}){super(t);const{checkCrc:s=!1}=e;this._checkCrc=s,this._inflator=new uw,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=e0.UNKNOWN,this._filterMethod=gw.UNKNOWN,this._interlaceMethod=n0.UNKNOWN,this._colorType=Oi.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(pw(this);!this._end;){const t=this.readUint32(),e=this.readChars(4);this.decodeChunk(t,e)}return this.decodeImage(),this._png}decodeApng(){for(pw(this);!this._end;){const t=this.readUint32(),e=this.readChars(4);this.decodeApngChunk(t,e)}return this.decodeApngImage(),this._apng}decodeChunk(t,e){const s=this.offset;switch(e){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case sH:lH(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-s!==t)throw new Error(`Length mismatch while decoding chunk ${e}`);this._checkCrc?hw(this,t+4,e):this.skip(4)}decodeApngChunk(t,e){const s=this.offset;switch(e!=="fdAT"&&e!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),e){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,e),this.offset=s+t;break}if(this.offset-s!==t)throw new Error(`Length mismatch while decoding chunk ${e}`);this._checkCrc?hw(this,t+4,e):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=dH(this.readUint8());const e=this.readUint8();this._colorType=e;let s;switch(e){case Oi.GREYSCALE:s=1;break;case Oi.TRUECOLOUR:s=3;break;case Oi.INDEXED_COLOUR:s=1;break;case Oi.GREYSCALE_ALPHA:s=2;break;case Oi.TRUECOLOUR_ALPHA:s=4;break;case Oi.UNKNOWN:default:throw new Error(`Unknown color type: ${e}`)}if(this._png.channels=s,this._compressionMethod=this.readUint8(),this._compressionMethod!==e0.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const e=t/3;this._hasPalette=!0;const s=[];this._palette=s;for(let i=0;i<e;i++)s.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const e=t,s=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,s,e)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let e=t,s=this.offset+this.byteOffset;if(s+=4,e-=4,this._inflator.push(new Uint8Array(this.buffer,s,e)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case Oi.GREYSCALE:case Oi.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let e=0;e<t/2;e++)this._transparency[e]=this.readUint16();break}case Oi.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let e=0;for(;e<t;e++){const s=this.readByte();this._palette[e].push(s)}for(;e<this._palette.length;e++)this._palette[e].push(255);break}case Oi.UNKNOWN:case Oi.GREYSCALE_ALPHA:case Oi.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const e=U7(this),s=this.readUint8();if(s!==e0.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${s}`);const i=this.readBytes(t-e.length-2);this._png.iccEmbeddedProfile={name:e,profile:Uz(i)}}decodepHYs(){const t=this.readUint32(),e=this.readUint32(),s=this.readByte();this._png.resolution={x:t,y:e,unit:s}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const e={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},s=this._frames.at(t);if(s){if(s.data=fw({data:s.data,width:s.width,height:s.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||s.xOffset===0&&s.yOffset===0&&s.width===this._png.width&&s.height===this._png.height)e.data=s.data;else{const i=this._apng.frames.at(t-1);this.disposeFrame(s,i,e),this.addFrameDataToCanvas(e,s)}this._apng.frames.push(e)}}return this._apng}disposeFrame(t,e,s){switch(t.disposeOp){case p1.NONE:break;case p1.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let r=0;r<this._png.width;r++){const o=(i*t.width+r)*this._png.channels;for(let a=0;a<this._png.channels;a++)s.data[o+a]=0}break;case p1.PREVIOUS:s.data.set(e.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,e){const s=1<<this._png.depth,i=(r,o)=>{const a=((r+e.yOffset)*this._png.width+e.xOffset+o)*this._png.channels,l=(r*e.width+o)*this._png.channels;return{index:a,frameIndex:l}};switch(e.blendOp){case s0.SOURCE:for(let r=0;r<e.height;r++)for(let o=0;o<e.width;o++){const{index:a,frameIndex:l}=i(r,o);for(let c=0;c<this._png.channels;c++)t.data[a+c]=e.data[l+c]}break;case s0.OVER:for(let r=0;r<e.height;r++)for(let o=0;o<e.width;o++){const{index:a,frameIndex:l}=i(r,o);for(let c=0;c<this._png.channels;c++){const u=e.data[l+this._png.channels-1]/s,d=c%(this._png.channels-1)===0?1:e.data[l+c],f=Math.floor(u*d+(1-u)*t.data[a+c]);t.data[a+c]+=f}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==gw.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===n0.NO_INTERLACE)this._png.data=fw({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===n0.ADAM7)this._png.data=Kz({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,e=this._frames.at(-1);e?e.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:p1.NONE,blendOp:s0.SOURCE,data:t}),this._inflator=new uw,this._writingDataChunks=!1}}function dH(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}var mw;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.METRE=1]="METRE"})(mw||(mw={}));function hH(n,t){return new uH(n,t).decode()}var ke=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function i0(){ke.console&&typeof ke.console.log=="function"&&ke.console.log.apply(ke.console,arguments)}var vn={log:i0,warn:function(n){ke.console&&(typeof ke.console.warn=="function"?ke.console.warn.apply(ke.console,arguments):i0.call(null,arguments))},error:function(n){ke.console&&(typeof ke.console.error=="function"?ke.console.error.apply(ke.console,arguments):i0(n))}};function r0(n,t,e){var s=new XMLHttpRequest;s.open("GET",n),s.responseType="blob",s.onload=function(){$l(s.response,t,e)},s.onerror=function(){vn.error("could not download file")},s.send()}function bw(n){var t=new XMLHttpRequest;t.open("HEAD",n,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function g1(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(t)}}var $l=ke.saveAs||((typeof window>"u"?"undefined":fn(window))!=="object"||window!==ke?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,t,e){var s=ke.URL||ke.webkitURL,i=document.createElement("a");t=t||n.name||"download",i.download=t,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?bw(i.href)?r0(n,t,e):g1(i,i.target="_blank"):g1(i)):(i.href=s.createObjectURL(n),setTimeout(function(){s.revokeObjectURL(i.href)},4e4),setTimeout(function(){g1(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,t,e){if(t=t||n.name||"download",typeof n=="string")if(bw(n))r0(n,t,e);else{var s=document.createElement("a");s.href=n,s.target="_blank",setTimeout(function(){g1(s)})}else navigator.msSaveOrOpenBlob(function(i,r){return r===void 0?r={autoBom:!1}:fn(r)!=="object"&&(vn.warn("Deprecated: Expected third argument to be a object"),r={autoBom:!r}),r.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(n,e),t)}:function(n,t,e,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof n=="string")return r0(n,t,e);var i=n.type==="application/octet-stream",r=/constructor/i.test(ke.HTMLElement)||ke.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&r)&&(typeof FileReader>"u"?"undefined":fn(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var u=a.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=u:location=u,s=null},a.readAsDataURL(n)}else{var l=ke.URL||ke.webkitURL,c=l.createObjectURL(n);s?s.location=c:location.href=c,s=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function z7(n){var t;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],s=0;s<e.length;s++){var i=e[s].re,r=e[s].process,o=i.exec(n);o&&(t=r(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}var Z1=ke.atob.bind(ke),vw=ke.btoa.bind(ke);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function o0(n,t){var e=n[0],s=n[1],i=n[2],r=n[3];e=Gs(e,s,i,r,t[0],7,-680876936),r=Gs(r,e,s,i,t[1],12,-389564586),i=Gs(i,r,e,s,t[2],17,606105819),s=Gs(s,i,r,e,t[3],22,-1044525330),e=Gs(e,s,i,r,t[4],7,-176418897),r=Gs(r,e,s,i,t[5],12,1200080426),i=Gs(i,r,e,s,t[6],17,-1473231341),s=Gs(s,i,r,e,t[7],22,-45705983),e=Gs(e,s,i,r,t[8],7,1770035416),r=Gs(r,e,s,i,t[9],12,-1958414417),i=Gs(i,r,e,s,t[10],17,-42063),s=Gs(s,i,r,e,t[11],22,-1990404162),e=Gs(e,s,i,r,t[12],7,1804603682),r=Gs(r,e,s,i,t[13],12,-40341101),i=Gs(i,r,e,s,t[14],17,-1502002290),e=Ys(e,s=Gs(s,i,r,e,t[15],22,1236535329),i,r,t[1],5,-165796510),r=Ys(r,e,s,i,t[6],9,-1069501632),i=Ys(i,r,e,s,t[11],14,643717713),s=Ys(s,i,r,e,t[0],20,-373897302),e=Ys(e,s,i,r,t[5],5,-701558691),r=Ys(r,e,s,i,t[10],9,38016083),i=Ys(i,r,e,s,t[15],14,-660478335),s=Ys(s,i,r,e,t[4],20,-405537848),e=Ys(e,s,i,r,t[9],5,568446438),r=Ys(r,e,s,i,t[14],9,-1019803690),i=Ys(i,r,e,s,t[3],14,-187363961),s=Ys(s,i,r,e,t[8],20,1163531501),e=Ys(e,s,i,r,t[13],5,-1444681467),r=Ys(r,e,s,i,t[2],9,-51403784),i=Ys(i,r,e,s,t[7],14,1735328473),e=Ks(e,s=Ys(s,i,r,e,t[12],20,-1926607734),i,r,t[5],4,-378558),r=Ks(r,e,s,i,t[8],11,-2022574463),i=Ks(i,r,e,s,t[11],16,1839030562),s=Ks(s,i,r,e,t[14],23,-35309556),e=Ks(e,s,i,r,t[1],4,-1530992060),r=Ks(r,e,s,i,t[4],11,1272893353),i=Ks(i,r,e,s,t[7],16,-155497632),s=Ks(s,i,r,e,t[10],23,-1094730640),e=Ks(e,s,i,r,t[13],4,681279174),r=Ks(r,e,s,i,t[0],11,-358537222),i=Ks(i,r,e,s,t[3],16,-722521979),s=Ks(s,i,r,e,t[6],23,76029189),e=Ks(e,s,i,r,t[9],4,-640364487),r=Ks(r,e,s,i,t[12],11,-421815835),i=Ks(i,r,e,s,t[15],16,530742520),e=Xs(e,s=Ks(s,i,r,e,t[2],23,-995338651),i,r,t[0],6,-198630844),r=Xs(r,e,s,i,t[7],10,1126891415),i=Xs(i,r,e,s,t[14],15,-1416354905),s=Xs(s,i,r,e,t[5],21,-57434055),e=Xs(e,s,i,r,t[12],6,1700485571),r=Xs(r,e,s,i,t[3],10,-1894986606),i=Xs(i,r,e,s,t[10],15,-1051523),s=Xs(s,i,r,e,t[1],21,-2054922799),e=Xs(e,s,i,r,t[8],6,1873313359),r=Xs(r,e,s,i,t[15],10,-30611744),i=Xs(i,r,e,s,t[6],15,-1560198380),s=Xs(s,i,r,e,t[13],21,1309151649),e=Xs(e,s,i,r,t[4],6,-145523070),r=Xs(r,e,s,i,t[11],10,-1120210379),i=Xs(i,r,e,s,t[2],15,718787259),s=Xs(s,i,r,e,t[9],21,-343485551),n[0]=Ra(e,n[0]),n[1]=Ra(s,n[1]),n[2]=Ra(i,n[2]),n[3]=Ra(r,n[3])}function gg(n,t,e,s,i,r){return t=Ra(Ra(t,n),Ra(s,r)),Ra(t<<i|t>>>32-i,e)}function Gs(n,t,e,s,i,r,o){return gg(t&e|~t&s,n,t,i,r,o)}function Ys(n,t,e,s,i,r,o){return gg(t&s|e&~s,n,t,i,r,o)}function Ks(n,t,e,s,i,r,o){return gg(t^e^s,n,t,i,r,o)}function Xs(n,t,e,s,i,r,o){return gg(e^(t|~s),n,t,i,r,o)}function H7(n){var t,e=n.length,s=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=n.length;t+=64)o0(s,fH(n.substring(t-64,t)));n=n.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<n.length;t++)i[t>>2]|=n.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(o0(s,i),t=0;t<16;t++)i[t]=0;return i[14]=8*e,o0(s,i),s}function fH(n){var t,e=[];for(t=0;t<64;t+=4)e[t>>2]=n.charCodeAt(t)+(n.charCodeAt(t+1)<<8)+(n.charCodeAt(t+2)<<16)+(n.charCodeAt(t+3)<<24);return e}var yw="0123456789abcdef".split("");function pH(n){for(var t="",e=0;e<4;e++)t+=yw[n>>8*e+4&15]+yw[n>>8*e&15];return t}function gH(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function Im(n){return H7(n).map(gH).join("")}var mH=function(n){for(var t=0;t<n.length;t++)n[t]=pH(n[t]);return n.join("")}(H7("hello"))!="5d41402abc4b2a76b9719d911017c592";function Ra(n,t){if(mH){var e=(65535&n)+(65535&t);return(n>>16)+(t>>16)+(e>>16)<<16|65535&e}return n+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Dm(n,t){var e,s,i,r;if(n!==e){for(var o=(i=n,r=1+(256/n.length|0),new Array(r+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var u=a[l];c=(c+u+o.charCodeAt(l))%256,a[l]=a[c],a[c]=u}e=n,s=a}else a=s;var d=t.length,f=0,h=0,g="";for(l=0;l<d;l++)h=(h+(u=a[f=(f+1)%256]))%256,a[f]=a[h],a[h]=u,o=a[(a[f]+a[h])%256],g+=String.fromCharCode(t.charCodeAt(l)^o);return g}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var ww={print:4,modify:8,copy:16,"annot-forms":32};function Zc(n,t,e,s){this.v=1,this.r=2;var i=192;n.forEach(function(a){if(ww.perm!==void 0)throw new Error("Invalid permission: "+a);i+=ww[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var r=(t+this.padding).substr(0,32),o=(e+this.padding).substr(0,32);this.O=this.processOwnerPassword(r,o),this.P=-(1+(255^i)),this.encryptionKey=Im(r+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=Dm(this.encryptionKey,this.padding)}function Jc(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var t="",e=n.length,s=0;s<e;s++){var i=n.charCodeAt(s);t+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):n[s]}return t}function _w(n){if(fn(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,s,i){if(i=i||!1,typeof e!="string"||typeof s!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var r=Math.random().toString(35);return t[e][r]=[s,!!i],r},this.unsubscribe=function(e){for(var s in t)if(t[s][e])return delete t[s][e],Object.keys(t[s]).length===0&&delete t[s],!0;return!1},this.publish=function(e){if(t.hasOwnProperty(e)){var s=Array.prototype.slice.call(arguments,1),i=[];for(var r in t[e]){var o=t[e][r];try{o[0].apply(n,s)}catch(a){ke.console&&vn.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(r)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Ep(n){if(!(this instanceof Ep))return new Ep(n);var t="opacity,stroke-opacity".split(",");for(var e in n)n.hasOwnProperty(e)&&t.indexOf(e)>=0&&(this[e]=n[e]);this.id="",this.objectNumber=-1}function V7(n,t){this.gState=n,this.matrix=t,this.id="",this.objectNumber=-1}function Vl(n,t,e,s,i){if(!(this instanceof Vl))return new Vl(n,t,e,s,i);this.type=n==="axial"?2:3,this.coords=t,this.colors=e,V7.call(this,s,i)}function su(n,t,e,s,i){if(!(this instanceof su))return new su(n,t,e,s,i);this.boundingBox=n,this.xStep=t,this.yStep=e,this.stream="",this.cloneIndex=0,V7.call(this,s,i)}function re(n){var t,e=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],i=arguments[2],r=arguments[3],o=[],a=1,l=16,c="S",u=null;fn(n=n||{})==="object"&&(e=n.orientation,s=n.unit||s,i=n.format||i,r=n.compress||n.compressPdf||r,(u=n.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),a=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(t=n.precision),n.floatPrecision!==void 0&&(l=n.floatPrecision),c=n.defaultPathOperation||"S"),o=n.filters||(r===!0?["FlateEncode"]:o),s=s||"mm",e=(""+(e||"P")).toLowerCase();var d=n.putOnlyUsedFonts||!1,f={},h={internal:{},__private__:{}};h.__private__.PubSub=_w;var g="1.3",m=h.__private__.getPdfVersion=function(){return g};h.__private__.setPdfVersion=function(k){g=k};var b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return b};var y=h.__private__.getPageFormat=function(k){return b[k]};i=i||"a4";var x="compat",_="advanced",C=x;function A(){this.saveGraphicsState(),X(new _e(ie,0,0,-ie,0,fl()*ie).toString()+" cm"),this.setFontSize(this.getFontSize()/ie),c="n",C=_}function I(){this.restoreGraphicsState(),c="S",C=x}var R=h.__private__.combineFontStyleAndFontWeight=function(k,U){if(k=="bold"&&U=="normal"||k=="bold"&&U==400||k=="normal"&&U=="italic"||k=="bold"&&U=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return U&&(k=U==400||U==="normal"?k==="italic"?"italic":"normal":U!=700&&U!=="bold"||k!=="normal"?(U==700?"bold":U)+""+k:"bold"),k};h.advancedAPI=function(k){var U=C===x;return U&&A.call(this),typeof k!="function"||(k(this),U&&I.call(this)),this},h.compatAPI=function(k){var U=C===_;return U&&I.call(this),typeof k!="function"||(k(this),U&&A.call(this)),this},h.isAdvancedAPI=function(){return C===_};var L,P=function(k){if(C!==_)throw new Error(k+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},V=h.roundToPrecision=h.__private__.roundToPrecision=function(k,U){var ft=t||U;if(isNaN(k)||isNaN(ft))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return k.toFixed(ft).replace(/0+$/,"")};L=h.hpf=h.__private__.hpf=typeof l=="number"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return V(k,l)}:l==="smart"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return V(k,k>-1&&k<1?16:5)}:function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return V(k,16)};var T=h.f2=h.__private__.f2=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f2");return V(k,2)},D=h.__private__.f3=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f3");return V(k,3)},K=h.scale=h.__private__.scale=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.scale");return C===x?k*ie:C===_?k:void 0},$=function(k){return K(function(U){return C===x?fl()-U:C===_?U:void 0}(k))};h.__private__.setPrecision=h.setPrecision=function(k){typeof parseInt(k,10)=="number"&&(t=parseInt(k,10))};var q,W="00000000000000000000000000000000",F=h.__private__.getFileId=function(){return W},O=h.__private__.setFileId=function(k){return W=k!==void 0&&/^[a-fA-F0-9]{32}$/.test(k)?k.toUpperCase():W.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(Kn=new Zc(u.userPermissions,u.userPassword,u.ownerPassword,W)),W};h.setFileId=function(k){return O(k),this},h.getFileId=function(){return F()};var et=h.__private__.convertDateToPDFDate=function(k){var U=k.getTimezoneOffset(),ft=U<0?"+":"-",mt=Math.floor(Math.abs(U/60)),yt=Math.abs(U%60),Ft=[ft,B(mt),"'",B(yt),"'"].join("");return["D:",k.getFullYear(),B(k.getMonth()+1),B(k.getDate()),B(k.getHours()),B(k.getMinutes()),B(k.getSeconds()),Ft].join("")},gt=h.__private__.convertPDFDateToDate=function(k){var U=parseInt(k.substr(2,4),10),ft=parseInt(k.substr(6,2),10)-1,mt=parseInt(k.substr(8,2),10),yt=parseInt(k.substr(10,2),10),Ft=parseInt(k.substr(12,2),10),jt=parseInt(k.substr(14,2),10);return new Date(U,ft,mt,yt,Ft,jt,0)},lt=h.__private__.setCreationDate=function(k){var U;if(k===void 0&&(k=new Date),k instanceof Date)U=et(k);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(k))throw new Error("Invalid argument passed to jsPDF.setCreationDate");U=k}return q=U},E=h.__private__.getCreationDate=function(k){var U=q;return k==="jsDate"&&(U=gt(q)),U};h.setCreationDate=function(k){return lt(k),this},h.getCreationDate=function(k){return E(k)};var M,B=h.__private__.padd2=function(k){return("0"+parseInt(k)).slice(-2)},at=h.__private__.padd2Hex=function(k){return("00"+(k=k.toString())).substr(k.length)},pt=0,nt=[],ct=[],G=0,rt=[],wt=[],Q=!1,it=ct;h.__private__.setCustomOutputDestination=function(k){Q=!0,it=k};var ot=function(k){Q||(it=k)};h.__private__.resetCustomOutputDestination=function(){Q=!1,it=ct};var X=h.__private__.out=function(k){return k=k.toString(),G+=k.length+1,it.push(k),it},Pt=h.__private__.write=function(k){return X(arguments.length===1?k.toString():Array.prototype.join.call(arguments," "))},Tt=h.__private__.getArrayBuffer=function(k){for(var U=k.length,ft=new ArrayBuffer(U),mt=new Uint8Array(ft);U--;)mt[U]=k.charCodeAt(U);return ft},Nt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return Nt};var _t=n.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(k){return _t=C===_?k/ie:k,this};var It,kt=h.__private__.getFontSize=h.getFontSize=function(){return C===x?_t:_t*ie},Ht=n.R2L||!1;h.__private__.setR2L=h.setR2L=function(k){return Ht=k,this},h.__private__.getR2L=h.getR2L=function(){return Ht};var Mt,qt=h.__private__.setZoomMode=function(k){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(k))It=k;else if(isNaN(k)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(k)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+k+'" is not recognized.');It=k}else It=parseInt(k,10)};h.__private__.getZoomMode=function(){return It};var Vt,Yt=h.__private__.setPageMode=function(k){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(k)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+k+'" is not recognized.');Mt=k};h.__private__.getPageMode=function(){return Mt};var ve=h.__private__.setLayoutMode=function(k){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(k)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+k+'" is not recognized.');Vt=k};h.__private__.getLayoutMode=function(){return Vt},h.__private__.setDisplayMode=h.setDisplayMode=function(k,U,ft){return qt(k),ve(U),Yt(ft),this};var Xt={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(k){if(Object.keys(Xt).indexOf(k)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Xt[k]},h.__private__.getDocumentProperties=function(){return Xt},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(k){for(var U in Xt)Xt.hasOwnProperty(U)&&k[U]&&(Xt[U]=k[U]);return this},h.__private__.setDocumentProperty=function(k,U){if(Object.keys(Xt).indexOf(k)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Xt[k]=U};var Zt,ie,Jt,ze,He,oe={},ge={},Ue=[],we={},We={},Me={},Yn={},fs=null,gn=0,Se=[],rn=new _w(h),el=n.hotfixes||[],Hs={},po={},$r=[],_e=function k(U,ft,mt,yt,Ft,jt){if(!(this instanceof k))return new k(U,ft,mt,yt,Ft,jt);isNaN(U)&&(U=1),isNaN(ft)&&(ft=0),isNaN(mt)&&(mt=0),isNaN(yt)&&(yt=1),isNaN(Ft)&&(Ft=0),isNaN(jt)&&(jt=0),this._matrix=[U,ft,mt,yt,Ft,jt]};Object.defineProperty(_e.prototype,"sx",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(_e.prototype,"shy",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(_e.prototype,"shx",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(_e.prototype,"sy",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(_e.prototype,"tx",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(_e.prototype,"ty",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(_e.prototype,"a",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(_e.prototype,"b",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(_e.prototype,"c",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(_e.prototype,"d",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(_e.prototype,"e",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(_e.prototype,"f",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(_e.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(_e.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(_e.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(_e.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),_e.prototype.join=function(k){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(L).join(k)},_e.prototype.multiply=function(k){var U=k.sx*this.sx+k.shy*this.shx,ft=k.sx*this.shy+k.shy*this.sy,mt=k.shx*this.sx+k.sy*this.shx,yt=k.shx*this.shy+k.sy*this.sy,Ft=k.tx*this.sx+k.ty*this.shx+this.tx,jt=k.tx*this.shy+k.ty*this.sy+this.ty;return new _e(U,ft,mt,yt,Ft,jt)},_e.prototype.decompose=function(){var k=this.sx,U=this.shy,ft=this.shx,mt=this.sy,yt=this.tx,Ft=this.ty,jt=Math.sqrt(k*k+U*U),se=(k/=jt)*ft+(U/=jt)*mt;ft-=k*se,mt-=U*se;var ue=Math.sqrt(ft*ft+mt*mt);return se/=ue,k*(mt/=ue)<U*(ft/=ue)&&(k=-k,U=-U,se=-se,jt=-jt),{scale:new _e(jt,0,0,ue,0,0),translate:new _e(1,0,0,1,yt,Ft),rotate:new _e(k,U,-U,k,0,0),skew:new _e(1,0,se,1,0,0)}},_e.prototype.toString=function(k){return this.join(" ")},_e.prototype.inversed=function(){var k=this.sx,U=this.shy,ft=this.shx,mt=this.sy,yt=this.tx,Ft=this.ty,jt=1/(k*mt-U*ft),se=mt*jt,ue=-U*jt,Ae=-ft*jt,Te=k*jt;return new _e(se,ue,Ae,Te,-se*yt-Ae*Ft,-ue*yt-Te*Ft)},_e.prototype.applyToPoint=function(k){var U=k.x*this.sx+k.y*this.shx+this.tx,ft=k.x*this.shy+k.y*this.sy+this.ty;return new dl(U,ft)},_e.prototype.applyToRectangle=function(k){var U=this.applyToPoint(k),ft=this.applyToPoint(new dl(k.x+k.w,k.y+k.h));return new ed(U.x,U.y,ft.x-U.x,ft.y-U.y)},_e.prototype.clone=function(){var k=this.sx,U=this.shy,ft=this.shx,mt=this.sy,yt=this.tx,Ft=this.ty;return new _e(k,U,ft,mt,yt,Ft)},h.Matrix=_e;var go=h.matrixMult=function(k,U){return U.multiply(k)},mo=new _e(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=mo;var qi=function(k,U){if(!We[k]){var ft=(U instanceof Vl?"Sh":"P")+(Object.keys(we).length+1).toString(10);U.id=ft,We[k]=ft,we[ft]=U,rn.publish("addPattern",U)}};h.ShadingPattern=Vl,h.TilingPattern=su,h.addShadingPattern=function(k,U){return P("addShadingPattern()"),qi(k,U),this},h.beginTilingPattern=function(k){P("beginTilingPattern()"),nd(k.boundingBox[0],k.boundingBox[1],k.boundingBox[2]-k.boundingBox[0],k.boundingBox[3]-k.boundingBox[1],k.matrix)},h.endTilingPattern=function(k,U){P("endTilingPattern()"),U.stream=wt[M].join(`
`),qi(k,U),rn.publish("endTilingPattern",U),$r.pop().restore()};var Wi,Un=h.__private__.newObject=function(){var k=Cs();return Ps(k,!0),k},Cs=h.__private__.newObjectDeferred=function(){return pt++,nt[pt]=function(){return G},pt},Ps=function(k,U){return U=typeof U=="boolean"&&U,nt[k]=G,U&&X(k+" 0 obj"),k},nl=h.__private__.newAdditionalObject=function(){var k={objId:Cs(),content:""};return rt.push(k),k},sa=Cs(),mr=Cs(),Br=h.__private__.decodeColorString=function(k){var U=k.split(" ");if(U.length!==2||U[1]!=="g"&&U[1]!=="G")U.length!==5||U[4]!=="k"&&U[4]!=="K"||(U=[(1-U[0])*(1-U[3]),(1-U[1])*(1-U[3]),(1-U[2])*(1-U[3]),"r"]);else{var ft=parseFloat(U[0]);U=[ft,ft,ft,"r"]}for(var mt="#",yt=0;yt<3;yt++)mt+=("0"+Math.floor(255*parseFloat(U[yt])).toString(16)).slice(-2);return mt},br=h.__private__.encodeColorString=function(k){var U;typeof k=="string"&&(k={ch1:k});var ft=k.ch1,mt=k.ch2,yt=k.ch3,Ft=k.ch4,jt=k.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ft=="string"&&ft.charAt(0)!=="#"){var se=new z7(ft);if(se.ok)ft=se.toHex();else if(!/^\d*\.?\d*$/.test(ft))throw new Error('Invalid color "'+ft+'" passed to jsPDF.encodeColorString.')}if(typeof ft=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ft)&&(ft="#"+ft[1]+ft[1]+ft[2]+ft[2]+ft[3]+ft[3]),typeof ft=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ft)){var ue=parseInt(ft.substr(1),16);ft=ue>>16&255,mt=ue>>8&255,yt=255&ue}if(mt===void 0||Ft===void 0&&ft===mt&&mt===yt)U=typeof ft=="string"?ft+" "+jt[0]:k.precision===2?T(ft/255)+" "+jt[0]:D(ft/255)+" "+jt[0];else if(Ft===void 0||fn(Ft)==="object"){if(Ft&&!isNaN(Ft.a)&&Ft.a===0)return["1.","1.","1.",jt[1]].join(" ");U=typeof ft=="string"?[ft,mt,yt,jt[1]].join(" "):k.precision===2?[T(ft/255),T(mt/255),T(yt/255),jt[1]].join(" "):[D(ft/255),D(mt/255),D(yt/255),jt[1]].join(" ")}else U=typeof ft=="string"?[ft,mt,yt,Ft,jt[2]].join(" "):k.precision===2?[T(ft),T(mt),T(yt),T(Ft),jt[2]].join(" "):[D(ft),D(mt),D(yt),D(Ft),jt[2]].join(" ");return U},vr=h.__private__.getFilters=function(){return o},Gi=h.__private__.putStream=function(k){var U=(k=k||{}).data||"",ft=k.filters||vr(),mt=k.alreadyAppliedFilters||[],yt=k.addLength1||!1,Ft=U.length,jt=k.objectId,se=function(ps){return ps};if(u!==null&&jt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(se=Kn.encryptor(jt,0));var ue={};ft===!0&&(ft=["FlateEncode"]);var Ae=k.additionalKeyValues||[],Te=(ue=re.API.processDataByFilters!==void 0?re.API.processDataByFilters(U,ft):{data:U,reverseChain:[]}).reverseChain+(Array.isArray(mt)?mt.join(" "):mt.toString());if(ue.data.length!==0&&(Ae.push({key:"Length",value:ue.data.length}),yt===!0&&Ae.push({key:"Length1",value:Ft})),Te.length!=0)if(Te.split("/").length-1==1)Ae.push({key:"Filter",value:Te});else{Ae.push({key:"Filter",value:"["+Te+"]"});for(var en=0;en<Ae.length;en+=1)if(Ae[en].key==="DecodeParms"){for(var On=[],as=0;as<ue.reverseChain.split("/").length-1;as+=1)On.push("null");On.push(Ae[en].value),Ae[en].value="["+On.join(" ")+"]"}}X("<<");for(var xn=0;xn<Ae.length;xn++)X("/"+Ae[xn].key+" "+Ae[xn].value);X(">>"),ue.data.length!==0&&(X("stream"),X(se(ue.data)),X("endstream"))},sl=h.__private__.putPage=function(k){var U=k.number,ft=k.data,mt=k.objId,yt=k.contentsObjId;Ps(mt,!0),X("<</Type /Page"),X("/Parent "+k.rootDictionaryObjId+" 0 R"),X("/Resources "+k.resourceDictionaryObjId+" 0 R"),X("/MediaBox ["+parseFloat(L(k.mediaBox.bottomLeftX))+" "+parseFloat(L(k.mediaBox.bottomLeftY))+" "+L(k.mediaBox.topRightX)+" "+L(k.mediaBox.topRightY)+"]"),k.cropBox!==null&&X("/CropBox ["+L(k.cropBox.bottomLeftX)+" "+L(k.cropBox.bottomLeftY)+" "+L(k.cropBox.topRightX)+" "+L(k.cropBox.topRightY)+"]"),k.bleedBox!==null&&X("/BleedBox ["+L(k.bleedBox.bottomLeftX)+" "+L(k.bleedBox.bottomLeftY)+" "+L(k.bleedBox.topRightX)+" "+L(k.bleedBox.topRightY)+"]"),k.trimBox!==null&&X("/TrimBox ["+L(k.trimBox.bottomLeftX)+" "+L(k.trimBox.bottomLeftY)+" "+L(k.trimBox.topRightX)+" "+L(k.trimBox.topRightY)+"]"),k.artBox!==null&&X("/ArtBox ["+L(k.artBox.bottomLeftX)+" "+L(k.artBox.bottomLeftY)+" "+L(k.artBox.topRightX)+" "+L(k.artBox.topRightY)+"]"),typeof k.userUnit=="number"&&k.userUnit!==1&&X("/UserUnit "+k.userUnit),rn.publish("putPage",{objId:mt,pageContext:Se[U],pageNumber:U,page:ft}),X("/Contents "+yt+" 0 R"),X(">>"),X("endobj");var Ft=ft.join(`
`);return C===_&&(Ft+=`
Q`),Ps(yt,!0),Gi({data:Ft,filters:vr(),objectId:yt}),X("endobj"),mt},jr=h.__private__.putPages=function(){var k,U,ft=[];for(k=1;k<=gn;k++)Se[k].objId=Cs(),Se[k].contentsObjId=Cs();for(k=1;k<=gn;k++)ft.push(sl({number:k,data:wt[k],objId:Se[k].objId,contentsObjId:Se[k].contentsObjId,mediaBox:Se[k].mediaBox,cropBox:Se[k].cropBox,bleedBox:Se[k].bleedBox,trimBox:Se[k].trimBox,artBox:Se[k].artBox,userUnit:Se[k].userUnit,rootDictionaryObjId:sa,resourceDictionaryObjId:mr}));Ps(sa,!0),X("<</Type /Pages");var mt="/Kids [";for(U=0;U<gn;U++)mt+=ft[U]+" 0 R ";X(mt+"]"),X("/Count "+gn),X(">>"),X("endobj"),rn.publish("postPutPages")},il=function(k){rn.publish("putFont",{font:k,out:X,newObject:Un,putStream:Gi}),k.isAlreadyPutted!==!0&&(k.objectNumber=Un(),X("<<"),X("/Type /Font"),X("/BaseFont /"+Jc(k.postScriptName)),X("/Subtype /Type1"),typeof k.encoding=="string"&&X("/Encoding /"+k.encoding),X("/FirstChar 32"),X("/LastChar 255"),X(">>"),X("endobj"))},_c=function(k){k.objectNumber=Un();var U=[];U.push({key:"Type",value:"/XObject"}),U.push({key:"Subtype",value:"/Form"}),U.push({key:"BBox",value:"["+[L(k.x),L(k.y),L(k.x+k.width),L(k.y+k.height)].join(" ")+"]"}),U.push({key:"Matrix",value:"["+k.matrix.toString()+"]"});var ft=k.pages[1].join(`
`);Gi({data:ft,additionalKeyValues:U,objectId:k.objectNumber}),X("endobj")},xc=function(k,U){U||(U=21);var ft=Un(),mt=function(jt,se){var ue,Ae=[],Te=1/(se-1);for(ue=0;ue<1;ue+=Te)Ae.push(ue);if(Ae.push(1),jt[0].offset!=0){var en={offset:0,color:jt[0].color};jt.unshift(en)}if(jt[jt.length-1].offset!=1){var On={offset:1,color:jt[jt.length-1].color};jt.push(On)}for(var as="",xn=0,ps=0;ps<Ae.length;ps++){for(ue=Ae[ps];ue>jt[xn+1].offset;)xn++;var ls=jt[xn].offset,Is=(ue-ls)/(jt[xn+1].offset-ls),Ki=jt[xn].color,mi=jt[xn+1].color;as+=at(Math.round((1-Is)*Ki[0]+Is*mi[0]).toString(16))+at(Math.round((1-Is)*Ki[1]+Is*mi[1]).toString(16))+at(Math.round((1-Is)*Ki[2]+Is*mi[2]).toString(16))}return as.trim()}(k.colors,U),yt=[];yt.push({key:"FunctionType",value:"0"}),yt.push({key:"Domain",value:"[0.0 1.0]"}),yt.push({key:"Size",value:"["+U+"]"}),yt.push({key:"BitsPerSample",value:"8"}),yt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),yt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Gi({data:mt,additionalKeyValues:yt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ft}),X("endobj"),k.objectNumber=Un(),X("<< /ShadingType "+k.type),X("/ColorSpace /DeviceRGB");var Ft="/Coords ["+L(parseFloat(k.coords[0]))+" "+L(parseFloat(k.coords[1]))+" ";k.type===2?Ft+=L(parseFloat(k.coords[2]))+" "+L(parseFloat(k.coords[3])):Ft+=L(parseFloat(k.coords[2]))+" "+L(parseFloat(k.coords[3]))+" "+L(parseFloat(k.coords[4]))+" "+L(parseFloat(k.coords[5])),X(Ft+="]"),k.matrix&&X("/Matrix ["+k.matrix.toString()+"]"),X("/Function "+ft+" 0 R"),X("/Extend [true true]"),X(">>"),X("endobj")},Cc=function(k,U){var ft=Cs(),mt=Un();U.push({resourcesOid:ft,objectOid:mt}),k.objectNumber=mt;var yt=[];yt.push({key:"Type",value:"/Pattern"}),yt.push({key:"PatternType",value:"1"}),yt.push({key:"PaintType",value:"1"}),yt.push({key:"TilingType",value:"1"}),yt.push({key:"BBox",value:"["+k.boundingBox.map(L).join(" ")+"]"}),yt.push({key:"XStep",value:L(k.xStep)}),yt.push({key:"YStep",value:L(k.yStep)}),yt.push({key:"Resources",value:ft+" 0 R"}),k.matrix&&yt.push({key:"Matrix",value:"["+k.matrix.toString()+"]"}),Gi({data:k.stream,additionalKeyValues:yt,objectId:k.objectNumber}),X("endobj")},Dg=function(k){for(var U in k.objectNumber=Un(),X("<<"),k)switch(U){case"opacity":X("/ca "+T(k[U]));break;case"stroke-opacity":X("/CA "+T(k[U]))}X(">>"),X("endobj")},qu=function(k){Ps(k.resourcesOid,!0),X("<<"),X("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var U in X("/Font <<"),oe)oe.hasOwnProperty(U)&&(d===!1||d===!0&&f.hasOwnProperty(U))&&X("/"+U+" "+oe[U].objectNumber+" 0 R");X(">>")}(),function(){if(Object.keys(we).length>0){for(var U in X("/Shading <<"),we)we.hasOwnProperty(U)&&we[U]instanceof Vl&&we[U].objectNumber>=0&&X("/"+U+" "+we[U].objectNumber+" 0 R");rn.publish("putShadingPatternDict"),X(">>")}}(),function(U){if(Object.keys(we).length>0){for(var ft in X("/Pattern <<"),we)we.hasOwnProperty(ft)&&we[ft]instanceof h.TilingPattern&&we[ft].objectNumber>=0&&we[ft].objectNumber<U&&X("/"+ft+" "+we[ft].objectNumber+" 0 R");rn.publish("putTilingPatternDict"),X(">>")}}(k.objectOid),function(){if(Object.keys(Me).length>0){var U;for(U in X("/ExtGState <<"),Me)Me.hasOwnProperty(U)&&Me[U].objectNumber>=0&&X("/"+U+" "+Me[U].objectNumber+" 0 R");rn.publish("putGStateDict"),X(">>")}}(),function(){for(var U in X("/XObject <<"),Hs)Hs.hasOwnProperty(U)&&Hs[U].objectNumber>=0&&X("/"+U+" "+Hs[U].objectNumber+" 0 R");rn.publish("putXobjectDict"),X(">>")}(),X(">>"),X("endobj")},ff=function(k){ge[k.fontName]=ge[k.fontName]||{},ge[k.fontName][k.fontStyle]=k.id},pf=function(k,U,ft,mt,yt){var Ft={id:"F"+(Object.keys(oe).length+1).toString(10),postScriptName:k,fontName:U,fontStyle:ft,encoding:mt,isStandardFont:yt||!1,metadata:{}};return rn.publish("addFont",{font:Ft,instance:this}),oe[Ft.id]=Ft,ff(Ft),Ft.id},Yi=h.__private__.pdfEscape=h.pdfEscape=function(k,U){return function(ft,mt){var yt,Ft,jt,se,ue,Ae,Te,en,On;if(jt=(mt=mt||{}).sourceEncoding||"Unicode",ue=mt.outputEncoding,(mt.autoencode||ue)&&oe[Zt].metadata&&oe[Zt].metadata[jt]&&oe[Zt].metadata[jt].encoding&&(se=oe[Zt].metadata[jt].encoding,!ue&&oe[Zt].encoding&&(ue=oe[Zt].encoding),!ue&&se.codePages&&(ue=se.codePages[0]),typeof ue=="string"&&(ue=se[ue]),ue)){for(Te=!1,Ae=[],yt=0,Ft=ft.length;yt<Ft;yt++)(en=ue[ft.charCodeAt(yt)])?Ae.push(String.fromCharCode(en)):Ae.push(ft[yt]),Ae[yt].charCodeAt(0)>>8&&(Te=!0);ft=Ae.join("")}for(yt=ft.length;Te===void 0&&yt!==0;)ft.charCodeAt(yt-1)>>8&&(Te=!0),yt--;if(!Te)return ft;for(Ae=mt.noBOM?[]:[254,255],yt=0,Ft=ft.length;yt<Ft;yt++){if((On=(en=ft.charCodeAt(yt))>>8)>>8)throw new Error("Character at position "+yt+" of string '"+ft+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ae.push(On),Ae.push(en-(On<<8))}return String.fromCharCode.apply(void 0,Ae)}(k,U).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Wu=h.__private__.beginPage=function(k){wt[++gn]=[],Se[gn]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(k[0]),topRightY:Number(k[1])}},mf(gn),ot(wt[M])},gf=function(k,U){var ft,mt,yt;switch(e=U||e,typeof k=="string"&&(ft=y(k.toLowerCase()),Array.isArray(ft)&&(mt=ft[0],yt=ft[1])),Array.isArray(k)&&(mt=k[0]*ie,yt=k[1]*ie),isNaN(mt)&&(mt=i[0],yt=i[1]),(mt>14400||yt>14400)&&(vn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),mt=Math.min(14400,mt),yt=Math.min(14400,yt)),i=[mt,yt],e.substr(0,1)){case"l":yt>mt&&(i=[yt,mt]);break;case"p":mt>yt&&(i=[yt,mt])}Wu(i),Ug(Zu),X(Ac),Qu!==0&&X(Qu+" J"),td!==0&&X(td+" j"),rn.publish("addPage",{pageNumber:gn})},Gu=function(k){k>0&&k<=gn&&(wt.splice(k,1),Se.splice(k,1),gn--,M>gn&&(M=gn),this.setPage(M))},mf=function(k){k>0&&k<=gn&&(M=k)},bf=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return wt.length-1},vf=function(k,U,ft){var mt,yt=void 0;return ft=ft||{},k=k!==void 0?k:oe[Zt].fontName,U=U!==void 0?U:oe[Zt].fontStyle,mt=k.toLowerCase(),ge[mt]!==void 0&&ge[mt][U]!==void 0?yt=ge[mt][U]:ge[k]!==void 0&&ge[k][U]!==void 0?yt=ge[k][U]:ft.disableWarning===!1&&vn.warn("Unable to look up font label for font '"+k+"', '"+U+"'. Refer to getFontList() for available fonts."),yt||ft.noFallback||(yt=ge.times[U])==null&&(yt=ge.times.normal),yt},kc=h.__private__.putInfo=function(){var k=Un(),U=function(mt){return mt};for(var ft in u!==null&&(U=Kn.encryptor(k,0)),X("<<"),X("/Producer ("+Yi(U("jsPDF "+re.version))+")"),Xt)Xt.hasOwnProperty(ft)&&Xt[ft]&&X("/"+ft.substr(0,1).toUpperCase()+ft.substr(1)+" ("+Yi(U(Xt[ft]))+")");X("/CreationDate ("+Yi(U(q))+")"),X(">>"),X("endobj")},Mg=h.__private__.putCatalog=function(k){var U=(k=k||{}).rootDictionaryObjId||sa;switch(Un(),X("<<"),X("/Type /Catalog"),X("/Pages "+U+" 0 R"),It||(It="fullwidth"),It){case"fullwidth":X("/OpenAction [3 0 R /FitH null]");break;case"fullheight":X("/OpenAction [3 0 R /FitV null]");break;case"fullpage":X("/OpenAction [3 0 R /Fit]");break;case"original":X("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ft=""+It;ft.substr(ft.length-1)==="%"&&(It=parseInt(It)/100),typeof It=="number"&&X("/OpenAction [3 0 R /XYZ null null "+T(It)+"]")}switch(Vt||(Vt="continuous"),Vt){case"continuous":X("/PageLayout /OneColumn");break;case"single":X("/PageLayout /SinglePage");break;case"two":case"twoleft":X("/PageLayout /TwoColumnLeft");break;case"tworight":X("/PageLayout /TwoColumnRight")}Mt&&X("/PageMode /"+Mt),rn.publish("putCatalog"),X(">>"),X("endobj")},os=h.__private__.putTrailer=function(){X("trailer"),X("<<"),X("/Size "+(pt+1)),X("/Root "+pt+" 0 R"),X("/Info "+(pt-1)+" 0 R"),u!==null&&X("/Encrypt "+Kn.oid+" 0 R"),X("/ID [ <"+W+"> <"+W+"> ]"),X(">>")},yf=h.__private__.putHeader=function(){X("%PDF-"+g),X("%")},wf=h.__private__.putXRef=function(){var k="0000000000";X("xref"),X("0 "+(pt+1)),X("0000000000 65535 f ");for(var U=1;U<=pt;U++)typeof nt[U]=="function"?X((k+nt[U]()).slice(-10)+" 00000 n "):nt[U]!==void 0?X((k+nt[U]).slice(-10)+" 00000 n "):X("0000000000 00000 n ")},bo=h.__private__.buildDocument=function(){var k;pt=0,G=0,ct=[],nt=[],rt=[],sa=Cs(),mr=Cs(),ot(ct),rn.publish("buildDocument"),yf(),jr(),function(){rn.publish("putAdditionalObjects");for(var ft=0;ft<rt.length;ft++){var mt=rt[ft];Ps(mt.objId,!0),X(mt.content),X("endobj")}rn.publish("postPutAdditionalObjects")}(),k=[],function(){for(var ft in oe)oe.hasOwnProperty(ft)&&(d===!1||d===!0&&f.hasOwnProperty(ft))&&il(oe[ft])}(),function(){var ft;for(ft in Me)Me.hasOwnProperty(ft)&&Dg(Me[ft])}(),function(){for(var ft in Hs)Hs.hasOwnProperty(ft)&&_c(Hs[ft])}(),function(ft){var mt;for(mt in we)we.hasOwnProperty(mt)&&(we[mt]instanceof Vl?xc(we[mt]):we[mt]instanceof su&&Cc(we[mt],ft))}(k),rn.publish("putResources"),k.forEach(qu),qu({resourcesOid:mr,objectOid:Number.MAX_SAFE_INTEGER}),rn.publish("postPutResources"),u!==null&&(Kn.oid=Un(),X("<<"),X("/Filter /Standard"),X("/V "+Kn.v),X("/R "+Kn.r),X("/U <"+Kn.toHexString(Kn.U)+">"),X("/O <"+Kn.toHexString(Kn.O)+">"),X("/P "+Kn.P),X(">>"),X("endobj")),kc(),Mg();var U=G;return wf(),os(),X("startxref"),X(""+U),X("%%EOF"),ot(wt[M]),ct.join(`
`)},rl=h.__private__.getBlob=function(k){return new Blob([Tt(k)],{type:"application/pdf"})},yr=h.output=h.__private__.output=(Wi=function(k,U){switch(typeof(U=U||{})=="string"?U={filename:U}:U.filename=U.filename||"generated.pdf",k){case void 0:return bo();case"save":h.save(U.filename);break;case"arraybuffer":return Tt(bo());case"blob":return rl(bo());case"bloburi":case"bloburl":if(ke.URL!==void 0&&typeof ke.URL.createObjectURL=="function")return ke.URL&&ke.URL.createObjectURL(rl(bo()))||void 0;vn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ft="",mt=bo();try{ft=vw(mt)}catch{ft=vw(unescape(encodeURIComponent(mt)))}return"data:application/pdf;filename="+U.filename+";base64,"+ft;case"pdfobjectnewwindow":if(Object.prototype.toString.call(ke)==="[object Window]"){var yt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ft=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';U.pdfObjectUrl&&(yt=U.pdfObjectUrl,Ft="");var jt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+yt+'"'+Ft+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(U)+");<\/script></body></html>",se=ke.open();return se!==null&&se.document.write(jt),se}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(ke)==="[object Window]"){var ue='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(U.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+U.filename+'" width="500px" height="400px" /></body></html>',Ae=ke.open();if(Ae!==null){Ae.document.write(ue);var Te=this;Ae.document.documentElement.querySelector("#pdfViewer").onload=function(){Ae.document.title=U.filename,Ae.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Te.output("bloburl"))}}return Ae}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(ke)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var en='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",U)+'"></iframe></body></html>',On=ke.open();if(On!==null&&(On.document.write(en),On.document.title=U.filename),On||typeof safari>"u")return On;break;case"datauri":case"dataurl":return ke.document.location.href=this.output("datauristring",U);default:return null}},Wi.foo=function(){try{return Wi.apply(this,arguments)}catch(ft){var k=ft.stack||"";~k.indexOf(" at ")&&(k=k.split(" at ")[1]);var U="Error in function "+k.split(`
`)[0].split("<")[0]+": "+ft.message;if(!ke.console)throw new Error(U);ke.console.error(U,ft),ke.alert&&alert(U)}},Wi.foo.bar=Wi,Wi.foo),ol=function(k){return Array.isArray(el)===!0&&el.indexOf(k)>-1};switch(s){case"pt":ie=1;break;case"mm":ie=72/25.4;break;case"cm":ie=72/2.54;break;case"in":ie=72;break;case"px":ie=ol("px_scaling")==1?.75:96/72;break;case"pc":case"em":ie=12;break;case"ex":ie=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);ie=s}var Kn=null;lt(),O();var Yu=h.__private__.getPageInfo=h.getPageInfo=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Se[k].objId,pageNumber:k,pageContext:Se[k]}},Rg=h.__private__.getPageInfoByObjId=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var U in Se)if(Se[U].objId===k)break;return Yu(U)},Ng=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:Se[M].objId,pageNumber:M,pageContext:Se[M]}};h.addPage=function(){return gf.apply(this,arguments),this},h.setPage=function(){return mf.apply(this,arguments),ot.call(this,wt[M]),this},h.insertPage=function(k){return this.addPage(),this.movePage(M,k),this},h.movePage=function(k,U){var ft,mt;if(k>U){ft=wt[k],mt=Se[k];for(var yt=k;yt>U;yt--)wt[yt]=wt[yt-1],Se[yt]=Se[yt-1];wt[U]=ft,Se[U]=mt,this.setPage(U)}else if(k<U){ft=wt[k],mt=Se[k];for(var Ft=k;Ft<U;Ft++)wt[Ft]=wt[Ft+1],Se[Ft]=Se[Ft+1];wt[U]=ft,Se[U]=mt,this.setPage(U)}return this},h.deletePage=function(){return Gu.apply(this,arguments),this},h.__private__.text=h.text=function(k,U,ft,mt,yt){var Ft,jt,se,ue,Ae,Te,en,On,as,xn=(mt=mt||{}).scope||this;if(typeof k=="number"&&typeof U=="number"&&(typeof ft=="string"||Array.isArray(ft))){var ps=ft;ft=U,U=k,k=ps}if(arguments[3]instanceof _e==0?(se=arguments[4],ue=arguments[5],fn(en=arguments[3])==="object"&&en!==null||(typeof se=="string"&&(ue=se,se=null),typeof en=="string"&&(ue=en,en=null),typeof en=="number"&&(se=en,en=null),mt={flags:en,angle:se,align:ue})):(P("The transform parameter of text() with a Matrix value"),as=yt),isNaN(U)||isNaN(ft)||k==null)throw new Error("Invalid arguments passed to jsPDF.text");if(k.length===0)return xn;var ls,Is="",Ki=typeof mt.lineHeightFactor=="number"?mt.lineHeightFactor:ll,mi=xn.internal.scaleFactor;function Tf(on){return on=on.split("	").join(Array(mt.TabLen||9).join(" ")),Yi(on,en)}function Lc(on){for(var mn,Zn=on.concat(),gs=[],ko=Zn.length;ko--;)typeof(mn=Zn.shift())=="string"?gs.push(mn):Array.isArray(on)&&(mn.length===1||mn[1]===void 0&&mn[2]===void 0)?gs.push(mn[0]):gs.push([mn[0],mn[1],mn[2]]);return gs}function pl(on,mn){var Zn;if(typeof on=="string")Zn=mn(on)[0];else if(Array.isArray(on)){for(var gs,ko,hd=on.concat(),Dc=[],If=hd.length;If--;)typeof(gs=hd.shift())=="string"?Dc.push(mn(gs)[0]):Array.isArray(gs)&&typeof gs[0]=="string"&&(ko=mn(gs[0],gs[1],gs[2]),Dc.push([ko[0],ko[1],ko[2]]));Zn=Dc}return Zn}var oa=!1,gl=!0;if(typeof k=="string")oa=!0;else if(Array.isArray(k)){var ml=k.concat();jt=[];for(var bl,Vs=ml.length;Vs--;)(typeof(bl=ml.shift())!="string"||Array.isArray(bl)&&typeof bl[0]!="string")&&(gl=!1);oa=gl}if(oa===!1)throw new Error('Type of text must be string or Array. "'+k+'" is not recognized.');typeof k=="string"&&(k=k.match(/[\r?\n]/)?k.split(/\r\n|\r|\n/g):[k]);var vl=_t/xn.internal.scaleFactor,yl=vl*(Ki-1);switch(mt.baseline){case"bottom":ft-=yl;break;case"top":ft+=vl-yl;break;case"hanging":ft+=vl-2*yl;break;case"middle":ft+=vl/2-yl}if((Te=mt.maxWidth||0)>0&&(typeof k=="string"?k=xn.splitTextToSize(k,Te):Object.prototype.toString.call(k)==="[object Array]"&&(k=k.reduce(function(on,mn){return on.concat(xn.splitTextToSize(mn,Te))},[]))),Ft={text:k,x:U,y:ft,options:mt,mutex:{pdfEscape:Yi,activeFontKey:Zt,fonts:oe,activeFontSize:_t}},rn.publish("preProcessText",Ft),k=Ft.text,se=(mt=Ft.options).angle,as instanceof _e==0&&se&&typeof se=="number"){se*=Math.PI/180,mt.rotationDirection===0&&(se=-se),C===_&&(se=-se);var sd=Math.cos(se),id=Math.sin(se);as=new _e(sd,id,-id,sd,0,0)}else se&&se instanceof _e&&(as=se);C!==_||as||(as=mo),(Ae=mt.charSpace||Ec)!==void 0&&(Is+=L(K(Ae))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(On=mt.horizontalScale)!==void 0&&(Is+=L(100*On)+` Tz
`),mt.lang;var zn=-1,xo=mt.renderingMode!==void 0?mt.renderingMode:mt.stroke,Pc=xn.internal.getCurrentPageInfo().pageContext;switch(xo){case 0:case!1:case"fill":zn=0;break;case 1:case!0:case"stroke":zn=1;break;case 2:case"fillThenStroke":zn=2;break;case 3:case"invisible":zn=3;break;case 4:case"fillAndAddForClipping":zn=4;break;case 5:case"strokeAndAddPathForClipping":zn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":zn=6;break;case 7:case"addToPathForClipping":zn=7}var Lf=Pc.usedRenderingMode!==void 0?Pc.usedRenderingMode:-1;zn!==-1?Is+=zn+` Tr
`:Lf!==-1&&(Is+=`0 Tr
`),zn!==-1&&(Pc.usedRenderingMode=zn),ue=mt.align||"left";var Xi,wl=_t*Ki,rd=xn.internal.pageSize.getWidth(),od=oe[Zt];Ae=mt.charSpace||Ec,Te=mt.maxWidth||0,en=Object.assign({autoencode:!0,noBOM:!0},mt.flags);var aa=[],_l=function(on){return xn.getStringUnitWidth(on,{font:od,charSpace:Ae,fontSize:_t,doKerning:!1})*_t/mi};if(Object.prototype.toString.call(k)==="[object Array]"){var Ti;jt=Lc(k),ue!=="left"&&(Xi=jt.map(_l));var Li,la=0;if(ue==="right"){U-=Xi[0],k=[],Vs=jt.length;for(var Co=0;Co<Vs;Co++)Co===0?(Li=vo(U),Ti=yo(ft)):(Li=K(la-Xi[Co]),Ti=-wl),k.push([jt[Co],Li,Ti]),la=Xi[Co]}else if(ue==="center"){U-=Xi[0]/2,k=[],Vs=jt.length;for(var ca=0;ca<Vs;ca++)ca===0?(Li=vo(U),Ti=yo(ft)):(Li=K((la-Xi[ca])/2),Ti=-wl),k.push([jt[ca],Li,Ti]),la=Xi[ca]}else if(ue==="left"){k=[],Vs=jt.length;for(var ad=0;ad<Vs;ad++)k.push(jt[ad])}else if(ue==="justify"&&od.encoding==="Identity-H"){k=[],Vs=jt.length,Te=Te!==0?Te:rd;for(var Ic=0,Xn=0;Xn<Vs;Xn++)if(Ti=Xn===0?yo(ft):-wl,Li=Xn===0?vo(U):Ic,Xn<Vs-1){var Pf=K((Te-Xi[Xn])/(jt[Xn].split(" ").length-1)),zr=jt[Xn].split(" ");k.push([zr[0]+" ",Li,Ti]),Ic=0;for(var Hr=1;Hr<zr.length;Hr++){var ld=(_l(zr[Hr-1]+" "+zr[Hr])-_l(zr[Hr]))*mi+Pf;Hr==zr.length-1?k.push([zr[Hr],ld,0]):k.push([zr[Hr]+" ",ld,0]),Ic-=ld}}else k.push([jt[Xn],Li,Ti]);k.push(["",Ic,0])}else{if(ue!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(k=[],Vs=jt.length,Te=Te!==0?Te:rd,Xn=0;Xn<Vs;Xn++){Ti=Xn===0?yo(ft):-wl,Li=Xn===0?vo(U):0;var cd=jt[Xn].split(" ").length-1,ud=cd>0?(Te-Xi[Xn])/cd:0;Xn<Vs-1?aa.push(L(K(ud))):aa.push(0),k.push([jt[Xn],Li,Ti])}}}(typeof mt.R2L=="boolean"?mt.R2L:Ht)===!0&&(k=pl(k,function(on,mn,Zn){return[on.split("").reverse().join(""),mn,Zn]})),Ft={text:k,x:U,y:ft,options:mt,mutex:{pdfEscape:Yi,activeFontKey:Zt,fonts:oe,activeFontSize:_t}},rn.publish("postProcessText",Ft),k=Ft.text,ls=Ft.mutex.isHex||!1;var dd=oe[Zt].encoding;dd!=="WinAnsiEncoding"&&dd!=="StandardEncoding"||(k=pl(k,function(on,mn,Zn){return[Tf(on),mn,Zn]})),jt=Lc(k),k=[];for(var ua,da,ha,xl=Array.isArray(jt[0])?1:0,fa="",Cl=function(on,mn,Zn){var gs="";return Zn instanceof _e?(Zn=typeof mt.angle=="number"?go(Zn,new _e(1,0,0,1,on,mn)):go(new _e(1,0,0,1,on,mn),Zn),C===_&&(Zn=go(new _e(1,0,0,-1,0,0),Zn)),gs=Zn.join(" ")+` Tm
`):gs=L(on)+" "+L(mn)+` Td
`,gs},Zi=0;Zi<jt.length;Zi++){switch(fa="",xl){case 1:ha=(ls?"<":"(")+jt[Zi][0]+(ls?">":")"),ua=parseFloat(jt[Zi][1]),da=parseFloat(jt[Zi][2]);break;case 0:ha=(ls?"<":"(")+jt[Zi]+(ls?">":")"),ua=vo(U),da=yo(ft)}aa!==void 0&&aa[Zi]!==void 0&&(fa=aa[Zi]+` Tw
`),Zi===0?k.push(fa+Cl(ua,da,as)+ha):xl===0?k.push(fa+ha):xl===1&&k.push(fa+Cl(ua,da,as)+ha)}k=xl===0?k.join(` Tj
T* `):k.join(` Tj
`),k+=` Tj
`;var Vr=`BT
/`;return Vr+=Zt+" "+_t+` Tf
`,Vr+=L(_t*Ki)+` TL
`,Vr+=cl+`
`,Vr+=Is,Vr+=k,X(Vr+="ET"),f[Zt]=!0,xn};var Og=h.__private__.clip=h.clip=function(k){return X(k==="evenodd"?"W*":"W"),this};h.clipEvenOdd=function(){return Og("evenodd")},h.__private__.discardPath=h.discardPath=function(){return X("n"),this};var Ur=h.__private__.isValidStyle=function(k){var U=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(k)!==-1&&(U=!0),U};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(k){return Ur(k)&&(c=k),this};var _f=h.__private__.getStyle=h.getStyle=function(k){var U=c;switch(k){case"D":case"S":U="S";break;case"F":U="f";break;case"FD":case"DF":U="B";break;case"f":case"f*":case"B":case"B*":U=k}return U},xf=h.close=function(){return X("h"),this};h.stroke=function(){return X("S"),this},h.fill=function(k){return ia("f",k),this},h.fillEvenOdd=function(k){return ia("f*",k),this},h.fillStroke=function(k){return ia("B",k),this},h.fillStrokeEvenOdd=function(k){return ia("B*",k),this};var ia=function(k,U){fn(U)==="object"?$g(U,k):X(k)},Ku=function(k){k===null||C===_&&k===void 0||(k=_f(k),X(k))};function Fg(k,U,ft,mt,yt){var Ft=new su(U||this.boundingBox,ft||this.xStep,mt||this.yStep,this.gState,yt||this.matrix);Ft.stream=this.stream;var jt=k+"$$"+this.cloneIndex+++"$$";return qi(jt,Ft),Ft}var $g=function(k,U){var ft=We[k.key],mt=we[ft];if(mt instanceof Vl)X("q"),X(Bg(U)),mt.gState&&h.setGState(mt.gState),X(k.matrix.toString()+" cm"),X("/"+ft+" sh"),X("Q");else if(mt instanceof su){var yt=new _e(1,0,0,-1,0,fl());k.matrix&&(yt=yt.multiply(k.matrix||mo),ft=Fg.call(mt,k.key,k.boundingBox,k.xStep,k.yStep,yt).id),X("q"),X("/Pattern cs"),X("/"+ft+" scn"),mt.gState&&h.setGState(mt.gState),X(U),X("Q")}},Bg=function(k){switch(k){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Xu=h.moveTo=function(k,U){return X(L(K(k))+" "+L($(U))+" m"),this},al=h.lineTo=function(k,U){return X(L(K(k))+" "+L($(U))+" l"),this},ra=h.curveTo=function(k,U,ft,mt,yt,Ft){return X([L(K(k)),L($(U)),L(K(ft)),L($(mt)),L(K(yt)),L($(Ft)),"c"].join(" ")),this};h.__private__.line=h.line=function(k,U,ft,mt,yt){if(isNaN(k)||isNaN(U)||isNaN(ft)||isNaN(mt)||!Ur(yt))throw new Error("Invalid arguments passed to jsPDF.line");return C===x?this.lines([[ft-k,mt-U]],k,U,[1,1],yt||"S"):this.lines([[ft-k,mt-U]],k,U,[1,1]).stroke()},h.__private__.lines=h.lines=function(k,U,ft,mt,yt,Ft){var jt,se,ue,Ae,Te,en,On,as,xn,ps,ls,Is;if(typeof k=="number"&&(Is=ft,ft=U,U=k,k=Is),mt=mt||[1,1],Ft=Ft||!1,isNaN(U)||isNaN(ft)||!Array.isArray(k)||!Array.isArray(mt)||!Ur(yt)||typeof Ft!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Xu(U,ft),jt=mt[0],se=mt[1],Ae=k.length,ps=U,ls=ft,ue=0;ue<Ae;ue++)(Te=k[ue]).length===2?(ps=Te[0]*jt+ps,ls=Te[1]*se+ls,al(ps,ls)):(en=Te[0]*jt+ps,On=Te[1]*se+ls,as=Te[2]*jt+ps,xn=Te[3]*se+ls,ps=Te[4]*jt+ps,ls=Te[5]*se+ls,ra(en,On,as,xn,ps,ls));return Ft&&xf(),Ku(yt),this},h.path=function(k){for(var U=0;U<k.length;U++){var ft=k[U],mt=ft.c;switch(ft.op){case"m":Xu(mt[0],mt[1]);break;case"l":al(mt[0],mt[1]);break;case"c":ra.apply(this,mt);break;case"h":xf()}}return this},h.__private__.rect=h.rect=function(k,U,ft,mt,yt){if(isNaN(k)||isNaN(U)||isNaN(ft)||isNaN(mt)||!Ur(yt))throw new Error("Invalid arguments passed to jsPDF.rect");return C===x&&(mt=-mt),X([L(K(k)),L($(U)),L(K(ft)),L(K(mt)),"re"].join(" ")),Ku(yt),this},h.__private__.triangle=h.triangle=function(k,U,ft,mt,yt,Ft,jt){if(isNaN(k)||isNaN(U)||isNaN(ft)||isNaN(mt)||isNaN(yt)||isNaN(Ft)||!Ur(jt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ft-k,mt-U],[yt-ft,Ft-mt],[k-yt,U-Ft]],k,U,[1,1],jt,!0),this},h.__private__.roundedRect=h.roundedRect=function(k,U,ft,mt,yt,Ft,jt){if(isNaN(k)||isNaN(U)||isNaN(ft)||isNaN(mt)||isNaN(yt)||isNaN(Ft)||!Ur(jt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var se=4/3*(Math.SQRT2-1);return yt=Math.min(yt,.5*ft),Ft=Math.min(Ft,.5*mt),this.lines([[ft-2*yt,0],[yt*se,0,yt,Ft-Ft*se,yt,Ft],[0,mt-2*Ft],[0,Ft*se,-yt*se,Ft,-yt,Ft],[2*yt-ft,0],[-yt*se,0,-yt,-Ft*se,-yt,-Ft],[0,2*Ft-mt],[0,-Ft*se,yt*se,-Ft,yt,-Ft]],k+yt,U,[1,1],jt,!0),this},h.__private__.ellipse=h.ellipse=function(k,U,ft,mt,yt){if(isNaN(k)||isNaN(U)||isNaN(ft)||isNaN(mt)||!Ur(yt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ft=4/3*(Math.SQRT2-1)*ft,jt=4/3*(Math.SQRT2-1)*mt;return Xu(k+ft,U),ra(k+ft,U-jt,k+Ft,U-mt,k,U-mt),ra(k-Ft,U-mt,k-ft,U-jt,k-ft,U),ra(k-ft,U+jt,k-Ft,U+mt,k,U+mt),ra(k+Ft,U+mt,k+ft,U+jt,k+ft,U),Ku(yt),this},h.__private__.circle=h.circle=function(k,U,ft,mt){if(isNaN(k)||isNaN(U)||isNaN(ft)||!Ur(mt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(k,U,ft,ft,mt)},h.setFont=function(k,U,ft){return ft&&(U=R(U,ft)),Zt=vf(k,U,{disableWarning:!1}),this};var jg=h.__private__.getFont=h.getFont=function(){return oe[vf.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var k,U,ft={};for(k in ge)if(ge.hasOwnProperty(k))for(U in ft[k]=[],ge[k])ge[k].hasOwnProperty(U)&&ft[k].push(U);return ft},h.addFont=function(k,U,ft,mt,yt){var Ft=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ft.indexOf(arguments[3])!==-1?yt=arguments[3]:arguments[3]&&Ft.indexOf(arguments[3])==-1&&(ft=R(ft,mt)),pf.call(this,k,U,ft,yt=yt||"Identity-H")};var ll,Zu=n.lineWidth||.200025,Ee=h.__private__.getLineWidth=h.getLineWidth=function(){return Zu},Ug=h.__private__.setLineWidth=h.setLineWidth=function(k){return Zu=k,X(L(K(k))+" w"),this};h.__private__.setLineDash=re.API.setLineDash=re.API.setLineDashPattern=function(k,U){if(k=k||[],U=U||0,isNaN(U)||!Array.isArray(k))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return k=k.map(function(ft){return L(K(ft))}).join(" "),U=L(K(U)),X("["+k+"] "+U+" d"),this};var zg=h.__private__.getLineHeight=h.getLineHeight=function(){return _t*ll};h.__private__.getLineHeight=h.getLineHeight=function(){return _t*ll};var Hg=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(k){return typeof(k=k||1.15)=="number"&&(ll=k),this},Vg=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return ll};Hg(n.lineHeight);var vo=h.__private__.getHorizontalCoordinate=function(k){return K(k)},yo=h.__private__.getVerticalCoordinate=function(k){return C===_?k:Se[M].mediaBox.topRightY-Se[M].mediaBox.bottomLeftY-K(k)},qg=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(k){return L(vo(k))},Wg=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(k){return L(yo(k))},Ac=n.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return Br(Ac)},h.__private__.setStrokeColor=h.setDrawColor=function(k,U,ft,mt){return Ac=br({ch1:k,ch2:U,ch3:ft,ch4:mt,pdfColorType:"draw",precision:2}),X(Ac),this};var Ju=n.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return Br(Ju)},h.__private__.setFillColor=h.setFillColor=function(k,U,ft,mt){return Ju=br({ch1:k,ch2:U,ch3:ft,ch4:mt,pdfColorType:"fill",precision:2}),X(Ju),this};var cl=n.textColor||"0 g",Sc=h.__private__.getTextColor=h.getTextColor=function(){return Br(cl)};h.__private__.setTextColor=h.setTextColor=function(k,U,ft,mt){return cl=br({ch1:k,ch2:U,ch3:ft,ch4:mt,pdfColorType:"text",precision:3}),this};var Ec=n.charSpace,Gg=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat(Ec||0)};h.__private__.setCharSpace=h.setCharSpace=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ec=k,this};var Qu=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(k){var U=h.CapJoinStyles[k];if(U===void 0)throw new Error("Line cap style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Qu=U,X(U+" J"),this};var td=0;h.__private__.setLineJoin=h.setLineJoin=function(k){var U=h.CapJoinStyles[k];if(U===void 0)throw new Error("Line join style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return td=U,X(U+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(k){if(k=k||0,isNaN(k))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return X(L(K(k))+" M"),this},h.GState=Ep,h.setGState=function(k){(k=typeof k=="string"?Me[Yn[k]]:ul(null,k)).equals(fs)||(X("/"+k.id+" gs"),fs=k)};var ul=function(k,U){if(!k||!Yn[k]){var ft=!1;for(var mt in Me)if(Me.hasOwnProperty(mt)&&Me[mt].equals(U)){ft=!0;break}if(ft)U=Me[mt];else{var yt="GS"+(Object.keys(Me).length+1).toString(10);Me[yt]=U,U.id=yt}return k&&(Yn[k]=U.id),rn.publish("addGState",U),U}};h.addGState=function(k,U){return ul(k,U),this},h.saveGraphicsState=function(){return X("q"),Ue.push({key:Zt,size:_t,color:cl}),this},h.restoreGraphicsState=function(){X("Q");var k=Ue.pop();return Zt=k.key,_t=k.size,cl=k.color,fs=null,this},h.setCurrentTransformationMatrix=function(k){return X(k.toString()+" cm"),this},h.comment=function(k){return X("#"+k),this};var dl=function(k,U){var ft=k||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ft},set:function(Ft){isNaN(Ft)||(ft=parseFloat(Ft))}});var mt=U||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return mt},set:function(Ft){isNaN(Ft)||(mt=parseFloat(Ft))}});var yt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return yt},set:function(Ft){yt=Ft.toString()}}),this},ed=function(k,U,ft,mt){dl.call(this,k,U),this.type="rect";var yt=ft||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return yt},set:function(jt){isNaN(jt)||(yt=parseFloat(jt))}});var Ft=mt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ft},set:function(jt){isNaN(jt)||(Ft=parseFloat(jt))}}),this},Tc=function(){this.page=gn,this.currentPage=M,this.pages=wt.slice(0),this.pagesContext=Se.slice(0),this.x=Jt,this.y=ze,this.matrix=He,this.width=Cf(M),this.height=wo(M),this.outputDestination=it,this.id="",this.objectNumber=-1};Tc.prototype.restore=function(){gn=this.page,M=this.currentPage,Se=this.pagesContext,wt=this.pages,Jt=this.x,ze=this.y,He=this.matrix,kf(M,this.width),_o(M,this.height),it=this.outputDestination};var nd=function(k,U,ft,mt,yt){$r.push(new Tc),gn=M=0,wt=[],Jt=k,ze=U,He=yt,Wu([ft,mt])};for(var hl in h.beginFormObject=function(k,U,ft,mt,yt){return nd(k,U,ft,mt,yt),this},h.endFormObject=function(k){return function(U){if(po[U])$r.pop().restore();else{var ft=new Tc,mt="Xo"+(Object.keys(Hs).length+1).toString(10);ft.id=mt,po[U]=mt,Hs[mt]=ft,rn.publish("addFormObject",ft),$r.pop().restore()}}(k),this},h.doFormObject=function(k,U){var ft=Hs[po[k]];return X("q"),X(U.toString()+" cm"),X("/"+ft.id+" Do"),X("Q"),this},h.getFormObject=function(k){var U=Hs[po[k]];return{x:U.x,y:U.y,width:U.width,height:U.height,matrix:U.matrix}},h.save=function(k,U){return k=k||"generated.pdf",(U=U||{}).returnPromise=U.returnPromise||!1,U.returnPromise===!1?($l(rl(bo()),k),typeof $l.unload=="function"&&ke.setTimeout&&setTimeout($l.unload,911),this):new Promise(function(ft,mt){try{var yt=$l(rl(bo()),k);typeof $l.unload=="function"&&ke.setTimeout&&setTimeout($l.unload,911),ft(yt)}catch(Ft){mt(Ft.message)}})},re.API)re.API.hasOwnProperty(hl)&&(hl==="events"&&re.API.events.length?function(k,U){var ft,mt,yt;for(yt=U.length-1;yt!==-1;yt--)ft=U[yt][0],mt=U[yt][1],k.subscribe.apply(k,[ft].concat(typeof mt=="function"?[mt]:mt))}(rn,re.API.events):h[hl]=re.API[hl]);function Cf(k){return Se[k].mediaBox.topRightX-Se[k].mediaBox.bottomLeftX}function kf(k,U){Se[k].mediaBox.topRightX=U+Se[k].mediaBox.bottomLeftX}function wo(k){return Se[k].mediaBox.topRightY-Se[k].mediaBox.bottomLeftY}function _o(k,U){Se[k].mediaBox.topRightY=U+Se[k].mediaBox.bottomLeftY}var Af=h.getPageWidth=function(k){return Cf(k=k||M)/ie},Sf=h.setPageWidth=function(k,U){kf(k,U*ie)},fl=h.getPageHeight=function(k){return wo(k=k||M)/ie},Ef=h.setPageHeight=function(k,U){_o(k,U*ie)};return h.internal={pdfEscape:Yi,getStyle:_f,getFont:jg,getFontSize:kt,getCharSpace:Gg,getTextColor:Sc,getLineHeight:zg,getLineHeightFactor:Vg,getLineWidth:Ee,write:Pt,getHorizontalCoordinate:vo,getVerticalCoordinate:yo,getCoordinateString:qg,getVerticalCoordinateString:Wg,collections:{},newObject:Un,newAdditionalObject:nl,newObjectDeferred:Cs,newObjectDeferredBegin:Ps,getFilters:vr,putStream:Gi,events:rn,scaleFactor:ie,pageSize:{getWidth:function(){return Af(M)},setWidth:function(k){Sf(M,k)},getHeight:function(){return fl(M)},setHeight:function(k){Ef(M,k)}},encryptionOptions:u,encryption:Kn,getEncryptor:function(k){return u!==null?Kn.encryptor(k,0):function(U){return U}},output:yr,getNumberOfPages:bf,pages:wt,out:X,f2:T,f3:D,getPageInfo:Yu,getPageInfoByObjId:Rg,getCurrentPageInfo:Ng,getPDFVersion:m,Point:dl,Rectangle:ed,Matrix:_e,hasHotfix:ol},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return Af(M)},set:function(k){Sf(M,k)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return fl(M)},set:function(k){Ef(M,k)},enumerable:!0,configurable:!0}),(function(k){for(var U=0,ft=Nt.length;U<ft;U++){var mt=pf.call(this,k[U][0],k[U][1],k[U][2],Nt[U][3],!0);d===!1&&(f[mt]=!0);var yt=k[U][0].split("-");ff({id:mt,fontName:yt[0],fontStyle:yt[1]||""})}rn.publish("addFonts",{fonts:oe,dictionary:ge})}).call(h,Nt),Zt="F1",gf(i,e),rn.publish("initialized"),h}Zc.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},Zc.prototype.toHexString=function(n){return n.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Zc.prototype.hexToBytes=function(n){for(var t=[],e=0;e<n.length;e+=2)t.push(String.fromCharCode(parseInt(n.substr(e,2),16)));return t.join("")},Zc.prototype.processOwnerPassword=function(n,t){return Dm(Im(t).substr(0,5),n)},Zc.prototype.encryptor=function(n,t){var e=Im(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&t,t>>8&255)).substr(0,10);return function(s){return Dm(e,s)}},Ep.prototype.equals=function(n){var t,e="id,objectNumber,equals";if(!n||fn(n)!==fn(this))return!1;var s=0;for(t in this)if(!(e.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!n.hasOwnProperty(t)||this[t]!==n[t])return!1;s++}for(t in n)n.hasOwnProperty(t)&&e.indexOf(t)<0&&s--;return s===0},re.API={events:[]},re.version="3.0.3";var qn=re.API,rb=1,bc=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},zc=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Le=function(n){return n.toFixed(2)},ka=function(n){return n.toFixed(5)};qn.__acroform__={};var Ei=function(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n},xw=function(n){return n*rb},Zr=function(n){var t=new W7,e=ne.internal.getHeight(n)||0,s=ne.internal.getWidth(n)||0;return t.BBox=[0,0,Number(Le(s)),Number(Le(e))],t},bH=qn.__acroform__.setBit=function(n,t){if(n=n||0,t=t||0,isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<t},vH=qn.__acroform__.clearBit=function(n,t){if(n=n||0,t=t||0,isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<t)},yH=qn.__acroform__.getBit=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<t?1:0},es=qn.__acroform__.getBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return yH(n,t-1)},ns=qn.__acroform__.setBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return bH(n,t-1)},ss=qn.__acroform__.clearBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return vH(n,t-1)},wH=qn.__acroform__.calculateCoordinates=function(n,t){var e=t.internal.getHorizontalCoordinate,s=t.internal.getVerticalCoordinate,i=n[0],r=n[1],o=n[2],a=n[3],l={};return l.lowerLeft_X=e(i)||0,l.lowerLeft_Y=s(r+a)||0,l.upperRight_X=e(i+o)||0,l.upperRight_Y=s(r)||0,[Number(Le(l.lowerLeft_X)),Number(Le(l.lowerLeft_Y)),Number(Le(l.upperRight_X)),Number(Le(l.upperRight_Y))]},_H=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var t=[],e=n._V||n.DV,s=Mm(n,e),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(n.scope.__private__.encodeColorString(n.color)),t.push("/"+i+" "+Le(s.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC");var r=Zr(n);return r.scope=n.scope,r.stream=t.join(`
`),r}},Mm=function(n,t){var e=n.fontSize===0?n.maxFontSize:n.fontSize,s={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=n.multiline?i.map(function(T){return T.split(`
`)}):i.map(function(T){return[T]});var r=e,o=ne.internal.getHeight(n)||0;o=o<0?-o:o;var a=ne.internal.getWidth(n)||0;a=a<0?-a:a;var l=function(T,D,K){if(T+1<i.length){var $=D+" "+i[T+1][0];return m1($,n,K).width<=a-4}return!1};r++;t:for(;r>0;){t="",r--;var c,u,d=m1("3",n,r).height,f=n.multiline?o-r:(o-d)/2,h=f+=2,g=0,m=0,b=0;if(r<=0){t=`(...) Tj
`,t+="% Width of Text: "+m1(t,n,r=12).width+", FieldWidth:"+a+`
`;break}for(var y="",x=0,_=0;_<i.length;_++)if(i.hasOwnProperty(_)){var C=!1;if(i[_].length!==1&&b!==i[_].length-1){if((d+2)*(x+2)+2>o)continue t;y+=i[_][b],C=!0,m=_,_--}else{y=(y+=i[_][b]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var A=parseInt(_),I=l(A,y,r),R=_>=i.length-1;if(I&&!R){y+=" ",b=0;continue}if(I||R){if(R)m=A;else if(n.multiline&&(d+2)*(x+2)+2>o)continue t}else{if(!n.multiline||(d+2)*(x+2)+2>o)continue t;m=A}}for(var L="",P=g;P<=m;P++){var V=i[P];if(n.multiline){if(P===m){L+=V[b]+" ",b=(b+1)%V.length;continue}if(P===g){L+=V[V.length-1]+" ";continue}}L+=V[0]+" "}switch(L=L.substr(L.length-1)==" "?L.substr(0,L.length-1):L,u=m1(L,n,r).width,n.textAlign){case"right":c=a-u-2;break;case"center":c=(a-u)/2;break;default:c=2}t+=Le(c)+" "+Le(h)+` Td
`,t+="("+bc(L)+`) Tj
`,t+=-Le(c)+` 0 Td
`,h=-(r+2),u=0,g=C?m:m+1,x++,y=""}break}return s.text=t,s.fontSize=r,s},m1=function(n,t,e){var s=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(n,{font:s,fontSize:parseFloat(e),charSpace:0})*parseFloat(e);return{height:t.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(e),charSpace:0})*parseFloat(e)*1.5,width:i}},xH={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},CH=function(n,t){var e={type:"reference",object:n};t.internal.getPageInfo(n.page).pageContext.annotations.find(function(s){return s.type===e.type&&s.object===e.object})===void 0&&t.internal.getPageInfo(n.page).pageContext.annotations.push(e)},kH=function(n,t){if(t.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Or.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(xH)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");rb=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new G7,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(e){e.internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in s)if(s.hasOwnProperty(i)){var r=s[i];r.objId=void 0,r.hasAnnotation&&CH(r,e)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(e){if(e.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(e){(function(s,i){var r=!s;for(var o in s||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(o)){var a=s[o],l=[],c=a.Rect;if(a.Rect&&(a.Rect=wH(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=ne.createDefaultAppearanceStream(a),fn(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var u=_H(a);l.push({key:"AP",value:"<</N "+u+">>"}),i.internal.acroformPlugin.xForms.push(u)}if(a.appearanceStreamContent){var d="";for(var f in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(f)){var h=a.appearanceStreamContent[f];if(d+="/"+f+" ",d+="<<",Object.keys(h).length>=1||Array.isArray(h)){for(var o in h)if(h.hasOwnProperty(o)){var g=h[o];typeof g=="function"&&(g=g.call(i,a)),d+="/"+o+" "+g+" ",i.internal.acroformPlugin.xForms.indexOf(g)>=0||i.internal.acroformPlugin.xForms.push(g)}}else typeof(g=h)=="function"&&(g=g.call(i,a)),d+="/"+o+" "+g,i.internal.acroformPlugin.xForms.indexOf(g)>=0||i.internal.acroformPlugin.xForms.push(g);d+=">>"}l.push({key:"AP",value:`<<
`+d+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}r&&function(m,b){for(var y in m)if(m.hasOwnProperty(y)){var x=y,_=m[y];b.internal.newObjectDeferredBegin(_.objId,!0),fn(_)==="object"&&typeof _.putStream=="function"&&_.putStream(),delete m[x]}}(i.internal.acroformPlugin.xForms,i)})(e,n)}),n.internal.acroformPlugin.isInitialized=!0}},q7=qn.__acroform__.arrayToPdfArray=function(n,t,e){var s=function(o){return o};if(Array.isArray(n)){for(var i="[",r=0;r<n.length;r++)switch(r!==0&&(i+=" "),fn(n[r])){case"boolean":case"number":case"object":i+=n[r].toString();break;case"string":n[r].substr(0,1)!=="/"?(t!==void 0&&e&&(s=e.internal.getEncryptor(t)),i+="("+bc(s(n[r].toString()))+")"):i+=n[r].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},a0=function(n,t,e){var s=function(i){return i};return t!==void 0&&e&&(s=e.internal.getEncryptor(t)),(n=n||"").toString(),"("+bc(s(n))+")"},oo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};oo.prototype.toString=function(){return this.objId+" 0 R"},oo.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},oo.prototype.getKeyValueListForStream=function(){var n=[],t=Object.getOwnPropertyNames(this).filter(function(r){return r!="content"&&r!="appearanceStreamContent"&&r!="scope"&&r!="objId"&&r.substring(0,1)!="_"});for(var e in t)if(Object.getOwnPropertyDescriptor(this,t[e]).configurable===!1){var s=t[e],i=this[s];i&&(Array.isArray(i)?n.push({key:s,value:q7(i,this.objId,this.scope)}):i instanceof oo?(i.scope=this.scope,n.push({key:s,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:s,value:i}))}return n};var W7=function(){oo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){n=e.trim()},get:function(){return n||null}})};Ei(W7,oo);var G7=function(){oo.call(this);var n,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var e=function(s){return s};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+bc(e(n))+")"}},set:function(e){n=e}})};Ei(G7,oo);var Or=function n(){oo.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!es(t,3)},set:function(y){y?this.F=ns(t,3):this.F=ss(t,3)}});var e=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return e},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');e=y}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(y){s=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(y){s[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(y){s[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(y){s[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(y){s[3]=y}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var r=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!r||r.length<1){if(this instanceof Tp)return;r="FieldObject"+n.FieldNum++}var y=function(x){return x};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+bc(y(r))+")"},set:function(y){r=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return r},set:function(y){r=y}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(y){a=y}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/rb:c},set:function(y){c=y}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(y){u=y}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof Tp||this instanceof nc))return a0(d,this.objId,this.scope)},set:function(y){y=y.toString(),d=y}});var f=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof Ss==0?a0(f,this.objId,this.scope):f},set:function(y){y=y.toString(),f=this instanceof Ss==0?y.substr(0,1)==="("?zc(y.substr(1,y.length-2)):zc(y):y}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ss==1?zc(f.substr(1,f.length-1)):f},set:function(y){y=y.toString(),f=this instanceof Ss==1?"/"+y:y}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Ss==0?a0(h,this.objId,this.scope):h},set:function(y){y=y.toString(),h=this instanceof Ss==0?y.substr(0,1)==="("?zc(y.substr(1,y.length-2)):zc(y):y}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ss==1?zc(h.substr(1,h.length-1)):h},set:function(y){y=y.toString(),h=this instanceof Ss==1?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,m=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return m},set:function(y){y=!!y,m=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(y){g=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!es(this.Ff,1)},set:function(y){y?this.Ff=ns(this.Ff,1):this.Ff=ss(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!es(this.Ff,2)},set:function(y){y?this.Ff=ns(this.Ff,2):this.Ff=ss(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!es(this.Ff,3)},set:function(y){y?this.Ff=ns(this.Ff,3):this.Ff=ss(this.Ff,3)}});var b=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(b!==null)return b},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');b=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(b){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:b=2;break;case"center":case 1:b=1;break;default:b=0}}})};Ei(Or,oo);var hu=function(){Or.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){n=e}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return q7(t,this.objId,this.scope)},set:function(e){var s,i;i=[],typeof(s=e)=="string"&&(i=function(r,o,a){a||(a=1);for(var l,c=[];l=o.exec(r);)c.push(l[a]);return c}(s,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,s){for(s=s||!1,e=(e=e||"").toString();t.indexOf(e)!==-1&&(t.splice(t.indexOf(e),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!es(this.Ff,18)},set:function(e){e?this.Ff=ns(this.Ff,18):this.Ff=ss(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!es(this.Ff,19)},set:function(e){this.combo===!0&&(e?this.Ff=ns(this.Ff,19):this.Ff=ss(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!es(this.Ff,20)},set:function(e){e?(this.Ff=ns(this.Ff,20),t.sort()):this.Ff=ss(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!es(this.Ff,22)},set:function(e){e?this.Ff=ns(this.Ff,22):this.Ff=ss(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!es(this.Ff,23)},set:function(e){e?this.Ff=ns(this.Ff,23):this.Ff=ss(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!es(this.Ff,27)},set:function(e){e?this.Ff=ns(this.Ff,27):this.Ff=ss(this.Ff,27)}}),this.hasAppearanceStream=!1};Ei(hu,Or);var fu=function(){hu.call(this),this.fontName="helvetica",this.combo=!1};Ei(fu,hu);var pu=function(){fu.call(this),this.combo=!0};Ei(pu,fu);var J1=function(){pu.call(this),this.edit=!0};Ei(J1,pu);var Ss=function(){Or.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!es(this.Ff,15)},set:function(e){e?this.Ff=ns(this.Ff,15):this.Ff=ss(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!es(this.Ff,16)},set:function(e){e?this.Ff=ns(this.Ff,16):this.Ff=ss(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!es(this.Ff,17)},set:function(e){e?this.Ff=ns(this.Ff,17):this.Ff=ss(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!es(this.Ff,26)},set:function(e){e?this.Ff=ns(this.Ff,26):this.Ff=ss(this.Ff,26)}});var n,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(r){return r};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var s,i=[];for(s in i.push("<<"),t)i.push("/"+s+" ("+bc(e(t[s]))+")");return i.push(">>"),i.join(`
`)}},set:function(e){fn(e)==="object"&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){typeof e=="string"&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(e){n="/"+e}})};Ei(Ss,Or);var Q1=function(){Ss.call(this),this.pushButton=!0};Ei(Q1,Ss);var gu=function(){Ss.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t!==void 0?t:[]}})};Ei(gu,Ss);var Tp=function(){var n,t;Or.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var e,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var r,o=[];for(r in o.push("<<"),s)o.push("/"+r+" ("+bc(i(s[r]))+")");return o.push(">>"),o.join(`
`)},set:function(i){fn(i)==="object"&&(s=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(i){typeof i=="string"&&(s.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(i){e="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ne.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ei(Tp,Or),gu.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var e=this.Kids[t];e.appearanceStreamContent=n.createAppearanceStream(e.optionName),e.caption=n.getCA()}},gu.prototype.createOption=function(n){var t=new Tp;return t.Parent=this,t.optionName=n,this.Kids.push(t),AH.call(this.scope,t),t};var tp=function(){Ss.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ne.CheckBox.createAppearanceStream()};Ei(tp,Ss);var nc=function(){Or.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!es(this.Ff,13)},set:function(t){t?this.Ff=ns(this.Ff,13):this.Ff=ss(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!es(this.Ff,21)},set:function(t){t?this.Ff=ns(this.Ff,21):this.Ff=ss(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!es(this.Ff,23)},set:function(t){t?this.Ff=ns(this.Ff,23):this.Ff=ss(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!es(this.Ff,24)},set:function(t){t?this.Ff=ns(this.Ff,24):this.Ff=ss(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!es(this.Ff,25)},set:function(t){t?this.Ff=ns(this.Ff,25):this.Ff=ss(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!es(this.Ff,26)},set:function(t){t?this.Ff=ns(this.Ff,26):this.Ff=ss(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){Number.isInteger(t)&&(n=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ei(nc,Or);var ep=function(){nc.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!es(this.Ff,14)},set:function(n){n?this.Ff=ns(this.Ff,14):this.Ff=ss(this.Ff,14)}}),this.password=!0};Ei(ep,nc);var ne={CheckBox:{createAppearanceStream:function(){return{N:{On:ne.CheckBox.YesNormal},D:{On:ne.CheckBox.YesPushDown,Off:ne.CheckBox.OffPushDown}}},YesPushDown:function(n){var t=Zr(n);t.scope=n.scope;var e=[],s=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),r=Mm(n,n.caption);return e.push("0.749023 g"),e.push("0 0 "+Le(ne.internal.getWidth(n))+" "+Le(ne.internal.getHeight(n))+" re"),e.push("f"),e.push("BMC"),e.push("q"),e.push("0 0 1 rg"),e.push("/"+s+" "+Le(r.fontSize)+" Tf "+i),e.push("BT"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC"),t.stream=e.join(`
`),t},YesNormal:function(n){var t=Zr(n);t.scope=n.scope;var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,s=n.scope.__private__.encodeColorString(n.color),i=[],r=ne.internal.getHeight(n),o=ne.internal.getWidth(n),a=Mm(n,n.caption);return i.push("1 g"),i.push("0 0 "+Le(o)+" "+Le(r)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Le(o-1)+" "+Le(r-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+e+" "+Le(a.fontSize)+" Tf "+s),i.push(a.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(n){var t=Zr(n);t.scope=n.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+Le(ne.internal.getWidth(n))+" "+Le(ne.internal.getHeight(n))+" re"),e.push("f"),t.stream=e.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(n){var t={D:{Off:ne.RadioButton.Circle.OffPushDown},N:{}};return t.N[n]=ne.RadioButton.Circle.YesNormal,t.D[n]=ne.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(n){var t=Zr(n);t.scope=n.scope;var e=[],s=ne.internal.getWidth(n)<=ne.internal.getHeight(n)?ne.internal.getWidth(n)/4:ne.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var i=ne.internal.Bezier_C,r=Number((s*i).toFixed(5));return e.push("q"),e.push("1 0 0 1 "+ka(ne.internal.getWidth(n)/2)+" "+ka(ne.internal.getHeight(n)/2)+" cm"),e.push(s+" 0 m"),e.push(s+" "+r+" "+r+" "+s+" 0 "+s+" c"),e.push("-"+r+" "+s+" -"+s+" "+r+" -"+s+" 0 c"),e.push("-"+s+" -"+r+" -"+r+" -"+s+" 0 -"+s+" c"),e.push(r+" -"+s+" "+s+" -"+r+" "+s+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(n){var t=Zr(n);t.scope=n.scope;var e=[],s=ne.internal.getWidth(n)<=ne.internal.getHeight(n)?ne.internal.getWidth(n)/4:ne.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var i=Number((2*s).toFixed(5)),r=Number((i*ne.internal.Bezier_C).toFixed(5)),o=Number((s*ne.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+ka(ne.internal.getWidth(n)/2)+" "+ka(ne.internal.getHeight(n)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+r+" "+r+" "+i+" 0 "+i+" c"),e.push("-"+r+" "+i+" -"+i+" "+r+" -"+i+" 0 c"),e.push("-"+i+" -"+r+" -"+r+" -"+i+" 0 -"+i+" c"),e.push(r+" -"+i+" "+i+" -"+r+" "+i+" 0 c"),e.push("f"),e.push("Q"),e.push("0 g"),e.push("q"),e.push("1 0 0 1 "+ka(ne.internal.getWidth(n)/2)+" "+ka(ne.internal.getHeight(n)/2)+" cm"),e.push(s+" 0 m"),e.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),e.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),e.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),e.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},OffPushDown:function(n){var t=Zr(n);t.scope=n.scope;var e=[],s=ne.internal.getWidth(n)<=ne.internal.getHeight(n)?ne.internal.getWidth(n)/4:ne.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var i=Number((2*s).toFixed(5)),r=Number((i*ne.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+ka(ne.internal.getWidth(n)/2)+" "+ka(ne.internal.getHeight(n)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+r+" "+r+" "+i+" 0 "+i+" c"),e.push("-"+r+" "+i+" -"+i+" "+r+" -"+i+" 0 c"),e.push("-"+i+" -"+r+" -"+r+" -"+i+" 0 -"+i+" c"),e.push(r+" -"+i+" "+i+" -"+r+" "+i+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t}},Cross:{createAppearanceStream:function(n){var t={D:{Off:ne.RadioButton.Cross.OffPushDown},N:{}};return t.N[n]=ne.RadioButton.Cross.YesNormal,t.D[n]=ne.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(n){var t=Zr(n);t.scope=n.scope;var e=[],s=ne.internal.calculateCross(n);return e.push("q"),e.push("1 1 "+Le(ne.internal.getWidth(n)-2)+" "+Le(ne.internal.getHeight(n)-2)+" re"),e.push("W"),e.push("n"),e.push(Le(s.x1.x)+" "+Le(s.x1.y)+" m"),e.push(Le(s.x2.x)+" "+Le(s.x2.y)+" l"),e.push(Le(s.x4.x)+" "+Le(s.x4.y)+" m"),e.push(Le(s.x3.x)+" "+Le(s.x3.y)+" l"),e.push("s"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(n){var t=Zr(n);t.scope=n.scope;var e=ne.internal.calculateCross(n),s=[];return s.push("0.749023 g"),s.push("0 0 "+Le(ne.internal.getWidth(n))+" "+Le(ne.internal.getHeight(n))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+Le(ne.internal.getWidth(n)-2)+" "+Le(ne.internal.getHeight(n)-2)+" re"),s.push("W"),s.push("n"),s.push(Le(e.x1.x)+" "+Le(e.x1.y)+" m"),s.push(Le(e.x2.x)+" "+Le(e.x2.y)+" l"),s.push(Le(e.x4.x)+" "+Le(e.x4.y)+" m"),s.push(Le(e.x3.x)+" "+Le(e.x3.y)+" l"),s.push("s"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(n){var t=Zr(n);t.scope=n.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+Le(ne.internal.getWidth(n))+" "+Le(ne.internal.getHeight(n))+" re"),e.push("f"),t.stream=e.join(`
`),t}}},createDefaultAppearanceStream:function(n){var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,e=n.scope.__private__.encodeColorString(n.color);return"/"+t+" "+n.fontSize+" Tf "+e}};ne.internal={Bezier_C:.551915024494,calculateCross:function(n){var t=ne.internal.getWidth(n),e=ne.internal.getHeight(n),s=Math.min(t,e);return{x1:{x:(t-s)/2,y:(e-s)/2+s},x2:{x:(t-s)/2+s,y:(e-s)/2},x3:{x:(t-s)/2,y:(e-s)/2},x4:{x:(t-s)/2+s,y:(e-s)/2+s}}}},ne.internal.getWidth=function(n){var t=0;return fn(n)==="object"&&(t=xw(n.Rect[2])),t},ne.internal.getHeight=function(n){var t=0;return fn(n)==="object"&&(t=xw(n.Rect[3])),t};var AH=qn.addField=function(n){if(kH(this,n),!(n instanceof Or))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=n).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};qn.AcroFormChoiceField=hu,qn.AcroFormListBox=fu,qn.AcroFormComboBox=pu,qn.AcroFormEditBox=J1,qn.AcroFormButton=Ss,qn.AcroFormPushButton=Q1,qn.AcroFormRadioButton=gu,qn.AcroFormCheckBox=tp,qn.AcroFormTextField=nc,qn.AcroFormPasswordField=ep,qn.AcroFormAppearance=ne,qn.AcroForm={ChoiceField:hu,ListBox:fu,ComboBox:pu,EditBox:J1,Button:Ss,PushButton:Q1,RadioButton:gu,CheckBox:tp,TextField:nc,PasswordField:ep,Appearance:ne},re.AcroForm={ChoiceField:hu,ListBox:fu,ComboBox:pu,EditBox:J1,Button:Ss,PushButton:Q1,RadioButton:gu,CheckBox:tp,TextField:nc,PasswordField:ep,Appearance:ne};re.AcroForm;function Y7(n){return n.reduce(function(t,e,s){return t[e]=s,t},{})}(function(n){var t="addImage_";n.__addimage__={};var e="UNKNOWN",s={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=n.__addimage__.getImageFileTypeByImageData=function(T,D){var K,$,q,W,F,O=e;if((D=D||e)==="RGBA"||T.data!==void 0&&T.data instanceof Uint8ClampedArray&&"height"in T&&"width"in T)return"RGBA";if(I(T))for(F in s)for(q=s[F],K=0;K<q.length;K+=1){for(W=!0,$=0;$<q[K].length;$+=1)if(q[K][$]!==void 0&&q[K][$]!==T[$]){W=!1;break}if(W===!0){O=F;break}}else for(F in s)for(q=s[F],K=0;K<q.length;K+=1){for(W=!0,$=0;$<q[K].length;$+=1)if(q[K][$]!==void 0&&q[K][$]!==T.charCodeAt($)){W=!1;break}if(W===!0){O=F;break}}return O===e&&D!==e&&(O=D),O},r=function T(D){for(var K=this.internal.write,$=this.internal.putStream,q=(0,this.internal.getFilters)();q.indexOf("FlateEncode")!==-1;)q.splice(q.indexOf("FlateEncode"),1);D.objectId=this.internal.newObject();var W=[];if(W.push({key:"Type",value:"/XObject"}),W.push({key:"Subtype",value:"/Image"}),W.push({key:"Width",value:D.width}),W.push({key:"Height",value:D.height}),D.colorSpace===y.INDEXED?W.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(D.palette.length/3-1)+" "+("sMask"in D&&D.sMask!==void 0?D.objectId+2:D.objectId+1)+" 0 R]"}):(W.push({key:"ColorSpace",value:"/"+D.colorSpace}),D.colorSpace===y.DEVICE_CMYK&&W.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),W.push({key:"BitsPerComponent",value:D.bitsPerComponent}),"decodeParameters"in D&&D.decodeParameters!==void 0&&W.push({key:"DecodeParms",value:"<<"+D.decodeParameters+">>"}),"transparency"in D&&Array.isArray(D.transparency)&&D.transparency.length>0){for(var F="",O=0,et=D.transparency.length;O<et;O++)F+=D.transparency[O]+" "+D.transparency[O]+" ";W.push({key:"Mask",value:"["+F+"]"})}D.sMask!==void 0&&W.push({key:"SMask",value:D.objectId+1+" 0 R"});var gt=D.filter!==void 0?["/"+D.filter]:void 0;if($({data:D.data,additionalKeyValues:W,alreadyAppliedFilters:gt,objectId:D.objectId}),K("endobj"),"sMask"in D&&D.sMask!==void 0){var lt,E=(lt=D.sMaskBitsPerComponent)!==null&&lt!==void 0?lt:D.bitsPerComponent,M={width:D.width,height:D.height,colorSpace:"DeviceGray",bitsPerComponent:E,data:D.sMask};"filter"in D&&(M.decodeParameters="/Predictor ".concat(D.predictor," /Colors 1 /BitsPerComponent ").concat(E," /Columns ").concat(D.width),M.filter=D.filter),T.call(this,M)}if(D.colorSpace===y.INDEXED){var B=this.internal.newObject();$({data:L(new Uint8Array(D.palette)),objectId:B}),K("endobj")}},o=function(){var T=this.internal.collections[t+"images"];for(var D in T)r.call(this,T[D])},a=function(){var T,D=this.internal.collections[t+"images"],K=this.internal.write;for(var $ in D)K("/I"+(T=D[$]).index,T.objectId,"0","R")},l=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",a))},c=function(){var T=this.internal.collections[t+"images"];return l.call(this),T},u=function(){return Object.keys(this.internal.collections[t+"images"]).length},d=function(T){return typeof n["process"+T.toUpperCase()]=="function"},f=function(T){return fn(T)==="object"&&T.nodeType===1},h=function(T,D){if(T.nodeName==="IMG"&&T.hasAttribute("src")){var K=""+T.getAttribute("src");if(K.indexOf("data:image/")===0)return Z1(unescape(K).split("base64,").pop());var $=n.loadFile(K,!0);if($!==void 0)return $}if(T.nodeName==="CANVAS"){if(T.width===0||T.height===0)throw new Error("Given canvas must have data. Canvas width: "+T.width+", height: "+T.height);var q;switch(D){case"PNG":q="image/png";break;case"WEBP":q="image/webp";break;default:q="image/jpeg"}return Z1(T.toDataURL(q,1).split("base64,").pop())}},g=function(T){var D=this.internal.collections[t+"images"];if(D){for(var K in D)if(T===D[K].alias)return D[K]}},m=function(T,D,K){return T||D||(T=-96,D=-96),T<0&&(T=-1*K.width*72/T/this.internal.scaleFactor),D<0&&(D=-1*K.height*72/D/this.internal.scaleFactor),T===0&&(T=D*K.width/K.height),D===0&&(D=T*K.height/K.width),[T,D]},b=function(T,D,K,$,q,W){var F=m.call(this,K,$,q),O=this.internal.getCoordinateString,et=this.internal.getVerticalCoordinateString,gt=c.call(this);if(K=F[0],$=F[1],gt[q.index]=q,W){W*=Math.PI/180;var lt=Math.cos(W),E=Math.sin(W),M=function(at){return at.toFixed(4)},B=[M(lt),M(E),M(-1*E),M(lt),0,0,"cm"]}this.internal.write("q"),W?(this.internal.write([1,"0","0",1,O(T),et(D+$),"cm"].join(" ")),this.internal.write(B.join(" ")),this.internal.write([O(K),"0","0",O($),"0","0","cm"].join(" "))):this.internal.write([O(K),"0","0",O($),O(T),et(D+$),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+q.index+" Do"),this.internal.write("Q")},y=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var x=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},_=n.__addimage__.sHashCode=function(T){var D,K,$=0;if(typeof T=="string")for(K=T.length,D=0;D<K;D++)$=($<<5)-$+T.charCodeAt(D),$|=0;else if(I(T))for(K=T.byteLength/2,D=0;D<K;D++)$=($<<5)-$+T[D],$|=0;return $},C=n.__addimage__.validateStringAsBase64=function(T){(T=T||"").toString().trim();var D=!0;return T.length===0&&(D=!1),T.length%4!=0&&(D=!1),/^[A-Za-z0-9+/]+$/.test(T.substr(0,T.length-2))===!1&&(D=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(T.substr(-2))===!1&&(D=!1),D},A=n.__addimage__.extractImageFromDataUrl=function(T){if(T==null||!(T=T.trim()).startsWith("data:"))return null;var D=T.indexOf(",");return D<0?null:T.substring(0,D).trim().endsWith("base64")?T.substring(D+1):null};n.__addimage__.isArrayBuffer=function(T){return T instanceof ArrayBuffer};var I=n.__addimage__.isArrayBufferView=function(T){return T instanceof Int8Array||T instanceof Uint8Array||T instanceof Uint8ClampedArray||T instanceof Int16Array||T instanceof Uint16Array||T instanceof Int32Array||T instanceof Uint32Array||T instanceof Float32Array||T instanceof Float64Array},R=n.__addimage__.binaryStringToUint8Array=function(T){for(var D=T.length,K=new Uint8Array(D),$=0;$<D;$++)K[$]=T.charCodeAt($);return K},L=n.__addimage__.arrayBufferToBinaryString=function(T){for(var D="",K=I(T)?T:new Uint8Array(T),$=0;$<K.length;$+=8192)D+=String.fromCharCode.apply(null,K.subarray($,$+8192));return D};n.addImage=function(){var T,D,K,$,q,W,F,O,et;if(typeof arguments[1]=="number"?(D=e,K=arguments[1],$=arguments[2],q=arguments[3],W=arguments[4],F=arguments[5],O=arguments[6],et=arguments[7]):(D=arguments[1],K=arguments[2],$=arguments[3],q=arguments[4],W=arguments[5],F=arguments[6],O=arguments[7],et=arguments[8]),fn(T=arguments[0])==="object"&&!f(T)&&"imageData"in T){var gt=T;T=gt.imageData,D=gt.format||D||e,K=gt.x||K||0,$=gt.y||$||0,q=gt.w||gt.width||q,W=gt.h||gt.height||W,F=gt.alias||F,O=gt.compression||O,et=gt.rotation||gt.angle||et}var lt=this.internal.getFilters();if(O===void 0&&lt.indexOf("FlateEncode")!==-1&&(O="SLOW"),isNaN(K)||isNaN($))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var E=P.call(this,T,D,F,O);return b.call(this,K,$,q,W,E,et),this};var P=function(T,D,K,$){var q,W,F;if(typeof T=="string"&&i(T)===e){T=unescape(T);var O=V(T,!1);(O!==""||(O=n.loadFile(T,!0))!==void 0)&&(T=O)}if(f(T)&&(T=h(T,D)),D=i(T,D),!d(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if(((F=K)==null||F.length===0)&&(K=function(et){return typeof et=="string"||I(et)?_(et):I(et.data)?_(et.data):null}(T)),(q=g.call(this,K))||(T instanceof Uint8Array||D==="RGBA"||(W=T,T=R(T)),q=this["process"+D.toUpperCase()](T,u.call(this),K,function(et){return et&&typeof et=="string"&&(et=et.toUpperCase()),et in n.image_compression?et:x.NONE}($),W)),!q)throw new Error("An unknown error occurred whilst processing the image.");return q},V=n.__addimage__.convertBase64ToBinaryString=function(T,D){D=typeof D!="boolean"||D;var K,$="";if(typeof T=="string"){var q;K=(q=A(T))!==null&&q!==void 0?q:T;try{$=Z1(K)}catch(W){if(D)throw C(K)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+W.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return $};n.getImageProperties=function(T){var D,K,$="";if(f(T)&&(T=h(T)),typeof T=="string"&&i(T)===e&&(($=V(T,!1))===""&&($=n.loadFile(T)||""),T=$),K=i(T),!d(K))throw new Error("addImage does not support files of type '"+K+"', please ensure that a plugin for '"+K+"' support is added.");if(T instanceof Uint8Array||(T=R(T)),!(D=this["process"+K.toUpperCase()](T)))throw new Error("An unknown error occurred whilst processing the image");return D.fileType=K,D}})(re.API),function(n){var t=function(e){if(e!==void 0&&e!="")return!0};re.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(e){for(var s,i,r,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(e.objId),c=e.pageContext.annotations,u=!1,d=0;d<c.length&&!u;d++)switch((s=c[d]).type){case"link":(t(s.options.url)||t(s.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var f=0;f<c.length;f++){s=c[f];var h=this.internal.pdfEscape,g=this.internal.getEncryptor(e.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var m=this.internal.newAdditionalObject(),b=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(m.objId),x=s.title||"Note";r="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(s.bounds.x)+" "+a(s.bounds.y+s.bounds.h)+" "+o(s.bounds.x+s.bounds.w)+" "+a(s.bounds.y)+"] ")+"/Contents ("+h(y(s.contents))+")",r+=" /Popup "+b.objId+" 0 R",r+=" /P "+l.objId+" 0 R",r+=" /T ("+h(y(x))+") >>",m.content=r;var _=m.objId+" 0 R";r="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(s.bounds.x+30)+" "+a(s.bounds.y+s.bounds.h)+" "+o(s.bounds.x+s.bounds.w+30)+" "+a(s.bounds.y)+"] ")+" /Parent "+_,s.open&&(r+=" /Open true"),r+=" >>",b.content=r,this.internal.write(m.objId,"0 R",b.objId,"0 R");break;case"freetext":i="/Rect ["+o(s.bounds.x)+" "+a(s.bounds.y)+" "+o(s.bounds.x+s.bounds.w)+" "+a(s.bounds.y+s.bounds.h)+"] ";var C=s.color||"#000000";r="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+h(g(s.contents))+")",r+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+C+")",r+=" /Border [0 0 0]",r+=" >>",this.internal.write(r);break;case"link":if(s.options.name){var A=this.annotations._nameMap[s.options.name];s.options.pageNumber=A.page,s.options.top=A.y}else s.options.top||(s.options.top=0);if(i="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",r="",s.options.url)r="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+h(g(s.options.url))+") >>";else if(s.options.pageNumber)switch(r="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":r+=" /Fit]";break;case"FitH":r+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,r+=" /FitV "+s.options.left+"]";break;default:var I=a(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),r+=" /XYZ "+s.options.left+" "+I+" "+s.options.zoom+"]"}r!=""&&(r+=" >>",this.internal.write(r))}}this.internal.write("]")}}]),n.createAnnotation=function(e){var s=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":s.pageContext.annotations.push(e)}},n.link=function(e,s,i,r,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(e),y:c(s),w:l(e+i),h:c(s+r)},options:o,type:"link"})},n.textWithLink=function(e,s,i,r){var o,a,l=this.getTextWidth(e),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(r.maxWidth!==void 0){a=r.maxWidth;var u=this.splitTextToSize(e,a).length;o=Math.ceil(c*u)}else a=l,o=c;return this.text(e,s,i,r),i+=.2*c,r.align==="center"&&(s-=l/2),r.align==="right"&&(s-=l),this.link(s,i-c,a,o,r),l},n.getTextWidth=function(e){var s=this.internal.getFontSize();return this.getStringUnitWidth(e)*s/this.internal.scaleFactor}}(re.API),function(n){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},e={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var r=n.__arabicParser__.isInArabicSubstitutionA=function(m){return t[m.charCodeAt(0)]!==void 0},o=n.__arabicParser__.isArabicLetter=function(m){return typeof m=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(m)},a=n.__arabicParser__.isArabicEndLetter=function(m){return o(m)&&r(m)&&t[m.charCodeAt(0)].length<=2},l=n.__arabicParser__.isArabicAlfLetter=function(m){return o(m)&&i.indexOf(m.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(m){return o(m)&&r(m)&&t[m.charCodeAt(0)].length>=1};var c=n.__arabicParser__.arabicLetterHasFinalForm=function(m){return o(m)&&r(m)&&t[m.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(m){return o(m)&&r(m)&&t[m.charCodeAt(0)].length>=3};var u=n.__arabicParser__.arabicLetterHasMedialForm=function(m){return o(m)&&r(m)&&t[m.charCodeAt(0)].length==4},d=n.__arabicParser__.resolveLigatures=function(m){var b=0,y=e,x="",_=0;for(b=0;b<m.length;b+=1)y[m.charCodeAt(b)]!==void 0?(_++,typeof(y=y[m.charCodeAt(b)])=="number"&&(x+=String.fromCharCode(y),y=e,_=0),b===m.length-1&&(y=e,x+=m.charAt(b-(_-1)),b-=_-1,_=0)):(y=e,x+=m.charAt(b-_),b-=_,_=0);return x};n.__arabicParser__.isArabicDiacritic=function(m){return m!==void 0&&s[m.charCodeAt(0)]!==void 0};var f=n.__arabicParser__.getCorrectForm=function(m,b,y){return o(m)?r(m)===!1?-1:!c(m)||!o(b)&&!o(y)||!o(y)&&a(b)||a(m)&&!o(b)||a(m)&&l(b)||a(m)&&a(b)?0:u(m)&&o(b)&&!a(b)&&o(y)&&c(y)?3:a(m)||!o(y)?1:2:-1},h=function(m){var b=0,y=0,x=0,_="",C="",A="",I=(m=m||"").split("\\s+"),R=[];for(b=0;b<I.length;b+=1){for(R.push(""),y=0;y<I[b].length;y+=1)_=I[b][y],C=I[b][y-1],A=I[b][y+1],o(_)?(x=f(_,C,A),R[b]+=x!==-1?String.fromCharCode(t[_.charCodeAt(0)][x]):_):R[b]+=_;R[b]=d(R[b])}return R.join(" ")},g=n.__arabicParser__.processArabic=n.processArabic=function(){var m,b=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(b)){var x=0;for(y=[],x=0;x<b.length;x+=1)Array.isArray(b[x])?y.push([h(b[x][0]),b[x][1],b[x][2]]):y.push([h(b[x])]);m=y}else m=h(b);return typeof arguments[0]=="string"?m:(arguments[0].text=m,arguments[0])};n.events.push(["preProcessText",g])}(re.API),re.API.autoPrint=function(n){var t;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(n){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(a){e=a}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(a){s=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var r=[];Object.defineProperty(this,"childNodes",{get:function(){return r},set:function(a){r=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,s){var i;if((e=e||"2d")!=="2d")return null;for(i in s)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=s[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(re.API),function(n){var t={left:0,top:0,bottom:0,right:0},e=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new r,this.internal.__cell__.pages=1},r=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(m){l=m}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(m){c=m}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(m){u=m}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(m){d=m}});var f=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return f},set:function(m){f=m}});var h=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return h},set:function(m){h=m}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(m){g=m}}),this};r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},r.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(l){return s.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},n.getTextDimensions=function(l,c){s.call(this);var u=(c=c||{}).fontSize||this.getFontSize(),d=c.font||this.getFont(),f=c.scaleFactor||this.internal.scaleFactor,h=0,g=0,m=0,b=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var y=c.maxWidth;y>0?typeof l=="string"?l=this.splitTextToSize(l,y):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(_,C){return _.concat(b.splitTextToSize(C,y))},[])):l=Array.isArray(l)?l:[l];for(var x=0;x<l.length;x++)h<(m=this.getStringUnitWidth(l[x],{font:d})*u)&&(h=m);return h!==0&&(g=l.length),{w:h/=f,h:Math.max((g*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/f,0)}},n.cellAddPage=function(){s.call(this),this.addPage();var l=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new r(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=n.cell=function(){var l;l=arguments[0]instanceof r?arguments[0]:new r(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),s.call(this);var c=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,d=this.internal.__cell__.margins||t,f=this.internal.__cell__.tableHeaderRow,h=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=d.top,h&&f&&(this.printHeaderRow(l.lineNumber,!0),l.y+=f[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,e===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-u,l.y+u,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+u,{align:"center",baseline:"top",maxWidth:l.width-u-u}):this.text(l.text,l.x+u,l.y+u,{align:"left",baseline:"top",maxWidth:l.width-u-u})),this.internal.__cell__.lastCell=l,this};n.table=function(l,c,u,d,f){if(s.call(this),!u)throw new Error("No data for PDF table.");var h,g,m,b,y=[],x=[],_=[],C={},A={},I=[],R=[],L=(f=f||{}).autoSize||!1,P=f.printHeaders!==!1,V=f.css&&f.css["font-size"]!==void 0?16*f.css["font-size"]:f.fontSize||12,T=f.margins||Object.assign({width:this.getPageWidth()},t),D=typeof f.padding=="number"?f.padding:3,K=f.headerBackgroundColor||"#c8c8c8",$=f.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=P,this.internal.__cell__.margins=T,this.internal.__cell__.table_font_size=V,this.internal.__cell__.padding=D,this.internal.__cell__.headerBackgroundColor=K,this.internal.__cell__.headerTextColor=$,this.setFontSize(V),d==null)x=y=Object.keys(u[0]),_=y.map(function(){return"left"});else if(Array.isArray(d)&&fn(d[0])==="object")for(y=d.map(function(gt){return gt.name}),x=d.map(function(gt){return gt.prompt||gt.name||""}),_=d.map(function(gt){return gt.align||"left"}),h=0;h<d.length;h+=1)A[d[h].name]=.7499990551181103*d[h].width;else Array.isArray(d)&&typeof d[0]=="string"&&(x=y=d,_=y.map(function(){return"left"}));if(L||Array.isArray(d)&&typeof d[0]=="string")for(h=0;h<y.length;h+=1){for(C[b=y[h]]=u.map(function(gt){return gt[b]}),this.setFont(void 0,"bold"),I.push(this.getTextDimensions(x[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=C[b],this.setFont(void 0,"normal"),m=0;m<g.length;m+=1)I.push(this.getTextDimensions(g[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);A[b]=Math.max.apply(null,I)+D+D,I=[]}if(P){var q={};for(h=0;h<y.length;h+=1)q[y[h]]={},q[y[h]].text=x[h],q[y[h]].align=_[h];var W=a.call(this,q,A);R=y.map(function(gt){return new r(l,c,A[gt],W,q[gt].text,void 0,q[gt].align)}),this.setTableHeaderRow(R),this.printHeaderRow(1,!1)}var F=d.reduce(function(gt,lt){return gt[lt.name]=lt.align,gt},{});for(h=0;h<u.length;h+=1){"rowStart"in f&&f.rowStart instanceof Function&&f.rowStart({row:h,data:u[h]},this);var O=a.call(this,u[h],A);for(m=0;m<y.length;m+=1){var et=u[h][y[m]];"cellStart"in f&&f.cellStart instanceof Function&&f.cellStart({row:h,col:m,data:et},this),o.call(this,new r(l,c,A[y[m]],O,et,h+2,F[y[m]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var u=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,f=this.internal.scaleFactor;return Object.keys(l).map(function(h){var g=l[h];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,c[h]-u-u)},this).map(function(h){return this.getLineHeightFactor()*h.length*d/f+u+u},this).reduce(function(h,g){return Math.max(h,g)},0)};n.setTableHeaderRow=function(l){s.call(this),this.internal.__cell__.tableHeaderRow=l},n.printHeaderRow=function(l,c){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(e=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new r(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var f=[],h=0;h<this.internal.__cell__.tableHeaderRow.length;h+=1){u=this.internal.__cell__.tableHeaderRow[h].clone(),c&&(u.y=this.internal.__cell__.margins.top||0,f.push(u)),u.lineNumber=l;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(g)}f.length>0&&this.setTableHeaderRow(f),this.setFont(void 0,"normal"),e=!1}}(re.API);var K7={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},X7=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Rm=Y7(X7),Z7=[100,200,300,400,500,600,700,800,900],SH=Y7(Z7);function l0(n){var t=n.family.replace(/"|'/g,"").toLowerCase(),e=function(r){return K7[r=r||"normal"]?r:"normal"}(n.style),s=function(r){return r?typeof r=="number"?r>=100&&r<=900&&r%100==0?r:400:/^\d00$/.test(r)?parseInt(r):r==="bold"?700:400:400}(n.weight),i=function(r){return typeof Rm[r=r||"normal"]=="number"?r:"normal"}(n.stretch);return{family:t,style:e,weight:s,stretch:i,src:n.src||[],ref:n.ref||{name:t,style:[i,e,s].join(" ")}}}function Cw(n,t,e,s){var i;for(i=e;i>=0&&i<t.length;i+=s)if(n[t[i]])return n[t[i]];for(i=e;i>=0&&i<t.length;i-=s)if(n[t[i]])return n[t[i]]}var EH={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},kw={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Aw(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function Sw(n){return n.trimLeft()}function TH(n,t){for(var e=0;e<n.length;){if(n.charAt(e)===t)return[n.substring(0,e),n.substring(e+1)];e+=1}return null}function LH(n){var t=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],n.substring(t[0].length)]}var b1,Ew,Tw,Hc,v1,Lw,Pw,Iw,c0=["times"];function Dw(n,t,e,s,i){var r=4,o=Rw;switch(i){case re.API.image_compression.FAST:r=1,o=Mw;break;case re.API.image_compression.MEDIUM:r=6,o=Nw;break;case re.API.image_compression.SLOW:r=9,o=Ow}n=function(l,c,u,d){for(var f,h=l.length/c,g=new Uint8Array(l.length+h),m=[PH,Mw,Rw,Nw,Ow],b=0;b<h;b+=1){var y=b*c,x=l.subarray(y,y+c);if(d)g.set(d(x,u,f),y+b);else{for(var _=m.length,C=[],A=0;A<_;A+=1)C[A]=m[A](x,u,f);var I=DH(C.concat());g.set(C[I],y+b)}f=x}return g}(n,t,Math.ceil(e*s/8),o);var a=Em(n,{level:r});return re.API.__addimage__.arrayBufferToBinaryString(a)}function PH(n){var t=Array.apply([],n);return t.unshift(0),t}function Mw(n,t){var e=n.length,s=[];s[0]=1;for(var i=0;i<e;i+=1){var r=n[i-t]||0;s[i+1]=n[i]-r+256&255}return s}function Rw(n,t,e){var s=n.length,i=[];i[0]=2;for(var r=0;r<s;r+=1){var o=e&&e[r]||0;i[r+1]=n[r]-o+256&255}return i}function Nw(n,t,e){var s=n.length,i=[];i[0]=3;for(var r=0;r<s;r+=1){var o=n[r-t]||0,a=e&&e[r]||0;i[r+1]=n[r]+256-(o+a>>>1)&255}return i}function Ow(n,t,e){var s=n.length,i=[];i[0]=4;for(var r=0;r<s;r+=1){var o=IH(n[r-t]||0,e&&e[r]||0,e&&e[r-t]||0);i[r+1]=n[r]-o+256&255}return i}function IH(n,t,e){if(n===t&&t===e)return n;var s=Math.abs(t-e),i=Math.abs(n-e),r=Math.abs(n+t-e-e);return s<=i&&s<=r?n:i<=r?t:e}function DH(n){var t=n.map(function(e){return e.reduce(function(s,i){return s+Math.abs(i)},0)});return t.indexOf(Math.min.apply(null,t))}function u0(n,t,e){var s=t*e,i=Math.floor(s/8),r=16-(s-8*i+e),o=(1<<e)-1;return J7(n,i)>>r&o}function Fw(n,t,e,s){var i=e*s,r=Math.floor(i/8),o=16-(i-8*r+s),a=(1<<s)-1,l=(t&a)<<o;(function(c,u,d){if(u+1<c.byteLength)c.setUint16(u,d,!1);else{var f=d>>8&255;c.setUint8(u,f)}})(n,r,J7(n,r)&~(a<<o)&65535|l)}function J7(n,t){return t+1<n.byteLength?n.getUint16(t,!1):n.getUint8(t)<<8}function MH(n){var t=0;if(n[t++]!==71||n[t++]!==73||n[t++]!==70||n[t++]!==56||(n[t++]+1&253)!=56||n[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var e=n[t++]|n[t++]<<8,s=n[t++]|n[t++]<<8,i=n[t++],r=i>>7,o=1<<1+(7&i);n[t++],n[t++];var a=null,l=null;r&&(a=t,l=o,t+=3*o);var c=!0,u=[],d=0,f=null,h=0,g=null;for(this.width=e,this.height=s;c&&t<n.length;)switch(n[t++]){case 33:switch(n[t++]){case 255:if(n[t]!==11||n[t+1]==78&&n[t+2]==69&&n[t+3]==84&&n[t+4]==83&&n[t+5]==67&&n[t+6]==65&&n[t+7]==80&&n[t+8]==69&&n[t+9]==50&&n[t+10]==46&&n[t+11]==48&&n[t+12]==3&&n[t+13]==1&&n[t+16]==0)t+=14,g=n[t++]|n[t++]<<8,t++;else for(t+=12;;){if(!((T=n[t++])>=0))throw Error("Invalid block size");if(T===0)break;t+=T}break;case 249:if(n[t++]!==4||n[t+4]!==0)throw new Error("Invalid graphics extension block.");var m=n[t++];d=n[t++]|n[t++]<<8,f=n[t++],1&m||(f=null),h=m>>2&7,t++;break;case 254:for(;;){if(!((T=n[t++])>=0))throw Error("Invalid block size");if(T===0)break;t+=T}break;default:throw new Error("Unknown graphic control label: 0x"+n[t-1].toString(16))}break;case 44:var b=n[t++]|n[t++]<<8,y=n[t++]|n[t++]<<8,x=n[t++]|n[t++]<<8,_=n[t++]|n[t++]<<8,C=n[t++],A=C>>6&1,I=1<<1+(7&C),R=a,L=l,P=!1;C>>7&&(P=!0,R=t,L=I,t+=3*I);var V=t;for(t++;;){var T;if(!((T=n[t++])>=0))throw Error("Invalid block size");if(T===0)break;t+=T}u.push({x:b,y,width:x,height:_,has_local_palette:P,palette_offset:R,palette_size:L,data_offset:V,data_length:t-V,transparent_index:f,interlaced:!!A,delay:d,disposal:h});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+n[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return g},this.frameInfo=function(D){if(D<0||D>=u.length)throw new Error("Frame index out of range.");return u[D]},this.decodeAndBlitFrameBGRA=function(D,K){var $=this.frameInfo(D),q=$.width*$.height,W=new Uint8Array(q);$w(n,$.data_offset,W,q);var F=$.palette_offset,O=$.transparent_index;O===null&&(O=256);var et=$.width,gt=e-et,lt=et,E=4*($.y*e+$.x),M=4*(($.y+$.height)*e+$.x),B=E,at=4*gt;$.interlaced===!0&&(at+=4*e*7);for(var pt=8,nt=0,ct=W.length;nt<ct;++nt){var G=W[nt];if(lt===0&&(lt=et,(B+=at)>=M&&(at=4*gt+4*e*(pt-1),B=E+(et+gt)*(pt<<1),pt>>=1)),G===O)B+=4;else{var rt=n[F+3*G],wt=n[F+3*G+1],Q=n[F+3*G+2];K[B++]=Q,K[B++]=wt,K[B++]=rt,K[B++]=255}--lt}},this.decodeAndBlitFrameRGBA=function(D,K){var $=this.frameInfo(D),q=$.width*$.height,W=new Uint8Array(q);$w(n,$.data_offset,W,q);var F=$.palette_offset,O=$.transparent_index;O===null&&(O=256);var et=$.width,gt=e-et,lt=et,E=4*($.y*e+$.x),M=4*(($.y+$.height)*e+$.x),B=E,at=4*gt;$.interlaced===!0&&(at+=4*e*7);for(var pt=8,nt=0,ct=W.length;nt<ct;++nt){var G=W[nt];if(lt===0&&(lt=et,(B+=at)>=M&&(at=4*gt+4*e*(pt-1),B=E+(et+gt)*(pt<<1),pt>>=1)),G===O)B+=4;else{var rt=n[F+3*G],wt=n[F+3*G+1],Q=n[F+3*G+2];K[B++]=rt,K[B++]=wt,K[B++]=Q,K[B++]=255}--lt}}}function $w(n,t,e,s){for(var i=n[t++],r=1<<i,o=r+1,a=o+1,l=i+1,c=(1<<l)-1,u=0,d=0,f=0,h=n[t++],g=new Int32Array(4096),m=null;;){for(;u<16&&h!==0;)d|=n[t++]<<u,u+=8,h===1?h=n[t++]:--h;if(u<l)break;var b=d&c;if(d>>=l,u-=l,b!==r){if(b===o)break;for(var y=b<a?b:m,x=0,_=y;_>r;)_=g[_]>>8,++x;var C=_;if(f+x+(y!==b?1:0)>s)return void vn.log("Warning, gif stream longer than expected.");e[f++]=C;var A=f+=x;for(y!==b&&(e[f++]=C),_=y;x--;)_=g[_],e[--A]=255&_,_>>=8;m!==null&&a<4096&&(g[a++]=m<<8|C,a>=c+1&&l<12&&(++l,c=c<<1|1)),m=b}else a=o+1,c=(1<<(l=i+1))-1,m=null}return f!==s&&vn.log("Warning, gif stream shorter than expected."),e}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function d0(n){var t,e,s,i,r,o=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(65535),f=new Array(65535),h=new Array(64),g=new Array(64),m=[],b=0,y=7,x=new Array(64),_=new Array(64),C=new Array(64),A=new Array(256),I=new Array(2048),R=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],L=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],P=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],T=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],D=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],K=[0,1,2,3,4,5,6,7,8,9,10,11],$=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],q=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function W(E,M){for(var B=0,at=0,pt=new Array,nt=1;nt<=16;nt++){for(var ct=1;ct<=E[nt];ct++)pt[M[at]]=[],pt[M[at]][0]=B,pt[M[at]][1]=nt,at++,B++;B*=2}return pt}function F(E){for(var M=E[0],B=E[1]-1;B>=0;)M&1<<B&&(b|=1<<y),B--,--y<0&&(b==255?(O(255),O(0)):O(b),y=7,b=0)}function O(E){m.push(E)}function et(E){O(E>>8&255),O(255&E)}function gt(E,M,B,at,pt){for(var nt,ct=pt[0],G=pt[240],rt=function(_t,It){var kt,Ht,Mt,qt,Vt,Yt,ve,Xt,Zt,ie,Jt=0;for(Zt=0;Zt<8;++Zt){kt=_t[Jt],Ht=_t[Jt+1],Mt=_t[Jt+2],qt=_t[Jt+3],Vt=_t[Jt+4],Yt=_t[Jt+5],ve=_t[Jt+6];var ze=kt+(Xt=_t[Jt+7]),He=kt-Xt,oe=Ht+ve,ge=Ht-ve,Ue=Mt+Yt,we=Mt-Yt,We=qt+Vt,Me=qt-Vt,Yn=ze+We,fs=ze-We,gn=oe+Ue,Se=oe-Ue;_t[Jt]=Yn+gn,_t[Jt+4]=Yn-gn;var rn=.707106781*(Se+fs);_t[Jt+2]=fs+rn,_t[Jt+6]=fs-rn;var el=.382683433*((Yn=Me+we)-(Se=ge+He)),Hs=.5411961*Yn+el,po=1.306562965*Se+el,$r=.707106781*(gn=we+ge),_e=He+$r,go=He-$r;_t[Jt+5]=go+Hs,_t[Jt+3]=go-Hs,_t[Jt+1]=_e+po,_t[Jt+7]=_e-po,Jt+=8}for(Jt=0,Zt=0;Zt<8;++Zt){kt=_t[Jt],Ht=_t[Jt+8],Mt=_t[Jt+16],qt=_t[Jt+24],Vt=_t[Jt+32],Yt=_t[Jt+40],ve=_t[Jt+48];var mo=kt+(Xt=_t[Jt+56]),qi=kt-Xt,Wi=Ht+ve,Un=Ht-ve,Cs=Mt+Yt,Ps=Mt-Yt,nl=qt+Vt,sa=qt-Vt,mr=mo+nl,Br=mo-nl,br=Wi+Cs,vr=Wi-Cs;_t[Jt]=mr+br,_t[Jt+32]=mr-br;var Gi=.707106781*(vr+Br);_t[Jt+16]=Br+Gi,_t[Jt+48]=Br-Gi;var sl=.382683433*((mr=sa+Ps)-(vr=Un+qi)),jr=.5411961*mr+sl,il=1.306562965*vr+sl,_c=.707106781*(br=Ps+Un),xc=qi+_c,Cc=qi-_c;_t[Jt+40]=Cc+jr,_t[Jt+24]=Cc-jr,_t[Jt+8]=xc+il,_t[Jt+56]=xc-il,Jt++}for(Zt=0;Zt<64;++Zt)ie=_t[Zt]*It[Zt],h[Zt]=ie>0?ie+.5|0:ie-.5|0;return h}(E,M),wt=0;wt<64;++wt)g[R[wt]]=rt[wt];var Q=g[0]-B;B=g[0],Q==0?F(at[0]):(F(at[f[nt=32767+Q]]),F(d[nt]));for(var it=63;it>0&&g[it]==0;)it--;if(it==0)return F(ct),B;for(var ot,X=1;X<=it;){for(var Pt=X;g[X]==0&&X<=it;)++X;var Tt=X-Pt;if(Tt>=16){ot=Tt>>4;for(var Nt=1;Nt<=ot;++Nt)F(G);Tt&=15}nt=32767+g[X],F(pt[(Tt<<4)+f[nt]]),F(d[nt]),X++}return it!=63&&F(ct),B}function lt(E){E=Math.min(Math.max(E,1),100),r!=E&&(function(M){for(var B=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],at=0;at<64;at++){var pt=o((B[at]*M+50)/100);pt=Math.min(Math.max(pt,1),255),a[R[at]]=pt}for(var nt=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ct=0;ct<64;ct++){var G=o((nt[ct]*M+50)/100);G=Math.min(Math.max(G,1),255),l[R[ct]]=G}for(var rt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],wt=0,Q=0;Q<8;Q++)for(var it=0;it<8;it++)c[wt]=1/(a[R[wt]]*rt[Q]*rt[it]*8),u[wt]=1/(l[R[wt]]*rt[Q]*rt[it]*8),wt++}(E<50?Math.floor(5e3/E):Math.floor(200-2*E)),r=E)}this.encode=function(E,M){M&&lt(M),m=new Array,b=0,y=7,et(65496),et(65504),et(16),O(74),O(70),O(73),O(70),O(0),O(1),O(1),O(0),et(1),et(1),O(0),O(0),function(){et(65499),et(132),O(0);for(var Ht=0;Ht<64;Ht++)O(a[Ht]);O(1);for(var Mt=0;Mt<64;Mt++)O(l[Mt])}(),function(Ht,Mt){et(65472),et(17),O(8),et(Mt),et(Ht),O(3),O(1),O(17),O(0),O(2),O(17),O(1),O(3),O(17),O(1)}(E.width,E.height),function(){et(65476),et(418),O(0);for(var Ht=0;Ht<16;Ht++)O(L[Ht+1]);for(var Mt=0;Mt<=11;Mt++)O(P[Mt]);O(16);for(var qt=0;qt<16;qt++)O(V[qt+1]);for(var Vt=0;Vt<=161;Vt++)O(T[Vt]);O(1);for(var Yt=0;Yt<16;Yt++)O(D[Yt+1]);for(var ve=0;ve<=11;ve++)O(K[ve]);O(17);for(var Xt=0;Xt<16;Xt++)O($[Xt+1]);for(var Zt=0;Zt<=161;Zt++)O(q[Zt])}(),et(65498),et(12),O(3),O(1),O(0),O(2),O(17),O(3),O(17),O(0),O(63),O(0);var B=0,at=0,pt=0;b=0,y=7,this.encode.displayName="_encode_";for(var nt,ct,G,rt,wt,Q,it,ot,X,Pt=E.data,Tt=E.width,Nt=E.height,_t=4*Tt,It=0;It<Nt;){for(nt=0;nt<_t;){for(wt=_t*It+nt,it=-1,ot=0,X=0;X<64;X++)Q=wt+(ot=X>>3)*_t+(it=4*(7&X)),It+ot>=Nt&&(Q-=_t*(It+1+ot-Nt)),nt+it>=_t&&(Q-=nt+it-_t+4),ct=Pt[Q++],G=Pt[Q++],rt=Pt[Q++],x[X]=(I[ct]+I[G+256|0]+I[rt+512|0]>>16)-128,_[X]=(I[ct+768|0]+I[G+1024|0]+I[rt+1280|0]>>16)-128,C[X]=(I[ct+1280|0]+I[G+1536|0]+I[rt+1792|0]>>16)-128;B=gt(x,c,B,t,s),at=gt(_,u,at,e,i),pt=gt(C,u,pt,e,i),nt+=32}It+=8}if(y>=0){var kt=[];kt[1]=y+1,kt[0]=(1<<y+1)-1,F(kt)}return et(65497),new Uint8Array(m)},n=n||50,function(){for(var E=String.fromCharCode,M=0;M<256;M++)A[M]=E(M)}(),t=W(L,P),e=W(D,K),s=W(V,T),i=W($,q),function(){for(var E=1,M=2,B=1;B<=15;B++){for(var at=E;at<M;at++)f[32767+at]=B,d[32767+at]=[],d[32767+at][1]=B,d[32767+at][0]=at;for(var pt=-(M-1);pt<=-E;pt++)f[32767+pt]=B,d[32767+pt]=[],d[32767+pt][1]=B,d[32767+pt][0]=M-1+pt;E<<=1,M<<=1}}(),function(){for(var E=0;E<256;E++)I[E]=19595*E,I[E+256|0]=38470*E,I[E+512|0]=7471*E+32768,I[E+768|0]=-11059*E,I[E+1024|0]=-21709*E,I[E+1280|0]=32768*E+8421375,I[E+1536|0]=-27439*E,I[E+1792|0]=-5329*E}(),lt(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Cr(n,t){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Bw(n){function t(P){if(!P)throw Error("assert :P")}function e(P,V,T){for(var D=0;4>D;D++)if(P[V+D]!=T.charCodeAt(D))return!0;return!1}function s(P,V,T,D,K){for(var $=0;$<K;$++)P[V+$]=T[D+$]}function i(P,V,T,D){for(var K=0;K<D;K++)P[V+K]=T}function r(P){return new Int32Array(P)}function o(P,V){for(var T=[],D=0;D<P;D++)T.push(new V);return T}function a(P,V){var T=[];return function D(K,$,q){for(var W=q[$],F=0;F<W&&(K.push(q.length>$+1?[]:new V),!(q.length<$+1));F++)D(K[F],$+1,q)}(T,0,P),T}var l=function(){var P=this;function V(v,w){for(var S=1<<w-1>>>0;v&S;)S>>>=1;return S?(v&S-1)+S:v}function T(v,w,S,N,H){t(!(N%S));do v[w+(N-=S)]=H;while(0<N)}function D(v,w,S,N,H){if(t(2328>=H),512>=H)var Y=r(512);else if((Y=r(H))==null)return 0;return function(Z,tt,st,dt,bt,Et){var ht,vt,xt=tt,Rt=1<<st,St=r(16),Ot=r(16);for(t(bt!=0),t(dt!=null),t(Z!=null),t(0<st),vt=0;vt<bt;++vt){if(15<dt[vt])return 0;++St[dt[vt]]}if(St[0]==bt)return 0;for(Ot[1]=0,ht=1;15>ht;++ht){if(St[ht]>1<<ht)return 0;Ot[ht+1]=Ot[ht]+St[ht]}for(vt=0;vt<bt;++vt)ht=dt[vt],0<dt[vt]&&(Et[Ot[ht]++]=vt);if(Ot[15]==1)return(dt=new K).g=0,dt.value=Et[0],T(Z,xt,1,Rt,dt),Rt;var $t,zt=-1,Bt=Rt-1,de=0,te=1,$e=1,ae=1<<st;for(vt=0,ht=1,bt=2;ht<=st;++ht,bt<<=1){if(te+=$e<<=1,0>($e-=St[ht]))return 0;for(;0<St[ht];--St[ht])(dt=new K).g=ht,dt.value=Et[vt++],T(Z,xt+de,bt,ae,dt),de=V(de,ht)}for(ht=st+1,bt=2;15>=ht;++ht,bt<<=1){if(te+=$e<<=1,0>($e-=St[ht]))return 0;for(;0<St[ht];--St[ht]){if(dt=new K,(de&Bt)!=zt){for(xt+=ae,$t=1<<(zt=ht)-st;15>zt&&!(0>=($t-=St[zt]));)++zt,$t<<=1;Rt+=ae=1<<($t=zt-st),Z[tt+(zt=de&Bt)].g=$t+st,Z[tt+zt].value=xt-tt-zt}dt.g=ht-st,dt.value=Et[vt++],T(Z,xt+(de>>st),bt,ae,dt),de=V(de,ht)}}return te!=2*Ot[15]-1?0:Rt}(v,w,S,N,H,Y)}function K(){this.value=this.g=0}function $(){this.value=this.g=0}function q(){this.G=o(5,K),this.H=r(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(_l,$)}function W(v,w,S,N){t(v!=null),t(w!=null),t(2147483648>N),v.Ca=254,v.I=0,v.b=-8,v.Ka=0,v.oa=w,v.pa=S,v.Jd=w,v.Yc=S+N,v.Zc=4<=N?S+N-4+1:S,ct(v)}function F(v,w){for(var S=0;0<w--;)S|=rt(v,128)<<w;return S}function O(v,w){var S=F(v,w);return G(v)?-S:S}function et(v,w,S,N){var H,Y=0;for(t(v!=null),t(w!=null),t(4294967288>N),v.Sb=N,v.Ra=0,v.u=0,v.h=0,4<N&&(N=4),H=0;H<N;++H)Y+=w[S+H]<<8*H;v.Ra=Y,v.bb=N,v.oa=w,v.pa=S}function gt(v){for(;8<=v.u&&v.bb<v.Sb;)v.Ra>>>=8,v.Ra+=v.oa[v.pa+v.bb]<<la-8>>>0,++v.bb,v.u-=8;at(v)&&(v.h=1,v.u=0)}function lt(v,w){if(t(0<=w),!v.h&&w<=Li){var S=B(v)&Ti[w];return v.u+=w,gt(v),S}return v.h=1,v.u=0}function E(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function M(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function B(v){return v.Ra>>>(v.u&la-1)>>>0}function at(v){return t(v.bb<=v.Sb),v.h||v.bb==v.Sb&&v.u>la}function pt(v,w){v.u=w,v.h=at(v)}function nt(v){v.u>=Co&&(t(v.u>=Co),gt(v))}function ct(v){t(v!=null&&v.oa!=null),v.pa<v.Zc?(v.I=(v.oa[v.pa++]|v.I<<8)>>>0,v.b+=8):(t(v!=null&&v.oa!=null),v.pa<v.Yc?(v.b+=8,v.I=v.oa[v.pa++]|v.I<<8):v.Ka?v.b=0:(v.I<<=8,v.b+=8,v.Ka=1))}function G(v){return F(v,1)}function rt(v,w){var S=v.Ca;0>v.b&&ct(v);var N=v.b,H=S*w>>>8,Y=(v.I>>>N>H)+0;for(Y?(S-=H,v.I-=H+1<<N>>>0):S=H+1,N=S,H=0;256<=N;)H+=8,N>>=8;return N=7^H+ca[N],v.b-=N,v.Ca=(S<<N)-1,Y}function wt(v,w,S){v[w+0]=S>>24&255,v[w+1]=S>>16&255,v[w+2]=S>>8&255,v[w+3]=255&S}function Q(v,w){return v[w+0]|v[w+1]<<8}function it(v,w){return Q(v,w)|v[w+2]<<16}function ot(v,w){return Q(v,w)|Q(v,w+2)<<16}function X(v,w){var S=1<<w;return t(v!=null),t(0<w),v.X=r(S),v.X==null?0:(v.Mb=32-w,v.Xa=w,1)}function Pt(v,w){t(v!=null),t(w!=null),t(v.Xa==w.Xa),s(w.X,0,v.X,0,1<<w.Xa)}function Tt(){this.X=[],this.Xa=this.Mb=0}function Nt(v,w,S,N){t(S!=null),t(N!=null);var H=S[0],Y=N[0];return H==0&&(H=(v*Y+w/2)/w),Y==0&&(Y=(w*H+v/2)/v),0>=H||0>=Y?0:(S[0]=H,N[0]=Y,1)}function _t(v,w){return v+(1<<w)-1>>>w}function It(v,w){return((4278255360&v)+(4278255360&w)>>>0&4278255360)+((16711935&v)+(16711935&w)>>>0&16711935)>>>0}function kt(v,w){P[w]=function(S,N,H,Y,Z,tt,st){var dt;for(dt=0;dt<Z;++dt){var bt=P[v](tt[st+dt-1],H,Y+dt);tt[st+dt]=It(S[N+dt],bt)}}}function Ht(){this.ud=this.hd=this.jd=0}function Mt(v,w){return((4278124286&(v^w))>>>1)+(v&w)>>>0}function qt(v){return 0<=v&&256>v?v:0>v?0:255<v?255:void 0}function Vt(v,w){return qt(v+(v-w+.5>>1))}function Yt(v,w,S){return Math.abs(w-S)-Math.abs(v-S)}function ve(v,w,S,N,H,Y,Z){for(N=Y[Z-1],S=0;S<H;++S)Y[Z+S]=N=It(v[w+S],N)}function Xt(v,w,S,N,H){var Y;for(Y=0;Y<S;++Y){var Z=v[w+Y],tt=Z>>8&255,st=16711935&(st=(st=16711935&Z)+((tt<<16)+tt));N[H+Y]=(4278255360&Z)+st>>>0}}function Zt(v,w){w.jd=255&v,w.hd=v>>8&255,w.ud=v>>16&255}function ie(v,w,S,N,H,Y){var Z;for(Z=0;Z<N;++Z){var tt=w[S+Z],st=tt>>>8,dt=tt,bt=255&(bt=(bt=tt>>>16)+((v.jd<<24>>24)*(st<<24>>24)>>>5));dt=255&(dt=(dt+=(v.hd<<24>>24)*(st<<24>>24)>>>5)+((v.ud<<24>>24)*(bt<<24>>24)>>>5)),H[Y+Z]=(4278255360&tt)+(bt<<16)+dt}}function Jt(v,w,S,N,H){P[w]=function(Y,Z,tt,st,dt,bt,Et,ht,vt){for(st=Et;st<ht;++st)for(Et=0;Et<vt;++Et)dt[bt++]=H(tt[N(Y[Z++])])},P[v]=function(Y,Z,tt,st,dt,bt,Et){var ht=8>>Y.b,vt=Y.Ea,xt=Y.K[0],Rt=Y.w;if(8>ht)for(Y=(1<<Y.b)-1,Rt=(1<<ht)-1;Z<tt;++Z){var St,Ot=0;for(St=0;St<vt;++St)St&Y||(Ot=N(st[dt++])),bt[Et++]=H(xt[Ot&Rt]),Ot>>=ht}else P["VP8LMapColor"+S](st,dt,xt,Rt,bt,Et,Z,tt,vt)}}function ze(v,w,S,N,H){for(S=w+S;w<S;){var Y=v[w++];N[H++]=Y>>16&255,N[H++]=Y>>8&255,N[H++]=255&Y}}function He(v,w,S,N,H){for(S=w+S;w<S;){var Y=v[w++];N[H++]=Y>>16&255,N[H++]=Y>>8&255,N[H++]=255&Y,N[H++]=Y>>24&255}}function oe(v,w,S,N,H){for(S=w+S;w<S;){var Y=(Z=v[w++])>>16&240|Z>>12&15,Z=240&Z|Z>>28&15;N[H++]=Y,N[H++]=Z}}function ge(v,w,S,N,H){for(S=w+S;w<S;){var Y=(Z=v[w++])>>16&248|Z>>13&7,Z=Z>>5&224|Z>>3&31;N[H++]=Y,N[H++]=Z}}function Ue(v,w,S,N,H){for(S=w+S;w<S;){var Y=v[w++];N[H++]=255&Y,N[H++]=Y>>8&255,N[H++]=Y>>16&255}}function we(v,w,S,N,H,Y){if(Y==0)for(S=w+S;w<S;)wt(N,((Y=v[w++])[0]>>24|Y[1]>>8&65280|Y[2]<<8&16711680|Y[3]<<24)>>>0),H+=32;else s(N,H,v,w,S)}function We(v,w){P[w][0]=P[v+"0"],P[w][1]=P[v+"1"],P[w][2]=P[v+"2"],P[w][3]=P[v+"3"],P[w][4]=P[v+"4"],P[w][5]=P[v+"5"],P[w][6]=P[v+"6"],P[w][7]=P[v+"7"],P[w][8]=P[v+"8"],P[w][9]=P[v+"9"],P[w][10]=P[v+"10"],P[w][11]=P[v+"11"],P[w][12]=P[v+"12"],P[w][13]=P[v+"13"],P[w][14]=P[v+"0"],P[w][15]=P[v+"0"]}function Me(v){return v==Xg||v==Zg||v==Ff||v==Jg}function Yn(){this.eb=[],this.size=this.A=this.fb=0}function fs(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function gn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Yn,this.f.kb=new fs,this.sd=null}function Se(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function rn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function el(v){return alert("todo:WebPSamplerProcessPlane"),v.T}function Hs(v,w){var S=v.T,N=w.ba.f.RGBA,H=N.eb,Y=N.fb+v.ka*N.A,Z=Qi[w.ba.S],tt=v.y,st=v.O,dt=v.f,bt=v.N,Et=v.ea,ht=v.W,vt=w.cc,xt=w.dc,Rt=w.Mc,St=w.Nc,Ot=v.ka,$t=v.ka+v.T,zt=v.U,Bt=zt+1>>1;for(Ot==0?Z(tt,st,null,null,dt,bt,Et,ht,dt,bt,Et,ht,H,Y,null,null,zt):(Z(w.ec,w.fc,tt,st,vt,xt,Rt,St,dt,bt,Et,ht,H,Y-N.A,H,Y,zt),++S);Ot+2<$t;Ot+=2)vt=dt,xt=bt,Rt=Et,St=ht,bt+=v.Rc,ht+=v.Rc,Y+=2*N.A,Z(tt,(st+=2*v.fa)-v.fa,tt,st,vt,xt,Rt,St,dt,bt,Et,ht,H,Y-N.A,H,Y,zt);return st+=v.fa,v.j+$t<v.o?(s(w.ec,w.fc,tt,st,zt),s(w.cc,w.dc,dt,bt,Bt),s(w.Mc,w.Nc,Et,ht,Bt),S--):1&$t||Z(tt,st,null,null,dt,bt,Et,ht,dt,bt,Et,ht,H,Y+N.A,null,null,zt),S}function po(v,w,S){var N=v.F,H=[v.J];if(N!=null){var Y=v.U,Z=w.ba.S,tt=Z==Of||Z==Ff;w=w.ba.f.RGBA;var st=[0],dt=v.ka;st[0]=v.T,v.Kb&&(dt==0?--st[0]:(--dt,H[0]-=v.width),v.j+v.ka+v.T==v.o&&(st[0]=v.o-v.j-dt));var bt=w.eb;dt=w.fb+dt*w.A,v=Wb(N,H[0],v.width,Y,st,bt,dt+(tt?0:3),w.A),t(S==st),v&&Me(Z)&&fd(bt,dt,tt,Y,st,w.A)}return 0}function $r(v){var w=v.ma,S=w.ba.S,N=11>S,H=S==Rf||S==Nf||S==Of||S==Kg||S==12||Me(S);if(w.memory=null,w.Ib=null,w.Jb=null,w.Nd=null,!rd(w.Oa,v,H?11:12))return 0;if(H&&Me(S)&&Tf(),v.da)alert("todo:use_scaling");else{if(N){if(w.Ib=el,v.Kb){if(S=v.U+1>>1,w.memory=r(v.U+2*S),w.memory==null)return 0;w.ec=w.memory,w.fc=0,w.cc=w.ec,w.dc=w.fc+v.U,w.Mc=w.cc,w.Nc=w.dc+S,w.Ib=Hs,Tf()}}else alert("todo:EmitYUV");H&&(w.Jb=po,N&&Ki())}if(N&&!lv){for(v=0;256>v;++v)QC[v]=89858*(v-128)+Bf>>$f,nk[v]=-22014*(v-128)+Bf,ek[v]=-45773*(v-128),tk[v]=113618*(v-128)+Bf>>$f;for(v=gd;v<e2;++v)w=76283*(v-16)+Bf>>$f,sk[v-gd]=zn(w,255),ik[v-gd]=zn(w+8>>4,15);lv=1}return 1}function _e(v){var w=v.ma,S=v.U,N=v.T;return t(!(1&v.ka)),0>=S||0>=N?0:(S=w.Ib(v,w),w.Jb!=null&&w.Jb(v,w,S),w.Dc+=S,1)}function go(v){v.ma.memory=null}function mo(v,w,S,N){return lt(v,8)!=47?0:(w[0]=lt(v,14)+1,S[0]=lt(v,14)+1,N[0]=lt(v,1),lt(v,3)!=0?0:!v.h)}function qi(v,w){if(4>v)return v+1;var S=v-2>>1;return(2+(1&v)<<S)+lt(w,S)+1}function Wi(v,w){return 120<w?w-120:1<=(S=((S=BC[w-1])>>4)*v+(8-(15&S)))?S:1;var S}function Un(v,w,S){var N=B(S),H=v[w+=255&N].g-8;return 0<H&&(pt(S,S.u+8),N=B(S),w+=v[w].value,w+=N&(1<<H)-1),pt(S,S.u+v[w].g),v[w].value}function Cs(v,w,S){return S.g+=v.g,S.value+=v.value<<w>>>0,t(8>=S.g),v.g}function Ps(v,w,S){var N=v.xc;return t((w=N==0?0:v.vc[v.md*(S>>N)+(w>>N)])<v.Wb),v.Ya[w]}function nl(v,w,S,N){var H=v.ab,Y=v.c*w,Z=v.C;w=Z+w;var tt=S,st=N;for(N=v.Ta,S=v.Ua;0<H--;){var dt=v.gc[H],bt=Z,Et=w,ht=tt,vt=st,xt=(st=N,tt=S,dt.Ea);switch(t(bt<Et),t(Et<=dt.nc),dt.hc){case 2:Xn(ht,vt,(Et-bt)*xt,st,tt);break;case 0:var Rt=bt,St=Et,Ot=st,$t=tt,zt=(ae=dt).Ea;Rt==0&&(ad(ht,vt,null,null,1,Ot,$t),ve(ht,vt+1,0,0,zt-1,Ot,$t+1),vt+=zt,$t+=zt,++Rt);for(var Bt=1<<ae.b,de=Bt-1,te=_t(zt,ae.b),$e=ae.K,ae=ae.w+(Rt>>ae.b)*te;Rt<St;){var Ge=$e,ms=ae,Be=1;for(Ic(ht,vt,Ot,$t-zt,1,Ot,$t);Be<zt;){var le=(Be&~de)+Bt;le>zt&&(le=zt),(0,cd[Ge[ms++]>>8&15])(ht,vt+ +Be,Ot,$t+Be-zt,le-Be,Ot,$t+Be),Be=le}vt+=zt,$t+=zt,++Rt&de||(ae+=te)}Et!=dt.nc&&s(st,tt-xt,st,tt+(Et-bt-1)*xt,xt);break;case 1:for(xt=ht,St=vt,zt=(ht=dt.Ea)-($t=ht&~(Ot=(vt=1<<dt.b)-1)),Rt=_t(ht,dt.b),Bt=dt.K,dt=dt.w+(bt>>dt.b)*Rt;bt<Et;){for(de=Bt,te=dt,$e=new Ht,ae=St+$t,Ge=St+ht;St<ae;)Zt(de[te++],$e),ud($e,xt,St,vt,st,tt),St+=vt,tt+=vt;St<Ge&&(Zt(de[te++],$e),ud($e,xt,St,zt,st,tt),St+=zt,tt+=zt),++bt&Ot||(dt+=Rt)}break;case 3:if(ht==st&&vt==tt&&0<dt.b){for(St=st,ht=xt=tt+(Et-bt)*xt-($t=(Et-bt)*_t(dt.Ea,dt.b)),vt=st,Ot=tt,Rt=[],$t=(zt=$t)-1;0<=$t;--$t)Rt[$t]=vt[Ot+$t];for($t=zt-1;0<=$t;--$t)St[ht+$t]=Rt[$t];Pf(dt,bt,Et,st,xt,st,tt)}else Pf(dt,bt,Et,ht,vt,st,tt)}tt=N,st=S}st!=S&&s(N,S,tt,st,Y)}function sa(v,w){var S=v.V,N=v.Ba+v.c*v.C,H=w-v.C;if(t(w<=v.l.o),t(16>=H),0<H){var Y=v.l,Z=v.Ta,tt=v.Ua,st=Y.width;if(nl(v,H,S,N),H=tt=[tt],t((S=v.C)<(N=w)),t(Y.v<Y.va),N>Y.o&&(N=Y.o),S<Y.j){var dt=Y.j-S;S=Y.j,H[0]+=dt*st}if(S>=N?S=0:(H[0]+=4*Y.v,Y.ka=S-Y.j,Y.U=Y.va-Y.v,Y.T=N-S,S=1),S){if(tt=tt[0],11>(S=v.ca).S){var bt=S.f.RGBA,Et=(N=S.S,H=Y.U,Y=Y.T,dt=bt.eb,bt.A),ht=Y;for(bt=bt.fb+v.Ma*bt.A;0<ht--;){var vt=Z,xt=tt,Rt=H,St=dt,Ot=bt;switch(N){case Mf:dd(vt,xt,Rt,St,Ot);break;case Rf:ua(vt,xt,Rt,St,Ot);break;case Xg:ua(vt,xt,Rt,St,Ot),fd(St,Ot,0,Rt,1,0);break;case Qb:xl(vt,xt,Rt,St,Ot);break;case Nf:we(vt,xt,Rt,St,Ot,1);break;case Zg:we(vt,xt,Rt,St,Ot,1),fd(St,Ot,0,Rt,1,0);break;case Of:we(vt,xt,Rt,St,Ot,0);break;case Ff:we(vt,xt,Rt,St,Ot,0),fd(St,Ot,1,Rt,1,0);break;case Kg:da(vt,xt,Rt,St,Ot);break;case Jg:da(vt,xt,Rt,St,Ot),qb(St,Ot,Rt,1,0);break;case tv:ha(vt,xt,Rt,St,Ot);break;default:t(0)}tt+=st,bt+=Et}v.Ma+=Y}else alert("todo:EmitRescaledRowsYUVA");t(v.Ma<=S.height)}}v.C=w,t(v.C<=v.i)}function mr(v){var w;if(0<v.ua)return 0;for(w=0;w<v.Wb;++w){var S=v.Ya[w].G,N=v.Ya[w].H;if(0<S[1][N[1]+0].g||0<S[2][N[2]+0].g||0<S[3][N[3]+0].g)return 0}return 1}function Br(v,w,S,N,H,Y){if(v.Z!=0){var Z=v.qd,tt=v.rd;for(t(ga[v.Z]!=null);w<S;++w)ga[v.Z](Z,tt,N,H,N,H,Y),Z=N,tt=H,H+=Y;v.qd=Z,v.rd=tt}}function br(v,w){var S=v.l.ma,N=S.Z==0||S.Z==1?v.l.j:v.C;if(N=v.C<N?N:v.C,t(w<=v.l.o),w>N){var H=v.l.width,Y=S.ca,Z=S.tb+H*N,tt=v.V,st=v.Ba+v.c*N,dt=v.gc;t(v.ab==1),t(dt[0].hc==3),Hr(dt[0],N,w,tt,st,Y,Z),Br(S,N,w,Y,Z,H)}v.C=v.Ma=w}function vr(v,w,S,N,H,Y,Z){var tt=v.$/N,st=v.$%N,dt=v.m,bt=v.s,Et=S+v.$,ht=Et;H=S+N*H;var vt=S+N*Y,xt=280+bt.ua,Rt=v.Pb?tt:16777216,St=0<bt.ua?bt.Wa:null,Ot=bt.wc,$t=Et<vt?Ps(bt,st,tt):null;t(v.C<Y),t(vt<=H);var zt=!1;t:for(;;){for(;zt||Et<vt;){var Bt=0;if(tt>=Rt){var de=Et-S;t((Rt=v).Pb),Rt.wd=Rt.m,Rt.xd=de,0<Rt.s.ua&&Pt(Rt.s.Wa,Rt.s.vb),Rt=tt+UC}if(st&Ot||($t=Ps(bt,st,tt)),t($t!=null),$t.Qb&&(w[Et]=$t.qb,zt=!0),!zt)if(nt(dt),$t.jc){Bt=dt,de=w;var te=Et,$e=$t.pd[B(Bt)&_l-1];t($t.jc),256>$e.g?(pt(Bt,Bt.u+$e.g),de[te]=$e.value,Bt=0):(pt(Bt,Bt.u+$e.g-256),t(256<=$e.value),Bt=$e.value),Bt==0&&(zt=!0)}else Bt=Un($t.G[0],$t.H[0],dt);if(dt.h)break;if(zt||256>Bt){if(!zt)if($t.nd)w[Et]=($t.qb|Bt<<8)>>>0;else{if(nt(dt),zt=Un($t.G[1],$t.H[1],dt),nt(dt),de=Un($t.G[2],$t.H[2],dt),te=Un($t.G[3],$t.H[3],dt),dt.h)break;w[Et]=(te<<24|zt<<16|Bt<<8|de)>>>0}if(zt=!1,++Et,++st>=N&&(st=0,++tt,Z!=null&&tt<=Y&&!(tt%16)&&Z(v,tt),St!=null))for(;ht<Et;)Bt=w[ht++],St.X[(506832829*Bt&4294967295)>>>St.Mb]=Bt}else if(280>Bt){if(Bt=qi(Bt-256,dt),de=Un($t.G[4],$t.H[4],dt),nt(dt),de=Wi(N,de=qi(de,dt)),dt.h)break;if(Et-S<de||H-Et<Bt)break t;for(te=0;te<Bt;++te)w[Et+te]=w[Et+te-de];for(Et+=Bt,st+=Bt;st>=N;)st-=N,++tt,Z!=null&&tt<=Y&&!(tt%16)&&Z(v,tt);if(t(Et<=H),st&Ot&&($t=Ps(bt,st,tt)),St!=null)for(;ht<Et;)Bt=w[ht++],St.X[(506832829*Bt&4294967295)>>>St.Mb]=Bt}else{if(!(Bt<xt))break t;for(zt=Bt-280,t(St!=null);ht<Et;)Bt=w[ht++],St.X[(506832829*Bt&4294967295)>>>St.Mb]=Bt;Bt=Et,t(!(zt>>>(de=St).Xa)),w[Bt]=de.X[zt],zt=!0}zt||t(dt.h==at(dt))}if(v.Pb&&dt.h&&Et<H)t(v.m.h),v.a=5,v.m=v.wd,v.$=v.xd,0<v.s.ua&&Pt(v.s.vb,v.s.Wa);else{if(dt.h)break t;Z?.(v,tt>Y?Y:tt),v.a=0,v.$=Et-S}return 1}return v.a=3,0}function Gi(v){t(v!=null),v.vc=null,v.yc=null,v.Ya=null;var w=v.Wa;w!=null&&(w.X=null),v.vb=null,t(v!=null)}function sl(){var v=new ue;return v==null?null:(v.a=0,v.xb=sv,We("Predictor","VP8LPredictors"),We("Predictor","VP8LPredictors_C"),We("PredictorAdd","VP8LPredictorsAdd"),We("PredictorAdd","VP8LPredictorsAdd_C"),Xn=Xt,ud=ie,dd=ze,ua=He,da=oe,ha=ge,xl=Ue,P.VP8LMapColor32b=zr,P.VP8LMapColor8b=ld,v)}function jr(v,w,S,N,H){var Y=1,Z=[v],tt=[w],st=N.m,dt=N.s,bt=null,Et=0;t:for(;;){if(S)for(;Y&&lt(st,1);){var ht=Z,vt=tt,xt=N,Rt=1,St=xt.m,Ot=xt.gc[xt.ab],$t=lt(St,2);if(xt.Oc&1<<$t)Y=0;else{switch(xt.Oc|=1<<$t,Ot.hc=$t,Ot.Ea=ht[0],Ot.nc=vt[0],Ot.K=[null],++xt.ab,t(4>=xt.ab),$t){case 0:case 1:Ot.b=lt(St,3)+2,Rt=jr(_t(Ot.Ea,Ot.b),_t(Ot.nc,Ot.b),0,xt,Ot.K),Ot.K=Ot.K[0];break;case 3:var zt,Bt=lt(St,8)+1,de=16<Bt?0:4<Bt?1:2<Bt?2:3;if(ht[0]=_t(Ot.Ea,de),Ot.b=de,zt=Rt=jr(Bt,1,0,xt,Ot.K)){var te,$e=Bt,ae=Ot,Ge=1<<(8>>ae.b),ms=r(Ge);if(ms==null)zt=0;else{var Be=ae.K[0],le=ae.w;for(ms[0]=ae.K[0][0],te=1;te<1*$e;++te)ms[te]=It(Be[le+te],ms[te-1]);for(;te<4*Ge;++te)ms[te]=0;ae.K[0]=null,ae.K[0]=ms,zt=1}}Rt=zt;break;case 2:break;default:t(0)}Y=Rt}}if(Z=Z[0],tt=tt[0],Y&&lt(st,1)&&!(Y=1<=(Et=lt(st,4))&&11>=Et)){N.a=3;break t}var Gt;if(Gt=Y)e:{var Jn,Re,Xe,En=N,Ds=Z,ri=tt,Hn=Et,qs=S,oi=En.m,bs=En.s,Ze=[null],un=1,Vn=0,dn=jC[Hn];n:for(;;){if(qs&&lt(oi,1)){var Ms=lt(oi,3)+2,_r=_t(Ds,Ms),Qn=_t(ri,Ms),bi=_r*Qn;if(!jr(_r,Qn,0,En,Ze))break n;for(Ze=Ze[0],bs.xc=Ms,Jn=0;Jn<bi;++Jn){var bn=Ze[Jn]>>8&65535;Ze[Jn]=bn,bn>=un&&(un=bn+1)}}if(oi.h)break n;for(Re=0;5>Re;++Re){var vs=ev[Re];!Re&&0<Hn&&(vs+=1<<Hn),Vn<vs&&(Vn=vs)}var Ii=o(un*dn,K),ai=un,Di=o(ai,q);if(Di==null)var Mi=null;else t(65536>=ai),Mi=Di;var vi=r(Vn);if(Mi==null||vi==null||Ii==null){En.a=1;break n}var Ri=Ii;for(Jn=Xe=0;Jn<un;++Jn){var Cn=Mi[Jn],Ni=Cn.G,xr=Cn.H,kl=0,So=1,Rs=0;for(Re=0;5>Re;++Re){vs=ev[Re],Ni[Re]=Ri,xr[Re]=Xe,!Re&&0<Hn&&(vs+=1<<Hn);i:{var Uf,n2=vs,zf=En,md=vi,ak=Ri,lk=Xe,s2=0,ma=zf.m,ck=lt(ma,1);if(i(md,0,0,n2),ck){var uk=lt(ma,1)+1,dk=lt(ma,1),dv=lt(ma,dk==0?1:8);md[dv]=1,uk==2&&(md[dv=lt(ma,8)]=1);var Hf=1}else{var hv=r(19),fv=lt(ma,4)+4;if(19<fv){zf.a=3;var Vf=0;break i}for(Uf=0;Uf<fv;++Uf)hv[$C[Uf]]=lt(ma,3);var i2=void 0,bd=void 0,pv=zf,hk=hv,qf=n2,gv=md,r2=0,ba=pv.m,mv=8,bv=o(128,K);s:for(;D(bv,0,7,hk,19);){if(lt(ba,1)){var fk=2+2*lt(ba,3);if((i2=2+lt(ba,fk))>qf)break s}else i2=qf;for(bd=0;bd<qf&&i2--;){nt(ba);var vv=bv[0+(127&B(ba))];pt(ba,ba.u+vv.g);var Mc=vv.value;if(16>Mc)gv[bd++]=Mc,Mc!=0&&(mv=Mc);else{var pk=Mc==16,yv=Mc-16,gk=OC[yv],wv=lt(ba,NC[yv])+gk;if(bd+wv>qf)break s;for(var mk=pk?mv:0;0<wv--;)gv[bd++]=mk}}r2=1;break s}r2||(pv.a=3),Hf=r2}(Hf=Hf&&!ma.h)&&(s2=D(ak,lk,8,md,n2)),Hf&&s2!=0?Vf=s2:(zf.a=3,Vf=0)}if(Vf==0)break n;if(So&&FC[Re]==1&&(So=Ri[Xe].g==0),kl+=Ri[Xe].g,Xe+=Vf,3>=Re){var vd,o2=vi[0];for(vd=1;vd<vs;++vd)vi[vd]>o2&&(o2=vi[vd]);Rs+=o2}}if(Cn.nd=So,Cn.Qb=0,So&&(Cn.qb=(Ni[3][xr[3]+0].value<<24|Ni[1][xr[1]+0].value<<16|Ni[2][xr[2]+0].value)>>>0,kl==0&&256>Ni[0][xr[0]+0].value&&(Cn.Qb=1,Cn.qb+=Ni[0][xr[0]+0].value<<8)),Cn.jc=!Cn.Qb&&6>Rs,Cn.jc){var Wf,Eo=Cn;for(Wf=0;Wf<_l;++Wf){var va=Wf,ya=Eo.pd[va],Gf=Eo.G[0][Eo.H[0]+va];256<=Gf.value?(ya.g=Gf.g+256,ya.value=Gf.value):(ya.g=0,ya.value=0,va>>=Cs(Gf,8,ya),va>>=Cs(Eo.G[1][Eo.H[1]+va],16,ya),va>>=Cs(Eo.G[2][Eo.H[2]+va],0,ya),Cs(Eo.G[3][Eo.H[3]+va],24,ya))}}}bs.vc=Ze,bs.Wb=un,bs.Ya=Mi,bs.yc=Ii,Gt=1;break e}Gt=0}if(!(Y=Gt)){N.a=3;break t}if(0<Et){if(dt.ua=1<<Et,!X(dt.Wa,Et)){N.a=1,Y=0;break t}}else dt.ua=0;var a2=N,_v=Z,bk=tt,l2=a2.s,c2=l2.xc;if(a2.c=_v,a2.i=bk,l2.md=_t(_v,c2),l2.wc=c2==0?-1:(1<<c2)-1,S){N.xb=YC;break t}if((bt=r(Z*tt))==null){N.a=1,Y=0;break t}Y=(Y=vr(N,bt,0,Z,tt,tt,null))&&!st.h;break t}return Y?(H!=null?H[0]=bt:(t(bt==null),t(S)),N.$=0,S||Gi(dt)):Gi(dt),Y}function il(v,w){var S=v.c*v.i,N=S+w+16*w;return t(v.c<=w),v.V=r(N),v.V==null?(v.Ta=null,v.Ua=0,v.a=1,0):(v.Ta=v.V,v.Ua=v.Ba+S+w,1)}function _c(v,w){var S=v.C,N=w-S,H=v.V,Y=v.Ba+v.c*S;for(t(w<=v.l.o);0<N;){var Z=16<N?16:N,tt=v.l.ma,st=v.l.width,dt=st*Z,bt=tt.ca,Et=tt.tb+st*S,ht=v.Ta,vt=v.Ua;nl(v,Z,H,Y),Gb(ht,vt,bt,Et,dt),Br(tt,S,S+Z,bt,Et,st),N-=Z,H+=Z*v.c,S+=Z}t(S==w),v.C=v.Ma=w}function xc(){this.ub=this.yd=this.td=this.Rb=0}function Cc(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Dg(){this.Fb=this.Bb=this.Cb=0,this.Zb=r(4),this.Lb=r(4)}function qu(){this.Yb=function(){var v=[];return function w(S,N,H){for(var Y=H[N],Z=0;Z<Y&&(S.push(H.length>N+1?[]:0),!(H.length<N+1));Z++)w(S[Z],N+1,H)}(v,0,[3,11]),v}()}function ff(){this.jb=r(3),this.Wc=a([4,8],qu),this.Xc=a([4,17],qu)}function pf(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new r(4),this.od=new r(4)}function Yi(){this.ld=this.La=this.dd=this.tc=0}function Wu(){this.Na=this.la=0}function gf(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Gu(){this.ad=r(384),this.Za=0,this.Ob=r(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function mf(){this.uc=this.M=this.Nb=0,this.wa=Array(new Yi),this.Y=0,this.ya=Array(new Gu),this.aa=0,this.l=new kc}function bf(){this.y=r(16),this.f=r(8),this.ea=r(8)}function vf(){this.cb=this.a=0,this.sc="",this.m=new E,this.Od=new xc,this.Kc=new Cc,this.ed=new pf,this.Qa=new Dg,this.Ic=this.$c=this.Aa=0,this.D=new mf,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,E),this.ia=0,this.pb=o(4,gf),this.Pa=new ff,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new bf),this.Hd=0,this.rb=Array(new Wu),this.sb=0,this.wa=Array(new Yi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Gu),this.L=this.aa=0,this.gd=a([4,2],Yi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function kc(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Mg(){var v=new vf;return v!=null&&(v.a=0,v.sc="OK",v.cb=0,v.Xb=0,pd||(pd=bo)),v}function os(v,w,S){return v.a==0&&(v.a=w,v.sc=S,v.cb=0),0}function yf(v,w,S){return 3<=S&&v[w+0]==157&&v[w+1]==1&&v[w+2]==42}function wf(v,w){if(v==null)return 0;if(v.a=0,v.sc="OK",w==null)return os(v,2,"null VP8Io passed to VP8GetHeaders()");var S=w.data,N=w.w,H=w.ha;if(4>H)return os(v,7,"Truncated header.");var Y=S[N+0]|S[N+1]<<8|S[N+2]<<16,Z=v.Od;if(Z.Rb=!(1&Y),Z.td=Y>>1&7,Z.yd=Y>>4&1,Z.ub=Y>>5,3<Z.td)return os(v,3,"Incorrect keyframe parameters.");if(!Z.yd)return os(v,4,"Frame not displayable.");N+=3,H-=3;var tt=v.Kc;if(Z.Rb){if(7>H)return os(v,7,"cannot parse picture header");if(!yf(S,N,H))return os(v,3,"Bad code word");tt.c=16383&(S[N+4]<<8|S[N+3]),tt.Td=S[N+4]>>6,tt.i=16383&(S[N+6]<<8|S[N+5]),tt.Ud=S[N+6]>>6,N+=7,H-=7,v.za=tt.c+15>>4,v.Ub=tt.i+15>>4,w.width=tt.c,w.height=tt.i,w.Da=0,w.j=0,w.v=0,w.va=w.width,w.o=w.height,w.da=0,w.ib=w.width,w.hb=w.height,w.U=w.width,w.T=w.height,i((Y=v.Pa).jb,0,255,Y.jb.length),t((Y=v.Qa)!=null),Y.Cb=0,Y.Bb=0,Y.Fb=1,i(Y.Zb,0,0,Y.Zb.length),i(Y.Lb,0,0,Y.Lb)}if(Z.ub>H)return os(v,7,"bad partition length");W(Y=v.m,S,N,Z.ub),N+=Z.ub,H-=Z.ub,Z.Rb&&(tt.Ld=G(Y),tt.Kd=G(Y)),tt=v.Qa;var st,dt=v.Pa;if(t(Y!=null),t(tt!=null),tt.Cb=G(Y),tt.Cb){if(tt.Bb=G(Y),G(Y)){for(tt.Fb=G(Y),st=0;4>st;++st)tt.Zb[st]=G(Y)?O(Y,7):0;for(st=0;4>st;++st)tt.Lb[st]=G(Y)?O(Y,6):0}if(tt.Bb)for(st=0;3>st;++st)dt.jb[st]=G(Y)?F(Y,8):255}else tt.Bb=0;if(Y.Ka)return os(v,3,"cannot parse segment header");if((tt=v.ed).zd=G(Y),tt.Tb=F(Y,6),tt.wb=F(Y,3),tt.Pc=G(Y),tt.Pc&&G(Y)){for(dt=0;4>dt;++dt)G(Y)&&(tt.vd[dt]=O(Y,6));for(dt=0;4>dt;++dt)G(Y)&&(tt.od[dt]=O(Y,6))}if(v.L=tt.Tb==0?0:tt.zd?1:2,Y.Ka)return os(v,3,"cannot parse filter header");var bt=H;if(H=st=N,N=st+bt,tt=bt,v.Xb=(1<<F(v.m,2))-1,bt<3*(dt=v.Xb))S=7;else{for(st+=3*dt,tt-=3*dt,bt=0;bt<dt;++bt){var Et=S[H+0]|S[H+1]<<8|S[H+2]<<16;Et>tt&&(Et=tt),W(v.Jc[+bt],S,st,Et),st+=Et,tt-=Et,H+=3}W(v.Jc[+dt],S,st,tt),S=st<N?0:5}if(S!=0)return os(v,S,"cannot parse partitions");for(S=F(st=v.m,7),H=G(st)?O(st,4):0,N=G(st)?O(st,4):0,tt=G(st)?O(st,4):0,dt=G(st)?O(st,4):0,st=G(st)?O(st,4):0,bt=v.Qa,Et=0;4>Et;++Et){if(bt.Cb){var ht=bt.Zb[Et];bt.Fb||(ht+=S)}else{if(0<Et){v.pb[Et]=v.pb[0];continue}ht=S}var vt=v.pb[Et];vt.Sc[0]=Qg[zn(ht+H,127)],vt.Sc[1]=t2[zn(ht+0,127)],vt.Eb[0]=2*Qg[zn(ht+N,127)],vt.Eb[1]=101581*t2[zn(ht+tt,127)]>>16,8>vt.Eb[1]&&(vt.Eb[1]=8),vt.Qc[0]=Qg[zn(ht+dt,117)],vt.Qc[1]=t2[zn(ht+st,127)],vt.lc=ht+st}if(!Z.Rb)return os(v,4,"Not a key frame.");for(G(Y),Z=v.Pa,S=0;4>S;++S){for(H=0;8>H;++H)for(N=0;3>N;++N)for(tt=0;11>tt;++tt)dt=rt(Y,WC[S][H][N][tt])?F(Y,8):VC[S][H][N][tt],Z.Wc[S][H].Yb[N][tt]=dt;for(H=0;17>H;++H)Z.Xc[S][H]=Z.Wc[S][GC[H]]}return v.kc=G(Y),v.kc&&(v.Bd=F(Y,8)),v.cb=1}function bo(v,w,S,N,H,Y,Z){var tt=w[H].Yb[S];for(S=0;16>H;++H){if(!rt(v,tt[S+0]))return H;for(;!rt(v,tt[S+1]);)if(tt=w[++H].Yb[0],S=0,H==16)return 16;var st=w[H+1].Yb;if(rt(v,tt[S+2])){var dt=v,bt=0;if(rt(dt,(ht=tt)[(Et=S)+3]))if(rt(dt,ht[Et+6])){for(tt=0,Et=2*(bt=rt(dt,ht[Et+8]))+(ht=rt(dt,ht[Et+9+bt])),bt=0,ht=zC[Et];ht[tt];++tt)bt+=bt+rt(dt,ht[tt]);bt+=3+(8<<Et)}else rt(dt,ht[Et+7])?(bt=7+2*rt(dt,165),bt+=rt(dt,145)):bt=5+rt(dt,159);else bt=rt(dt,ht[Et+4])?3+rt(dt,ht[Et+5]):2;tt=st[2]}else bt=1,tt=st[1];st=Z+HC[H],0>(dt=v).b&&ct(dt);var Et,ht=dt.b,vt=(Et=dt.Ca>>1)-(dt.I>>ht)>>31;--dt.b,dt.Ca+=vt,dt.Ca|=1,dt.I-=(Et+1&vt)<<ht,Y[st]=((bt^vt)-vt)*N[(0<H)+0]}return 16}function rl(v){var w=v.rb[v.sb-1];w.la=0,w.Na=0,i(v.zc,0,0,v.zc.length),v.ja=0}function yr(v,w,S,N,H){H=v[w+S+32*N]+(H>>3),v[w+S+32*N]=-256&H?0>H?0:255:H}function ol(v,w,S,N,H,Y){yr(v,w,0,S,N+H),yr(v,w,1,S,N+Y),yr(v,w,2,S,N-Y),yr(v,w,3,S,N-H)}function Kn(v){return(20091*v>>16)+v}function Yu(v,w,S,N){var H,Y=0,Z=r(16);for(H=0;4>H;++H){var tt=v[w+0]+v[w+8],st=v[w+0]-v[w+8],dt=(35468*v[w+4]>>16)-Kn(v[w+12]),bt=Kn(v[w+4])+(35468*v[w+12]>>16);Z[Y+0]=tt+bt,Z[Y+1]=st+dt,Z[Y+2]=st-dt,Z[Y+3]=tt-bt,Y+=4,w++}for(H=Y=0;4>H;++H)tt=(v=Z[Y+0]+4)+Z[Y+8],st=v-Z[Y+8],dt=(35468*Z[Y+4]>>16)-Kn(Z[Y+12]),yr(S,N,0,0,tt+(bt=Kn(Z[Y+4])+(35468*Z[Y+12]>>16))),yr(S,N,1,0,st+dt),yr(S,N,2,0,st-dt),yr(S,N,3,0,tt-bt),Y++,N+=32}function Rg(v,w,S,N){var H=v[w+0]+4,Y=35468*v[w+4]>>16,Z=Kn(v[w+4]),tt=35468*v[w+1]>>16;ol(S,N,0,H+Z,v=Kn(v[w+1]),tt),ol(S,N,1,H+Y,v,tt),ol(S,N,2,H-Y,v,tt),ol(S,N,3,H-Z,v,tt)}function Ng(v,w,S,N,H){Yu(v,w,S,N),H&&Yu(v,w+16,S,N+4)}function Og(v,w,S,N){Cl(v,w+0,S,N,1),Cl(v,w+32,S,N+128,1)}function Ur(v,w,S,N){var H;for(v=v[w+0]+4,H=0;4>H;++H)for(w=0;4>w;++w)yr(S,N,w,H,v)}function _f(v,w,S,N){v[w+0]&&on(v,w+0,S,N),v[w+16]&&on(v,w+16,S,N+4),v[w+32]&&on(v,w+32,S,N+128),v[w+48]&&on(v,w+48,S,N+128+4)}function xf(v,w,S,N){var H,Y=r(16);for(H=0;4>H;++H){var Z=v[w+0+H]+v[w+12+H],tt=v[w+4+H]+v[w+8+H],st=v[w+4+H]-v[w+8+H],dt=v[w+0+H]-v[w+12+H];Y[0+H]=Z+tt,Y[8+H]=Z-tt,Y[4+H]=dt+st,Y[12+H]=dt-st}for(H=0;4>H;++H)Z=(v=Y[0+4*H]+3)+Y[3+4*H],tt=Y[1+4*H]+Y[2+4*H],st=Y[1+4*H]-Y[2+4*H],dt=v-Y[3+4*H],S[N+0]=Z+tt>>3,S[N+16]=dt+st>>3,S[N+32]=Z-tt>>3,S[N+48]=dt-st>>3,N+=64}function ia(v,w,S){var N,H=w-32,Y=Pi,Z=255-v[H-1];for(N=0;N<S;++N){var tt,st=Y,dt=Z+v[w-1];for(tt=0;tt<S;++tt)v[w+tt]=st[dt+v[H+tt]];w+=32}}function Ku(v,w){ia(v,w,4)}function Fg(v,w){ia(v,w,8)}function $g(v,w){ia(v,w,16)}function Bg(v,w){var S;for(S=0;16>S;++S)s(v,w+32*S,v,w-32,16)}function Xu(v,w){var S;for(S=16;0<S;--S)i(v,w,v[w-1],16),w+=32}function al(v,w,S){var N;for(N=0;16>N;++N)i(w,S+32*N,v,16)}function ra(v,w){var S,N=16;for(S=0;16>S;++S)N+=v[w-1+32*S]+v[w+S-32];al(N>>5,v,w)}function jg(v,w){var S,N=8;for(S=0;16>S;++S)N+=v[w-1+32*S];al(N>>4,v,w)}function ll(v,w){var S,N=8;for(S=0;16>S;++S)N+=v[w+S-32];al(N>>4,v,w)}function Zu(v,w){al(128,v,w)}function Ee(v,w,S){return v+2*w+S+2>>2}function Ug(v,w){var S,N=w-32;for(N=new Uint8Array([Ee(v[N-1],v[N+0],v[N+1]),Ee(v[N+0],v[N+1],v[N+2]),Ee(v[N+1],v[N+2],v[N+3]),Ee(v[N+2],v[N+3],v[N+4])]),S=0;4>S;++S)s(v,w+32*S,N,0,N.length)}function zg(v,w){var S=v[w-1],N=v[w-1+32],H=v[w-1+64],Y=v[w-1+96];wt(v,w+0,16843009*Ee(v[w-1-32],S,N)),wt(v,w+32,16843009*Ee(S,N,H)),wt(v,w+64,16843009*Ee(N,H,Y)),wt(v,w+96,16843009*Ee(H,Y,Y))}function Hg(v,w){var S,N=4;for(S=0;4>S;++S)N+=v[w+S-32]+v[w-1+32*S];for(N>>=3,S=0;4>S;++S)i(v,w+32*S,N,4)}function Vg(v,w){var S=v[w-1+0],N=v[w-1+32],H=v[w-1+64],Y=v[w-1-32],Z=v[w+0-32],tt=v[w+1-32],st=v[w+2-32],dt=v[w+3-32];v[w+0+96]=Ee(N,H,v[w-1+96]),v[w+1+96]=v[w+0+64]=Ee(S,N,H),v[w+2+96]=v[w+1+64]=v[w+0+32]=Ee(Y,S,N),v[w+3+96]=v[w+2+64]=v[w+1+32]=v[w+0+0]=Ee(Z,Y,S),v[w+3+64]=v[w+2+32]=v[w+1+0]=Ee(tt,Z,Y),v[w+3+32]=v[w+2+0]=Ee(st,tt,Z),v[w+3+0]=Ee(dt,st,tt)}function vo(v,w){var S=v[w+1-32],N=v[w+2-32],H=v[w+3-32],Y=v[w+4-32],Z=v[w+5-32],tt=v[w+6-32],st=v[w+7-32];v[w+0+0]=Ee(v[w+0-32],S,N),v[w+1+0]=v[w+0+32]=Ee(S,N,H),v[w+2+0]=v[w+1+32]=v[w+0+64]=Ee(N,H,Y),v[w+3+0]=v[w+2+32]=v[w+1+64]=v[w+0+96]=Ee(H,Y,Z),v[w+3+32]=v[w+2+64]=v[w+1+96]=Ee(Y,Z,tt),v[w+3+64]=v[w+2+96]=Ee(Z,tt,st),v[w+3+96]=Ee(tt,st,st)}function yo(v,w){var S=v[w-1+0],N=v[w-1+32],H=v[w-1+64],Y=v[w-1-32],Z=v[w+0-32],tt=v[w+1-32],st=v[w+2-32],dt=v[w+3-32];v[w+0+0]=v[w+1+64]=Y+Z+1>>1,v[w+1+0]=v[w+2+64]=Z+tt+1>>1,v[w+2+0]=v[w+3+64]=tt+st+1>>1,v[w+3+0]=st+dt+1>>1,v[w+0+96]=Ee(H,N,S),v[w+0+64]=Ee(N,S,Y),v[w+0+32]=v[w+1+96]=Ee(S,Y,Z),v[w+1+32]=v[w+2+96]=Ee(Y,Z,tt),v[w+2+32]=v[w+3+96]=Ee(Z,tt,st),v[w+3+32]=Ee(tt,st,dt)}function qg(v,w){var S=v[w+0-32],N=v[w+1-32],H=v[w+2-32],Y=v[w+3-32],Z=v[w+4-32],tt=v[w+5-32],st=v[w+6-32],dt=v[w+7-32];v[w+0+0]=S+N+1>>1,v[w+1+0]=v[w+0+64]=N+H+1>>1,v[w+2+0]=v[w+1+64]=H+Y+1>>1,v[w+3+0]=v[w+2+64]=Y+Z+1>>1,v[w+0+32]=Ee(S,N,H),v[w+1+32]=v[w+0+96]=Ee(N,H,Y),v[w+2+32]=v[w+1+96]=Ee(H,Y,Z),v[w+3+32]=v[w+2+96]=Ee(Y,Z,tt),v[w+3+64]=Ee(Z,tt,st),v[w+3+96]=Ee(tt,st,dt)}function Wg(v,w){var S=v[w-1+0],N=v[w-1+32],H=v[w-1+64],Y=v[w-1+96];v[w+0+0]=S+N+1>>1,v[w+2+0]=v[w+0+32]=N+H+1>>1,v[w+2+32]=v[w+0+64]=H+Y+1>>1,v[w+1+0]=Ee(S,N,H),v[w+3+0]=v[w+1+32]=Ee(N,H,Y),v[w+3+32]=v[w+1+64]=Ee(H,Y,Y),v[w+3+64]=v[w+2+64]=v[w+0+96]=v[w+1+96]=v[w+2+96]=v[w+3+96]=Y}function Ac(v,w){var S=v[w-1+0],N=v[w-1+32],H=v[w-1+64],Y=v[w-1+96],Z=v[w-1-32],tt=v[w+0-32],st=v[w+1-32],dt=v[w+2-32];v[w+0+0]=v[w+2+32]=S+Z+1>>1,v[w+0+32]=v[w+2+64]=N+S+1>>1,v[w+0+64]=v[w+2+96]=H+N+1>>1,v[w+0+96]=Y+H+1>>1,v[w+3+0]=Ee(tt,st,dt),v[w+2+0]=Ee(Z,tt,st),v[w+1+0]=v[w+3+32]=Ee(S,Z,tt),v[w+1+32]=v[w+3+64]=Ee(N,S,Z),v[w+1+64]=v[w+3+96]=Ee(H,N,S),v[w+1+96]=Ee(Y,H,N)}function Ju(v,w){var S;for(S=0;8>S;++S)s(v,w+32*S,v,w-32,8)}function cl(v,w){var S;for(S=0;8>S;++S)i(v,w,v[w-1],8),w+=32}function Sc(v,w,S){var N;for(N=0;8>N;++N)i(w,S+32*N,v,8)}function Ec(v,w){var S,N=8;for(S=0;8>S;++S)N+=v[w+S-32]+v[w-1+32*S];Sc(N>>4,v,w)}function Gg(v,w){var S,N=4;for(S=0;8>S;++S)N+=v[w+S-32];Sc(N>>3,v,w)}function Qu(v,w){var S,N=4;for(S=0;8>S;++S)N+=v[w-1+32*S];Sc(N>>3,v,w)}function td(v,w){Sc(128,v,w)}function ul(v,w,S){var N=v[w-S],H=v[w+0],Y=3*(H-N)+Yg[1020+v[w-2*S]-v[w+S]],Z=Df[112+(Y+4>>3)];v[w-S]=Pi[255+N+Df[112+(Y+3>>3)]],v[w+0]=Pi[255+H-Z]}function dl(v,w,S,N){var H=v[w+0],Y=v[w+S];return Ji[255+v[w-2*S]-v[w-S]]>N||Ji[255+Y-H]>N}function ed(v,w,S,N){return 4*Ji[255+v[w-S]-v[w+0]]+Ji[255+v[w-2*S]-v[w+S]]<=N}function Tc(v,w,S,N,H){var Y=v[w-3*S],Z=v[w-2*S],tt=v[w-S],st=v[w+0],dt=v[w+S],bt=v[w+2*S],Et=v[w+3*S];return 4*Ji[255+tt-st]+Ji[255+Z-dt]>N?0:Ji[255+v[w-4*S]-Y]<=H&&Ji[255+Y-Z]<=H&&Ji[255+Z-tt]<=H&&Ji[255+Et-bt]<=H&&Ji[255+bt-dt]<=H&&Ji[255+dt-st]<=H}function nd(v,w,S,N){var H=2*N+1;for(N=0;16>N;++N)ed(v,w+N,S,H)&&ul(v,w+N,S)}function hl(v,w,S,N){var H=2*N+1;for(N=0;16>N;++N)ed(v,w+N*S,1,H)&&ul(v,w+N*S,1)}function Cf(v,w,S,N){var H;for(H=3;0<H;--H)nd(v,w+=4*S,S,N)}function kf(v,w,S,N){var H;for(H=3;0<H;--H)hl(v,w+=4,S,N)}function wo(v,w,S,N,H,Y,Z,tt){for(Y=2*Y+1;0<H--;){if(Tc(v,w,S,Y,Z))if(dl(v,w,S,tt))ul(v,w,S);else{var st=v,dt=w,bt=S,Et=st[dt-2*bt],ht=st[dt-bt],vt=st[dt+0],xt=st[dt+bt],Rt=st[dt+2*bt],St=27*($t=Yg[1020+3*(vt-ht)+Yg[1020+Et-xt]])+63>>7,Ot=18*$t+63>>7,$t=9*$t+63>>7;st[dt-3*bt]=Pi[255+st[dt-3*bt]+$t],st[dt-2*bt]=Pi[255+Et+Ot],st[dt-bt]=Pi[255+ht+St],st[dt+0]=Pi[255+vt-St],st[dt+bt]=Pi[255+xt-Ot],st[dt+2*bt]=Pi[255+Rt-$t]}w+=N}}function _o(v,w,S,N,H,Y,Z,tt){for(Y=2*Y+1;0<H--;){if(Tc(v,w,S,Y,Z))if(dl(v,w,S,tt))ul(v,w,S);else{var st=v,dt=w,bt=S,Et=st[dt-bt],ht=st[dt+0],vt=st[dt+bt],xt=Df[112+(4+(Rt=3*(ht-Et))>>3)],Rt=Df[112+(Rt+3>>3)],St=xt+1>>1;st[dt-2*bt]=Pi[255+st[dt-2*bt]+St],st[dt-bt]=Pi[255+Et+Rt],st[dt+0]=Pi[255+ht-xt],st[dt+bt]=Pi[255+vt-St]}w+=N}}function Af(v,w,S,N,H,Y){wo(v,w,S,1,16,N,H,Y)}function Sf(v,w,S,N,H,Y){wo(v,w,1,S,16,N,H,Y)}function fl(v,w,S,N,H,Y){var Z;for(Z=3;0<Z;--Z)_o(v,w+=4*S,S,1,16,N,H,Y)}function Ef(v,w,S,N,H,Y){var Z;for(Z=3;0<Z;--Z)_o(v,w+=4,1,S,16,N,H,Y)}function k(v,w,S,N,H,Y,Z,tt){wo(v,w,H,1,8,Y,Z,tt),wo(S,N,H,1,8,Y,Z,tt)}function U(v,w,S,N,H,Y,Z,tt){wo(v,w,1,H,8,Y,Z,tt),wo(S,N,1,H,8,Y,Z,tt)}function ft(v,w,S,N,H,Y,Z,tt){_o(v,w+4*H,H,1,8,Y,Z,tt),_o(S,N+4*H,H,1,8,Y,Z,tt)}function mt(v,w,S,N,H,Y,Z,tt){_o(v,w+4,1,H,8,Y,Z,tt),_o(S,N+4,1,H,8,Y,Z,tt)}function yt(){this.ba=new gn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new rn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ft(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function jt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function se(){this.ua=0,this.Wa=new Tt,this.vb=new Tt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new q,this.yc=new K}function ue(){this.xb=this.a=0,this.l=new kc,this.ca=new gn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new M,this.Pb=0,this.wd=new M,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new se,this.ab=0,this.gc=o(4,jt),this.Oc=0}function Ae(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new kc,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Te(v,w,S,N,H,Y,Z){for(v=v==null?0:v[w+0],w=0;w<Z;++w)H[Y+w]=v+S[N+w]&255,v=H[Y+w]}function en(v,w,S,N,H,Y,Z){var tt;if(v==null)Te(null,null,S,N,H,Y,Z);else for(tt=0;tt<Z;++tt)H[Y+tt]=v[w+tt]+S[N+tt]&255}function On(v,w,S,N,H,Y,Z){if(v==null)Te(null,null,S,N,H,Y,Z);else{var tt,st=v[w+0],dt=st,bt=st;for(tt=0;tt<Z;++tt)dt=bt+(st=v[w+tt])-dt,bt=S[N+tt]+(-256&dt?0>dt?0:255:dt)&255,dt=st,H[Y+tt]=bt}}function as(v,w,S,N){var H=w.width,Y=w.o;if(t(v!=null&&w!=null),0>S||0>=N||S+N>Y)return null;if(!v.Cc){if(v.ga==null){var Z;if(v.ga=new Ae,(Z=v.ga==null)||(Z=w.width*w.o,t(v.Gb.length==0),v.Gb=r(Z),v.Uc=0,v.Gb==null?Z=0:(v.mb=v.Gb,v.nb=v.Uc,v.rc=null,Z=1),Z=!Z),!Z){Z=v.ga;var tt=v.Fa,st=v.P,dt=v.qc,bt=v.mb,Et=v.nb,ht=st+1,vt=dt-1,xt=Z.l;if(t(tt!=null&&bt!=null&&w!=null),ga[0]=null,ga[1]=Te,ga[2]=en,ga[3]=On,Z.ca=bt,Z.tb=Et,Z.c=w.width,Z.i=w.height,t(0<Z.c&&0<Z.i),1>=dt)w=0;else if(Z.$a=3&tt[st+0],Z.Z=tt[st+0]>>2&3,Z.Lc=tt[st+0]>>4&3,st=tt[st+0]>>6&3,0>Z.$a||1<Z.$a||4<=Z.Z||1<Z.Lc||st)w=0;else if(xt.put=_e,xt.ac=$r,xt.bc=go,xt.ma=Z,xt.width=w.width,xt.height=w.height,xt.Da=w.Da,xt.v=w.v,xt.va=w.va,xt.j=w.j,xt.o=w.o,Z.$a)t:{t(Z.$a==1),w=sl();e:for(;;){if(w==null){w=0;break t}if(t(Z!=null),Z.mc=w,w.c=Z.c,w.i=Z.i,w.l=Z.l,w.l.ma=Z,w.l.width=Z.c,w.l.height=Z.i,w.a=0,et(w.m,tt,ht,vt),!jr(Z.c,Z.i,1,w,null)||(w.ab==1&&w.gc[0].hc==3&&mr(w.s)?(Z.ic=1,tt=w.c*w.i,w.Ta=null,w.Ua=0,w.V=r(tt),w.Ba=0,w.V==null?(w.a=1,w=0):w=1):(Z.ic=0,w=il(w,Z.c)),!w))break e;w=1;break t}Z.mc=null,w=0}else w=vt>=Z.c*Z.i;Z=!w}if(Z)return null;v.ga.Lc!=1?v.Ga=0:N=Y-S}t(v.ga!=null),t(S+N<=Y);t:{if(w=(tt=v.ga).c,Y=tt.l.o,tt.$a==0){if(ht=v.rc,vt=v.Vc,xt=v.Fa,st=v.P+1+S*w,dt=v.mb,bt=v.nb+S*w,t(st<=v.P+v.qc),tt.Z!=0)for(t(ga[tt.Z]!=null),Z=0;Z<N;++Z)ga[tt.Z](ht,vt,xt,st,dt,bt,w),ht=dt,vt=bt,bt+=w,st+=w;else for(Z=0;Z<N;++Z)s(dt,bt,xt,st,w),ht=dt,vt=bt,bt+=w,st+=w;v.rc=ht,v.Vc=vt}else{if(t(tt.mc!=null),w=S+N,t((Z=tt.mc)!=null),t(w<=Z.i),Z.C>=w)w=1;else if(tt.ic||Ki(),tt.ic){tt=Z.V,ht=Z.Ba,vt=Z.c;var Rt=Z.i,St=(xt=1,st=Z.$/vt,dt=Z.$%vt,bt=Z.m,Et=Z.s,Z.$),Ot=vt*Rt,$t=vt*w,zt=Et.wc,Bt=St<$t?Ps(Et,dt,st):null;t(St<=Ot),t(w<=Rt),t(mr(Et));e:for(;;){for(;!bt.h&&St<$t;){if(dt&zt||(Bt=Ps(Et,dt,st)),t(Bt!=null),nt(bt),256>(Rt=Un(Bt.G[0],Bt.H[0],bt)))tt[ht+St]=Rt,++St,++dt>=vt&&(dt=0,++st<=w&&!(st%16)&&br(Z,st));else{if(!(280>Rt)){xt=0;break e}Rt=qi(Rt-256,bt);var de,te=Un(Bt.G[4],Bt.H[4],bt);if(nt(bt),!(St>=(te=Wi(vt,te=qi(te,bt)))&&Ot-St>=Rt)){xt=0;break e}for(de=0;de<Rt;++de)tt[ht+St+de]=tt[ht+St+de-te];for(St+=Rt,dt+=Rt;dt>=vt;)dt-=vt,++st<=w&&!(st%16)&&br(Z,st);St<$t&&dt&zt&&(Bt=Ps(Et,dt,st))}t(bt.h==at(bt))}br(Z,st>w?w:st);break e}!xt||bt.h&&St<Ot?(xt=0,Z.a=bt.h?5:3):Z.$=St,w=xt}else w=vr(Z,Z.V,Z.Ba,Z.c,Z.i,w,_c);if(!w){N=0;break t}}S+N>=Y&&(v.Cc=1),N=1}if(!N)return null;if(v.Cc&&((N=v.ga)!=null&&(N.mc=null),v.ga=null,0<v.Ga))return alert("todo:WebPDequantizeLevels"),null}return v.nb+S*H}function xn(v,w,S,N,H,Y){for(;0<H--;){var Z,tt=v,st=w+(S?1:0),dt=v,bt=w+(S?0:3);for(Z=0;Z<N;++Z){var Et=dt[bt+4*Z];Et!=255&&(Et*=32897,tt[st+4*Z+0]=tt[st+4*Z+0]*Et>>23,tt[st+4*Z+1]=tt[st+4*Z+1]*Et>>23,tt[st+4*Z+2]=tt[st+4*Z+2]*Et>>23)}w+=Y}}function ps(v,w,S,N,H){for(;0<N--;){var Y;for(Y=0;Y<S;++Y){var Z=v[w+2*Y+0],tt=15&(dt=v[w+2*Y+1]),st=4369*tt,dt=(240&dt|dt>>4)*st>>16;v[w+2*Y+0]=(240&Z|Z>>4)*st>>16&240|(15&Z|Z<<4)*st>>16>>4&15,v[w+2*Y+1]=240&dt|tt}w+=H}}function ls(v,w,S,N,H,Y,Z,tt){var st,dt,bt=255;for(dt=0;dt<H;++dt){for(st=0;st<N;++st){var Et=v[w+st];Y[Z+4*st]=Et,bt&=Et}w+=S,Z+=tt}return bt!=255}function Is(v,w,S,N,H){var Y;for(Y=0;Y<H;++Y)S[N+Y]=v[w+Y]>>8}function Ki(){fd=xn,qb=ps,Wb=ls,Gb=Is}function mi(v,w,S){P[v]=function(N,H,Y,Z,tt,st,dt,bt,Et,ht,vt,xt,Rt,St,Ot,$t,zt){var Bt,de=zt-1>>1,te=tt[st+0]|dt[bt+0]<<16,$e=Et[ht+0]|vt[xt+0]<<16;t(N!=null);var ae=3*te+$e+131074>>2;for(w(N[H+0],255&ae,ae>>16,Rt,St),Y!=null&&(ae=3*$e+te+131074>>2,w(Y[Z+0],255&ae,ae>>16,Ot,$t)),Bt=1;Bt<=de;++Bt){var Ge=tt[st+Bt]|dt[bt+Bt]<<16,ms=Et[ht+Bt]|vt[xt+Bt]<<16,Be=te+Ge+$e+ms+524296,le=Be+2*(Ge+$e)>>3;ae=le+te>>1,te=(Be=Be+2*(te+ms)>>3)+Ge>>1,w(N[H+2*Bt-1],255&ae,ae>>16,Rt,St+(2*Bt-1)*S),w(N[H+2*Bt-0],255&te,te>>16,Rt,St+(2*Bt-0)*S),Y!=null&&(ae=Be+$e>>1,te=le+ms>>1,w(Y[Z+2*Bt-1],255&ae,ae>>16,Ot,$t+(2*Bt-1)*S),w(Y[Z+2*Bt+0],255&te,te>>16,Ot,$t+(2*Bt+0)*S)),te=Ge,$e=ms}1&zt||(ae=3*te+$e+131074>>2,w(N[H+zt-1],255&ae,ae>>16,Rt,St+(zt-1)*S),Y!=null&&(ae=3*$e+te+131074>>2,w(Y[Z+zt-1],255&ae,ae>>16,Ot,$t+(zt-1)*S)))}}function Tf(){Qi[Mf]=KC,Qi[Rf]=iv,Qi[Qb]=XC,Qi[Nf]=rv,Qi[Of]=ov,Qi[Kg]=av,Qi[tv]=ZC,Qi[Xg]=iv,Qi[Zg]=rv,Qi[Ff]=ov,Qi[Jg]=av}function Lc(v){return v&-16384?0>v?0:255:v>>JC}function pl(v,w){return Lc((19077*v>>8)+(26149*w>>8)-14234)}function oa(v,w,S){return Lc((19077*v>>8)-(6419*w>>8)-(13320*S>>8)+8708)}function gl(v,w){return Lc((19077*v>>8)+(33050*w>>8)-17685)}function ml(v,w,S,N,H){N[H+0]=pl(v,S),N[H+1]=oa(v,w,S),N[H+2]=gl(v,w)}function bl(v,w,S,N,H){N[H+0]=gl(v,w),N[H+1]=oa(v,w,S),N[H+2]=pl(v,S)}function Vs(v,w,S,N,H){var Y=oa(v,w,S);w=Y<<3&224|gl(v,w)>>3,N[H+0]=248&pl(v,S)|Y>>5,N[H+1]=w}function vl(v,w,S,N,H){var Y=240&gl(v,w)|15;N[H+0]=240&pl(v,S)|oa(v,w,S)>>4,N[H+1]=Y}function yl(v,w,S,N,H){N[H+0]=255,ml(v,w,S,N,H+1)}function sd(v,w,S,N,H){bl(v,w,S,N,H),N[H+3]=255}function id(v,w,S,N,H){ml(v,w,S,N,H),N[H+3]=255}function zn(v,w){return 0>v?0:v>w?w:v}function xo(v,w,S){P[v]=function(N,H,Y,Z,tt,st,dt,bt,Et){for(var ht=bt+(-2&Et)*S;bt!=ht;)w(N[H+0],Y[Z+0],tt[st+0],dt,bt),w(N[H+1],Y[Z+0],tt[st+0],dt,bt+S),H+=2,++Z,++st,bt+=2*S;1&Et&&w(N[H+0],Y[Z+0],tt[st+0],dt,bt)}}function Pc(v,w,S){return S==0?v==0?w==0?6:5:w==0?4:0:S}function Lf(v,w,S,N,H){switch(v>>>30){case 3:Cl(w,S,N,H,0);break;case 2:Zi(w,S,N,H);break;case 1:on(w,S,N,H)}}function Xi(v,w){var S,N,H=w.M,Y=w.Nb,Z=v.oc,tt=v.pc+40,st=v.oc,dt=v.pc+584,bt=v.oc,Et=v.pc+600;for(S=0;16>S;++S)Z[tt+32*S-1]=129;for(S=0;8>S;++S)st[dt+32*S-1]=129,bt[Et+32*S-1]=129;for(0<H?Z[tt-1-32]=st[dt-1-32]=bt[Et-1-32]=129:(i(Z,tt-32-1,127,21),i(st,dt-32-1,127,9),i(bt,Et-32-1,127,9)),N=0;N<v.za;++N){var ht=w.ya[w.aa+N];if(0<N){for(S=-1;16>S;++S)s(Z,tt+32*S-4,Z,tt+32*S+12,4);for(S=-1;8>S;++S)s(st,dt+32*S-4,st,dt+32*S+4,4),s(bt,Et+32*S-4,bt,Et+32*S+4,4)}var vt=v.Gd,xt=v.Hd+N,Rt=ht.ad,St=ht.Hc;if(0<H&&(s(Z,tt-32,vt[xt].y,0,16),s(st,dt-32,vt[xt].f,0,8),s(bt,Et-32,vt[xt].ea,0,8)),ht.Za){var Ot=Z,$t=tt-32+16;for(0<H&&(N>=v.za-1?i(Ot,$t,vt[xt].y[15],4):s(Ot,$t,vt[xt+1].y,0,4)),S=0;4>S;S++)Ot[$t+128+S]=Ot[$t+256+S]=Ot[$t+384+S]=Ot[$t+0+S];for(S=0;16>S;++S,St<<=2)Ot=Z,$t=tt+cv[S],wr[ht.Ob[S]](Ot,$t),Lf(St,Rt,16*+S,Ot,$t)}else if(Ot=Pc(N,H,ht.Ob[0]),pa[Ot](Z,tt),St!=0)for(S=0;16>S;++S,St<<=2)Lf(St,Rt,16*+S,Z,tt+cv[S]);for(S=ht.Gc,Ot=Pc(N,H,ht.Dd),Ao[Ot](st,dt),Ao[Ot](bt,Et),St=Rt,Ot=st,$t=dt,255&(ht=0|S)&&(170&ht?Vr(St,256,Ot,$t):mn(St,256,Ot,$t)),ht=bt,St=Et,255&(S>>=8)&&(170&S?Vr(Rt,320,ht,St):mn(Rt,320,ht,St)),H<v.Ub-1&&(s(vt[xt].y,0,Z,tt+480,16),s(vt[xt].f,0,st,dt+224,8),s(vt[xt].ea,0,bt,Et+224,8)),S=8*Y*v.B,vt=v.sa,xt=v.ta+16*N+16*Y*v.R,Rt=v.qa,ht=v.ra+8*N+S,St=v.Ha,Ot=v.Ia+8*N+S,S=0;16>S;++S)s(vt,xt+S*v.R,Z,tt+32*S,16);for(S=0;8>S;++S)s(Rt,ht+S*v.B,st,dt+32*S,8),s(St,Ot+S*v.B,bt,Et+32*S,8)}}function wl(v,w,S,N,H,Y,Z,tt,st){var dt=[0],bt=[0],Et=0,ht=st!=null?st.kd:0,vt=st??new Ft;if(v==null||12>S)return 7;vt.data=v,vt.w=w,vt.ha=S,w=[w],S=[S],vt.gb=[vt.gb];t:{var xt=w,Rt=S,St=vt.gb;if(t(v!=null),t(Rt!=null),t(St!=null),St[0]=0,12<=Rt[0]&&!e(v,xt[0],"RIFF")){if(e(v,xt[0]+8,"WEBP")){St=3;break t}var Ot=ot(v,xt[0]+4);if(12>Ot||4294967286<Ot){St=3;break t}if(ht&&Ot>Rt[0]-8){St=7;break t}St[0]=Ot,xt[0]+=12,Rt[0]-=12}St=0}if(St!=0)return St;for(Ot=0<vt.gb[0],S=S[0];;){t:{var $t=v;Rt=w,St=S;var zt=dt,Bt=bt,de=xt=[0];if((ae=Et=[Et])[0]=0,8>St[0])St=7;else{if(!e($t,Rt[0],"VP8X")){if(ot($t,Rt[0]+4)!=10){St=3;break t}if(18>St[0]){St=7;break t}var te=ot($t,Rt[0]+8),$e=1+it($t,Rt[0]+12);if(2147483648<=$e*($t=1+it($t,Rt[0]+15))){St=3;break t}de!=null&&(de[0]=te),zt!=null&&(zt[0]=$e),Bt!=null&&(Bt[0]=$t),Rt[0]+=18,St[0]-=18,ae[0]=1}St=0}}if(Et=Et[0],xt=xt[0],St!=0)return St;if(Rt=!!(2&xt),!Ot&&Et)return 3;if(Y!=null&&(Y[0]=!!(16&xt)),Z!=null&&(Z[0]=Rt),tt!=null&&(tt[0]=0),Z=dt[0],xt=bt[0],Et&&Rt&&st==null){St=0;break}if(4>S){St=7;break}if(Ot&&Et||!Ot&&!Et&&!e(v,w[0],"ALPH")){S=[S],vt.na=[vt.na],vt.P=[vt.P],vt.Sa=[vt.Sa];t:{te=v,St=w,Ot=S;var ae=vt.gb;zt=vt.na,Bt=vt.P,de=vt.Sa,$e=22,t(te!=null),t(Ot!=null),$t=St[0];var Ge=Ot[0];for(t(zt!=null),t(de!=null),zt[0]=null,Bt[0]=null,de[0]=0;;){if(St[0]=$t,Ot[0]=Ge,8>Ge){St=7;break t}var ms=ot(te,$t+4);if(4294967286<ms){St=3;break t}var Be=8+ms+1&-2;if($e+=Be,0<ae&&$e>ae){St=3;break t}if(!e(te,$t,"VP8 ")||!e(te,$t,"VP8L")){St=0;break t}if(Ge[0]<Be){St=7;break t}e(te,$t,"ALPH")||(zt[0]=te,Bt[0]=$t+8,de[0]=ms),$t+=Be,Ge-=Be}}if(S=S[0],vt.na=vt.na[0],vt.P=vt.P[0],vt.Sa=vt.Sa[0],St!=0)break}S=[S],vt.Ja=[vt.Ja],vt.xa=[vt.xa];t:if(ae=v,St=w,Ot=S,zt=vt.gb[0],Bt=vt.Ja,de=vt.xa,te=St[0],$t=!e(ae,te,"VP8 "),$e=!e(ae,te,"VP8L"),t(ae!=null),t(Ot!=null),t(Bt!=null),t(de!=null),8>Ot[0])St=7;else{if($t||$e){if(ae=ot(ae,te+4),12<=zt&&ae>zt-12){St=3;break t}if(ht&&ae>Ot[0]-8){St=7;break t}Bt[0]=ae,St[0]+=8,Ot[0]-=8,de[0]=$e}else de[0]=5<=Ot[0]&&ae[te+0]==47&&!(ae[te+4]>>5),Bt[0]=Ot[0];St=0}if(S=S[0],vt.Ja=vt.Ja[0],vt.xa=vt.xa[0],w=w[0],St!=0)break;if(4294967286<vt.Ja)return 3;if(tt==null||Rt||(tt[0]=vt.xa?2:1),Z=[Z],xt=[xt],vt.xa){if(5>S){St=7;break}tt=Z,ht=xt,Rt=Y,v==null||5>S?v=0:5<=S&&v[w+0]==47&&!(v[w+4]>>5)?(Ot=[0],ae=[0],zt=[0],et(Bt=new M,v,w,S),mo(Bt,Ot,ae,zt)?(tt!=null&&(tt[0]=Ot[0]),ht!=null&&(ht[0]=ae[0]),Rt!=null&&(Rt[0]=zt[0]),v=1):v=0):v=0}else{if(10>S){St=7;break}tt=xt,v==null||10>S||!yf(v,w+3,S-3)?v=0:(ht=v[w+0]|v[w+1]<<8|v[w+2]<<16,Rt=16383&(v[w+7]<<8|v[w+6]),v=16383&(v[w+9]<<8|v[w+8]),1&ht||3<(ht>>1&7)||!(ht>>4&1)||ht>>5>=vt.Ja||!Rt||!v?v=0:(Z&&(Z[0]=Rt),tt&&(tt[0]=v),v=1))}if(!v||(Z=Z[0],xt=xt[0],Et&&(dt[0]!=Z||bt[0]!=xt)))return 3;st!=null&&(st[0]=vt,st.offset=w-st.w,t(4294967286>w-st.w),t(st.offset==st.ha-S));break}return St==0||St==7&&Et&&st==null?(Y!=null&&(Y[0]|=vt.na!=null&&0<vt.na.length),N!=null&&(N[0]=Z),H!=null&&(H[0]=xt),0):St}function rd(v,w,S){var N=w.width,H=w.height,Y=0,Z=0,tt=N,st=H;if(w.Da=v!=null&&0<v.Da,w.Da&&(tt=v.cd,st=v.bd,Y=v.v,Z=v.j,11>S||(Y&=-2,Z&=-2),0>Y||0>Z||0>=tt||0>=st||Y+tt>N||Z+st>H))return 0;if(w.v=Y,w.j=Z,w.va=Y+tt,w.o=Z+st,w.U=tt,w.T=st,w.da=v!=null&&0<v.da,w.da){if(!Nt(tt,st,S=[v.ib],Y=[v.hb]))return 0;w.ib=S[0],w.hb=Y[0]}return w.ob=v!=null&&v.ob,w.Kb=v==null||!v.Sd,w.da&&(w.ob=w.ib<3*N/4&&w.hb<3*H/4,w.Kb=0),1}function od(v){if(v==null)return 2;if(11>v.S){var w=v.f.RGBA;w.fb+=(v.height-1)*w.A,w.A=-w.A}else w=v.f.kb,v=v.height,w.O+=(v-1)*w.fa,w.fa=-w.fa,w.N+=(v-1>>1)*w.Ab,w.Ab=-w.Ab,w.W+=(v-1>>1)*w.Db,w.Db=-w.Db,w.F!=null&&(w.J+=(v-1)*w.lb,w.lb=-w.lb);return 0}function aa(v,w,S,N){if(N==null||0>=v||0>=w)return 2;if(S!=null){if(S.Da){var H=S.cd,Y=S.bd,Z=-2&S.v,tt=-2&S.j;if(0>Z||0>tt||0>=H||0>=Y||Z+H>v||tt+Y>w)return 2;v=H,w=Y}if(S.da){if(!Nt(v,w,H=[S.ib],Y=[S.hb]))return 2;v=H[0],w=Y[0]}}N.width=v,N.height=w;t:{var st=N.width,dt=N.height;if(v=N.S,0>=st||0>=dt||!(v>=Mf&&13>v))v=2;else{if(0>=N.Rd&&N.sd==null){Z=Y=H=w=0;var bt=(tt=st*uv[v])*dt;if(11>v||(Y=(dt+1)/2*(w=(st+1)/2),v==12&&(Z=(H=st)*dt)),(dt=r(bt+2*Y+Z))==null){v=1;break t}N.sd=dt,11>v?((st=N.f.RGBA).eb=dt,st.fb=0,st.A=tt,st.size=bt):((st=N.f.kb).y=dt,st.O=0,st.fa=tt,st.Fd=bt,st.f=dt,st.N=0+bt,st.Ab=w,st.Cd=Y,st.ea=dt,st.W=0+bt+Y,st.Db=w,st.Ed=Y,v==12&&(st.F=dt,st.J=0+bt+2*Y),st.Tc=Z,st.lb=H)}if(w=1,H=N.S,Y=N.width,Z=N.height,H>=Mf&&13>H)if(11>H)v=N.f.RGBA,w&=(tt=Math.abs(v.A))*(Z-1)+Y<=v.size,w&=tt>=Y*uv[H],w&=v.eb!=null;else{v=N.f.kb,tt=(Y+1)/2,bt=(Z+1)/2,st=Math.abs(v.fa),dt=Math.abs(v.Ab);var Et=Math.abs(v.Db),ht=Math.abs(v.lb),vt=ht*(Z-1)+Y;w&=st*(Z-1)+Y<=v.Fd,w&=dt*(bt-1)+tt<=v.Cd,w=(w&=Et*(bt-1)+tt<=v.Ed)&st>=Y&dt>=tt&Et>=tt,w&=v.y!=null,w&=v.f!=null,w&=v.ea!=null,H==12&&(w&=ht>=Y,w&=vt<=v.Tc,w&=v.F!=null)}else w=0;v=w?0:2}}return v!=0||S!=null&&S.fd&&(v=od(N)),v}var _l=64,Ti=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Li=24,la=32,Co=8,ca=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];kt("Predictor0","PredictorAdd0"),P.Predictor0=function(){return 4278190080},P.Predictor1=function(v){return v},P.Predictor2=function(v,w,S){return w[S+0]},P.Predictor3=function(v,w,S){return w[S+1]},P.Predictor4=function(v,w,S){return w[S-1]},P.Predictor5=function(v,w,S){return Mt(Mt(v,w[S+1]),w[S+0])},P.Predictor6=function(v,w,S){return Mt(v,w[S-1])},P.Predictor7=function(v,w,S){return Mt(v,w[S+0])},P.Predictor8=function(v,w,S){return Mt(w[S-1],w[S+0])},P.Predictor9=function(v,w,S){return Mt(w[S+0],w[S+1])},P.Predictor10=function(v,w,S){return Mt(Mt(v,w[S-1]),Mt(w[S+0],w[S+1]))},P.Predictor11=function(v,w,S){var N=w[S+0];return 0>=Yt(N>>24&255,v>>24&255,(w=w[S-1])>>24&255)+Yt(N>>16&255,v>>16&255,w>>16&255)+Yt(N>>8&255,v>>8&255,w>>8&255)+Yt(255&N,255&v,255&w)?N:v},P.Predictor12=function(v,w,S){var N=w[S+0];return(qt((v>>24&255)+(N>>24&255)-((w=w[S-1])>>24&255))<<24|qt((v>>16&255)+(N>>16&255)-(w>>16&255))<<16|qt((v>>8&255)+(N>>8&255)-(w>>8&255))<<8|qt((255&v)+(255&N)-(255&w)))>>>0},P.Predictor13=function(v,w,S){var N=w[S-1];return(Vt((v=Mt(v,w[S+0]))>>24&255,N>>24&255)<<24|Vt(v>>16&255,N>>16&255)<<16|Vt(v>>8&255,N>>8&255)<<8|Vt(255&v,255&N))>>>0};var ad=P.PredictorAdd0;P.PredictorAdd1=ve,kt("Predictor2","PredictorAdd2"),kt("Predictor3","PredictorAdd3"),kt("Predictor4","PredictorAdd4"),kt("Predictor5","PredictorAdd5"),kt("Predictor6","PredictorAdd6"),kt("Predictor7","PredictorAdd7"),kt("Predictor8","PredictorAdd8"),kt("Predictor9","PredictorAdd9"),kt("Predictor10","PredictorAdd10"),kt("Predictor11","PredictorAdd11"),kt("Predictor12","PredictorAdd12"),kt("Predictor13","PredictorAdd13");var Ic=P.PredictorAdd2;Jt("ColorIndexInverseTransform","MapARGB","32b",function(v){return v>>8&255},function(v){return v}),Jt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(v){return v},function(v){return v>>8&255});var Xn,Pf=P.ColorIndexInverseTransform,zr=P.MapARGB,Hr=P.VP8LColorIndexInverseTransformAlpha,ld=P.MapAlpha,cd=P.VP8LPredictorsAdd=[];cd.length=16,(P.VP8LPredictors=[]).length=16,(P.VP8LPredictorsAdd_C=[]).length=16,(P.VP8LPredictors_C=[]).length=16;var ud,dd,ua,da,ha,xl,fa,Cl,Zi,Vr,on,mn,Zn,gs,ko,hd,Dc,If,Bb,jb,Ub,zb,Hb,Vb,fd,qb,Wb,Gb,Yb=r(511),Kb=r(2041),Xb=r(225),Zb=r(767),Jb=0,Yg=Kb,Df=Xb,Pi=Zb,Ji=Yb,Mf=0,Rf=1,Qb=2,Nf=3,Of=4,Kg=5,tv=6,Xg=7,Zg=8,Ff=9,Jg=10,NC=[2,3,7],OC=[3,3,11],ev=[280,256,256,256,40],FC=[0,1,1,1,0],$C=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],BC=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],jC=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],UC=8,Qg=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],t2=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],pd=null,zC=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],HC=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],nv=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],VC=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],qC=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],WC=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],GC=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],pa=[],wr=[],Ao=[],YC=1,sv=2,ga=[],Qi=[];mi("UpsampleRgbLinePair",ml,3),mi("UpsampleBgrLinePair",bl,3),mi("UpsampleRgbaLinePair",id,4),mi("UpsampleBgraLinePair",sd,4),mi("UpsampleArgbLinePair",yl,4),mi("UpsampleRgba4444LinePair",vl,2),mi("UpsampleRgb565LinePair",Vs,2);var KC=P.UpsampleRgbLinePair,XC=P.UpsampleBgrLinePair,iv=P.UpsampleRgbaLinePair,rv=P.UpsampleBgraLinePair,ov=P.UpsampleArgbLinePair,av=P.UpsampleRgba4444LinePair,ZC=P.UpsampleRgb565LinePair,$f=16,Bf=1<<$f-1,gd=-227,e2=482,JC=6,lv=0,QC=r(256),tk=r(256),ek=r(256),nk=r(256),sk=r(e2-gd),ik=r(e2-gd);xo("YuvToRgbRow",ml,3),xo("YuvToBgrRow",bl,3),xo("YuvToRgbaRow",id,4),xo("YuvToBgraRow",sd,4),xo("YuvToArgbRow",yl,4),xo("YuvToRgba4444Row",vl,2),xo("YuvToRgb565Row",Vs,2);var cv=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],jf=[0,2,8],rk=[8,7,6,4,4,2,2,2,1,1,1,1],ok=1;this.WebPDecodeRGBA=function(v,w,S,N,H){var Y=Rf,Z=new yt,tt=new gn;Z.ba=tt,tt.S=Y,tt.width=[tt.width],tt.height=[tt.height];var st=tt.width,dt=tt.height,bt=new Se;if(bt==null||v==null)var Et=2;else t(bt!=null),Et=wl(v,w,S,bt.width,bt.height,bt.Pd,bt.Qd,bt.format,null);if(Et!=0?st=0:(st!=null&&(st[0]=bt.width[0]),dt!=null&&(dt[0]=bt.height[0]),st=1),st){tt.width=tt.width[0],tt.height=tt.height[0],N!=null&&(N[0]=tt.width),H!=null&&(H[0]=tt.height);t:{if(N=new kc,(H=new Ft).data=v,H.w=w,H.ha=S,H.kd=1,w=[0],t(H!=null),((v=wl(H.data,H.w,H.ha,null,null,null,w,null,H))==0||v==7)&&w[0]&&(v=4),(w=v)==0){if(t(Z!=null),N.data=H.data,N.w=H.w+H.offset,N.ha=H.ha-H.offset,N.put=_e,N.ac=$r,N.bc=go,N.ma=Z,H.xa){if((v=sl())==null){Z=1;break t}if(function(ht,vt){var xt=[0],Rt=[0],St=[0];e:for(;;){if(ht==null)return 0;if(vt==null)return ht.a=2,0;if(ht.l=vt,ht.a=0,et(ht.m,vt.data,vt.w,vt.ha),!mo(ht.m,xt,Rt,St)){ht.a=3;break e}if(ht.xb=sv,vt.width=xt[0],vt.height=Rt[0],!jr(xt[0],Rt[0],1,ht,null))break e;return 1}return t(ht.a!=0),0}(v,N)){if(N=(w=aa(N.width,N.height,Z.Oa,Z.ba))==0){e:{N=v;n:for(;;){if(N==null){N=0;break e}if(t(N.s.yc!=null),t(N.s.Ya!=null),t(0<N.s.Wb),t((S=N.l)!=null),t((H=S.ma)!=null),N.xb!=0){if(N.ca=H.ba,N.tb=H.tb,t(N.ca!=null),!rd(H.Oa,S,Nf)){N.a=2;break n}if(!il(N,S.width)||S.da)break n;if((S.da||Me(N.ca.S))&&Ki(),11>N.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),N.ca.f.kb.F!=null&&Ki()),N.Pb&&0<N.s.ua&&N.s.vb.X==null&&!X(N.s.vb,N.s.Wa.Xa)){N.a=1;break n}N.xb=0}if(!vr(N,N.V,N.Ba,N.c,N.i,S.o,sa))break n;H.Dc=N.Ma,N=1;break e}t(N.a!=0),N=0}N=!N}N&&(w=v.a)}else w=v.a}else{if((v=new Mg)==null){Z=1;break t}if(v.Fa=H.na,v.P=H.P,v.qc=H.Sa,wf(v,N)){if((w=aa(N.width,N.height,Z.Oa,Z.ba))==0){if(v.Aa=0,S=Z.Oa,t((H=v)!=null),S!=null){if(0<(st=0>(st=S.Md)?0:100<st?255:255*st/100)){for(dt=bt=0;4>dt;++dt)12>(Et=H.pb[dt]).lc&&(Et.ia=st*rk[0>Et.lc?0:Et.lc]>>3),bt|=Et.ia;bt&&(alert("todo:VP8InitRandom"),H.ia=1)}H.Ga=S.Id,100<H.Ga?H.Ga=100:0>H.Ga&&(H.Ga=0)}(function(ht,vt){if(ht==null)return 0;if(vt==null)return os(ht,2,"NULL VP8Io parameter in VP8Decode().");if(!ht.cb&&!wf(ht,vt))return 0;if(t(ht.cb),vt.ac==null||vt.ac(vt)){vt.ob&&(ht.L=0);var xt=jf[ht.L];if(ht.L==2?(ht.yb=0,ht.zb=0):(ht.yb=vt.v-xt>>4,ht.zb=vt.j-xt>>4,0>ht.yb&&(ht.yb=0),0>ht.zb&&(ht.zb=0)),ht.Va=vt.o+15+xt>>4,ht.Hb=vt.va+15+xt>>4,ht.Hb>ht.za&&(ht.Hb=ht.za),ht.Va>ht.Ub&&(ht.Va=ht.Ub),0<ht.L){var Rt=ht.ed;for(xt=0;4>xt;++xt){var St;if(ht.Qa.Cb){var Ot=ht.Qa.Lb[xt];ht.Qa.Fb||(Ot+=Rt.Tb)}else Ot=Rt.Tb;for(St=0;1>=St;++St){var $t=ht.gd[xt][St],zt=Ot;if(Rt.Pc&&(zt+=Rt.vd[0],St&&(zt+=Rt.od[0])),0<(zt=0>zt?0:63<zt?63:zt)){var Bt=zt;0<Rt.wb&&(Bt=4<Rt.wb?Bt>>2:Bt>>1)>9-Rt.wb&&(Bt=9-Rt.wb),1>Bt&&(Bt=1),$t.dd=Bt,$t.tc=2*zt+Bt,$t.ld=40<=zt?2:15<=zt?1:0}else $t.tc=0;$t.La=St}}}xt=0}else os(ht,6,"Frame setup failed"),xt=ht.a;if(xt=xt==0){if(xt){ht.$c=0,0<ht.Aa||(ht.Ic=ok);e:{xt=ht.Ic,Rt=4*(Bt=ht.za);var de=32*Bt,te=Bt+1,$e=0<ht.L?Bt*(0<ht.Aa?2:1):0,ae=(ht.Aa==2?2:1)*Bt;if(($t=Rt+832+(St=3*(16*xt+jf[ht.L])/2*de)+(Ot=ht.Fa!=null&&0<ht.Fa.length?ht.Kc.c*ht.Kc.i:0))!=$t)xt=0;else{if($t>ht.Vb){if(ht.Vb=0,ht.Ec=r($t),ht.Fc=0,ht.Ec==null){xt=os(ht,1,"no memory during frame initialization.");break e}ht.Vb=$t}$t=ht.Ec,zt=ht.Fc,ht.Ac=$t,ht.Bc=zt,zt+=Rt,ht.Gd=o(de,bf),ht.Hd=0,ht.rb=o(te+1,Wu),ht.sb=1,ht.wa=$e?o($e,Yi):null,ht.Y=0,ht.D.Nb=0,ht.D.wa=ht.wa,ht.D.Y=ht.Y,0<ht.Aa&&(ht.D.Y+=Bt),t(!0),ht.oc=$t,ht.pc=zt,zt+=832,ht.ya=o(ae,Gu),ht.aa=0,ht.D.ya=ht.ya,ht.D.aa=ht.aa,ht.Aa==2&&(ht.D.aa+=Bt),ht.R=16*Bt,ht.B=8*Bt,Bt=(de=jf[ht.L])*ht.R,de=de/2*ht.B,ht.sa=$t,ht.ta=zt+Bt,ht.qa=ht.sa,ht.ra=ht.ta+16*xt*ht.R+de,ht.Ha=ht.qa,ht.Ia=ht.ra+8*xt*ht.B+de,ht.$c=0,zt+=St,ht.mb=Ot?$t:null,ht.nb=Ot?zt:null,t(zt+Ot<=ht.Fc+ht.Vb),rl(ht),i(ht.Ac,ht.Bc,0,Rt),xt=1}}if(xt){if(vt.ka=0,vt.y=ht.sa,vt.O=ht.ta,vt.f=ht.qa,vt.N=ht.ra,vt.ea=ht.Ha,vt.Vd=ht.Ia,vt.fa=ht.R,vt.Rc=ht.B,vt.F=null,vt.J=0,!Jb){for(xt=-255;255>=xt;++xt)Yb[255+xt]=0>xt?-xt:xt;for(xt=-1020;1020>=xt;++xt)Kb[1020+xt]=-128>xt?-128:127<xt?127:xt;for(xt=-112;112>=xt;++xt)Xb[112+xt]=-16>xt?-16:15<xt?15:xt;for(xt=-255;510>=xt;++xt)Zb[255+xt]=0>xt?0:255<xt?255:xt;Jb=1}fa=xf,Cl=Ng,Vr=Og,on=Ur,mn=_f,Zi=Rg,Zn=Af,gs=Sf,ko=k,hd=U,Dc=fl,If=Ef,Bb=ft,jb=mt,Ub=nd,zb=hl,Hb=Cf,Vb=kf,wr[0]=Hg,wr[1]=Ku,wr[2]=Ug,wr[3]=zg,wr[4]=Vg,wr[5]=yo,wr[6]=vo,wr[7]=qg,wr[8]=Ac,wr[9]=Wg,pa[0]=ra,pa[1]=$g,pa[2]=Bg,pa[3]=Xu,pa[4]=jg,pa[5]=ll,pa[6]=Zu,Ao[0]=Ec,Ao[1]=Fg,Ao[2]=Ju,Ao[3]=cl,Ao[4]=Qu,Ao[5]=Gg,Ao[6]=td,xt=1}else xt=0}xt&&(xt=function(Ge,ms){for(Ge.M=0;Ge.M<Ge.Va;++Ge.M){var Be,le=Ge.Jc[Ge.M&Ge.Xb],Gt=Ge.m,Jn=Ge;for(Be=0;Be<Jn.za;++Be){var Re=Gt,Xe=Jn,En=Xe.Ac,Ds=Xe.Bc+4*Be,ri=Xe.zc,Hn=Xe.ya[Xe.aa+Be];if(Xe.Qa.Bb?Hn.$b=rt(Re,Xe.Pa.jb[0])?2+rt(Re,Xe.Pa.jb[2]):rt(Re,Xe.Pa.jb[1]):Hn.$b=0,Xe.kc&&(Hn.Ad=rt(Re,Xe.Bd)),Hn.Za=!rt(Re,145)+0,Hn.Za){var qs=Hn.Ob,oi=0;for(Xe=0;4>Xe;++Xe){var bs,Ze=ri[0+Xe];for(bs=0;4>bs;++bs){Ze=qC[En[Ds+bs]][Ze];for(var un=nv[rt(Re,Ze[0])];0<un;)un=nv[2*un+rt(Re,Ze[un])];Ze=-un,En[Ds+bs]=Ze}s(qs,oi,En,Ds,4),oi+=4,ri[0+Xe]=Ze}}else Ze=rt(Re,156)?rt(Re,128)?1:3:rt(Re,163)?2:0,Hn.Ob[0]=Ze,i(En,Ds,Ze,4),i(ri,0,Ze,4);Hn.Dd=rt(Re,142)?rt(Re,114)?rt(Re,183)?1:3:2:0}if(Jn.m.Ka)return os(Ge,7,"Premature end-of-partition0 encountered.");for(;Ge.ja<Ge.za;++Ge.ja){if(Jn=le,Re=(Gt=Ge).rb[Gt.sb-1],En=Gt.rb[Gt.sb+Gt.ja],Be=Gt.ya[Gt.aa+Gt.ja],Ds=Gt.kc?Be.Ad:0)Re.la=En.la=0,Be.Za||(Re.Na=En.Na=0),Be.Hc=0,Be.Gc=0,Be.ia=0;else{var Vn,dn;if(Re=En,En=Jn,Ds=Gt.Pa.Xc,ri=Gt.ya[Gt.aa+Gt.ja],Hn=Gt.pb[ri.$b],Xe=ri.ad,qs=0,oi=Gt.rb[Gt.sb-1],Ze=bs=0,i(Xe,qs,0,384),ri.Za)var Ms=0,_r=Ds[3];else{un=r(16);var Qn=Re.Na+oi.Na;if(Qn=pd(En,Ds[1],Qn,Hn.Eb,0,un,0),Re.Na=oi.Na=(0<Qn)+0,1<Qn)fa(un,0,Xe,qs);else{var bi=un[0]+3>>3;for(un=0;256>un;un+=16)Xe[qs+un]=bi}Ms=1,_r=Ds[0]}var bn=15&Re.la,vs=15&oi.la;for(un=0;4>un;++un){var Ii=1&vs;for(bi=dn=0;4>bi;++bi)bn=bn>>1|(Ii=(Qn=pd(En,_r,Qn=Ii+(1&bn),Hn.Sc,Ms,Xe,qs))>Ms)<<7,dn=dn<<2|(3<Qn?3:1<Qn?2:Xe[qs+0]!=0),qs+=16;bn>>=4,vs=vs>>1|Ii<<7,bs=(bs<<8|dn)>>>0}for(_r=bn,Ms=vs>>4,Vn=0;4>Vn;Vn+=2){for(dn=0,bn=Re.la>>4+Vn,vs=oi.la>>4+Vn,un=0;2>un;++un){for(Ii=1&vs,bi=0;2>bi;++bi)Qn=Ii+(1&bn),bn=bn>>1|(Ii=0<(Qn=pd(En,Ds[2],Qn,Hn.Qc,0,Xe,qs)))<<3,dn=dn<<2|(3<Qn?3:1<Qn?2:Xe[qs+0]!=0),qs+=16;bn>>=2,vs=vs>>1|Ii<<5}Ze|=dn<<4*Vn,_r|=bn<<4<<Vn,Ms|=(240&vs)<<Vn}Re.la=_r,oi.la=Ms,ri.Hc=bs,ri.Gc=Ze,ri.ia=43690&Ze?0:Hn.ia,Ds=!(bs|Ze)}if(0<Gt.L&&(Gt.wa[Gt.Y+Gt.ja]=Gt.gd[Be.$b][Be.Za],Gt.wa[Gt.Y+Gt.ja].La|=!Ds),Jn.Ka)return os(Ge,7,"Premature end-of-file encountered.")}if(rl(Ge),Gt=ms,Jn=1,Be=(le=Ge).D,Re=0<le.L&&le.M>=le.zb&&le.M<=le.Va,le.Aa==0)e:{if(Be.M=le.M,Be.uc=Re,Xi(le,Be),Jn=1,Be=(dn=le.D).Nb,Re=(Ze=jf[le.L])*le.R,En=Ze/2*le.B,un=16*Be*le.R,bi=8*Be*le.B,Ds=le.sa,ri=le.ta-Re+un,Hn=le.qa,Xe=le.ra-En+bi,qs=le.Ha,oi=le.Ia-En+bi,vs=(bn=dn.M)==0,bs=bn>=le.Va-1,le.Aa==2&&Xi(le,dn),dn.uc)for(Ii=(Qn=le).D.M,t(Qn.D.uc),dn=Qn.yb;dn<Qn.Hb;++dn){Ms=dn,_r=Ii;var ai=(Di=(Rs=Qn).D).Nb;Vn=Rs.R;var Di=Di.wa[Di.Y+Ms],Mi=Rs.sa,vi=Rs.ta+16*ai*Vn+16*Ms,Ri=Di.dd,Cn=Di.tc;if(Cn!=0)if(t(3<=Cn),Rs.L==1)0<Ms&&zb(Mi,vi,Vn,Cn+4),Di.La&&Vb(Mi,vi,Vn,Cn),0<_r&&Ub(Mi,vi,Vn,Cn+4),Di.La&&Hb(Mi,vi,Vn,Cn);else{var Ni=Rs.B,xr=Rs.qa,kl=Rs.ra+8*ai*Ni+8*Ms,So=Rs.Ha,Rs=Rs.Ia+8*ai*Ni+8*Ms;ai=Di.ld,0<Ms&&(gs(Mi,vi,Vn,Cn+4,Ri,ai),hd(xr,kl,So,Rs,Ni,Cn+4,Ri,ai)),Di.La&&(If(Mi,vi,Vn,Cn,Ri,ai),jb(xr,kl,So,Rs,Ni,Cn,Ri,ai)),0<_r&&(Zn(Mi,vi,Vn,Cn+4,Ri,ai),ko(xr,kl,So,Rs,Ni,Cn+4,Ri,ai)),Di.La&&(Dc(Mi,vi,Vn,Cn,Ri,ai),Bb(xr,kl,So,Rs,Ni,Cn,Ri,ai))}}if(le.ia&&alert("todo:DitherRow"),Gt.put!=null){if(dn=16*bn,bn=16*(bn+1),vs?(Gt.y=le.sa,Gt.O=le.ta+un,Gt.f=le.qa,Gt.N=le.ra+bi,Gt.ea=le.Ha,Gt.W=le.Ia+bi):(dn-=Ze,Gt.y=Ds,Gt.O=ri,Gt.f=Hn,Gt.N=Xe,Gt.ea=qs,Gt.W=oi),bs||(bn-=Ze),bn>Gt.o&&(bn=Gt.o),Gt.F=null,Gt.J=null,le.Fa!=null&&0<le.Fa.length&&dn<bn&&(Gt.J=as(le,Gt,dn,bn-dn),Gt.F=le.mb,Gt.F==null&&Gt.F.length==0)){Jn=os(le,3,"Could not decode alpha data.");break e}dn<Gt.j&&(Ze=Gt.j-dn,dn=Gt.j,t(!(1&Ze)),Gt.O+=le.R*Ze,Gt.N+=le.B*(Ze>>1),Gt.W+=le.B*(Ze>>1),Gt.F!=null&&(Gt.J+=Gt.width*Ze)),dn<bn&&(Gt.O+=Gt.v,Gt.N+=Gt.v>>1,Gt.W+=Gt.v>>1,Gt.F!=null&&(Gt.J+=Gt.v),Gt.ka=dn-Gt.j,Gt.U=Gt.va-Gt.v,Gt.T=bn-dn,Jn=Gt.put(Gt))}Be+1!=le.Ic||bs||(s(le.sa,le.ta-Re,Ds,ri+16*le.R,Re),s(le.qa,le.ra-En,Hn,Xe+8*le.B,En),s(le.Ha,le.Ia-En,qs,oi+8*le.B,En))}if(!Jn)return os(Ge,6,"Output aborted.")}return 1}(ht,vt)),vt.bc!=null&&vt.bc(vt),xt&=1}return xt?(ht.cb=0,xt):0})(v,N)||(w=v.a)}}else w=v.a}w==0&&Z.Oa!=null&&Z.Oa.fd&&(w=od(Z.ba))}Z=w}Y=Z!=0?null:11>Y?tt.f.RGBA.eb:tt.f.kb.y}else Y=null;return Y};var uv=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(P,V){for(var T="",D=0;D<4;D++)T+=String.fromCharCode(P[V++]);return T}function u(P,V){return P[V+0]|P[V+1]<<8}function d(P,V){return(P[V+0]|P[V+1]<<8|P[V+2]<<16)>>>0}function f(P,V){return(P[V+0]|P[V+1]<<8|P[V+2]<<16|P[V+3]<<24)>>>0}new l;var h=[0],g=[0],m=[],b=new l,y=n,x=function(P,V){var T={},D=0,K=!1,$=0,q=0;if(T.frames=[],!function(E,M){for(var B=0;B<4;B++)if(E[M+B]!="RIFF".charCodeAt(B))return!0;return!1}(P,V)){for(f(P,V+=4),V+=8;V<P.length;){var W=c(P,V),F=f(P,V+=4);V+=4;var O=F+(1&F);switch(W){case"VP8 ":case"VP8L":T.frames[D]===void 0&&(T.frames[D]={}),(lt=T.frames[D]).src_off=K?q:V-8,lt.src_size=$+F+8,D++,K&&(K=!1,$=0,q=0);break;case"VP8X":(lt=T.header={}).feature_flags=P[V];var et=V+4;lt.canvas_width=1+d(P,et),et+=3,lt.canvas_height=1+d(P,et),et+=3;break;case"ALPH":K=!0,$=O+8,q=V-8;break;case"ANIM":(lt=T.header).bgcolor=f(P,V),et=V+4,lt.loop_count=u(P,et),et+=2;break;case"ANMF":var gt,lt;(lt=T.frames[D]={}).offset_x=2*d(P,V),V+=3,lt.offset_y=2*d(P,V),V+=3,lt.width=1+d(P,V),V+=3,lt.height=1+d(P,V),V+=3,lt.duration=d(P,V),V+=3,gt=P[V++],lt.dispose=1&gt,lt.blend=gt>>1&1}W!="ANMF"&&(V+=O)}return T}}(y,0);x.response=y,x.rgbaoutput=!0,x.dataurl=!1;var _=x.header?x.header:null,C=x.frames?x.frames:null;if(_){_.loop_counter=_.loop_count,h=[_.canvas_height],g=[_.canvas_width];for(var A=0;A<C.length&&C[A].blend!=0;A++);}var I=C[0],R=b.WebPDecodeRGBA(y,I.src_off,I.src_size,g,h);I.rgba=R,I.imgwidth=g[0],I.imgheight=h[0];for(var L=0;L<g[0]*h[0]*4;L++)m[L]=R[L];return this.width=g,this.height=h,this.data=m,this}(function(n){var t,e,s,i,r,o,a,l,c,u=function(E){return E=E||{},this.isStrokeTransparent=E.isStrokeTransparent||!1,this.strokeOpacity=E.strokeOpacity||1,this.strokeStyle=E.strokeStyle||"#000000",this.fillStyle=E.fillStyle||"#000000",this.isFillTransparent=E.isFillTransparent||!1,this.fillOpacity=E.fillOpacity||1,this.font=E.font||"10px sans-serif",this.textBaseline=E.textBaseline||"alphabetic",this.textAlign=E.textAlign||"left",this.lineWidth=E.lineWidth||1,this.lineJoin=E.lineJoin||"miter",this.lineCap=E.lineCap||"butt",this.path=E.path||[],this.transform=E.transform!==void 0?E.transform.clone():new l,this.globalCompositeOperation=E.globalCompositeOperation||"normal",this.globalAlpha=E.globalAlpha||1,this.clip_path=E.clip_path||[],this.currentPoint=E.currentPoint||new o,this.miterLimit=E.miterLimit||10,this.lastPoint=E.lastPoint||new o,this.lineDashOffset=E.lineDashOffset||0,this.lineDash=E.lineDash||[],this.margin=E.margin||[0,0,0,0],this.prevPageLastElemOffset=E.prevPageLastElemOffset||0,this.ignoreClearRect=typeof E.ignoreClearRect!="boolean"||E.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new d(this),t=this.internal.f2,e=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,r=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new u}]);var d=function(E){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var M=E;Object.defineProperty(this,"pdf",{get:function(){return M}});var B=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return B},set:function(ot){B=!!ot}});var at=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return at},set:function(ot){at=!!ot}});var pt=0;Object.defineProperty(this,"posX",{get:function(){return pt},set:function(ot){isNaN(ot)||(pt=ot)}});var nt=0;Object.defineProperty(this,"posY",{get:function(){return nt},set:function(ot){isNaN(ot)||(nt=ot)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(ot){var X;typeof ot=="number"?X=[ot,ot,ot,ot]:((X=new Array(4))[0]=ot[0],X[1]=ot.length>=2?ot[1]:X[0],X[2]=ot.length>=3?ot[2]:X[0],X[3]=ot.length>=4?ot[3]:X[1]),c.margin=X}});var ct=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ct},set:function(ot){ct=ot}});var G=0;Object.defineProperty(this,"lastBreak",{get:function(){return G},set:function(ot){G=ot}});var rt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return rt},set:function(ot){rt=ot}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(ot){ot instanceof u&&(c=ot)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(ot){c.path=ot}});var wt=[];Object.defineProperty(this,"ctxStack",{get:function(){return wt},set:function(ot){wt=ot}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ot){var X;X=f(ot),this.ctx.fillStyle=X.style,this.ctx.isFillTransparent=X.a===0,this.ctx.fillOpacity=X.a,this.pdf.setFillColor(X.r,X.g,X.b,{a:X.a}),this.pdf.setTextColor(X.r,X.g,X.b,{a:X.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ot){var X=f(ot);this.ctx.strokeStyle=X.style,this.ctx.isStrokeTransparent=X.a===0,this.ctx.strokeOpacity=X.a,X.a===0?this.pdf.setDrawColor(255,255,255):(X.a,this.pdf.setDrawColor(X.r,X.g,X.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ot){["butt","round","square"].indexOf(ot)!==-1&&(this.ctx.lineCap=ot,this.pdf.setLineCap(ot))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ot){isNaN(ot)||(this.ctx.lineWidth=ot,this.pdf.setLineWidth(ot))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ot){["bevel","round","miter"].indexOf(ot)!==-1&&(this.ctx.lineJoin=ot,this.pdf.setLineJoin(ot))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ot){isNaN(ot)||(this.ctx.miterLimit=ot,this.pdf.setMiterLimit(ot))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ot){this.ctx.textBaseline=ot}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ot){["right","end","center","left","start"].indexOf(ot)!==-1&&(this.ctx.textAlign=ot)}});var Q=null,it=null;Object.defineProperty(this,"fontFaces",{get:function(){return it},set:function(ot){Q=null,it=ot}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ot){var X;if(this.ctx.font=ot,(X=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ot))!==null){var Pt=X[1];X[2];var Tt=X[3],Nt=X[4];X[5];var _t=X[6],It=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Nt)[2];Nt=Math.floor(It==="px"?parseFloat(Nt)*this.pdf.internal.scaleFactor:It==="em"?parseFloat(Nt)*this.pdf.getFontSize():parseFloat(Nt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Nt);var kt=function(ie){var Jt,ze,He=[],oe=ie.trim();if(oe==="")return c0;if(oe in kw)return[kw[oe]];for(;oe!=="";){switch(ze=null,Jt=(oe=Sw(oe)).charAt(0)){case'"':case"'":ze=TH(oe.substring(1),Jt);break;default:ze=LH(oe)}if(ze===null||(He.push(ze[0]),(oe=Sw(ze[1]))!==""&&oe.charAt(0)!==","))return c0;oe=oe.replace(/^,/,"")}return He}(_t);if(this.fontFaces){var Ht=function(ie,Jt){if(Q===null){var ze=function(He){var oe=[];return Object.keys(He).forEach(function(ge){He[ge].forEach(function(Ue){var we=null;switch(Ue){case"bold":we={family:ge,weight:"bold"};break;case"italic":we={family:ge,style:"italic"};break;case"bolditalic":we={family:ge,weight:"bold",style:"italic"};break;case"":case"normal":we={family:ge}}we!==null&&(we.ref={name:ge,style:Ue},oe.push(we))})}),oe}(ie.getFontList());Q=function(He){for(var oe={},ge=0;ge<He.length;++ge){var Ue=l0(He[ge]),we=Ue.family,We=Ue.stretch,Me=Ue.style,Yn=Ue.weight;oe[we]=oe[we]||{},oe[we][We]=oe[we][We]||{},oe[we][We][Me]=oe[we][We][Me]||{},oe[we][We][Me][Yn]=Ue}return oe}(ze.concat(Jt))}return Q}(this.pdf,this.fontFaces),Mt=kt.map(function(ie){return{family:ie,stretch:"normal",weight:Tt,style:Pt}}),qt=function(ie,Jt,ze){for(var He=(ze=ze||{}).defaultFontFamily||"times",oe=Object.assign({},EH,ze.genericFontFamilies||{}),ge=null,Ue=null,we=0;we<Jt.length;++we)if(oe[(ge=l0(Jt[we])).family]&&(ge.family=oe[ge.family]),ie.hasOwnProperty(ge.family)){Ue=ie[ge.family];break}if(!(Ue=Ue||ie[He]))throw new Error("Could not find a font-family for the rule '"+Aw(ge)+"' and default family '"+He+"'.");if(Ue=function(We,Me){if(Me[We])return Me[We];var Yn=Rm[We],fs=Yn<=Rm.normal?-1:1,gn=Cw(Me,X7,Yn,fs);if(!gn)throw new Error("Could not find a matching font-stretch value for "+We);return gn}(ge.stretch,Ue),Ue=function(We,Me){if(Me[We])return Me[We];for(var Yn=K7[We],fs=0;fs<Yn.length;++fs)if(Me[Yn[fs]])return Me[Yn[fs]];throw new Error("Could not find a matching font-style for "+We)}(ge.style,Ue),!(Ue=function(We,Me){if(Me[We])return Me[We];if(We===400&&Me[500])return Me[500];if(We===500&&Me[400])return Me[400];var Yn=SH[We],fs=Cw(Me,Z7,Yn,We<400?-1:1);if(!fs)throw new Error("Could not find a matching font-weight for value "+We);return fs}(ge.weight,Ue)))throw new Error("Failed to resolve a font for the rule '"+Aw(ge)+"'.");return Ue}(Ht,Mt);this.pdf.setFont(qt.ref.name,qt.ref.style)}else{var Vt="";(Tt==="bold"||parseInt(Tt,10)>=700||Pt==="bold")&&(Vt="bold"),Pt==="italic"&&(Vt+="italic"),Vt.length===0&&(Vt="normal");for(var Yt="",ve={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Xt=0;Xt<kt.length;Xt++){if(this.pdf.internal.getFont(kt[Xt],Vt,{noFallback:!0,disableWarning:!0})!==void 0){Yt=kt[Xt];break}if(Vt==="bolditalic"&&this.pdf.internal.getFont(kt[Xt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Yt=kt[Xt],Vt="bold";else if(this.pdf.internal.getFont(kt[Xt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Yt=kt[Xt],Vt="normal";break}}if(Yt===""){for(var Zt=0;Zt<kt.length;Zt++)if(ve[kt[Zt]]){Yt=ve[kt[Zt]];break}}Yt=Yt===""?"Times":Yt,this.pdf.setFont(Yt,Vt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ot){this.ctx.globalCompositeOperation=ot}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ot){this.ctx.globalAlpha=ot}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ot){this.ctx.lineDashOffset=ot,lt.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ot){this.ctx.lineDash=ot,lt.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ot){this.ctx.ignoreClearRect=!!ot}})};d.prototype.setLineDash=function(E){this.lineDash=E},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){C.call(this,"fill",!1)},d.prototype.stroke=function(){C.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(E,M){if(isNaN(E)||isNaN(M))throw vn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var B=this.ctx.transform.applyToPoint(new o(E,M));this.path.push({type:"mt",x:B.x,y:B.y}),this.ctx.lastPoint=new o(E,M)},d.prototype.closePath=function(){var E=new o(0,0),M=0;for(M=this.path.length-1;M!==-1;M--)if(this.path[M].type==="begin"&&fn(this.path[M+1])==="object"&&typeof this.path[M+1].x=="number"){E=new o(this.path[M+1].x,this.path[M+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(E.x,E.y)},d.prototype.lineTo=function(E,M){if(isNaN(E)||isNaN(M))throw vn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var B=this.ctx.transform.applyToPoint(new o(E,M));this.path.push({type:"lt",x:B.x,y:B.y}),this.ctx.lastPoint=new o(B.x,B.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),C.call(this,null,!0)},d.prototype.quadraticCurveTo=function(E,M,B,at){if(isNaN(B)||isNaN(at)||isNaN(E)||isNaN(M))throw vn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var pt=this.ctx.transform.applyToPoint(new o(B,at)),nt=this.ctx.transform.applyToPoint(new o(E,M));this.path.push({type:"qct",x1:nt.x,y1:nt.y,x:pt.x,y:pt.y}),this.ctx.lastPoint=new o(pt.x,pt.y)},d.prototype.bezierCurveTo=function(E,M,B,at,pt,nt){if(isNaN(pt)||isNaN(nt)||isNaN(E)||isNaN(M)||isNaN(B)||isNaN(at))throw vn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ct=this.ctx.transform.applyToPoint(new o(pt,nt)),G=this.ctx.transform.applyToPoint(new o(E,M)),rt=this.ctx.transform.applyToPoint(new o(B,at));this.path.push({type:"bct",x1:G.x,y1:G.y,x2:rt.x,y2:rt.y,x:ct.x,y:ct.y}),this.ctx.lastPoint=new o(ct.x,ct.y)},d.prototype.arc=function(E,M,B,at,pt,nt){if(isNaN(E)||isNaN(M)||isNaN(B)||isNaN(at)||isNaN(pt))throw vn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(nt=!!nt,!this.ctx.transform.isIdentity){var ct=this.ctx.transform.applyToPoint(new o(E,M));E=ct.x,M=ct.y;var G=this.ctx.transform.applyToPoint(new o(0,B)),rt=this.ctx.transform.applyToPoint(new o(0,0));B=Math.sqrt(Math.pow(G.x-rt.x,2)+Math.pow(G.y-rt.y,2))}Math.abs(pt-at)>=2*Math.PI&&(at=0,pt=2*Math.PI),this.path.push({type:"arc",x:E,y:M,radius:B,startAngle:at,endAngle:pt,counterclockwise:nt})},d.prototype.arcTo=function(E,M,B,at,pt){throw new Error("arcTo not implemented.")},d.prototype.rect=function(E,M,B,at){if(isNaN(E)||isNaN(M)||isNaN(B)||isNaN(at))throw vn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(E,M),this.lineTo(E+B,M),this.lineTo(E+B,M+at),this.lineTo(E,M+at),this.lineTo(E,M),this.lineTo(E+B,M),this.lineTo(E,M)},d.prototype.fillRect=function(E,M,B,at){if(isNaN(E)||isNaN(M)||isNaN(B)||isNaN(at))throw vn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var pt={};this.lineCap!=="butt"&&(pt.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(pt.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(E,M,B,at),this.fill(),pt.hasOwnProperty("lineCap")&&(this.lineCap=pt.lineCap),pt.hasOwnProperty("lineJoin")&&(this.lineJoin=pt.lineJoin)}},d.prototype.strokeRect=function(E,M,B,at){if(isNaN(E)||isNaN(M)||isNaN(B)||isNaN(at))throw vn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(E,M,B,at),this.stroke())},d.prototype.clearRect=function(E,M,B,at){if(isNaN(E)||isNaN(M)||isNaN(B)||isNaN(at))throw vn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(E,M,B,at))},d.prototype.save=function(E){E=typeof E!="boolean"||E;for(var M=this.pdf.internal.getCurrentPageInfo().pageNumber,B=0;B<this.pdf.internal.getNumberOfPages();B++)this.pdf.setPage(B+1),this.pdf.internal.out("q");if(this.pdf.setPage(M),E){this.ctx.fontSize=this.pdf.internal.getFontSize();var at=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=at}},d.prototype.restore=function(E){E=typeof E!="boolean"||E;for(var M=this.pdf.internal.getCurrentPageInfo().pageNumber,B=0;B<this.pdf.internal.getNumberOfPages();B++)this.pdf.setPage(B+1),this.pdf.internal.out("Q");this.pdf.setPage(M),E&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var f=function(E){var M,B,at,pt;if(E.isCanvasGradient===!0&&(E=E.getColor()),!E)return{r:0,g:0,b:0,a:0,style:E};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(E))M=0,B=0,at=0,pt=0;else{var nt=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(E);if(nt!==null)M=parseInt(nt[1]),B=parseInt(nt[2]),at=parseInt(nt[3]),pt=1;else if((nt=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(E))!==null)M=parseInt(nt[1]),B=parseInt(nt[2]),at=parseInt(nt[3]),pt=parseFloat(nt[4]);else{if(pt=1,typeof E=="string"&&E.charAt(0)!=="#"){var ct=new z7(E);E=ct.ok?ct.toHex():"#000000"}E.length===4?(M=E.substring(1,2),M+=M,B=E.substring(2,3),B+=B,at=E.substring(3,4),at+=at):(M=E.substring(1,3),B=E.substring(3,5),at=E.substring(5,7)),M=parseInt(M,16),B=parseInt(B,16),at=parseInt(at,16)}}return{r:M,g:B,b:at,a:pt,style:E}},h=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(E,M,B,at){if(isNaN(M)||isNaN(B)||typeof E!="string")throw vn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(at=isNaN(at)?void 0:at,!h.call(this)){var pt=O(this.ctx.transform.rotation),nt=this.ctx.transform.scaleX;D.call(this,{text:E,x:M,y:B,scale:nt,angle:pt,align:this.textAlign,maxWidth:at})}},d.prototype.strokeText=function(E,M,B,at){if(isNaN(M)||isNaN(B)||typeof E!="string")throw vn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){at=isNaN(at)?void 0:at;var pt=O(this.ctx.transform.rotation),nt=this.ctx.transform.scaleX;D.call(this,{text:E,x:M,y:B,scale:nt,renderingMode:"stroke",angle:pt,align:this.textAlign,maxWidth:at})}},d.prototype.measureText=function(E){if(typeof E!="string")throw vn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var M=this.pdf,B=this.pdf.internal.scaleFactor,at=M.internal.getFontSize(),pt=M.getStringUnitWidth(E)*at/M.internal.scaleFactor;return new function(nt){var ct=(nt=nt||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ct}}),this}({width:pt*=Math.round(96*B/72*1e4)/1e4})},d.prototype.scale=function(E,M){if(isNaN(E)||isNaN(M))throw vn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var B=new l(E,0,0,M,0,0);this.ctx.transform=this.ctx.transform.multiply(B)},d.prototype.rotate=function(E){if(isNaN(E))throw vn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var M=new l(Math.cos(E),Math.sin(E),-Math.sin(E),Math.cos(E),0,0);this.ctx.transform=this.ctx.transform.multiply(M)},d.prototype.translate=function(E,M){if(isNaN(E)||isNaN(M))throw vn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var B=new l(1,0,0,1,E,M);this.ctx.transform=this.ctx.transform.multiply(B)},d.prototype.transform=function(E,M,B,at,pt,nt){if(isNaN(E)||isNaN(M)||isNaN(B)||isNaN(at)||isNaN(pt)||isNaN(nt))throw vn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ct=new l(E,M,B,at,pt,nt);this.ctx.transform=this.ctx.transform.multiply(ct)},d.prototype.setTransform=function(E,M,B,at,pt,nt){E=isNaN(E)?1:E,M=isNaN(M)?0:M,B=isNaN(B)?0:B,at=isNaN(at)?1:at,pt=isNaN(pt)?0:pt,nt=isNaN(nt)?0:nt,this.ctx.transform=new l(E,M,B,at,pt,nt)};var m=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(E,M,B,at,pt,nt,ct,G,rt){var wt=this.pdf.getImageProperties(E),Q=1,it=1,ot=1,X=1;at!==void 0&&G!==void 0&&(ot=G/at,X=rt/pt,Q=wt.width/at*G/at,it=wt.height/pt*rt/pt),nt===void 0&&(nt=M,ct=B,M=0,B=0),at!==void 0&&G===void 0&&(G=at,rt=pt),at===void 0&&G===void 0&&(G=wt.width,rt=wt.height);for(var Pt,Tt=this.ctx.transform.decompose(),Nt=O(Tt.rotate.shx),_t=new l,It=(_t=(_t=(_t=_t.multiply(Tt.translate)).multiply(Tt.skew)).multiply(Tt.scale)).applyToRectangle(new a(nt-M*ot,ct-B*X,at*Q,pt*it)),kt=b.call(this,It),Ht=[],Mt=0;Mt<kt.length;Mt+=1)Ht.indexOf(kt[Mt])===-1&&Ht.push(kt[Mt]);if(_(Ht),this.autoPaging)for(var qt=Ht[0],Vt=Ht[Ht.length-1],Yt=qt;Yt<Vt+1;Yt++){this.pdf.setPage(Yt);var ve=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Xt=Yt===1?this.posY+this.margin[0]:this.margin[0],Zt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ie=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Jt=Yt===1?0:Zt+(Yt-2)*ie;if(this.ctx.clip_path.length!==0){var ze=this.path;Pt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(Pt,this.posX+this.margin[3],-Jt+Xt+this.ctx.prevPageLastElemOffset),A.call(this,"fill",!0),this.path=ze}var He=JSON.parse(JSON.stringify(It));He=x([He],this.posX+this.margin[3],-Jt+Xt+this.ctx.prevPageLastElemOffset)[0];var oe=(Yt>qt||Yt<Vt)&&m.call(this);oe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ve,ie,null).clip().discardPath()),this.pdf.addImage(E,"JPEG",He.x,He.y,He.w,He.h,null,null,Nt),oe&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(E,"JPEG",It.x,It.y,It.w,It.h,null,null,Nt)};var b=function(E,M,B){var at=[];M=M||this.pdf.internal.pageSize.width,B=B||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var pt=this.posY+this.ctx.prevPageLastElemOffset;switch(E.type){default:case"mt":case"lt":at.push(Math.floor((E.y+pt)/B)+1);break;case"arc":at.push(Math.floor((E.y+pt-E.radius)/B)+1),at.push(Math.floor((E.y+pt+E.radius)/B)+1);break;case"qct":var nt=et(this.ctx.lastPoint.x,this.ctx.lastPoint.y,E.x1,E.y1,E.x,E.y);at.push(Math.floor((nt.y+pt)/B)+1),at.push(Math.floor((nt.y+nt.h+pt)/B)+1);break;case"bct":var ct=gt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,E.x1,E.y1,E.x2,E.y2,E.x,E.y);at.push(Math.floor((ct.y+pt)/B)+1),at.push(Math.floor((ct.y+ct.h+pt)/B)+1);break;case"rect":at.push(Math.floor((E.y+pt)/B)+1),at.push(Math.floor((E.y+E.h+pt)/B)+1)}for(var G=0;G<at.length;G+=1)for(;this.pdf.internal.getNumberOfPages()<at[G];)y.call(this);return at},y=function(){var E=this.fillStyle,M=this.strokeStyle,B=this.font,at=this.lineCap,pt=this.lineWidth,nt=this.lineJoin;this.pdf.addPage(),this.fillStyle=E,this.strokeStyle=M,this.font=B,this.lineCap=at,this.lineWidth=pt,this.lineJoin=nt},x=function(E,M,B){for(var at=0;at<E.length;at++)switch(E[at].type){case"bct":E[at].x2+=M,E[at].y2+=B;case"qct":E[at].x1+=M,E[at].y1+=B;default:E[at].x+=M,E[at].y+=B}return E},_=function(E){return E.sort(function(M,B){return M-B})},C=function(E,M){for(var B,at,pt=this.fillStyle,nt=this.strokeStyle,ct=this.lineCap,G=this.lineWidth,rt=Math.abs(G*this.ctx.transform.scaleX),wt=this.lineJoin,Q=JSON.parse(JSON.stringify(this.path)),it=JSON.parse(JSON.stringify(this.path)),ot=[],X=0;X<it.length;X++)if(it[X].x!==void 0)for(var Pt=b.call(this,it[X]),Tt=0;Tt<Pt.length;Tt+=1)ot.indexOf(Pt[Tt])===-1&&ot.push(Pt[Tt]);for(var Nt=0;Nt<ot.length;Nt++)for(;this.pdf.internal.getNumberOfPages()<ot[Nt];)y.call(this);if(_(ot),this.autoPaging)for(var _t=ot[0],It=ot[ot.length-1],kt=_t;kt<It+1;kt++){this.pdf.setPage(kt),this.fillStyle=pt,this.strokeStyle=nt,this.lineCap=ct,this.lineWidth=rt,this.lineJoin=wt;var Ht=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Mt=kt===1?this.posY+this.margin[0]:this.margin[0],qt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Vt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Yt=kt===1?0:qt+(kt-2)*Vt;if(this.ctx.clip_path.length!==0){var ve=this.path;B=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(B,this.posX+this.margin[3],-Yt+Mt+this.ctx.prevPageLastElemOffset),A.call(this,E,!0),this.path=ve}if(at=JSON.parse(JSON.stringify(Q)),this.path=x(at,this.posX+this.margin[3],-Yt+Mt+this.ctx.prevPageLastElemOffset),M===!1||kt===0){var Xt=(kt>_t||kt<It)&&m.call(this);Xt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ht,Vt,null).clip().discardPath()),A.call(this,E,M),Xt&&this.pdf.restoreGraphicsState()}this.lineWidth=G}else this.lineWidth=rt,A.call(this,E,M),this.lineWidth=G;this.path=Q},A=function(E,M){if((E!=="stroke"||M||!g.call(this))&&(E==="stroke"||M||!h.call(this))){for(var B,at,pt=[],nt=this.path,ct=0;ct<nt.length;ct++){var G=nt[ct];switch(G.type){case"begin":pt.push({begin:!0});break;case"close":pt.push({close:!0});break;case"mt":pt.push({start:G,deltas:[],abs:[]});break;case"lt":var rt=pt.length;if(nt[ct-1]&&!isNaN(nt[ct-1].x)&&(B=[G.x-nt[ct-1].x,G.y-nt[ct-1].y],rt>0)){for(;rt>=0;rt--)if(pt[rt-1].close!==!0&&pt[rt-1].begin!==!0){pt[rt-1].deltas.push(B),pt[rt-1].abs.push(G);break}}break;case"bct":B=[G.x1-nt[ct-1].x,G.y1-nt[ct-1].y,G.x2-nt[ct-1].x,G.y2-nt[ct-1].y,G.x-nt[ct-1].x,G.y-nt[ct-1].y],pt[pt.length-1].deltas.push(B);break;case"qct":var wt=nt[ct-1].x+2/3*(G.x1-nt[ct-1].x),Q=nt[ct-1].y+2/3*(G.y1-nt[ct-1].y),it=G.x+2/3*(G.x1-G.x),ot=G.y+2/3*(G.y1-G.y),X=G.x,Pt=G.y;B=[wt-nt[ct-1].x,Q-nt[ct-1].y,it-nt[ct-1].x,ot-nt[ct-1].y,X-nt[ct-1].x,Pt-nt[ct-1].y],pt[pt.length-1].deltas.push(B);break;case"arc":pt.push({deltas:[],abs:[],arc:!0}),Array.isArray(pt[pt.length-1].abs)&&pt[pt.length-1].abs.push(G)}}at=M?null:E==="stroke"?"stroke":"fill";for(var Tt=!1,Nt=0;Nt<pt.length;Nt++)if(pt[Nt].arc)for(var _t=pt[Nt].abs,It=0;It<_t.length;It++){var kt=_t[It];kt.type==="arc"?L.call(this,kt.x,kt.y,kt.radius,kt.startAngle,kt.endAngle,kt.counterclockwise,void 0,M,!Tt):K.call(this,kt.x,kt.y),Tt=!0}else if(pt[Nt].close===!0)this.pdf.internal.out("h"),Tt=!1;else if(pt[Nt].begin!==!0){var Ht=pt[Nt].start.x,Mt=pt[Nt].start.y;$.call(this,pt[Nt].deltas,Ht,Mt),Tt=!0}at&&P.call(this,at),M&&V.call(this)}},I=function(E){var M=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,B=M*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return E-B;case"top":return E+M-B;case"hanging":return E+M-2*B;case"middle":return E+M/2-B;default:return E}},R=function(E){return E+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var E=function(){};return E.colorStops=[],E.addColorStop=function(M,B){this.colorStops.push([M,B])},E.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},E.isCanvasGradient=!0,E},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var L=function(E,M,B,at,pt,nt,ct,G,rt){for(var wt=W.call(this,B,at,pt,nt),Q=0;Q<wt.length;Q++){var it=wt[Q];Q===0&&(rt?T.call(this,it.x1+E,it.y1+M):K.call(this,it.x1+E,it.y1+M)),q.call(this,E,M,it.x2,it.y2,it.x3,it.y3,it.x4,it.y4)}G?V.call(this):P.call(this,ct)},P=function(E){switch(E){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},V=function(){this.pdf.clip(),this.pdf.discardPath()},T=function(E,M){this.pdf.internal.out(e(E)+" "+s(M)+" m")},D=function(E){var M;switch(E.align){case"right":case"end":M="right";break;case"center":M="center";break;default:M="left"}var B=this.pdf.getTextDimensions(E.text),at=I.call(this,E.y),pt=R.call(this,at)-B.h,nt=this.ctx.transform.applyToPoint(new o(E.x,at)),ct=this.ctx.transform.decompose(),G=new l;G=(G=(G=G.multiply(ct.translate)).multiply(ct.skew)).multiply(ct.scale);for(var rt,wt,Q,it=this.ctx.transform.applyToRectangle(new a(E.x,at,B.w,B.h)),ot=G.applyToRectangle(new a(E.x,pt,B.w,B.h)),X=b.call(this,ot),Pt=[],Tt=0;Tt<X.length;Tt+=1)Pt.indexOf(X[Tt])===-1&&Pt.push(X[Tt]);if(_(Pt),this.autoPaging)for(var Nt=Pt[0],_t=Pt[Pt.length-1],It=Nt;It<_t+1;It++){this.pdf.setPage(It);var kt=It===1?this.posY+this.margin[0]:this.margin[0],Ht=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Mt=this.pdf.internal.pageSize.height-this.margin[2],qt=Mt-this.margin[0],Vt=this.pdf.internal.pageSize.width-this.margin[1],Yt=Vt-this.margin[3],ve=It===1?0:Ht+(It-2)*qt;if(this.ctx.clip_path.length!==0){var Xt=this.path;rt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(rt,this.posX+this.margin[3],-1*ve+kt),A.call(this,"fill",!0),this.path=Xt}var Zt=x([JSON.parse(JSON.stringify(ot))],this.posX+this.margin[3],-ve+kt+this.ctx.prevPageLastElemOffset)[0];E.scale>=.01&&(wt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(wt*E.scale),Q=this.lineWidth,this.lineWidth=Q*E.scale);var ie=this.autoPaging!=="text";if(ie||Zt.y+Zt.h<=Mt){if(ie||Zt.y>=kt&&Zt.x<=Vt){var Jt=ie?E.text:this.pdf.splitTextToSize(E.text,E.maxWidth||Vt-Zt.x)[0],ze=x([JSON.parse(JSON.stringify(it))],this.posX+this.margin[3],-ve+kt+this.ctx.prevPageLastElemOffset)[0],He=ie&&(It>Nt||It<_t)&&m.call(this);He&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Yt,qt,null).clip().discardPath()),this.pdf.text(Jt,ze.x,ze.y,{angle:E.angle,align:M,renderingMode:E.renderingMode}),He&&this.pdf.restoreGraphicsState()}}else Zt.y<Mt&&(this.ctx.prevPageLastElemOffset+=Mt-Zt.y);E.scale>=.01&&(this.pdf.setFontSize(wt),this.lineWidth=Q)}else E.scale>=.01&&(wt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(wt*E.scale),Q=this.lineWidth,this.lineWidth=Q*E.scale),this.pdf.text(E.text,nt.x+this.posX,nt.y+this.posY,{angle:E.angle,align:M,renderingMode:E.renderingMode,maxWidth:E.maxWidth}),E.scale>=.01&&(this.pdf.setFontSize(wt),this.lineWidth=Q)},K=function(E,M,B,at){B=B||0,at=at||0,this.pdf.internal.out(e(E+B)+" "+s(M+at)+" l")},$=function(E,M,B){return this.pdf.lines(E,M,B,null,null)},q=function(E,M,B,at,pt,nt,ct,G){this.pdf.internal.out([t(i(B+E)),t(r(at+M)),t(i(pt+E)),t(r(nt+M)),t(i(ct+E)),t(r(G+M)),"c"].join(" "))},W=function(E,M,B,at){for(var pt=2*Math.PI,nt=Math.PI/2;M>B;)M-=pt;var ct=Math.abs(B-M);ct<pt&&at&&(ct=pt-ct);for(var G=[],rt=at?-1:1,wt=M;ct>1e-5;){var Q=wt+rt*Math.min(ct,nt);G.push(F.call(this,E,wt,Q)),ct-=Math.abs(Q-wt),wt=Q}return G},F=function(E,M,B){var at=(B-M)/2,pt=E*Math.cos(at),nt=E*Math.sin(at),ct=pt,G=-nt,rt=ct*ct+G*G,wt=rt+ct*pt+G*nt,Q=4/3*(Math.sqrt(2*rt*wt)-wt)/(ct*nt-G*pt),it=ct-Q*G,ot=G+Q*ct,X=it,Pt=-ot,Tt=at+M,Nt=Math.cos(Tt),_t=Math.sin(Tt);return{x1:E*Math.cos(M),y1:E*Math.sin(M),x2:it*Nt-ot*_t,y2:it*_t+ot*Nt,x3:X*Nt-Pt*_t,y3:X*_t+Pt*Nt,x4:E*Math.cos(B),y4:E*Math.sin(B)}},O=function(E){return 180*E/Math.PI},et=function(E,M,B,at,pt,nt){var ct=E+.5*(B-E),G=M+.5*(at-M),rt=pt+.5*(B-pt),wt=nt+.5*(at-nt),Q=Math.min(E,pt,ct,rt),it=Math.max(E,pt,ct,rt),ot=Math.min(M,nt,G,wt),X=Math.max(M,nt,G,wt);return new a(Q,ot,it-Q,X-ot)},gt=function(E,M,B,at,pt,nt,ct,G){var rt,wt,Q,it,ot,X,Pt,Tt,Nt,_t,It,kt,Ht,Mt,qt=B-E,Vt=at-M,Yt=pt-B,ve=nt-at,Xt=ct-pt,Zt=G-nt;for(wt=0;wt<41;wt++)Nt=(Pt=(Q=E+(rt=wt/40)*qt)+rt*((ot=B+rt*Yt)-Q))+rt*(ot+rt*(pt+rt*Xt-ot)-Pt),_t=(Tt=(it=M+rt*Vt)+rt*((X=at+rt*ve)-it))+rt*(X+rt*(nt+rt*Zt-X)-Tt),wt==0?(It=Nt,kt=_t,Ht=Nt,Mt=_t):(It=Math.min(It,Nt),kt=Math.min(kt,_t),Ht=Math.max(Ht,Nt),Mt=Math.max(Mt,_t));return new a(Math.round(It),Math.round(kt),Math.round(Ht-It),Math.round(Mt-kt))},lt=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var E,M,B=(E=this.ctx.lineDash,M=this.ctx.lineDashOffset,JSON.stringify({lineDash:E,lineDashOffset:M}));this.prevLineDash!==B&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=B)}}})(re.API),function(n){var t=function(o){var a,l,c,u,d,f,h,g,m,b;for(l=[],c=0,u=(o+=a="\0\0\0\0".slice(o.length%4||4)).length;u>c;c+=4)(d=(o.charCodeAt(c)<<24)+(o.charCodeAt(c+1)<<16)+(o.charCodeAt(c+2)<<8)+o.charCodeAt(c+3))!==0?(f=(d=((d=((d=((d=(d-(b=d%85))/85)-(m=d%85))/85)-(g=d%85))/85)-(h=d%85))/85)%85,l.push(f+33,h+33,g+33,m+33,b+33)):l.push(122);return function(y,x){for(var _=x;_>0;_--)y.pop()}(l,a.length),String.fromCharCode.apply(String,l)+"~>"},e=function(o){var a,l,c,u,d,f=String,h="length",g=255,m="charCodeAt",b="slice",y="replace";for(o[b](-2),o=o[b](0,-2)[y](/\s/g,"")[y]("z","!!!!!"),c=[],u=0,d=(o+=a="uuuuu"[b](o[h]%5||5))[h];d>u;u+=5)l=52200625*(o[m](u)-33)+614125*(o[m](u+1)-33)+7225*(o[m](u+2)-33)+85*(o[m](u+3)-33)+(o[m](u+4)-33),c.push(g&l>>24,g&l>>16,g&l>>8,g&l);return function(x,_){for(var C=_;C>0;C--)x.pop()}(c,a[h]),f.fromCharCode.apply(f,c)},s=function(o){return o.split("").map(function(a){return("0"+a.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(o){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),a.test(o)===!1)return"";for(var l="",c=0;c<o.length;c+=2)l+=String.fromCharCode("0x"+(o[c]+o[c+1]));return l},r=function(o){for(var a=new Uint8Array(o.length),l=o.length;l--;)a[l]=o.charCodeAt(l);return(a=Em(a)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};n.processDataByFilters=function(o,a){var l=0,c=o||"",u=[];for(typeof(a=a||[])=="string"&&(a=[a]),l=0;l<a.length;l+=1)switch(a[l]){case"ASCII85Decode":case"/ASCII85Decode":c=e(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=i(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=s(c),u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=r(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[l]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(re.API),function(n){n.loadFile=function(t,e,s){return function(i,r,o){r=r!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,c,u){var d=new XMLHttpRequest,f=0,h=function(g){var m=g.length,b=[],y=String.fromCharCode;for(f=0;f<m;f+=1)b.push(y(255&g.charCodeAt(f)));return b.join("")};if(d.open("GET",l,!c),d.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(d.onload=function(){d.status===200?u(h(this.responseText)):u(void 0)}),d.send(null),c&&d.status===200)return h(d.responseText)}(i,r,o)}catch{}return a}(t,e,s)},n.loadImageFile=n.loadFile}(re.API),function(n){function t(){return(ke.html2canvas?Promise.resolve(ke.html2canvas):Xo(()=>import("./html2canvas.esm-BfxBtG_O.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function e(){return(ke.DOMPurify?Promise.resolve(ke.DOMPurify):Xo(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var s=function(a){var l=fn(a);return l==="undefined"?"undefined":l==="string"||a instanceof String?"string":l==="number"||a instanceof Number?"number":l==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(a,l){var c=document.createElement(a);for(var u in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[u]=l.style[u];return c},r=function a(l,c){for(var u=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),d=l.firstChild;d;d=d.nextSibling)c!==!0&&d.nodeType===1&&d.nodeName==="SCRIPT"||u.appendChild(a(d,c));return l.nodeType===1&&(l.nodeName==="CANVAS"?(u.width=l.width,u.height=l.height,u.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(u.value=l.value),u.addEventListener("load",function(){u.scrollTop=l.scrollTop,u.scrollLeft=l.scrollLeft},!0)),u},o=function a(l){var c=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),u=a.convert(Promise.resolve(),c);return(u=u.setProgress(1,a,1,[a])).set(l)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(a,l){return a.__proto__=l||o.prototype,a},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(a,l){return this.then(function(){switch(l=l||function(c){switch(s(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a),l){case"string":return this.then(e).then(function(c){return this.set({src:i("div",{innerHTML:a,dompurify:c})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},o.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=r(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(l){var c=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var h=0;h<u.length;++h){var g=u[h],m=g.src.find(function(b){return b.format==="truetype"});m&&c.addFont(m.url,g.ref.name,g.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,c.context2d.save(!0),l(this.prop.container,f)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(a,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(a,l):this.outputPdf(a,l)},o.prototype.outputPdf=function(a,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,l)})},o.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},o.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(a){if(s(a)!=="object")return this;var l=Object.keys(a||{}).map(function(c){if(c in o.template.prop)return function(){this.prop[c]=a[c]};switch(c){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[c]=a[c]}}},this);return this.then(function(){return this.thenList(l)})},o.prototype.get=function(a,l){return this.then(function(){var c=a in o.template.prop?this.prop[a]:this.opt[a];return l?l(c):c})},o.prototype.setMargin=function(a){return this.then(function(){switch(s(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},o.prototype.setPageSize=function(a){function l(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(a=a||re.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:l(a.inner.width,a.k),height:l(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},o.prototype.setProgress=function(a,l,c,u){return a!=null&&(this.progress.val=a),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(a,l,c,u){return this.setProgress(a?this.progress.val+a:null,l||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},o.prototype.then=function(a,l){var c=this;return this.thenCore(a,l,function(u,d){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(f){return c.updateProgress(null,u),f}).then(u,d).then(function(f){return c.updateProgress(1),f})})},o.prototype.thenCore=function(a,l,c){c=c||Promise.prototype.then;var u=this;a&&(a=a.bind(u)),l&&(l=l.bind(u));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?u:o.convert(Object.assign({},u),Promise.prototype),f=c.call(d,a,l);return o.convert(f,u.__proto__)},o.prototype.thenExternal=function(a,l){return Promise.prototype.then.call(this,a,l)},o.prototype.thenList=function(a){var l=this;return a.forEach(function(c){l=l.thenCore(c)}),l},o.prototype.catch=function(a){a&&(a=a.bind(this));var l=Promise.prototype.catch.call(this,a);return o.convert(l,this)},o.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},o.prototype.error=function(a){return this.then(function(){throw new Error(a)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,re.getPageSize=function(a,l,c){if(fn(a)==="object"){var u=a;a=u.orientation,l=u.unit||l,c=u.format||c}l=l||"mm",c=c||"a4",a=(""+(a||"P")).toLowerCase();var d,f=(""+c).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+l}var g,m=0,b=0;if(h.hasOwnProperty(f))m=h[f][1]/d,b=h[f][0]/d;else try{m=c[1],b=c[0]}catch{throw new Error("Invalid format: "+c)}if(a==="p"||a==="portrait")a="p",b>m&&(g=b,b=m,m=g);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",m>b&&(g=b,b=m,m=g)}return{width:b,height:m,unit:l,k:d,orientation:a}},n.html=function(a,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(l0):null;var c=new o(l);return l.worker?c:c.from(a).doCallback()}}(re.API),re.API.addJS=function(n){return Tw=n,this.internal.events.subscribe("postPutResources",function(){b1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(b1+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Ew=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Tw+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){b1!==void 0&&Ew!==void 0&&this.internal.out("/Names <</JavaScript "+b1+" 0 R>>")}),this},function(n){var t;n.events.push(["postPutResources",function(){var e=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=e.outline.render().split(/\r\n/),r=0;r<i.length;r++){var o=i[r],a=s.exec(o);if(a!=null){var l=a[1];e.internal.newObjectDeferredBegin(l,!1)}e.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,u=[];for(r=0;r<c;r++){var d=e.internal.newObject();u.push(d);var f=e.internal.getPageInfo(r+1);e.internal.write("<< /D["+f.objId+" 0 R /XYZ null null null]>> endobj")}var h=e.internal.newObject();for(e.internal.write("<< /Names [ "),r=0;r<u.length;r++)e.internal.write("(page_"+(r+1)+")"+u[r]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+h+" 0 R"),e.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var e=this;e.outline.root.children.length>0&&(e.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&e.internal.write("/Names "+t+" 0 R"))}]),n.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(s,i,r){var o={title:i,options:r,children:[]};return s==null&&(s=this.root),s.children.push(o),o},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(s){s.id=e.internal.newObjectDeferred();for(var i=0;i<s.children.length;i++)this.genIds_r(s.children[i])},e.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},e.outline.renderItems=function(s){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,r=0;r<s.children.length;r++){var o=s.children[r];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(s)),r>0&&this.line("/Prev "+this.makeRef(s.children[r-1])),r<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[r+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=e.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<s.children.length;c++)this.renderItems(s.children[c])},e.outline.line=function(s){this.ctx.val+=s+`\r
`},e.outline.makeRef=function(s){return s.id+" 0 R"},e.outline.makeString=function(s){return"("+e.internal.pdfEscape(s)+")"},e.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},e.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},e.outline.count_r=function(s,i){for(var r=0;r<i.children.length;r++)s.count++,this.count_r(s,i.children[r]);return s.count}}])}(re.API),function(n){var t=[192,193,194,195,196,197,198,199];n.processJPEG=function(e,s,i,r,o,a){var l,c=this.decode.DCT_DECODE,u=null;if(typeof e=="string"||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=o||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,l=function(d){for(var f,h=256*d.charCodeAt(4)+d.charCodeAt(5),g=d.length,m={width:0,height:0,numcomponents:1},b=4;b<g;b+=2){if(b+=h,t.indexOf(d.charCodeAt(b+1))!==-1){f=256*d.charCodeAt(b+5)+d.charCodeAt(b+6),m={width:256*d.charCodeAt(b+7)+d.charCodeAt(b+8),height:f,numcomponents:d.charCodeAt(b+9)};break}h=256*d.charCodeAt(b+2)+d.charCodeAt(b+3)}return m}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e),l.numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}u={data:e,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:s,alias:i}}return u}}(re.API),re.API.processPNG=function(n,t,e,s){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var i,r=hH(n,{checkCrc:!0}),o=r.width,a=r.height,l=r.channels,c=r.palette,u=r.depth;i=c&&l===1?function(L){for(var P=L.width,V=L.height,T=L.data,D=L.palette,K=L.depth,$=!1,q=[],W=[],F=void 0,O=!1,et=0,gt=0;gt<D.length;gt++){var lt=D3(D[gt],4),E=lt[0],M=lt[1],B=lt[2],at=lt[3];q.push(E,M,B),at!=null&&(at===0?(et++,W.length<1&&W.push(gt)):at<255&&(O=!0))}if(O||et>1){$=!0,W=void 0;var pt=P*V;F=new Uint8Array(pt);for(var nt=new DataView(T.buffer),ct=0;ct<pt;ct++){var G=u0(nt,ct,K),rt=D3(D[G],4)[3];F[ct]=rt}}else et===0&&(W=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:$?8:void 0,colorBytes:T,alphaBytes:F,needSMask:$,palette:q,mask:W}}(r):l===2||l===4?function(L){for(var P=L.data,V=L.width,T=L.height,D=L.channels,K=L.depth,$=D===2?"DeviceGray":"DeviceRGB",q=D-1,W=V*T,F=q,O=W*F,et=1*W,gt=Math.ceil(O*K/8),lt=Math.ceil(et*K/8),E=new Uint8Array(gt),M=new Uint8Array(lt),B=new DataView(P.buffer),at=new DataView(E.buffer),pt=new DataView(M.buffer),nt=!1,ct=0;ct<W;ct++){for(var G=ct*D,rt=0;rt<F;rt++)Fw(at,u0(B,G+rt,K),ct*F+rt,K);var wt=u0(B,G+F,K);wt<(1<<K)-1&&(nt=!0),Fw(pt,wt,1*ct,K)}return{colorSpace:$,colorsPerPixel:q,sMaskBitsPerComponent:nt?K:void 0,colorBytes:E,alphaBytes:M,needSMask:nt}}(r):function(L){var P=L.data,V=L.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:V,colorsPerPixel:V==="DeviceGray"?1:3,colorBytes:P instanceof Uint16Array?function(T){for(var D=T.length,K=new Uint8Array(2*D),$=new DataView(K.buffer,K.byteOffset,K.byteLength),q=0;q<D;q++)$.setUint16(2*q,T[q],!1);return K}(P):P,needSMask:!1}}(r);var d,f,h,g=i,m=g.colorSpace,b=g.colorsPerPixel,y=g.sMaskBitsPerComponent,x=g.colorBytes,_=g.alphaBytes,C=g.needSMask,A=g.palette,I=g.mask,R=null;return s!==re.API.image_compression.NONE&&typeof Em=="function"?(R=function(L){var P;switch(L){case re.API.image_compression.FAST:P=11;break;case re.API.image_compression.MEDIUM:P=13;break;case re.API.image_compression.SLOW:P=14;break;default:P=12}return P}(s),d=this.decode.FLATE_DECODE,f="/Predictor ".concat(R," /Colors ").concat(b," /BitsPerComponent ").concat(u," /Columns ").concat(o),n=Dw(x,Math.ceil(o*b*u/8),b,u,s),C&&(h=Dw(_,Math.ceil(o*y/8),1,y,s))):(d=void 0,f=void 0,n=x,C&&(h=_)),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:e,data:n,index:t,filter:d,decodeParameters:f,transparency:I,palette:A,sMask:h,predictor:R,width:o,height:a,bitsPerComponent:u,sMaskBitsPerComponent:y,colorSpace:m}}},function(n){n.processGIF89A=function(t,e,s,i){var r=new MH(t),o=r.width,a=r.height,l=[];r.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:a},u=new d0(100).encode(c,100);return n.processJPEG.call(this,u,e,s,i)},n.processGIF87A=n.processGIF89A}(re.API),Cr.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var t=0;t<n;t++){var e=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:s,blue:e,quad:r}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Cr.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[n]()}catch(e){vn.log("bit decode error:"+e)}},Cr.prototype.bit1=function(){var n,t=Math.ceil(this.width/8),e=t%4;for(n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,i=0;i<t;i++)for(var r=this.datav.getUint8(this.pos++,!0),o=s*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[r>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}e!==0&&(this.pos+=4-e)}},Cr.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),t=n%4,e=this.height-1;e>=0;e--){for(var s=this.bottom_up?e:this.height-1-e,i=0;i<n;i++){var r=this.datav.getUint8(this.pos++,!0),o=s*this.width*4+2*i*4,a=r>>4,l=15&r,c=this.palette[a];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},Cr.prototype.bit8=function(){for(var n=this.width%4,t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,s=0;s<this.width;s++){var i=this.datav.getUint8(this.pos++,!0),r=e*this.width*4+4*s;if(i<this.palette.length){var o=this.palette[i];this.data[r]=o.red,this.data[r+1]=o.green,this.data[r+2]=o.blue,this.data[r+3]=255}else this.data[r]=255,this.data[r+1]=255,this.data[r+2]=255,this.data[r+3]=255}n!==0&&(this.pos+=4-n)}},Cr.prototype.bit15=function(){for(var n=this.width%3,t=parseInt("11111",2),e=this.height-1;e>=0;e--){for(var s=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var r=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(r&t)/t*255|0,a=(r>>5&t)/t*255|0,l=(r>>10&t)/t*255|0,c=r>>15?255:0,u=s*this.width*4+4*i;this.data[u]=l,this.data[u+1]=a,this.data[u+2]=o,this.data[u+3]=c}this.pos+=n}},Cr.prototype.bit16=function(){for(var n=this.width%3,t=parseInt("11111",2),e=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var i=this.bottom_up?s:this.height-1-s,r=0;r<this.width;r++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&t)/t*255|0,l=(o>>5&e)/e*255|0,c=(o>>11)/t*255|0,u=i*this.width*4+4*r;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=a,this.data[u+3]=255}this.pos+=n}},Cr.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var t=this.bottom_up?n:this.height-1-n,e=0;e<this.width;e++){var s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*e;this.data[o]=r,this.data[o+1]=i,this.data[o+2]=s,this.data[o+3]=255}this.pos+=this.width%4}},Cr.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var t=this.bottom_up?n:this.height-1-n,e=0;e<this.width;e++){var s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*e;this.data[a]=r,this.data[a+1]=i,this.data[a+2]=s,this.data[a+3]=o}},Cr.prototype.getData=function(){return this.data},function(n){n.processBMP=function(t,e,s,i){var r=new Cr(t,!1),o=r.width,a=r.height,l={data:r.getData(),width:o,height:a},c=new d0(100).encode(l,100);return n.processJPEG.call(this,c,e,s,i)}}(re.API),Bw.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(t,e,s,i){var r=new Bw(t),o=r.width,a=r.height,l={data:r.getData(),width:o,height:a},c=new d0(100).encode(l,100);return n.processJPEG.call(this,c,e,s,i)}}(re.API),re.API.processRGBA=function(n,t,e){for(var s=n.data,i=s.length,r=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,c=0;c<i;c+=4){var u=s[c],d=s[c+1],f=s[c+2],h=s[c+3];r[a++]=u,r[a++]=d,r[a++]=f,o[l++]=h}var g=this.__addimage__.arrayBufferToBinaryString(r);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:g,index:t,alias:e,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},re.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Hc=re.API,v1=Hc.getCharWidthsArray=function(n,t){var e,s,i=(t=t||{}).font||this.internal.getFont(),r=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),a=t.widths?t.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,c=t.kerning?t.kerning:i.metadata.Unicode.kerning,u=c.fof?c.fof:1,d=t.doKerning!==!1,f=0,h=n.length,g=0,m=a[0]||l,b=[];for(e=0;e<h;e++)s=n.charCodeAt(e),typeof i.metadata.widthOfString=="function"?b.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(s))+o*(1e3/r)||0)/1e3):(f=d&&fn(c[s])==="object"&&!isNaN(parseInt(c[s][g],10))?c[s][g]/u:0,b.push((a[s]||m)/l+f)),g=s;return b},Lw=Hc.getStringUnitWidth=function(n,t){var e=(t=t||{}).fontSize||this.internal.getFontSize(),s=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return Hc.processArabic&&(n=Hc.processArabic(n)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(n,e,i)/e:v1.apply(this,arguments).reduce(function(r,o){return r+o},0)},Pw=function(n,t,e,s){for(var i=[],r=0,o=n.length,a=0;r!==o&&a+t[r]<e;)a+=t[r],r++;i.push(n.slice(0,r));var l=r;for(a=0;r!==o;)a+t[r]>s&&(i.push(n.slice(l,r)),a=0,l=r),a+=t[r],r++;return l!==r&&i.push(n.slice(l,r)),i},Iw=function(n,t,e){e||(e={});var s,i,r,o,a,l,c,u=[],d=[u],f=e.textIndent||0,h=0,g=0,m=n.split(" "),b=v1.apply(this,[" ",e])[0];if(l=e.lineIndent===-1?m[0].length+2:e.lineIndent||0){var y=Array(l).join(" "),x=[];m.map(function(C){(C=C.split(/\s*\n/)).length>1?x=x.concat(C.map(function(A,I){return(I&&A.length?`
`:"")+A})):x.push(C[0])}),m=x,l=Lw.apply(this,[y,e])}for(r=0,o=m.length;r<o;r++){var _=0;if(s=m[r],l&&s[0]==`
`&&(s=s.substr(1),_=1),f+h+(g=(i=v1.apply(this,[s,e])).reduce(function(C,A){return C+A},0))>t||_){if(g>t){for(a=Pw.apply(this,[s,i,t-(f+h),t]),u.push(a.shift()),u=[a.pop()];a.length;)d.push([a.shift()]);g=i.slice(s.length-(u[0]?u[0].length:0)).reduce(function(C,A){return C+A},0)}else u=[s];d.push(u),f=g+l,h=b}else u.push(s),f+=h+g,h=b}return c=l?function(C,A){return(A?y:"")+C.join(" ")}:function(C){return C.join(" ")},d.map(c)},Hc.splitTextToSize=function(n,t,e){var s,i=(e=e||{}).fontSize||this.internal.getFontSize(),r=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var d=this.internal.getFont(u.fontName,u.fontStyle),f="Unicode";return d.metadata[f]?{widths:d.metadata[f].widths||{0:1},kerning:d.metadata[f].kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,e);s=Array.isArray(n)?n:String(n).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/i;r.textIndent=e.textIndent?1*e.textIndent*this.internal.scaleFactor/i:0,r.lineIndent=e.lineIndent;var a,l,c=[];for(a=0,l=s.length;a<l;a++)c=c.concat(Iw.apply(this,[s[a],o,r]));return c},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var t="0123456789abcdef",e="klmnopqrstuvwxyz",s={},i={},r=0;r<16;r++)s[e[r]]=t[r],i[t[r]]=e[r];var o=function(f){return"0x"+parseInt(f,10).toString(16)},a=n.__fontmetrics__.compress=function(f){var h,g,m,b,y=["{"];for(var x in f){if(h=f[x],isNaN(parseInt(x,10))?g="'"+x+"'":(x=parseInt(x,10),g=(g=o(x).slice(2)).slice(0,-1)+i[g.slice(-1)]),typeof h=="number")h<0?(m=o(h).slice(3),b="-"):(m=o(h).slice(2),b=""),m=b+m.slice(0,-1)+i[m.slice(-1)];else{if(fn(h)!=="object")throw new Error("Don't know what to do with value type "+fn(h)+".");m=a(h)}y.push(g+m)}return y.push("}"),y.join("")},l=n.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,g,m,b,y={},x=1,_=y,C=[],A="",I="",R=f.length-1,L=1;L<R;L+=1)(b=f[L])=="'"?h?(m=h.join(""),h=void 0):h=[]:h?h.push(b):b=="{"?(C.push([_,m]),_={},m=void 0):b=="}"?((g=C.pop())[0][g[1]]=_,m=void 0,_=g[0]):b=="-"?x=-1:m===void 0?s.hasOwnProperty(b)?(A+=s[b],m=parseInt(A,16)*x,x=1,A=""):A+=b:s.hasOwnProperty(b)?(I+=s[b],_[m]=parseInt(I,16)*x,x=1,m=void 0,I=""):I+=b;return y},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(f){var h=f.font,g=d.Unicode[h.postScriptName];g&&(h.metadata.Unicode={},h.metadata.Unicode.widths=g.widths,h.metadata.Unicode.kerning=g.kerning);var m=u.Unicode[h.postScriptName];m&&(h.metadata.Unicode.encoding=m,h.encoding=m.codePages[0])}])}(re.API),function(n){var t=function(e){for(var s=e.length,i=new Uint8Array(s),r=0;r<s;r++)i[r]=e.charCodeAt(r);return i};n.API.events.push(["addFont",function(e){var s=void 0,i=e.font,r=e.instance;if(!i.isStandardFont){if(r===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(s=r.existsFileInVFS(i.postScriptName)===!1?r.loadFile(i.postScriptName):r.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?t(a):t(Z1(a)),o.metadata=n.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,s)}}])}(re),re.API.addSvgAsImage=function(n,t,e,s,i,r,o,a){if(isNaN(t)||isNaN(e))throw vn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(i))throw vn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=s,l.height=i;var c=l.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,l.width,l.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},d=this;return(ke.canvg?Promise.resolve(ke.canvg):Xo(()=>import("./index.es-BYtEJuid.js"),[])).catch(function(f){return Promise.reject(new Error("Could not load canvg: "+f))}).then(function(f){return f.default?f.default:f}).then(function(f){return f.fromString(c,n,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(f){return f.render(u)}).then(function(){d.addImage(l.toDataURL("image/jpeg",1),t,e,s,i,o,a)})},re.API.putTotalPages=function(n){var t,e=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(n,"g"),e=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),e=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var i=0;i<this.internal.pages[s].length;i++)this.internal.pages[s][i]=this.internal.pages[s][i].replace(t,e);return this},re.API.viewerPreferences=function(n,t){var e;n=n||{},t=t||!1;var s,i,r,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],c=0,u=0,d=0;function f(g,m){var b,y=!1;for(b=0;b<g.length;b+=1)g[b]===m&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),e=this.internal.viewerpreferences.configuration,n==="reset"||t===!0){var h=a.length;for(d=0;d<h;d+=1)e[a[d]].value=e[a[d]].defaultValue,e[a[d]].explicitSet=!1}if(fn(n)==="object"){for(i in n)if(r=n[i],f(a,i)&&r!==void 0){if(e[i].type==="boolean"&&typeof r=="boolean")e[i].value=r;else if(e[i].type==="name"&&f(e[i].valueSet,r))e[i].value=r;else if(e[i].type==="integer"&&Number.isInteger(r))e[i].value=r;else if(e[i].type==="array"){for(c=0;c<r.length;c+=1)if(s=!0,r[c].length===1&&typeof r[c][0]=="number")l.push(String(r[c]-1));else if(r[c].length>1){for(u=0;u<r[c].length;u+=1)typeof r[c][u]!="number"&&(s=!1);s===!0&&l.push([r[c][0]-1,r[c][1]-1].join(" "))}e[i].value="["+l.join(" ")+"]"}else e[i].value=e[i].defaultValue;e[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var g,m=[];for(g in e)e[g].explicitSet===!0&&(e[g].type==="name"?m.push("/"+g+" /"+e[g].value):m.push("/"+g+" "+e[g].value));m.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+m.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=e,this},function(n){var t=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),r=unescape(encodeURIComponent(s)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=r.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+r+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},e=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(s,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",e),this.internal.events.subscribe("postPutResources",t)),this}}(re.API),function(n){var t=n.API,e=t.pdfEscape16=function(r,o){for(var a,l=o.metadata.Unicode.widths,c=["","0","00","000","0000"],u=[""],d=0,f=r.length;d<f;++d){if(a=o.metadata.characterToGlyph(r.charCodeAt(d)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=r.charCodeAt(d),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return u.join("");a=a.toString(16),u.push(c[4-a.length],a)}return u.join("")},s=function(r){var o,a,l,c,u,d,f;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],d=0,f=(a=Object.keys(r).sort(function(h,g){return h-g})).length;d<f;d++)o=a[d],l.length>=100&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),r[o]!==void 0&&r[o]!==null&&typeof r[o].toString=="function"&&(c=("0000"+r[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+c+">"));return l.length&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),u+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(r){(function(o){var a=o.font,l=o.out,c=o.newObject,u=o.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="Identity-H"){for(var d=a.metadata.Unicode.widths,f=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),h="",g=0;g<f.length;g++)h+=String.fromCharCode(f[g]);var m=c();u({data:h,addLength1:!0,objectId:m}),l("endobj");var b=c();u({data:s(a.metadata.toUnicode),addLength1:!0,objectId:b}),l("endobj");var y=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Jc(a.fontName)),l("/FontFile2 "+m+" 0 R"),l("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var x=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+Jc(a.fontName)),l("/FontDescriptor "+y+" 0 R"),l("/W "+n.API.PDFObject.convert(d)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+b+" 0 R"),l("/BaseFont /"+Jc(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+x+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(r)}]),t.events.push(["putFont",function(r){(function(o){var a=o.font,l=o.out,c=o.newObject,u=o.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var d=a.metadata.rawData,f="",h=0;h<d.length;h++)f+=String.fromCharCode(d[h]);var g=c();u({data:f,addLength1:!0,objectId:g}),l("endobj");var m=c();u({data:s(a.metadata.toUnicode),addLength1:!0,objectId:m}),l("endobj");var b=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+g+" 0 R"),l("/Flags 96"),l("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+Jc(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var y=0;y<a.metadata.hmtx.widths.length;y++)a.metadata.hmtx.widths[y]=parseInt(a.metadata.hmtx.widths[y]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+m+" 0 R/BaseFont/"+Jc(a.fontName)+"/FontDescriptor "+b+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(r)}]);var i=function(r){var o,a=r.text||"",l=r.x,c=r.y,u=r.options||{},d=r.mutex||{},f=d.pdfEscape,h=d.activeFontKey,g=d.fonts,m=h,b="",y=0,x="",_=g[m].encoding;if(g[m].encoding!=="Identity-H")return{text:a,x:l,y:c,options:u,mutex:d};for(x=a,m=h,Array.isArray(a)&&(x=a[0]),y=0;y<x.length;y+=1)g[m].metadata.hasOwnProperty("cmap")&&(o=g[m].metadata.cmap.unicode.codeMap[x[y].charCodeAt(0)]),o||x[y].charCodeAt(0)<256&&g[m].metadata.hasOwnProperty("Unicode")?b+=x[y]:b+="";var C="";return parseInt(m.slice(1))<14||_==="WinAnsiEncoding"?C=f(b,m).split("").map(function(A){return A.charCodeAt(0).toString(16)}).join(""):_==="Identity-H"&&(C=e(b,g[m])),d.isHex=!0,{text:C,x:l,y:c,options:u,mutex:d}};t.events.push(["postProcessText",function(r){var o=r.text||"",a=[],l={text:o,x:r.x,y:r.y,options:r.options,mutex:r.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&o[c].length===3?a.push([i(Object.assign({},l,{text:o[c][0]})).text,o[c][1],o[c][2]]):a.push(i(Object.assign({},l,{text:o[c]})).text);r.text=a}else r.text=i(Object.assign({},l,{text:o})).text}])}(re),function(n){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0},n.addFileToVFS=function(e,s){return t.call(this),this.internal.vFS[e]=s,this},n.getFileFromVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0?this.internal.vFS[e]:null}}(re.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(s){var i,r,o,a,l,c,u,d=t,f=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},m={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},b=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),x=!1,_=0;this.__bidiEngine__={};var C=function(T){var D=T.charCodeAt(),K=D>>8,$=m[K];return $!==void 0?d[256*$+(255&D)]:K===252||K===253?"AL":y.test(K)?"L":K===8?"R":"N"},A=function(T){for(var D,K=0;K<T.length;K++){if((D=C(T.charAt(K)))==="L")return!1;if(D==="R")return!0}return!1},I=function(T,D,K,$){var q,W,F,O,et=D[$];switch(et){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":x=!1;break;case"N":case"AN":break;case"EN":x&&(et="AN");break;case"AL":x=!0,et="R";break;case"WS":case"BN":et="N";break;case"CS":$<1||$+1>=D.length||(q=K[$-1])!=="EN"&&q!=="AN"||(W=D[$+1])!=="EN"&&W!=="AN"?et="N":x&&(W="AN"),et=W===q?W:"N";break;case"ES":et=(q=$>0?K[$-1]:"B")==="EN"&&$+1<D.length&&D[$+1]==="EN"?"EN":"N";break;case"ET":if($>0&&K[$-1]==="EN"){et="EN";break}if(x){et="N";break}for(F=$+1,O=D.length;F<O&&D[F]==="ET";)F++;et=F<O&&D[F]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(O=D.length,F=$+1;F<O&&D[F]==="NSM";)F++;if(F<O){var gt=T[$],lt=gt>=1425&&gt<=2303||gt===64286;if(q=D[F],lt&&(q==="R"||q==="AL")){et="R";break}}}et=$<1||(q=D[$-1])==="B"?"N":K[$-1];break;case"B":x=!1,i=!0,et=_;break;case"S":r=!0,et="N"}return et},R=function(T,D,K){var $=T.split("");return K&&L($,K,{hiLevel:_}),$.reverse(),D&&D.reverse(),$.join("")},L=function(T,D,K){var $,q,W,F,O,et=-1,gt=T.length,lt=0,E=[],M=_?h:f,B=[];for(x=!1,i=!1,r=!1,q=0;q<gt;q++)B[q]=C(T[q]);for(W=0;W<gt;W++){if(O=lt,E[W]=I(T,B,E,W),$=240&(lt=M[O][g[E[W]]]),lt&=15,D[W]=F=M[lt][5],$>0)if($===16){for(q=et;q<W;q++)D[q]=1;et=-1}else et=-1;if(M[lt][6])et===-1&&(et=W);else if(et>-1){for(q=et;q<W;q++)D[q]=F;et=-1}B[W]==="B"&&(D[W]=0),K.hiLevel|=F}r&&function(at,pt,nt){for(var ct=0;ct<nt;ct++)if(at[ct]==="S"){pt[ct]=_;for(var G=ct-1;G>=0&&at[G]==="WS";G--)pt[G]=_}}(B,D,gt)},P=function(T,D,K,$,q){if(!(q.hiLevel<T)){if(T===1&&_===1&&!i)return D.reverse(),void(K&&K.reverse());for(var W,F,O,et,gt=D.length,lt=0;lt<gt;){if($[lt]>=T){for(O=lt+1;O<gt&&$[O]>=T;)O++;for(et=lt,F=O-1;et<F;et++,F--)W=D[et],D[et]=D[F],D[F]=W,K&&(W=K[et],K[et]=K[F],K[F]=W);lt=O}lt++}}},V=function(T,D,K){var $=T.split(""),q={hiLevel:_};return K||(K=[]),L($,K,q),function(W,F,O){if(O.hiLevel!==0&&u)for(var et,gt=0;gt<W.length;gt++)F[gt]===1&&(et=b.indexOf(W[gt]))>=0&&(W[gt]=b[et+1])}($,K,q),P(2,$,D,K,q),P(1,$,D,K,q),$.join("")};return this.__bidiEngine__.doBidiReorder=function(T,D,K){if(function(q,W){if(W)for(var F=0;F<q.length;F++)W[F]=F;a===void 0&&(a=A(q)),c===void 0&&(c=A(q))}(T,D),o||!l||c)if(o&&l&&a^c)_=a?1:0,T=R(T,D,K);else if(!o&&l&&c)_=a?1:0,T=V(T,D,K),T=R(T,D);else if(!o||a||l||c){if(o&&!l&&a^c)T=R(T,D),a?(_=0,T=V(T,D,K)):(_=1,T=V(T,D,K),T=R(T,D));else if(o&&a&&!l&&c)_=1,T=V(T,D,K),T=R(T,D);else if(!o&&!l&&a^c){var $=u;a?(_=1,T=V(T,D,K),_=0,u=!1,T=V(T,D,K),u=$):(_=0,T=V(T,D,K),T=R(T,D),_=1,u=!1,T=V(T,D,K),u=$,T=R(T,D))}}else _=0,T=V(T,D,K);else _=a?1:0,T=V(T,D,K);return T},this.__bidiEngine__.setOptions=function(T){T&&(o=T.isInputVisual,l=T.isOutputVisual,a=T.isInputRtl,c=T.isOutputRtl,u=T.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],e=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(s){var i=s.text;s.x,s.y;var r=s.options||{};s.mutex,r.lang;var o=[];if(r.isInputVisual=typeof r.isInputVisual!="boolean"||r.isInputVisual,e.setOptions(r),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([e.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([e.doBidiReorder(i[a])]);s.text=o}else s.text=e.doBidiReorder(i);e.setOptions({isInputVisual:!0})}])}(re),re.API.TTFFont=function(){function n(t){var e;if(this.rawData=t,e=this.contents=new Wa(t),this.contents.pos=4,e.readString(4)==="ttcf")throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new YH(this),this.registerTTF()}return n.open=function(t){return new n(t)},n.prototype.parse=function(){return this.directory=new RH(this.contents),this.head=new OH(this),this.name=new UH(this),this.cmap=new Q7(this),this.toUnicode={},this.hhea=new FH(this),this.maxp=new zH(this),this.hmtx=new HH(this),this.post=new BH(this),this.os2=new $H(this),this.loca=new GH(this),this.glyf=new VH(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var t,e,s,i,r;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,c;for(c=[],o=0,a=(l=this.bbox).length;o<a;o++)t=l[o],c.push(Math.round(t*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(s=255&(i=this.post.italic_angle),32768&(e=i>>16)&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(r=this.familyClass)===1||r===2||r===3||r===4||r===5||r===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(t){var e;return((e=this.cmap.unicode)!=null?e.codeMap[t]:void 0)||0},n.prototype.widthOfGlyph=function(t){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*e},n.prototype.widthOfString=function(t,e,s){var i,r,o,a;for(o=0,r=0,a=(t=""+t).length;0<=a?r<a:r>a;r=0<=a?++r:--r)i=t.charCodeAt(r),o+=this.widthOfGlyph(this.characterToGlyph(i))+s*(1e3/e)||0;return o*(e/1e3)},n.prototype.lineHeight=function(t,e){var s;return e==null&&(e=!1),s=e?this.lineGap:0,(this.ascender+s-this.decender)/1e3*t},n}();var Fr,Wa=function(){function n(t){this.data=t??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(t){return this.data[this.pos++]=t},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},n.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},n.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},n.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},n.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},n.prototype.readString=function(t){var e,s;for(s=[],e=0;0<=t?e<t:e>t;e=0<=t?++e:--e)s[e]=String.fromCharCode(this.readByte());return s.join("")},n.prototype.writeString=function(t){var e,s,i;for(i=[],e=0,s=t.length;0<=s?e<s:e>s;e=0<=s?++e:--e)i.push(this.writeByte(t.charCodeAt(e)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(t){return this.writeInt16(t)},n.prototype.readLongLong=function(){var t,e,s,i,r,o,a,l;return t=this.readByte(),e=this.readByte(),s=this.readByte(),i=this.readByte(),r=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^e)+1099511627776*(255^s)+4294967296*(255^i)+16777216*(255^r)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*t+281474976710656*e+1099511627776*s+4294967296*i+16777216*r+65536*o+256*a+l},n.prototype.writeLongLong=function(t){var e,s;return e=Math.floor(t/4294967296),s=4294967295&t,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(t){return this.writeInt32(t)},n.prototype.read=function(t){var e,s;for(e=[],s=0;0<=t?s<t:s>t;s=0<=t?++s:--s)e.push(this.readByte());return e},n.prototype.write=function(t){var e,s,i,r;for(r=[],s=0,i=t.length;s<i;s++)e=t[s],r.push(this.writeByte(e));return r},n}(),RH=function(){var n;function t(e){var s,i,r;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},i=0,r=this.tableCount;0<=r?i<r:i>r;i=0<=r?++i:--i)s={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[s.tag]=s}return t.prototype.encode=function(e){var s,i,r,o,a,l,c,u,d,f,h,g,m;for(m in h=Object.keys(e).length,l=Math.log(2),d=16*Math.floor(Math.log(h)/l),o=Math.floor(d/l),u=16*h-d,(i=new Wa).writeInt(this.scalarType),i.writeShort(h),i.writeShort(d),i.writeShort(o),i.writeShort(u),r=16*h,c=i.pos+r,a=null,g=[],e)for(f=e[m],i.writeString(m),i.writeInt(n(f)),i.writeInt(c),i.writeInt(f.length),g=g.concat(f),m==="head"&&(a=c),c+=f.length;c%4;)g.push(0),c++;return i.write(g),s=2981146554-n(i.data),i.pos=a+8,i.writeUInt32(s),i.data},n=function(e){var s,i,r,o;for(e=tx.call(e);e.length%4;)e.push(0);for(r=new Wa(e),i=0,s=0,o=e.length;s<o;s=s+=4)i+=r.readUInt32();return 4294967295&i},t}(),NH={}.hasOwnProperty,ho=function(n,t){for(var e in t)NH.call(t,e)&&(n[e]=t[e]);function s(){this.constructor=n}return s.prototype=t.prototype,n.prototype=new s,n.__super__=t.prototype,n};Fr=function(){function n(t){var e;this.file=t,e=this.file.directory.tables[this.tag],this.exists=!!e,e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var OH=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ho(n,Fr),n.prototype.tag="head",n.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},n.prototype.encode=function(t){var e;return(e=new Wa).writeInt(this.version),e.writeInt(this.revision),e.writeInt(this.checkSumAdjustment),e.writeInt(this.magicNumber),e.writeShort(this.flags),e.writeShort(this.unitsPerEm),e.writeLongLong(this.created),e.writeLongLong(this.modified),e.writeShort(this.xMin),e.writeShort(this.yMin),e.writeShort(this.xMax),e.writeShort(this.yMax),e.writeShort(this.macStyle),e.writeShort(this.lowestRecPPEM),e.writeShort(this.fontDirectionHint),e.writeShort(t),e.writeShort(this.glyphDataFormat),e.data},n}(),jw=function(){function n(t,e){var s,i,r,o,a,l,c,u,d,f,h,g,m,b,y,x,_;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=e+t.readInt(),d=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=t.readByte();break;case 4:for(h=t.readUInt16(),f=h/2,t.pos+=6,r=function(){var C,A;for(A=[],l=C=0;0<=f?C<f:C>f;l=0<=f?++C:--C)A.push(t.readUInt16());return A}(),t.pos+=2,m=function(){var C,A;for(A=[],l=C=0;0<=f?C<f:C>f;l=0<=f?++C:--C)A.push(t.readUInt16());return A}(),c=function(){var C,A;for(A=[],l=C=0;0<=f?C<f:C>f;l=0<=f?++C:--C)A.push(t.readUInt16());return A}(),u=function(){var C,A;for(A=[],l=C=0;0<=f?C<f:C>f;l=0<=f?++C:--C)A.push(t.readUInt16());return A}(),i=(this.length-t.pos+this.offset)/2,a=function(){var C,A;for(A=[],l=C=0;0<=i?C<i:C>i;l=0<=i?++C:--C)A.push(t.readUInt16());return A}(),l=y=0,_=r.length;y<_;l=++y)for(b=r[l],s=x=g=m[l];g<=b?x<=b:x>=b;s=g<=b?++x:--x)u[l]===0?o=s+c[l]:(o=a[u[l]/2+(s-g)-(f-l)]||0)!==0&&(o+=c[l]),this.codeMap[s]=65535&o}t.pos=d}return n.encode=function(t,e){var s,i,r,o,a,l,c,u,d,f,h,g,m,b,y,x,_,C,A,I,R,L,P,V,T,D,K,$,q,W,F,O,et,gt,lt,E,M,B,at,pt,nt,ct,G,rt,wt,Q;switch($=new Wa,o=Object.keys(t).sort(function(it,ot){return it-ot}),e){case"macroman":for(m=0,b=function(){var it=[];for(g=0;g<256;++g)it.push(0);return it}(),x={0:0},r={},q=0,et=o.length;q<et;q++)x[G=t[i=o[q]]]==null&&(x[G]=++m),r[i]={old:t[i],new:x[t[i]]},b[i]=x[t[i]];return $.writeUInt16(1),$.writeUInt16(0),$.writeUInt32(12),$.writeUInt16(0),$.writeUInt16(262),$.writeUInt16(0),$.write(b),{charMap:r,subtable:$.data,maxGlyphID:m+1};case"unicode":for(D=[],d=[],_=0,x={},s={},y=c=null,W=0,gt=o.length;W<gt;W++)x[A=t[i=o[W]]]==null&&(x[A]=++_),s[i]={old:A,new:x[A]},a=x[A]-i,y!=null&&a===c||(y&&d.push(y),D.push(i),c=a),y=i;for(y&&d.push(y),d.push(65535),D.push(65535),V=2*(P=D.length),L=2*Math.pow(Math.log(P)/Math.LN2,2),f=Math.log(L/2)/Math.LN2,R=2*P-L,l=[],I=[],h=[],g=F=0,lt=D.length;F<lt;g=++F){if(T=D[g],u=d[g],T===65535){l.push(0),I.push(0);break}if(T-(K=s[T].new)>=32768)for(l.push(0),I.push(2*(h.length+P-g)),i=O=T;T<=u?O<=u:O>=u;i=T<=u?++O:--O)h.push(s[i].new);else l.push(K-T),I.push(0)}for($.writeUInt16(3),$.writeUInt16(1),$.writeUInt32(12),$.writeUInt16(4),$.writeUInt16(16+8*P+2*h.length),$.writeUInt16(0),$.writeUInt16(V),$.writeUInt16(L),$.writeUInt16(f),$.writeUInt16(R),nt=0,E=d.length;nt<E;nt++)i=d[nt],$.writeUInt16(i);for($.writeUInt16(0),ct=0,M=D.length;ct<M;ct++)i=D[ct],$.writeUInt16(i);for(rt=0,B=l.length;rt<B;rt++)a=l[rt],$.writeUInt16(a);for(wt=0,at=I.length;wt<at;wt++)C=I[wt],$.writeUInt16(C);for(Q=0,pt=h.length;Q<pt;Q++)m=h[Q],$.writeUInt16(m);return{charMap:s,subtable:$.data,maxGlyphID:_+1}}},n}(),Q7=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ho(n,Fr),n.prototype.tag="cmap",n.prototype.parse=function(t){var e,s,i;for(t.pos=this.offset,this.version=t.readUInt16(),i=t.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)e=new jw(t,this.offset),this.tables.push(e),e.isUnicode&&this.unicode==null&&(this.unicode=e);return!0},n.encode=function(t,e){var s,i;return e==null&&(e="macroman"),s=jw.encode(t,e),(i=new Wa).writeUInt16(0),i.writeUInt16(1),s.table=i.data.concat(s.subtable),s},n}(),FH=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ho(n,Fr),n.prototype.tag="hhea",n.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},n}(),$H=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ho(n,Fr),n.prototype.tag="OS/2",n.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var e,s;for(s=[],e=0;e<10;++e)s.push(t.readByte());return s}(),this.charRange=function(){var e,s;for(s=[],e=0;e<4;++e)s.push(t.readInt());return s}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var e,s;for(s=[],e=0;e<2;e=++e)s.push(t.readInt());return s}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},n}(),BH=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ho(n,Fr),n.prototype.tag="post",n.prototype.parse=function(t){var e,s,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var r;for(s=t.readUInt16(),this.glyphNameIndex=[],r=0;0<=s?r<s:r>s;r=0<=s?++r:--r)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)e=t.readByte(),i.push(this.names.push(t.readString(e)));return i;case 151552:return s=t.readUInt16(),this.offsets=t.read(s);case 262144:return this.map=(function(){var o,a,l;for(l=[],r=o=0,a=this.file.maxp.numGlyphs;0<=a?o<a:o>a;r=0<=a?++o:--o)l.push(t.readUInt32());return l}).call(this)}},n}(),jH=function(n,t){this.raw=n,this.length=n.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},UH=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ho(n,Fr),n.prototype.tag="name",n.prototype.parse=function(t){var e,s,i,r,o,a,l,c,u,d,f;for(t.pos=this.offset,t.readShort(),e=t.readShort(),a=t.readShort(),s=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)s.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+a+t.readShort()});for(l={},r=u=0,d=s.length;u<d;r=++u)i=s[r],t.pos=i.offset,c=t.readString(i.length),o=new jH(c,i),l[f=i.nameID]==null&&(l[f]=[]),l[i.nameID].push(o);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},n}(),zH=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ho(n,Fr),n.prototype.tag="maxp",n.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},n}(),HH=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ho(n,Fr),n.prototype.tag="hmtx",n.prototype.parse=function(t){var e,s,i,r,o,a,l;for(t.pos=this.offset,this.metrics=[],e=0,a=this.file.hhea.numberOfMetrics;0<=a?e<a:e>a;e=0<=a?++e:--e)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,u;for(u=[],e=c=0;0<=i?c<i:c>i;e=0<=i?++c:--c)u.push(t.readInt16());return u}(),this.widths=(function(){var c,u,d,f;for(f=[],c=0,u=(d=this.metrics).length;c<u;c++)r=d[c],f.push(r.advance);return f}).call(this),s=this.widths[this.widths.length-1],l=[],e=o=0;0<=i?o<i:o>i;e=0<=i?++o:--o)l.push(this.widths.push(s));return l},n.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},n}(),tx=[].slice,VH=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ho(n,Fr),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(t){var e,s,i,r,o,a,l,c,u,d;return t in this.cache?this.cache[t]:(r=this.file.loca,e=this.file.contents,s=r.indexOf(t),(i=r.lengthOf(t))===0?this.cache[t]=null:(e.pos=this.offset+s,o=(a=new Wa(e.read(i))).readShort(),c=a.readShort(),d=a.readShort(),l=a.readShort(),u=a.readShort(),this.cache[t]=o===-1?new WH(a,c,d,l,u):new qH(a,o,c,d,l,u),this.cache[t]))},n.prototype.encode=function(t,e,s){var i,r,o,a,l;for(o=[],r=[],a=0,l=e.length;a<l;a++)i=t[e[a]],r.push(o.length),i&&(o=o.concat(i.encode(s)));return r.push(o.length),{table:o,offsets:r}},n}(),qH=function(){function n(t,e,s,i,r,o){this.raw=t,this.numberOfContours=e,this.xMin=s,this.yMin=i,this.xMax=r,this.yMax=o,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),WH=function(){function n(t,e,s,i,r){var o,a;for(this.raw=t,this.xMin=e,this.yMin=s,this.xMax=i,this.yMax=r,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return n.prototype.encode=function(){var t,e,s;for(e=new Wa(tx.call(this.raw.data)),t=0,s=this.glyphIDs.length;t<s;++t)e.pos=this.glyphOffsets[t];return e.data},n}(),GH=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ho(n,Fr),n.prototype.tag="loca",n.prototype.parse=function(t){var e,s;return t.pos=this.offset,e=this.file.head.indexToLocFormat,this.offsets=e===0?(function(){var i,r;for(r=[],s=0,i=this.length;s<i;s+=2)r.push(2*t.readUInt16());return r}).call(this):(function(){var i,r;for(r=[],s=0,i=this.length;s<i;s+=4)r.push(t.readUInt32());return r}).call(this)},n.prototype.indexOf=function(t){return this.offsets[t]},n.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},n.prototype.encode=function(t,e){for(var s=new Uint32Array(this.offsets.length),i=0,r=0,o=0;o<s.length;++o)if(s[o]=i,r<e.length&&e[r]==o){++r,s[o]=i;var a=this.offsets[o],l=this.offsets[o+1]-a;l>0&&(i+=l)}for(var c=new Array(4*s.length),u=0;u<s.length;++u)c[4*u+3]=255&s[u],c[4*u+2]=(65280&s[u])>>8,c[4*u+1]=(16711680&s[u])>>16,c[4*u]=(4278190080&s[u])>>24;return c},n}(),YH=function(){function n(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var t,e,s,i,r;for(e in i=this.font.cmap.tables[0].codeMap,t={},r=this.subset)s=r[e],t[e]=i[s];return t},n.prototype.glyphsFor=function(t){var e,s,i,r,o,a,l;for(i={},o=0,a=t.length;o<a;o++)i[r=t[o]]=this.font.glyf.glyphFor(r);for(r in e=[],i)(s=i[r])!=null&&s.compound&&e.push.apply(e,s.glyphIDs);if(e.length>0)for(r in l=this.glyphsFor(e))s=l[r],i[r]=s;return i},n.prototype.encode=function(t,e){var s,i,r,o,a,l,c,u,d,f,h,g,m,b,y;for(i in s=Q7.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),h={0:0},y=s.charMap)h[(l=y[i]).old]=l.new;for(g in f=s.maxGlyphID,o)g in h||(h[g]=f++);return u=function(x){var _,C;for(_ in C={},x)C[x[_]]=_;return C}(h),d=Object.keys(u).sort(function(x,_){return x-_}),m=function(){var x,_,C;for(C=[],x=0,_=d.length;x<_;x++)a=d[x],C.push(u[a]);return C}(),r=this.font.glyf.encode(o,m,h),c=this.font.loca.encode(r.offsets,m),b={cmap:this.font.cmap.raw(),glyf:r.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(b["OS/2"]=this.font.os2.raw()),this.font.directory.encode(b)},n}();re.API.PDFObject=function(){var n;function t(){}return n=function(e,s){return(Array(s+1).join("0")+e).slice(-s)},t.convert=function(e){var s,i,r,o;if(Array.isArray(e))return"["+function(){var a,l,c;for(c=[],a=0,l=e.length;a<l;a++)s=e[a],c.push(t.convert(s));return c}().join(" ")+"]";if(typeof e=="string")return"/"+e;if(e?.isString)return"("+e+")";if(e instanceof Date)return"(D:"+n(e.getUTCFullYear(),4)+n(e.getUTCMonth(),2)+n(e.getUTCDate(),2)+n(e.getUTCHours(),2)+n(e.getUTCMinutes(),2)+n(e.getUTCSeconds(),2)+"Z)";if({}.toString.call(e)==="[object Object]"){for(i in r=["<<"],e)o=e[i],r.push("/"+i+" "+t.convert(o));return r.push(">>"),r.join(`
`)}return""+e},t}();const KH={class:"min-h-screen p-3 rounded-lg font-poppins"},XH={class:"min-h-screen font-poppins lg:flex"},ZH={class:"w-full lg:w-1/4 bg-white rounded-lg shadow p-6 flex flex-col items-center hidden lg:flex"},JH={class:"text-xl font-semibold mb-6"},QH={class:"w-full flex items-center justify-center gap-6 mb-6 relative"},tV={class:"relative"},eV={class:"absolute -top-2 -right-2 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-customButton rounded-full"},nV={class:"relative"},sV={class:"absolute -top-2 -right-2 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-customButton rounded-full"},iV={class:"w-full flex flex-col gap-3"},rV={class:"w-full lg:w-3/4 lg:pl-6 flex flex-col gap-6"},oV={class:"bg-white p-4 rounded-lg"},aV={class:"space-y-6"},lV={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},cV={class:"border rounded p-4 space-y-4 relative"},uV={class:"border rounded p-4 space-y-4 relative"},dV={class:"relative border rounded p-3 rounded-lg"},hV={class:"border rounded p-4 space-y-4 relative"},fV={class:"flex justify-between items-center"},pV={key:0,class:"border p-3 rounded space-y-3 mt-3"},gV=["onClick"],mV={class:"border rounded p-4 space-y-4 relative"},bV={class:"flex justify-between items-center"},vV={key:0,class:"border p-3 rounded space-y-3 mt-3"},yV=["disabled"],wV=["onClick"],_V={key:0},xV={class:"border rounded p-4 space-y-3"},CV={class:"flex gap-2"},kV={class:"flex flex-wrap gap-2 mt-2"},AV=["onClick"],SV={class:"border rounded p-4 space-y-3"},EV={key:0},TV={class:"text-gray-800"},LV={key:1,class:"text-gray-500 text-sm"},PV={key:0,class:"fixed inset-0 flex items-center justify-center bg-opacity-50 z-50"},IV={class:"bg-white rounded-lg shadow-lg max-w-4xl w-full relative"},DV={class:"p-4"},MV=["src"],RV={class:"mt-4 flex justify-end"},NV=["href"],OV={class:"toast toast-end toast-top z-50"},FV={__name:"ResumeEditorpage",setup(n){const t=ut(!1),e=ut(null),s=ut(""),i=gi(),r=ut(""),o=ut(0),a=ut(0),l=ut([]),c=ut(!1),u=ws({jobTitle:"",companyName:"",companyAddress:"",startYear:new Date().getFullYear(),endYear:new Date().getFullYear()}),d=ut(!1),f=ws({educationLevel:"",major:"",institutionName:"",institutionAddress:"",graduationYear:null}),h=ws({summary:"",experience:[],education:[],skills:[],url:""}),g=ws({firstName:"",middleName:"",lastName:"",emailAddress:"",phoneNumber:"",address:""});async function m(){try{const F=localStorage.getItem("token");if(!F)return;const et=(await At.get("https://pathfinder-development-production.up.railway.app/api/registrations",{headers:{Authorization:`Bearer ${F}`}})).data||[];let gt=0,lt=0;const E=new Date().getTime();et.forEach(M=>{const B=(M.registrationStatus||"").toLowerCase(),at=M.end_time?E>new Date(M.end_time).getTime():!1;B==="completed"||at?lt++:["upcoming","registered"].includes(B)&&gt++}),o.value=gt,a.value=lt}catch(F){console.error(" Error fetching training counters:",F)}}async function b(){try{const F=localStorage.getItem("token"),O=await At.post("https://pathfinder-development-production.up.railway.app/api/resume",{summary:h.summary,professionalLink:h.url},{headers:{Authorization:`Bearer ${F}`}});h.resumeID=O.data.resumeID,y("Resume saved successfully!")}catch(F){console.error("Error saving resume:",F.response?.data||F),y("Failed to save resume.")}}function y(F,O="info"){const et=Date.now();l.value.push({id:et,message:F,type:O}),setTimeout(()=>{l.value=l.value.filter(gt=>gt.id!==et)},3e3)}async function x(){try{const F=localStorage.getItem("token"),{data:O}=await At.get("https://pathfinder-development-production.up.railway.app/api/resume",{headers:{Authorization:`Bearer ${F}`}});O&&(h.summary=O.summary||"",h.url=O.professionalLink||"",h.resumeID=O.resumeID);const{data:et}=await At.get("https://pathfinder-development-production.up.railway.app/api/experiences",{headers:{Authorization:`Bearer ${F}`}});h.experience=et||[],await C(),await L(h.resumeID)}catch(F){console.error("Error loading resume:",F.response?.data||F)}}async function _(){try{const F=localStorage.getItem("token");if(console.log("Sending education:",{...f,resumeID:h.resumeID}),!h.resumeID){const et=await At.post("https://pathfinder-development-production.up.railway.app/api/resume",{summary:h.summary||"",professionalLink:h.url||""},{headers:{Authorization:`Bearer ${F}`}});h.resumeID=et.data.resumeID}const{data:O}=await At.post("https://pathfinder-development-production.up.railway.app/api/education",{...f,resumeID:h.resumeID},{headers:{Authorization:`Bearer ${F}`}});h.education.push(O),Object.keys(f).forEach(et=>{et==="graduationYear"?f[et]=null:f[et]=""}),d.value=!1,y("Education added successfully!")}catch(F){console.error("Error adding education:",F.response?.data||F),y("Failed to add education.")}}async function C(){try{const F=localStorage.getItem("token"),O=h.resumeID||localStorage.getItem("resumeID"),{data:et}=await At.get(`https://pathfinder-development-production.up.railway.app/api/education?resumeID=${O}`,{headers:{Authorization:`Bearer ${F}`}});h.education=et||[],console.log(" Education Data Loaded:",h.education)}catch(F){console.error(" Error loading education:",F.response?.data||F)}}async function A(F){try{const O=localStorage.getItem("token"),et=h.education[F];et.educationID&&await At.delete(`https://pathfinder-development-production.up.railway.app/api/education/${et.educationID}`,{headers:{Authorization:`Bearer ${O}`}}),h.education.splice(F,1)}catch(O){console.error("Error deleting education:",O.response?.data||O),y("Failed to delete education.")}}async function I(){if(!u.jobTitle.trim()||!u.companyName.trim()||!u.companyAddress.trim()){y("Please fill out all fields before adding experience.");return}try{const F=localStorage.getItem("token");if(!h.resumeID){const et=await At.post("https://pathfinder-development-production.up.railway.app/api/resume",{summary:h.summary||"",professionalLink:h.url||""},{headers:{Authorization:`Bearer ${F}`}});h.resumeID=et.data.resumeID}const{data:O}=await At.post("https://pathfinder-development-production.up.railway.app/api/experiences",{...u,startYear:`${u.startYear}-01-01`,endYear:`${u.endYear}-01-01`,resumeID:h.resumeID},{headers:{Authorization:`Bearer ${F}`}});h.experience.push(O),Object.assign(u,{jobTitle:"",companyName:"",companyAddress:"",startYear:new Date().getFullYear(),endYear:new Date().getFullYear()}),c.value=!1,y("Experience added successfully!")}catch(F){console.error("Error adding experience:",F.response?.data||F),y("Failed to add experience.")}}async function R(F){try{const O=localStorage.getItem("token"),et=h.experience[F];et.experienceID&&await At.delete(`https://pathfinder-development-production.up.railway.app/api/experiences/${et.experienceID}`,{headers:{Authorization:`Bearer ${O}`}}),h.experience.splice(F,1)}catch(O){console.error("Error deleting experience:",O.response?.data||O),y("Failed to delete experience.")}}async function L(F){try{const O=localStorage.getItem("token"),{data:et}=await At.get(`https://pathfinder-development-production.up.railway.app/api/skills/${F}`,{headers:{Authorization:`Bearer ${O}`}});h.skills=et||[],console.log(" Skills Loaded:",h.skills)}catch(O){console.error("Error loading skills:",O.response?.data||O)}}async function P(){if(s.value.trim())try{const F=localStorage.getItem("token");if(!h.resumeID){y("Please save your resume first before adding skills.");return}const{data:O}=await At.post("https://pathfinder-development-production.up.railway.app/api/skills",{skillName:s.value.trim(),resumeID:h.resumeID},{headers:{Authorization:`Bearer ${F}`}});h.skills.push(O),s.value=""}catch(F){console.error("Error adding skill:",F.response?.data||F)}}async function V(F){try{const O=localStorage.getItem("token"),et=h.skills[F];et.skillID&&await At.delete(`https://pathfinder-development-production.up.railway.app/api/skills/${et.skillID}`,{headers:{Authorization:`Bearer ${O}`}}),h.skills.splice(F,1)}catch(O){console.error("Error removing skill:",O.response?.data||O)}}async function T(){const F=await W();h.certificates=F;const O=new re,et=O.internal.pageSize.getWidth(),gt=O.internal.pageSize.getHeight(),lt=20;let E=20;function M(G){return G?String(G):""}function B(G,rt,wt,Q,it=6){const ot=O.splitTextToSize(G,Q);for(let X of ot)wt>gt-lt&&(O.addPage(),wt=lt),O.text(X,rt,wt),wt+=it;return wt}function at(G,rt,wt,Q,it){return O.setFont("times","bold"),O.setFontSize(12),O.text(G,rt,wt),wt+=2,O.setLineWidth(.5),O.line(it,wt,Q-it,wt),wt+6}O.setFont("times","bold"),O.setFontSize(20);const pt=[g.firstName,g.middleName,g.lastName].filter(G=>G&&G.trim()!=="").join(" ");O.text(pt,et/2,E,{align:"center"}),E+=8,O.setFont("times","regular"),O.setFontSize(10);const nt=`${g.phoneNumber}  ${g.emailAddress}  ${h.url}`;O.text(nt,et/2,E,{align:"center"}),E+=12,E=at("Summary",lt,E,et,lt),O.setFont("times","regular"),O.setFontSize(11),E=B(h.summary||"",lt,E,et-2*lt),h.experience.length&&(E=at("Professional Experience",lt,E,et,lt),[...h.experience].sort((rt,wt)=>new Date(wt.endYear).getFullYear()-new Date(rt.endYear).getFullYear()).forEach(rt=>{const wt=M(rt.startYear),Q=rt.endYear?M(rt.endYear):"Present";O.setFont("times","bold"),O.text(rt.jobTitle||"",lt,E),O.setFont("times","bold"),O.text(`${wt}  ${Q}`,et-lt,E,{align:"right"}),E+=6,O.setFont("times","italic"),O.text(`${rt.companyName||""}`,lt,E),E+=6})),h.education.length&&(E=at("Education",lt,E,et,lt),h.education.forEach(G=>{const rt=G.graduationYear?.toString()||"";O.setFont("times","bold"),O.text(`${G.institutionName||""}`,lt,E),O.text(rt,et-lt,E,{align:"right"}),E+=6,O.setFont("times","regular"),O.text(`${G.educationLevel} Major in ${G.major}`,lt,E),E+=6})),h.skills.length&&(E=at("Skills",lt,E,et,lt),E=B(h.skills.map(G=>G.skillName||G).join("  "),lt,E,et-2*lt)),h.certificates&&h.certificates.length&&(E=at("Certificates",lt,E,et,lt),O.setFont("times","regular"),O.setFontSize(11),h.certificates.forEach(G=>{E>gt-lt&&(O.addPage(),E=lt);const rt="",wt=G.certificationName||G.title||"";O.text(`${rt} ${wt}`,lt,E),E+=6}));const ct=O.output("blob");e.value=URL.createObjectURL(ct)}function D(){T(),t.value=!0}function K(){t.value=!1}je(async()=>{const F=localStorage.getItem("user");if(F)try{const O=JSON.parse(F);r.value=`${O.firstName} ${O.lastName}`,Object.assign(g,O)}catch{r.value="Guest"}await x(),await m(),await W()});const $=()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),i.push({name:"Login"})},q=ut([]);async function W(){const F=localStorage.getItem("token"),O=JSON.parse(localStorage.getItem("user"));if(!F||!O?.applicantID)return q.value=[],[];try{const et=await At.get(`https://pathfinder-development-production.up.railway.app/api/certificates/${O.applicantID}`,{headers:{Authorization:`Bearer ${F}`}});return q.value=(et.data||[]).filter(gt=>gt.IsSelected===1||gt.IsSelected===!0),console.log(" Selected certificates loaded:",q.value.length),q.value}catch(et){return console.error(" Error fetching selected certificates:",et),q.value=[],[]}}return C6(async()=>{await W()}),(F,O)=>(j(),z("div",KH,[p("div",XH,[p("div",ZH,[O[33]||(O[33]=p("div",{class:"w-24 h-24 rounded-full bg-white mb-4"},[p("div",{class:"avatar w-24 h-24 rounded-full bg-white mb-4"},[p("img",{src:"https://img.daisyui.com/images/profile/demo/yellingcat@192.webp",alt:"User Avatar",class:"w-full h-full object-cover rounded-full"})])],-1)),p("h2",JH,J(r.value),1),p("div",QH,[p("div",tV,[O[25]||(O[25]=p("div",{class:"flex items-center justify-center bg-gray-100 rounded-full px-6 py-2"},[p("span",{class:"font-semibold text-gray-700"},"Upcoming")],-1)),p("span",eV,J(o.value),1)]),p("div",nV,[O[26]||(O[26]=p("div",{class:"flex items-center justify-center bg-gray-100 rounded-full px-6 py-2"},[p("span",{class:"font-semibold text-gray-700"},"Completed")],-1)),p("span",sV,J(a.value),1)])]),p("div",iV,[p("button",{class:"bg-customButton text-white py-2 px-10 rounded-md hover:bg-dark-slate flex items-center justify-start gap-2",onClick:O[0]||(O[0]=et=>F.$router.push({name:"ResumeEditorpage"}))},O[27]||(O[27]=[p("svg",{class:"size-6 flex-shrink-0",viewBox:"0 0 34 34",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M19.8333 3.21521V9.06681C19.8333 9.86022 19.8333 10.2569 19.9877 10.56C20.1235 10.8265 20.3402 11.0432 20.6068 11.1791C20.9098 11.3335 21.3066 11.3335 22.1 11.3335H27.9516M22.6666 18.4167H11.3333M22.6666 24.0834H11.3333M14.1666 12.75H11.3333M19.8333 2.83337H12.4666C10.0864 2.83337 8.89629 2.83337 7.98717 3.2966C7.18748 3.70406 6.53731 4.35423 6.12985 5.15391C5.66663 6.06304 5.66663 7.25315 5.66663 9.63337V24.3667C5.66663 26.7469 5.66663 27.937 6.12985 28.8462C6.53731 29.6459 7.18748 30.296 7.98717 30.7035C8.89629 31.1667 10.0864 31.1667 12.4666 31.1667H21.5333C23.9135 31.1667 25.1036 31.1667 26.0128 30.7035C26.8124 30.296 27.4626 29.6459 27.8701 28.8462C28.3333 27.937 28.3333 26.7469 28.3333 24.3667V11.3334L19.8333 2.83337Z",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),p("span",null,"Resume",-1)])),p("button",{class:"bg-customButton text-white py-2 px-10 rounded-md hover:bg-dark-slate flex items-center justify-start gap-2",onClick:O[1]||(O[1]=et=>F.$router.push({name:"Certificatespage"}))},O[28]||(O[28]=[p("svg",{class:"size-6 flex-shrink-0",viewBox:"0 0 35 35",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M9.47917 29.1666H7.29167C5.68084 29.1666 4.375 27.8608 4.375 26.25V5.83329C4.375 4.22246 5.68084 2.91663 7.29167 2.91663H27.7083C29.3192 2.91663 30.625 4.22246 30.625 5.83329V26.25C30.625 27.8608 29.3192 29.1666 27.7083 29.1666H25.5208M17.5 27.7083C19.9162 27.7083 21.875 25.7495 21.875 23.3333C21.875 20.917 19.9162 18.9583 17.5 18.9583C15.0838 18.9583 13.125 20.917 13.125 23.3333C13.125 25.7495 15.0838 27.7083 17.5 27.7083ZM17.5 27.7083L17.5313 27.708L12.8751 32.3641L8.75036 28.2393L13.1537 23.836M17.5 27.7083L22.1562 32.3641L26.281 28.2393L21.8777 23.836M13.125 8.74996H21.875M10.2083 13.8541H24.7917",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),p("span",null,"Certificates",-1)])),p("button",{class:"bg-customButton text-white py-2 px-10 rounded-md hover:bg-dark-slate flex items-center justify-start gap-2",onClick:O[2]||(O[2]=et=>F.$router.push({name:"Bookmarkpage"}))},O[29]||(O[29]=[p("svg",{class:"size-6 flex-shrink-0",viewBox:"0 0 31 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M7.75 3.75V30L17.4375 20.625L27.125 30V3.75H7.75ZM23.25 0H3.875V26.25L5.8125 24.375V1.875H23.25V0Z",fill:"white"})],-1),p("span",null,"Bookmark",-1)])),O[32]||(O[32]=p("div",{class:"divider"},null,-1)),p("button",{class:"bg-customButton text-white py-2 px-10 rounded-md hover:bg-dark-slate flex items-center justify-start gap-2",onClick:O[3]||(O[3]=et=>F.$router.push({name:"UpdateDeletepage"}))},O[30]||(O[30]=[p("svg",{class:"size-6 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M20.1 9.21994C18.29 9.21994 17.55 7.93994 18.45 6.36994C18.97 5.45994 18.66 4.29994 17.75 3.77994L16.02 2.78994C15.23 2.31994 14.21 2.59994 13.74 3.38994L13.63 3.57994C12.73 5.14994 11.25 5.14994 10.34 3.57994L10.23 3.38994C9.78 2.59994 8.76 2.31994 7.97 2.78994L6.24 3.77994C5.33 4.29994 5.02 5.46994 5.54 6.37994C6.45 7.93994 5.71 9.21994 3.9 9.21994C2.86 9.21994 2 10.0699 2 11.1199V12.8799C2 13.9199 2.85 14.7799 3.9 14.7799C5.71 14.7799 6.45 16.0599 5.54 17.6299C5.02 18.5399 5.33 19.6999 6.24 20.2199L7.97 21.2099C8.76 21.6799 9.78 21.3999 10.25 20.6099L10.36 20.4199C11.26 18.8499 12.74 18.8499 13.65 20.4199L13.76 20.6099C14.23 21.3999 15.25 21.6799 16.04 21.2099L17.77 20.2199C18.68 19.6999 18.99 18.5299 18.47 17.6299C17.56 16.0599 18.3 14.7799 20.11 14.7799C21.15 14.7799 22.01 13.9299 22.01 12.8799V11.1199C22 10.0799 21.15 9.21994 20.1 9.21994ZM12 15.2499C10.21 15.2499 8.75 13.7899 8.75 11.9999C8.75 10.2099 10.21 8.74994 12 8.74994C13.79 8.74994 15.25 10.2099 15.25 11.9999C15.25 13.7899 13.79 15.2499 12 15.2499Z",fill:"white"})],-1),p("span",null,"Account Setting",-1)])),p("button",{class:"bg-customButton text-white py-2 px-10 rounded-md hover:bg-dark-slate flex items-center justify-start gap-2",onClick:$},O[31]||(O[31]=[p("svg",{class:"size-6 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M15.24 22.27H15.11C10.67 22.27 8.53002 20.52 8.16002 16.6C8.12002 16.19 8.42002 15.82 8.84002 15.78C9.24002 15.74 9.62002 16.05 9.66002 16.46C9.95002 19.6 11.43 20.77 15.12 20.77H15.25C19.32 20.77 20.76 19.33 20.76 15.26V8.73998C20.76 4.66998 19.32 3.22998 15.25 3.22998H15.12C11.41 3.22998 9.93002 4.41998 9.66002 7.61998C9.61002 8.02998 9.26002 8.33998 8.84002 8.29998C8.42002 8.26998 8.12001 7.89998 8.15001 7.48998C8.49001 3.50998 10.64 1.72998 15.11 1.72998H15.24C20.15 1.72998 22.25 3.82998 22.25 8.73998V15.26C22.25 20.17 20.15 22.27 15.24 22.27Z",fill:"white"}),p("path",{d:"M15.0001 12.75H3.62012C3.21012 12.75 2.87012 12.41 2.87012 12C2.87012 11.59 3.21012 11.25 3.62012 11.25H15.0001C15.4101 11.25 15.7501 11.59 15.7501 12C15.7501 12.41 15.4101 12.75 15.0001 12.75Z",fill:"white"}),p("path",{d:"M5.84994 16.1C5.65994 16.1 5.46994 16.03 5.31994 15.88L1.96994 12.53C1.67994 12.24 1.67994 11.76 1.96994 11.47L5.31994 8.12003C5.60994 7.83003 6.08994 7.83003 6.37994 8.12003C6.66994 8.41003 6.66994 8.89003 6.37994 9.18003L3.55994 12L6.37994 14.82C6.66994 15.11 6.66994 15.59 6.37994 15.88C6.23994 16.03 6.03994 16.1 5.84994 16.1Z",fill:"white"})],-1),p("span",null,"Logout",-1)]))])]),p("div",rV,[p("div",oV,[O[52]||(O[52]=p("h2",{class:"text-2xl font-bold mb-3"},"Resume Editor",-1)),p("form",aV,[p("div",lV,[Ut(p("input",{"onUpdate:modelValue":O[4]||(O[4]=et=>g.firstName=et),type:"text",placeholder:"First Name",class:"input-field border rounded p-2"},null,512),[[Wt,g.firstName]]),Ut(p("input",{"onUpdate:modelValue":O[5]||(O[5]=et=>g.emailAddress=et),type:"email",placeholder:"Email",class:"input-field border rounded p-2"},null,512),[[Wt,g.emailAddress]]),Ut(p("input",{"onUpdate:modelValue":O[6]||(O[6]=et=>g.middleName=et),type:"text",placeholder:"Middle Name",class:"input-field border rounded p-2"},null,512),[[Wt,g.middleName]]),Ut(p("input",{"onUpdate:modelValue":O[7]||(O[7]=et=>g.phoneNumber=et),type:"text",placeholder:"Mobile Number",class:"input-field border rounded p-2"},null,512),[[Wt,g.phoneNumber]]),Ut(p("input",{"onUpdate:modelValue":O[8]||(O[8]=et=>g.lastName=et),type:"text",placeholder:"Last Name",class:"input-field border rounded p-2"},null,512),[[Wt,g.lastName]]),Ut(p("input",{"onUpdate:modelValue":O[9]||(O[9]=et=>g.address=et),type:"text",placeholder:"Address",class:"input-field border rounded p-2"},null,512),[[Wt,g.address]])]),p("div",cV,[O[34]||(O[34]=p("h2",{class:"text-lg font-semibold"},"Professional Link",-1)),Ut(p("input",{type:"url",placeholder:"URL",class:"input-field border rounded p-2 w-full","onUpdate:modelValue":O[10]||(O[10]=et=>h.url=et)},null,512),[[Wt,h.url]])]),p("div",uV,[O[35]||(O[35]=p("label",{class:"block text-lg font-semibold mb-1"},"Professional Summary",-1)),p("div",dV,[Ut(p("textarea",{rows:"3",class:"input-field w-full","onUpdate:modelValue":O[11]||(O[11]=et=>h.summary=et)},null,512),[[Wt,h.summary]])])]),p("div",hV,[p("div",fV,[O[36]||(O[36]=p("label",{class:"text-lg font-semibold"},"Professional Experience",-1)),p("button",{type:"button",onClick:O[12]||(O[12]=et=>c.value=!0),class:"w-8 h-8 flex items-center justify-center rounded-full bg-customButton text-white hover:bg-dark-slate"}," + ")]),c.value?(j(),z("div",pV,[p("div",null,[O[37]||(O[37]=p("label",{class:"block font-medium mb-1"},"Job Title",-1)),Ut(p("input",{"onUpdate:modelValue":O[13]||(O[13]=et=>u.jobTitle=et),type:"text",placeholder:"Enter job title",class:"input-field border rounded w-full p-2"},null,512),[[Wt,u.jobTitle]])]),p("div",null,[O[38]||(O[38]=p("label",{class:"block font-medium mb-1"},"Company Name",-1)),Ut(p("input",{"onUpdate:modelValue":O[14]||(O[14]=et=>u.companyName=et),type:"text",placeholder:"Enter company name",class:"input-field border rounded w-full p-2"},null,512),[[Wt,u.companyName]])]),p("div",null,[O[39]||(O[39]=p("label",{class:"block font-medium mb-1"},"Company Address",-1)),Ut(p("input",{"onUpdate:modelValue":O[15]||(O[15]=et=>u.companyAddress=et),type:"text",placeholder:"Enter company address",class:"input-field border rounded w-full p-2"},null,512),[[Wt,u.companyAddress]])]),p("div",null,[O[40]||(O[40]=p("label",{class:"block font-medium mb-1"},"Start Year",-1)),Ut(p("input",{"onUpdate:modelValue":O[16]||(O[16]=et=>u.startYear=et),type:"number",placeholder:"e.g. 2020",class:"input-field border rounded w-full p-2"},null,512),[[Wt,u.startYear]])]),p("div",null,[O[41]||(O[41]=p("label",{class:"block font-medium mb-1"},"End Year",-1)),Ut(p("input",{"onUpdate:modelValue":O[17]||(O[17]=et=>u.endYear=et),type:"number",placeholder:"e.g. 2022",class:"input-field border rounded w-full p-2"},null,512),[[Wt,u.endYear]])]),p("button",{type:"button",onClick:I,class:"w-20 h-10 flex items-center justify-center rounded bg-customButton text-white hover:bg-dark-slate"}," Add + ")])):Ct("",!0),(j(!0),z(Kt,null,pe(h.experience,(et,gt)=>(j(),z("div",{key:gt,class:"relative border p-3 rounded space-y-3"},[p("button",{type:"button",onClick:lt=>R(gt),class:"absolute top-2 right-2 text-gray-500 hover:text-red-500"},"  ",8,gV),p("p",null,[p("strong",null,J(et.jobTitle),1)]),p("p",null,J(et.companyName),1),p("p",null,J(et.companyAddress),1),p("p",null,J(new Date(et.startYear).getFullYear())+" - "+J(new Date(et.endYear).getFullYear()),1)]))),128))]),p("div",mV,[p("div",bV,[O[42]||(O[42]=p("label",{class:"text-lg font-semibold"},"Education",-1)),p("button",{type:"button",onClick:O[18]||(O[18]=et=>d.value=!d.value),class:"w-8 h-8 flex items-center justify-center rounded-full bg-customButton text-white hover:bg-dark-slate"}," + ")]),d.value?(j(),z("div",vV,[p("div",null,[O[44]||(O[44]=p("label",{class:"block font-medium mb-1"},"Education Level",-1)),Ut(p("select",{"onUpdate:modelValue":O[19]||(O[19]=et=>f.educationLevel=et),class:"input-field border rounded w-full p-2"},O[43]||(O[43]=[p("option",{value:"",disabled:""},"Select level",-1),p("option",null,"Elementary",-1),p("option",null,"High School",-1),p("option",null,"Senior High School",-1),p("option",null,"Bachelor's Degree",-1),p("option",null,"Master's Degree",-1),p("option",null,"Doctorate",-1),p("option",null,"Others",-1)]),512),[[eg,f.educationLevel]])]),p("div",null,[O[45]||(O[45]=p("label",{class:"block font-medium mb-1"},"Major",-1)),Ut(p("input",{"onUpdate:modelValue":O[20]||(O[20]=et=>f.major=et),type:"text",placeholder:"Enter major",class:"input-field border rounded w-full p-2 disabled:bg-gray-200",disabled:f.educationLevel==="Elementary"||f.educationLevel==="High School"},null,8,yV),[[Wt,f.major]])]),p("div",null,[O[46]||(O[46]=p("label",{class:"block font-medium mb-1"},"Institution Name",-1)),Ut(p("input",{"onUpdate:modelValue":O[21]||(O[21]=et=>f.institutionName=et),type:"text",placeholder:"Enter school/university name",class:"input-field border rounded w-full p-2"},null,512),[[Wt,f.institutionName]])]),p("div",null,[O[47]||(O[47]=p("label",{class:"block font-medium mb-1"},"Institution Address",-1)),Ut(p("input",{"onUpdate:modelValue":O[22]||(O[22]=et=>f.institutionAddress=et),type:"text",placeholder:"Enter address",class:"input-field border rounded w-full p-2"},null,512),[[Wt,f.institutionAddress]])]),p("div",null,[O[48]||(O[48]=p("label",{class:"block font-medium mb-1"},"Graduation Year",-1)),Ut(p("input",{"onUpdate:modelValue":O[23]||(O[23]=et=>f.graduationYear=et),type:"number",min:"1900",max:"2099",placeholder:"e.g. 2025",class:"input-field border rounded w-full p-2"},null,512),[[Wt,f.graduationYear,void 0,{number:!0}]])]),p("button",{type:"button",onClick:_,class:"w-20 h-10 flex items-center justify-center rounded bg-customButton text-white hover:bg-dark-slate"}," Add + ")])):Ct("",!0),(j(!0),z(Kt,null,pe(h.education,(et,gt)=>(j(),z("div",{key:gt,class:"relative border p-3 rounded space-y-3"},[p("button",{type:"button",onClick:lt=>A(gt),class:"absolute top-2 right-2 text-gray-500 hover:text-red-500"},"  ",8,wV),p("p",null,[p("strong",null,J(et.educationLevel),1)]),et.major?(j(),z("p",_V,J(et.major),1)):Ct("",!0),p("p",null,J(et.institutionName),1),p("p",null,J(et.institutionAddress),1),p("p",null,J(et.graduationYear),1)]))),128))]),p("div",xV,[O[49]||(O[49]=p("label",{class:"text-lg font-semibold"},"Skills",-1)),p("div",CV,[Ut(p("input",{"onUpdate:modelValue":O[24]||(O[24]=et=>s.value=et),type:"text",placeholder:"Type a skill",class:"input-field flex-1 border rounded p-2",onKeyup:HS(P,["enter"])},null,544),[[Wt,s.value]]),p("button",{type:"button",onClick:P,class:"w-8 h-8 flex items-center justify-center rounded-full bg-customButton text-white hover:bg-dark-slate"}," + ")]),p("div",kV,[(j(!0),z(Kt,null,pe(h.skills,(et,gt)=>(j(),z("span",{key:gt,class:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full flex items-center gap-2"},[Dt(J(et.skillName||et)+" ",1),p("button",{type:"button",onClick:lt=>V(gt),class:"text-blue-500 hover:text-red-500"},"  ",8,AV)]))),128))])]),p("div",SV,[O[50]||(O[50]=p("h3",{class:"text-lg font-semibold"},"Certificates",-1)),q.value.length?(j(),z("ul",EV,[(j(!0),z(Kt,null,pe(q.value,et=>(j(),z("li",{key:et.certificationID,class:"flex justify-between items-center bg-gray-50 px-3 py-2 rounded-lg hover:bg-gray-100 transition"},[p("span",TV,J(et.certificationName),1)]))),128))])):(j(),z("p",LV," No certificates selected for your resume. "))]),p("div",{class:"flex gap-4"},[p("button",{type:"button",onClick:D,class:"w-1/2 py-3 bg-customButton text-white rounded-xl hover:bg-dark-slate transition"}," Preview Resume "),p("button",{type:"button",class:"w-1/2 py-3 bg-customButton text-white rounded-xl hover:bg-dark-slate transition",onClick:b}," Save ")])]),t.value?(j(),z("div",PV,[p("div",IV,[p("button",{onClick:K,class:"absolute top-2 right-2 text-gray-500 hover:text-gray-700"},"  "),p("div",DV,[O[51]||(O[51]=p("h2",{class:"text-xl font-semibold mb-4"},"Resume Preview",-1)),e.value?(j(),z("iframe",{key:0,src:e.value,class:"w-full h-[500px] border",frameborder:"0"},null,8,MV)):Ct("",!0),p("div",RV,[e.value?(j(),z("a",{key:0,href:e.value,download:"resume.pdf",class:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700"}," Download PDF ",8,NV)):Ct("",!0)])])])])):Ct("",!0)])]),p("div",OV,[(j(!0),z(Kt,null,pe(l.value,et=>(j(),z("div",{key:et.id,class:fe(["alert",{"alert-info":et.type==="info","alert-success":et.type==="success","alert-accent":et.type==="accent"}])},J(et.message),3))),128))])])]))}},$V="/assets/app-avDONQqh.jpg",BV="/assets/org-DVxs4hBo.jpg",jV={class:"font-poppins min-h-screen pl-10 pr-10 pb-5 flex w-full items-center justify-center bg-gray-50"},UV={class:"w-full max-w-6xl px-4 pb-20"},zV={class:"pt-10 pb-2"},HV={class:"flex w-full flex-col lg:flex-row gap-6"},VV=["src"],qV=["src"],WV={__name:"TypeOfAccount",setup(n){return(t,e)=>(j(),z("div",jV,[p("div",UV,[p("div",null,[p("div",zV,[p("button",{class:"btn btn-ghost text-dark-slate",onClick:e[0]||(e[0]=s=>t.$router.push("/loginform"))},e[3]||(e[3]=[p("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 18l-6-6 6-6"})],-1)]))]),e[4]||(e[4]=p("h2",{class:"font-inter text-3xl font-semibold text-left mb-6 text-dark-slate pl-3"}," Account Type ",-1))]),p("div",HV,[p("div",{class:"card bg-base-300 rounded-box flex-1 min-h-[200px] p-6",onClick:e[1]||(e[1]=s=>t.$router.push("/auth/aregistration"))},[p("figure",null,[p("img",{src:Qe($V),alt:"Applicant"},null,8,VV)]),e[5]||(e[5]=p("p",{class:"sm:text-base md:text-md lg:text-lg xl:text-xl text-center font-inter pt-4"}," Applicant ",-1))]),e[7]||(e[7]=p("div",{class:"divider lg:divider-horizontal font-inter"},"OR",-1)),p("div",{class:"card bg-base-300 rounded-box flex-1 min-h-[200px] p-6",onClick:e[2]||(e[2]=s=>t.$router.push("/auth/oregistration"))},[p("figure",null,[p("img",{src:Qe(BV),alt:"Organization"},null,8,qV)]),e[6]||(e[6]=p("p",{class:"sm:text-base md:text-md lg:text-lg xl:text-xl text-center font-inter pt-4"}," Organization ",-1))])])])]))}};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function sf(n){return n+.5|0}const Na=(n,t,e)=>Math.max(Math.min(n,e),t);function jd(n){return Na(sf(n*2.55),0,255)}function za(n){return Na(sf(n*255),0,255)}function Uo(n){return Na(sf(n/2.55)/100,0,1)}function Uw(n){return Na(sf(n*100),0,100)}const er={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Nm=[..."0123456789ABCDEF"],GV=n=>Nm[n&15],YV=n=>Nm[(n&240)>>4]+Nm[n&15],y1=n=>(n&240)>>4===(n&15),KV=n=>y1(n.r)&&y1(n.g)&&y1(n.b)&&y1(n.a);function XV(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&er[n[1]]*17,g:255&er[n[2]]*17,b:255&er[n[3]]*17,a:t===5?er[n[4]]*17:255}:(t===7||t===9)&&(e={r:er[n[1]]<<4|er[n[2]],g:er[n[3]]<<4|er[n[4]],b:er[n[5]]<<4|er[n[6]],a:t===9?er[n[7]]<<4|er[n[8]]:255})),e}const ZV=(n,t)=>n<255?t(n):"";function JV(n){var t=KV(n)?GV:YV;return n?"#"+t(n.r)+t(n.g)+t(n.b)+ZV(n.a,t):void 0}const QV=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function ex(n,t,e){const s=t*Math.min(e,1-e),i=(r,o=(r+n/30)%12)=>e-s*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function tq(n,t,e){const s=(i,r=(i+n/60)%6)=>e-e*t*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function eq(n,t,e){const s=ex(n,1,.5);let i;for(t+e>1&&(i=1/(t+e),t*=i,e*=i),i=0;i<3;i++)s[i]*=1-t-e,s[i]+=t;return s}function nq(n,t,e,s,i){return n===i?(t-e)/s+(t<e?6:0):t===i?(e-n)/s+2:(n-t)/s+4}function ob(n){const e=n.r/255,s=n.g/255,i=n.b/255,r=Math.max(e,s,i),o=Math.min(e,s,i),a=(r+o)/2;let l,c,u;return r!==o&&(u=r-o,c=a>.5?u/(2-r-o):u/(r+o),l=nq(e,s,i,u,r),l=l*60+.5),[l|0,c||0,a]}function ab(n,t,e,s){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,s)).map(za)}function lb(n,t,e){return ab(ex,n,t,e)}function sq(n,t,e){return ab(eq,n,t,e)}function iq(n,t,e){return ab(tq,n,t,e)}function nx(n){return(n%360+360)%360}function rq(n){const t=QV.exec(n);let e=255,s;if(!t)return;t[5]!==s&&(e=t[6]?jd(+t[5]):za(+t[5]));const i=nx(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?s=sq(i,r,o):t[1]==="hsv"?s=iq(i,r,o):s=lb(i,r,o),{r:s[0],g:s[1],b:s[2],a:e}}function oq(n,t){var e=ob(n);e[0]=nx(e[0]+t),e=lb(e),n.r=e[0],n.g=e[1],n.b=e[2]}function aq(n){if(!n)return;const t=ob(n),e=t[0],s=Uw(t[1]),i=Uw(t[2]);return n.a<255?`hsla(${e}, ${s}%, ${i}%, ${Uo(n.a)})`:`hsl(${e}, ${s}%, ${i}%)`}const zw={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Hw={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function lq(){const n={},t=Object.keys(Hw),e=Object.keys(zw);let s,i,r,o,a;for(s=0;s<t.length;s++){for(o=a=t[s],i=0;i<e.length;i++)r=e[i],a=a.replace(r,zw[r]);r=parseInt(Hw[o],16),n[a]=[r>>16&255,r>>8&255,r&255]}return n}let w1;function cq(n){w1||(w1=lq(),w1.transparent=[0,0,0,0]);const t=w1[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const uq=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function dq(n){const t=uq.exec(n);let e=255,s,i,r;if(t){if(t[7]!==s){const o=+t[7];e=t[8]?jd(o):Na(o*255,0,255)}return s=+t[1],i=+t[3],r=+t[5],s=255&(t[2]?jd(s):Na(s,0,255)),i=255&(t[4]?jd(i):Na(i,0,255)),r=255&(t[6]?jd(r):Na(r,0,255)),{r:s,g:i,b:r,a:e}}}function hq(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Uo(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const h0=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Vc=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function fq(n,t,e){const s=Vc(Uo(n.r)),i=Vc(Uo(n.g)),r=Vc(Uo(n.b));return{r:za(h0(s+e*(Vc(Uo(t.r))-s))),g:za(h0(i+e*(Vc(Uo(t.g))-i))),b:za(h0(r+e*(Vc(Uo(t.b))-r))),a:n.a+e*(t.a-n.a)}}function _1(n,t,e){if(n){let s=ob(n);s[t]=Math.max(0,Math.min(s[t]+s[t]*e,t===0?360:1)),s=lb(s),n.r=s[0],n.g=s[1],n.b=s[2]}}function sx(n,t){return n&&Object.assign(t||{},n)}function Vw(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=za(n[3]))):(t=sx(n,{r:0,g:0,b:0,a:1}),t.a=za(t.a)),t}function pq(n){return n.charAt(0)==="r"?dq(n):rq(n)}class Dh{constructor(t){if(t instanceof Dh)return t;const e=typeof t;let s;e==="object"?s=Vw(t):e==="string"&&(s=XV(t)||cq(t)||pq(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=sx(this._rgb);return t&&(t.a=Uo(t.a)),t}set rgb(t){this._rgb=Vw(t)}rgbString(){return this._valid?hq(this._rgb):void 0}hexString(){return this._valid?JV(this._rgb):void 0}hslString(){return this._valid?aq(this._rgb):void 0}mix(t,e){if(t){const s=this.rgb,i=t.rgb;let r;const o=e===r?.5:e,a=2*o-1,l=s.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,s.r=255&c*s.r+r*i.r+.5,s.g=255&c*s.g+r*i.g+.5,s.b=255&c*s.b+r*i.b+.5,s.a=o*s.a+(1-o)*i.a,this.rgb=s}return this}interpolate(t,e){return t&&(this._rgb=fq(this._rgb,t._rgb,e)),this}clone(){return new Dh(this.rgb)}alpha(t){return this._rgb.a=za(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=sf(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return _1(this._rgb,2,t),this}darken(t){return _1(this._rgb,2,-t),this}saturate(t){return _1(this._rgb,1,t),this}desaturate(t){return _1(this._rgb,1,-t),this}rotate(t){return oq(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Mo(){}const gq=(()=>{let n=0;return()=>n++})();function Ve(n){return n==null}function Rn(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function qe(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Gn(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function $i(n,t){return Gn(n)?n:t}function Ie(n,t){return typeof n>"u"?t:n}const mq=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,ix=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function Sn(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function hn(n,t,e,s){let i,r,o;if(Rn(n))for(r=n.length,i=0;i<r;i++)t.call(e,n[i],i);else if(qe(n))for(o=Object.keys(n),r=o.length,i=0;i<r;i++)t.call(e,n[o[i]],o[i])}function Lp(n,t){let e,s,i,r;if(!n||!t||n.length!==t.length)return!1;for(e=0,s=n.length;e<s;++e)if(i=n[e],r=t[e],i.datasetIndex!==r.datasetIndex||i.index!==r.index)return!1;return!0}function Pp(n){if(Rn(n))return n.map(Pp);if(qe(n)){const t=Object.create(null),e=Object.keys(n),s=e.length;let i=0;for(;i<s;++i)t[e[i]]=Pp(n[e[i]]);return t}return n}function rx(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function bq(n,t,e,s){if(!rx(n))return;const i=t[n],r=e[n];qe(i)&&qe(r)?Mh(i,r,s):t[n]=Pp(r)}function Mh(n,t,e){const s=Rn(t)?t:[t],i=s.length;if(!qe(n))return n;e=e||{};const r=e.merger||bq;let o;for(let a=0;a<i;++a){if(o=s[a],!qe(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)r(l[c],n,o,e)}return n}function ch(n,t){return Mh(n,t,{merger:vq})}function vq(n,t,e){if(!rx(n))return;const s=t[n],i=e[n];qe(s)&&qe(i)?ch(s,i):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=Pp(i))}const qw={"":n=>n,x:n=>n.x,y:n=>n.y};function yq(n){const t=n.split("."),e=[];let s="";for(const i of t)s+=i,s.endsWith("\\")?s=s.slice(0,-1)+".":(e.push(s),s="");return e}function wq(n){const t=yq(n);return e=>{for(const s of t){if(s==="")break;e=e&&e[s]}return e}}function Ga(n,t){return(qw[t]||(qw[t]=wq(t)))(n)}function cb(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Rh=n=>typeof n<"u",Ya=n=>typeof n=="function",Ww=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function _q(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const tn=Math.PI,Pn=2*tn,xq=Pn+tn,Ip=Number.POSITIVE_INFINITY,Cq=tn/180,is=tn/2,Il=tn/4,Gw=tn*2/3,Oa=Math.log10,co=Math.sign;function uh(n,t,e){return Math.abs(n-t)<e}function Yw(n){const t=Math.round(n);n=uh(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(Oa(n))),s=n/e;return(s<=1?1:s<=2?2:s<=5?5:10)*e}function kq(n){const t=[],e=Math.sqrt(n);let s;for(s=1;s<e;s++)n%s===0&&(t.push(s),t.push(n/s));return e===(e|0)&&t.push(e),t.sort((i,r)=>i-r).pop(),t}function Aq(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Iu(n){return!Aq(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function Sq(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function ox(n,t,e){let s,i,r;for(s=0,i=n.length;s<i;s++)r=n[s][e],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function Tr(n){return n*(tn/180)}function ub(n){return n*(180/tn)}function Kw(n){if(!Gn(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function ax(n,t){const e=t.x-n.x,s=t.y-n.y,i=Math.sqrt(e*e+s*s);let r=Math.atan2(s,e);return r<-.5*tn&&(r+=Pn),{angle:r,distance:i}}function Om(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function Eq(n,t){return(n-t+xq)%Pn-tn}function Qs(n){return(n%Pn+Pn)%Pn}function Nh(n,t,e,s){const i=Qs(n),r=Qs(t),o=Qs(e),a=Qs(r-i),l=Qs(o-i),c=Qs(i-r),u=Qs(i-o);return i===r||i===o||s&&r===o||a>l&&c<u}function Ts(n,t,e){return Math.max(t,Math.min(e,n))}function Tq(n){return Ts(n,-32768,32767)}function Wo(n,t,e,s=1e-6){return n>=Math.min(t,e)-s&&n<=Math.max(t,e)+s}function db(n,t,e){e=e||(o=>n[o]<t);let s=n.length-1,i=0,r;for(;s-i>1;)r=i+s>>1,e(r)?i=r:s=r;return{lo:i,hi:s}}const Go=(n,t,e,s)=>db(n,e,s?i=>{const r=n[i][t];return r<e||r===e&&n[i+1][t]===e}:i=>n[i][t]<e),Lq=(n,t,e)=>db(n,e,s=>n[s][t]>=e);function Pq(n,t,e){let s=0,i=n.length;for(;s<i&&n[s]<t;)s++;for(;i>s&&n[i-1]>e;)i--;return s>0||i<n.length?n.slice(s,i):n}const lx=["push","pop","shift","splice","unshift"];function Iq(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),lx.forEach(e=>{const s="_onData"+cb(e),i=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...r){const o=i.apply(this,r);return n._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...r)}),o}})})}function Xw(n,t){const e=n._chartjs;if(!e)return;const s=e.listeners,i=s.indexOf(t);i!==-1&&s.splice(i,1),!(s.length>0)&&(lx.forEach(r=>{delete n[r]}),delete n._chartjs)}function cx(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const ux=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function dx(n,t){let e=[],s=!1;return function(...i){e=i,s||(s=!0,ux.call(window,()=>{s=!1,n.apply(t,e)}))}}function Dq(n,t){let e;return function(...s){return t?(clearTimeout(e),e=setTimeout(n,t,s)):n.apply(this,s),t}}const hb=n=>n==="start"?"left":n==="end"?"right":"center",Zs=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,Mq=(n,t,e,s)=>n===(s?"left":"right")?e:n==="center"?(t+e)/2:t;function hx(n,t,e){const s=t.length;let i=0,r=s;if(n._sorted){const{iScale:o,vScale:a,_parsed:l}=n,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,u=o.axis,{min:d,max:f,minDefined:h,maxDefined:g}=o.getUserBounds();if(h){if(i=Math.min(Go(l,u,d).lo,e?s:Go(t,u,o.getPixelForValue(d)).lo),c){const m=l.slice(0,i+1).reverse().findIndex(b=>!Ve(b[a.axis]));i-=Math.max(0,m)}i=Ts(i,0,s-1)}if(g){let m=Math.max(Go(l,o.axis,f,!0).hi+1,e?0:Go(t,u,o.getPixelForValue(f),!0).hi+1);if(c){const b=l.slice(m-1).findIndex(y=>!Ve(y[a.axis]));m+=Math.max(0,b)}r=Ts(m,i,s)-i}else r=s-i}return{start:i,count:r}}function fx(n){const{xScale:t,yScale:e,_scaleRanges:s}=n,i={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!s)return n._scaleRanges=i,!0;const r=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==e.min||s.ymax!==e.max;return Object.assign(s,i),r}const x1=n=>n===0||n===1,Zw=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*Pn/e)),Jw=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*Pn/e)+1,dh={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*is)+1,easeOutSine:n=>Math.sin(n*is),easeInOutSine:n=>-.5*(Math.cos(tn*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>x1(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>x1(n)?n:Zw(n,.075,.3),easeOutElastic:n=>x1(n)?n:Jw(n,.075,.3),easeInOutElastic(n){return x1(n)?n:n<.5?.5*Zw(n*2,.1125,.45):.5+.5*Jw(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-dh.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?dh.easeInBounce(n*2)*.5:dh.easeOutBounce(n*2-1)*.5+.5};function fb(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Qw(n){return fb(n)?n:new Dh(n)}function f0(n){return fb(n)?n:new Dh(n).saturate(.5).darken(.1).hexString()}const Rq=["x","y","borderWidth","radius","tension"],Nq=["color","borderColor","backgroundColor"];function Oq(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:Nq},numbers:{type:"number",properties:Rq}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function Fq(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const t4=new Map;function $q(n,t){t=t||{};const e=n+JSON.stringify(t);let s=t4.get(e);return s||(s=new Intl.NumberFormat(n,t),t4.set(e,s)),s}function rf(n,t,e){return $q(t,e).format(n)}const px={values(n){return Rn(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const s=this.chart.options.locale;let i,r=n;if(e.length>1){const c=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),r=Bq(n,e)}const o=Oa(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),rf(n,s,l)},logarithmic(n,t,e){if(n===0)return"0";const s=e[t].significand||n/Math.pow(10,Math.floor(Oa(n)));return[1,2,3,5,10,15].includes(s)||t>.8*e.length?px.numeric.call(this,n,t,e):""}};function Bq(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var mg={formatters:px};function jq(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:mg.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const dc=Object.create(null),Fm=Object.create(null);function hh(n,t){if(!t)return n;const e=t.split(".");for(let s=0,i=e.length;s<i;++s){const r=e[s];n=n[r]||(n[r]=Object.create(null))}return n}function p0(n,t,e){return typeof t=="string"?Mh(hh(n,t),e):Mh(hh(n,""),t)}class Uq{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,i)=>f0(i.backgroundColor),this.hoverBorderColor=(s,i)=>f0(i.borderColor),this.hoverColor=(s,i)=>f0(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return p0(this,t,e)}get(t){return hh(this,t)}describe(t,e){return p0(Fm,t,e)}override(t,e){return p0(dc,t,e)}route(t,e,s,i){const r=hh(this,t),o=hh(this,s),a="_"+e;Object.defineProperties(r,{[a]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){const l=this[a],c=o[i];return qe(l)?Object.assign({},c,l):Ie(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(e=>e(this))}}var Nn=new Uq({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Oq,Fq,jq]);function zq(n){return!n||Ve(n.size)||Ve(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Dp(n,t,e,s,i){let r=t[i];return r||(r=t[i]=n.measureText(i).width,e.push(i)),r>s&&(s=r),s}function Hq(n,t,e,s){s=s||{};let i=s.data=s.data||{},r=s.garbageCollect=s.garbageCollect||[];s.font!==t&&(i=s.data={},r=s.garbageCollect=[],s.font=t),n.save(),n.font=t;let o=0;const a=e.length;let l,c,u,d,f;for(l=0;l<a;l++)if(d=e[l],d!=null&&!Rn(d))o=Dp(n,i,r,o,d);else if(Rn(d))for(c=0,u=d.length;c<u;c++)f=d[c],f!=null&&!Rn(f)&&(o=Dp(n,i,r,o,f));n.restore();const h=r.length/2;if(h>e.length){for(l=0;l<h;l++)delete i[r[l]];r.splice(0,h)}return o}function Dl(n,t,e){const s=n.currentDevicePixelRatio,i=e!==0?Math.max(e/2,.5):0;return Math.round((t-i)*s)/s+i}function e4(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function $m(n,t,e,s){gx(n,t,e,s,null)}function gx(n,t,e,s,i){let r,o,a,l,c,u,d,f;const h=t.pointStyle,g=t.rotation,m=t.radius;let b=(g||0)*Cq;if(h&&typeof h=="object"&&(r=h.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){n.save(),n.translate(e,s),n.rotate(b),n.drawImage(h,-h.width/2,-h.height/2,h.width,h.height),n.restore();return}if(!(isNaN(m)||m<=0)){switch(n.beginPath(),h){default:i?n.ellipse(e,s,i/2,m,0,0,Pn):n.arc(e,s,m,0,Pn),n.closePath();break;case"triangle":u=i?i/2:m,n.moveTo(e+Math.sin(b)*u,s-Math.cos(b)*m),b+=Gw,n.lineTo(e+Math.sin(b)*u,s-Math.cos(b)*m),b+=Gw,n.lineTo(e+Math.sin(b)*u,s-Math.cos(b)*m),n.closePath();break;case"rectRounded":c=m*.516,l=m-c,o=Math.cos(b+Il)*l,d=Math.cos(b+Il)*(i?i/2-c:l),a=Math.sin(b+Il)*l,f=Math.sin(b+Il)*(i?i/2-c:l),n.arc(e-d,s-a,c,b-tn,b-is),n.arc(e+f,s-o,c,b-is,b),n.arc(e+d,s+a,c,b,b+is),n.arc(e-f,s+o,c,b+is,b+tn),n.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*m,u=i?i/2:l,n.rect(e-u,s-l,2*u,2*l);break}b+=Il;case"rectRot":d=Math.cos(b)*(i?i/2:m),o=Math.cos(b)*m,a=Math.sin(b)*m,f=Math.sin(b)*(i?i/2:m),n.moveTo(e-d,s-a),n.lineTo(e+f,s-o),n.lineTo(e+d,s+a),n.lineTo(e-f,s+o),n.closePath();break;case"crossRot":b+=Il;case"cross":d=Math.cos(b)*(i?i/2:m),o=Math.cos(b)*m,a=Math.sin(b)*m,f=Math.sin(b)*(i?i/2:m),n.moveTo(e-d,s-a),n.lineTo(e+d,s+a),n.moveTo(e+f,s-o),n.lineTo(e-f,s+o);break;case"star":d=Math.cos(b)*(i?i/2:m),o=Math.cos(b)*m,a=Math.sin(b)*m,f=Math.sin(b)*(i?i/2:m),n.moveTo(e-d,s-a),n.lineTo(e+d,s+a),n.moveTo(e+f,s-o),n.lineTo(e-f,s+o),b+=Il,d=Math.cos(b)*(i?i/2:m),o=Math.cos(b)*m,a=Math.sin(b)*m,f=Math.sin(b)*(i?i/2:m),n.moveTo(e-d,s-a),n.lineTo(e+d,s+a),n.moveTo(e+f,s-o),n.lineTo(e-f,s+o);break;case"line":o=i?i/2:Math.cos(b)*m,a=Math.sin(b)*m,n.moveTo(e-o,s-a),n.lineTo(e+o,s+a);break;case"dash":n.moveTo(e,s),n.lineTo(e+Math.cos(b)*(i?i/2:m),s+Math.sin(b)*m);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function Yo(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function bg(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function vg(n){n.restore()}function Vq(n,t,e,s,i){if(!t)return n.lineTo(e.x,e.y);if(i==="middle"){const r=(t.x+e.x)/2;n.lineTo(r,t.y),n.lineTo(r,e.y)}else i==="after"!=!!s?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function qq(n,t,e,s){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?e.cp2x:e.cp1x,s?e.cp2y:e.cp1y,e.x,e.y)}function Wq(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),Ve(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function Gq(n,t,e,s,i){if(i.strikethrough||i.underline){const r=n.measureText(s),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=e-r.actualBoundingBoxAscent,c=e+r.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(o,u),n.lineTo(a,u),n.stroke()}}function Yq(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function hc(n,t,e,s,i,r={}){const o=Rn(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(n.save(),n.font=i.string,Wq(n,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&Yq(n,r.backdrop),a&&(r.strokeColor&&(n.strokeStyle=r.strokeColor),Ve(r.strokeWidth)||(n.lineWidth=r.strokeWidth),n.strokeText(c,e,s,r.maxWidth)),n.fillText(c,e,s,r.maxWidth),Gq(n,e,s,c,r),s+=Number(i.lineHeight);n.restore()}function Oh(n,t){const{x:e,y:s,w:i,h:r,radius:o}=t;n.arc(e+o.topLeft,s+o.topLeft,o.topLeft,1.5*tn,tn,!0),n.lineTo(e,s+r-o.bottomLeft),n.arc(e+o.bottomLeft,s+r-o.bottomLeft,o.bottomLeft,tn,is,!0),n.lineTo(e+i-o.bottomRight,s+r),n.arc(e+i-o.bottomRight,s+r-o.bottomRight,o.bottomRight,is,0,!0),n.lineTo(e+i,s+o.topRight),n.arc(e+i-o.topRight,s+o.topRight,o.topRight,0,-is,!0),n.lineTo(e+o.topLeft,s)}const Kq=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Xq=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Zq(n,t){const e=(""+n).match(Kq);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const Jq=n=>+n||0;function pb(n,t){const e={},s=qe(t),i=s?Object.keys(t):t,r=qe(n)?s?o=>Ie(n[o],n[t[o]]):o=>n[o]:()=>n;for(const o of i)e[o]=Jq(r(o));return e}function mx(n){return pb(n,{top:"y",right:"x",bottom:"y",left:"x"})}function sc(n){return pb(n,["topLeft","topRight","bottomLeft","bottomRight"])}function ii(n){const t=mx(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function xs(n,t){n=n||{},t=t||Nn.font;let e=Ie(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let s=Ie(n.style,t.style);s&&!(""+s).match(Xq)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const i={family:Ie(n.family,t.family),lineHeight:Zq(Ie(n.lineHeight,t.lineHeight),e),size:e,style:s,weight:Ie(n.weight,t.weight),string:""};return i.string=zq(i),i}function Ud(n,t,e,s){let i,r,o;for(i=0,r=n.length;i<r;++i)if(o=n[i],o!==void 0&&o!==void 0)return o}function Qq(n,t,e){const{min:s,max:i}=n,r=ix(t,(i-s)/2),o=(a,l)=>e&&a===0?0:a+l;return{min:o(s,-Math.abs(r)),max:o(i,r)}}function Qa(n,t){return Object.assign(Object.create(n),t)}function gb(n,t=[""],e,s,i=()=>n[0]){const r=e||n;typeof s>"u"&&(s=wx("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:r,_fallback:s,_getTarget:i,override:a=>gb([a,...n],t,r,s)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete n[0][l],!0},get(a,l){return vx(a,l,()=>aW(l,t,n,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,l){return s4(a).includes(l)},ownKeys(a){return s4(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function Du(n,t,e,s){const i={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:bx(n,s),setContext:r=>Du(n,r,e,s),override:r=>Du(n.override(r),t,e,s)};return new Proxy(i,{deleteProperty(r,o){return delete r[o],delete n[o],!0},get(r,o,a){return vx(r,o,()=>eW(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(r,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(r,o,a){return n[o]=a,delete r[o],!0}})}function bx(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:s=t.indexable,_allKeys:i=t.allKeys}=n;return{allKeys:i,scriptable:e,indexable:s,isScriptable:Ya(e)?e:()=>e,isIndexable:Ya(s)?s:()=>s}}const tW=(n,t)=>n?n+cb(t):t,mb=(n,t)=>qe(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function vx(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const s=e();return n[t]=s,s}function eW(n,t,e){const{_proxy:s,_context:i,_subProxy:r,_descriptors:o}=n;let a=s[t];return Ya(a)&&o.isScriptable(t)&&(a=nW(t,a,n,e)),Rn(a)&&a.length&&(a=sW(t,a,n,o.isIndexable)),mb(t,a)&&(a=Du(a,i,r&&r[t],o)),a}function nW(n,t,e,s){const{_proxy:i,_context:r,_subProxy:o,_stack:a}=e;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let l=t(r,o||s);return a.delete(n),mb(n,l)&&(l=bb(i._scopes,i,n,l)),l}function sW(n,t,e,s){const{_proxy:i,_context:r,_subProxy:o,_descriptors:a}=e;if(typeof r.index<"u"&&s(n))return t[r.index%t.length];if(qe(t[0])){const l=t,c=i._scopes.filter(u=>u!==l);t=[];for(const u of l){const d=bb(c,i,n,u);t.push(Du(d,r,o&&o[n],a))}}return t}function yx(n,t,e){return Ya(n)?n(t,e):n}const iW=(n,t)=>n===!0?t:typeof n=="string"?Ga(t,n):void 0;function rW(n,t,e,s,i){for(const r of t){const o=iW(e,r);if(o){n.add(o);const a=yx(o._fallback,e,i);if(typeof a<"u"&&a!==e&&a!==s)return a}else if(o===!1&&typeof s<"u"&&e!==s)return null}return!1}function bb(n,t,e,s){const i=t._rootScopes,r=yx(t._fallback,e,s),o=[...n,...i],a=new Set;a.add(s);let l=n4(a,o,e,r||e,s);return l===null||typeof r<"u"&&r!==e&&(l=n4(a,o,r,l,s),l===null)?!1:gb(Array.from(a),[""],i,r,()=>oW(t,e,s))}function n4(n,t,e,s,i){for(;e;)e=rW(n,t,e,s,i);return e}function oW(n,t,e){const s=n._getTarget();t in s||(s[t]={});const i=s[t];return Rn(i)&&qe(e)?e:i||{}}function aW(n,t,e,s){let i;for(const r of t)if(i=wx(tW(r,n),e),typeof i<"u")return mb(n,i)?bb(e,s,n,i):i}function wx(n,t){for(const e of t){if(!e)continue;const s=e[n];if(typeof s<"u")return s}}function s4(n){let t=n._keys;return t||(t=n._keys=lW(n._scopes)),t}function lW(n){const t=new Set;for(const e of n)for(const s of Object.keys(e).filter(i=>!i.startsWith("_")))t.add(s);return Array.from(t)}function _x(n,t,e,s){const{iScale:i}=n,{key:r="r"}=this._parsing,o=new Array(s);let a,l,c,u;for(a=0,l=s;a<l;++a)c=a+e,u=t[c],o[a]={r:i.parse(Ga(u,r),c)};return o}const cW=Number.EPSILON||1e-14,Mu=(n,t)=>t<n.length&&!n[t].skip&&n[t],xx=n=>n==="x"?"y":"x";function uW(n,t,e,s){const i=n.skip?t:n,r=t,o=e.skip?t:e,a=Om(r,i),l=Om(o,r);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=s*c,f=s*u;return{previous:{x:r.x-d*(o.x-i.x),y:r.y-d*(o.y-i.y)},next:{x:r.x+f*(o.x-i.x),y:r.y+f*(o.y-i.y)}}}function dW(n,t,e){const s=n.length;let i,r,o,a,l,c=Mu(n,0);for(let u=0;u<s-1;++u)if(l=c,c=Mu(n,u+1),!(!l||!c)){if(uh(t[u],0,cW)){e[u]=e[u+1]=0;continue}i=e[u]/t[u],r=e[u+1]/t[u],a=Math.pow(i,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),e[u]=i*o*t[u],e[u+1]=r*o*t[u])}}function hW(n,t,e="x"){const s=xx(e),i=n.length;let r,o,a,l=Mu(n,0);for(let c=0;c<i;++c){if(o=a,a=l,l=Mu(n,c+1),!a)continue;const u=a[e],d=a[s];o&&(r=(u-o[e])/3,a[`cp1${e}`]=u-r,a[`cp1${s}`]=d-r*t[c]),l&&(r=(l[e]-u)/3,a[`cp2${e}`]=u+r,a[`cp2${s}`]=d+r*t[c])}}function fW(n,t="x"){const e=xx(t),s=n.length,i=Array(s).fill(0),r=Array(s);let o,a,l,c=Mu(n,0);for(o=0;o<s;++o)if(a=l,l=c,c=Mu(n,o+1),!!l){if(c){const u=c[t]-l[t];i[o]=u!==0?(c[e]-l[e])/u:0}r[o]=a?c?co(i[o-1])!==co(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}dW(n,i,r),hW(n,r,t)}function C1(n,t,e){return Math.max(Math.min(n,e),t)}function pW(n,t){let e,s,i,r,o,a=Yo(n[0],t);for(e=0,s=n.length;e<s;++e)o=r,r=a,a=e<s-1&&Yo(n[e+1],t),r&&(i=n[e],o&&(i.cp1x=C1(i.cp1x,t.left,t.right),i.cp1y=C1(i.cp1y,t.top,t.bottom)),a&&(i.cp2x=C1(i.cp2x,t.left,t.right),i.cp2y=C1(i.cp2y,t.top,t.bottom)))}function gW(n,t,e,s,i){let r,o,a,l;if(t.spanGaps&&(n=n.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")fW(n,i);else{let c=s?n[n.length-1]:n[0];for(r=0,o=n.length;r<o;++r)a=n[r],l=uW(c,a,n[Math.min(r+1,o-(s?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&pW(n,e)}function vb(){return typeof window<"u"&&typeof document<"u"}function yb(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Mp(n,t,e){let s;return typeof n=="string"?(s=parseInt(n,10),n.indexOf("%")!==-1&&(s=s/100*t.parentNode[e])):s=n,s}const yg=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function mW(n,t){return yg(n).getPropertyValue(t)}const bW=["top","right","bottom","left"];function ic(n,t,e){const s={};e=e?"-"+e:"";for(let i=0;i<4;i++){const r=bW[i];s[r]=parseFloat(n[t+"-"+r+e])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const vW=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function yW(n,t){const e=n.touches,s=e&&e.length?e[0]:n,{offsetX:i,offsetY:r}=s;let o=!1,a,l;if(vW(i,r,n.target))a=i,l=r;else{const c=t.getBoundingClientRect();a=s.clientX-c.left,l=s.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Bl(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:s}=t,i=yg(e),r=i.boxSizing==="border-box",o=ic(i,"padding"),a=ic(i,"border","width"),{x:l,y:c,box:u}=yW(n,e),d=o.left+(u&&a.left),f=o.top+(u&&a.top);let{width:h,height:g}=t;return r&&(h-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-d)/h*e.width/s),y:Math.round((c-f)/g*e.height/s)}}function wW(n,t,e){let s,i;if(t===void 0||e===void 0){const r=n&&yb(n);if(!r)t=n.clientWidth,e=n.clientHeight;else{const o=r.getBoundingClientRect(),a=yg(r),l=ic(a,"border","width"),c=ic(a,"padding");t=o.width-c.width-l.width,e=o.height-c.height-l.height,s=Mp(a.maxWidth,r,"clientWidth"),i=Mp(a.maxHeight,r,"clientHeight")}}return{width:t,height:e,maxWidth:s||Ip,maxHeight:i||Ip}}const k1=n=>Math.round(n*10)/10;function _W(n,t,e,s){const i=yg(n),r=ic(i,"margin"),o=Mp(i.maxWidth,n,"clientWidth")||Ip,a=Mp(i.maxHeight,n,"clientHeight")||Ip,l=wW(n,t,e);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const f=ic(i,"border","width"),h=ic(i,"padding");c-=h.width+f.width,u-=h.height+f.height}return c=Math.max(0,c-r.width),u=Math.max(0,s?c/s:u-r.height),c=k1(Math.min(c,o,l.maxWidth)),u=k1(Math.min(u,a,l.maxHeight)),c&&!u&&(u=k1(c/2)),(t!==void 0||e!==void 0)&&s&&l.height&&u>l.height&&(u=l.height,c=k1(Math.floor(u*s))),{width:c,height:u}}function i4(n,t,e){const s=t||1,i=Math.floor(n.height*s),r=Math.floor(n.width*s);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const o=n.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==s||o.height!==i||o.width!==r?(n.currentDevicePixelRatio=s,o.height=i,o.width=r,n.ctx.setTransform(s,0,0,s,0,0),!0):!1}const xW=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};vb()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function r4(n,t){const e=mW(n,t),s=e&&e.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function jl(n,t,e,s){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function CW(n,t,e,s){return{x:n.x+e*(t.x-n.x),y:s==="middle"?e<.5?n.y:t.y:s==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function kW(n,t,e,s){const i={x:n.cp2x,y:n.cp2y},r={x:t.cp1x,y:t.cp1y},o=jl(n,i,e),a=jl(i,r,e),l=jl(r,t,e),c=jl(o,a,e),u=jl(a,l,e);return jl(c,u,e)}const AW=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,s){return e-s},leftForLtr(e,s){return e-s}}},SW=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function mu(n,t,e){return n?AW(t,e):SW()}function Cx(n,t){let e,s;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,s=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=s)}function kx(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function Ax(n){return n==="angle"?{between:Nh,compare:Eq,normalize:Qs}:{between:Wo,compare:(t,e)=>t-e,normalize:t=>t}}function o4({start:n,end:t,count:e,loop:s,style:i}){return{start:n%e,end:t%e,loop:s&&(t-n+1)%e===0,style:i}}function EW(n,t,e){const{property:s,start:i,end:r}=e,{between:o,normalize:a}=Ax(s),l=t.length;let{start:c,end:u,loop:d}=n,f,h;if(d){for(c+=l,u+=l,f=0,h=l;f<h&&o(a(t[c%l][s]),i,r);++f)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:n.style}}function Sx(n,t,e){if(!e)return[n];const{property:s,start:i,end:r}=e,o=t.length,{compare:a,between:l,normalize:c}=Ax(s),{start:u,end:d,loop:f,style:h}=EW(n,t,e),g=[];let m=!1,b=null,y,x,_;const C=()=>l(i,_,y)&&a(i,_)!==0,A=()=>a(r,y)===0||l(r,_,y),I=()=>m||C(),R=()=>!m||A();for(let L=u,P=u;L<=d;++L)x=t[L%o],!x.skip&&(y=c(x[s]),y!==_&&(m=l(y,i,r),b===null&&I()&&(b=a(y,i)===0?L:P),b!==null&&R()&&(g.push(o4({start:b,end:L,loop:f,count:o,style:h})),b=null),P=L,_=y));return b!==null&&g.push(o4({start:b,end:d,loop:f,count:o,style:h})),g}function Ex(n,t){const e=[],s=n.segments;for(let i=0;i<s.length;i++){const r=Sx(s[i],n.points,t);r.length&&e.push(...r)}return e}function TW(n,t,e,s){let i=0,r=t-1;if(e&&!s)for(;i<t&&!n[i].skip;)i++;for(;i<t&&n[i].skip;)i++;for(i%=t,e&&(r+=i);r>i&&n[r%t].skip;)r--;return r%=t,{start:i,end:r}}function LW(n,t,e,s){const i=n.length,r=[];let o=t,a=n[t],l;for(l=t+1;l<=e;++l){const c=n[l%i];c.skip||c.stop?a.skip||(s=!1,r.push({start:t%i,end:(l-1)%i,loop:s}),t=o=c.stop?l:null):(o=l,a.skip&&(t=l)),a=c}return o!==null&&r.push({start:t%i,end:o%i,loop:s}),r}function PW(n,t){const e=n.points,s=n.options.spanGaps,i=e.length;if(!i)return[];const r=!!n._loop,{start:o,end:a}=TW(e,i,r,s);if(s===!0)return a4(n,[{start:o,end:a,loop:r}],e,t);const l=a<o?a+i:a,c=!!n._fullLoop&&o===0&&a===i-1;return a4(n,LW(e,o,l,c),e,t)}function a4(n,t,e,s){return!s||!s.setContext||!e?t:IW(n,t,e,s)}function IW(n,t,e,s){const i=n._chart.getContext(),r=l4(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,l=e.length,c=[];let u=r,d=t[0].start,f=d;function h(g,m,b,y){const x=a?-1:1;if(g!==m){for(g+=l;e[g%l].skip;)g-=x;for(;e[m%l].skip;)m+=x;g%l!==m%l&&(c.push({start:g%l,end:m%l,loop:b,style:y}),u=y,d=m%l)}}for(const g of t){d=a?d:g.start;let m=e[d%l],b;for(f=d+1;f<=g.end;f++){const y=e[f%l];b=l4(s.setContext(Qa(i,{type:"segment",p0:m,p1:y,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),DW(b,u)&&h(d,f-1,g.loop,u),m=y,u=b}d<f-1&&h(d,f-1,g.loop,u)}return c}function l4(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function DW(n,t){if(!t)return!1;const e=[],s=function(i,r){return fb(r)?(e.includes(r)||e.push(r),e.indexOf(r)):r};return JSON.stringify(n,s)!==JSON.stringify(t,s)}function A1(n,t,e){return n.options.clip?n[e]:t[e]}function MW(n,t){const{xScale:e,yScale:s}=n;return e&&s?{left:A1(e,t,"left"),right:A1(e,t,"right"),top:A1(s,t,"top"),bottom:A1(s,t,"bottom")}:t}function Tx(n,t){const e=t._clip;if(e.disabled)return!1;const s=MW(t,n.chartArea);return{left:e.left===!1?0:s.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:s.right+(e.right===!0?0:e.right),top:e.top===!1?0:s.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:s.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class RW{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,s,i){const r=e.listeners[i],o=e.duration;r.forEach(a=>a({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(s-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=ux.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((s,i)=>{if(!s.running||!s.items.length)return;const r=s.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(i.draw(),this._notify(i,s,t,"progress")),r.length||(s.running=!1,this._notify(i,s,t,"complete"),s.initial=!1),e+=r.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let s=e.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,s)),s}listen(t,e,s){this._getAnims(t).listeners[e].push(s)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((s,i)=>Math.max(s,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const s=e.items;let i=s.length-1;for(;i>=0;--i)s[i].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Ro=new RW;const c4="transparent",NW={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const s=Qw(n||c4),i=s.valid&&Qw(t||c4);return i&&i.valid?i.mix(s,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class OW{constructor(t,e,s,i){const r=e[s];i=Ud([t.to,i,r,t.from]);const o=Ud([t.from,r,i]);this._active=!0,this._fn=t.fn||NW[t.type||typeof o],this._easing=dh[t.easing]||dh.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=s,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(t,e,s){if(this._active){this._notify(!1);const i=this._target[this._prop],r=s-this._start,o=this._duration-r;this._start=s,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=Ud([t.to,e,i,t.from]),this._from=Ud([t.from,i,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,s=this._duration,i=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||e<s),!this._active){this._target[i]=a,this._notify(!0);return}if(e<0){this._target[i]=r;return}l=e/s%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(r,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,s)=>{t.push({res:e,rej:s})})}_notify(t){const e=t?"res":"rej",s=this._promises||[];for(let i=0;i<s.length;i++)s[i][e]()}}class Lx{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!qe(t))return;const e=Object.keys(Nn.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const r=t[i];if(!qe(r))return;const o={};for(const a of e)o[a]=r[a];(Rn(r.properties)&&r.properties||[i]).forEach(a=>{(a===i||!s.has(a))&&s.set(a,o)})})}_animateOptions(t,e){const s=e.options,i=$W(t,s);if(!i)return[];const r=this._createAnimations(i,s);return s.$shared&&FW(t.options.$animations,s).then(()=>{t.options=s},()=>{}),r}_createAnimations(t,e){const s=this._properties,i=[],r=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(t,e));continue}const u=e[c];let d=r[c];const f=s.get(c);if(d)if(f&&d.active()){d.update(f,u,a);continue}else d.cancel();if(!f||!f.duration){t[c]=u;continue}r[c]=d=new OW(f,t,c,u),i.push(d)}return i}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const s=this._createAnimations(t,e);if(s.length)return Ro.add(this._chart,s),!0}}function FW(n,t){const e=[],s=Object.keys(t);for(let i=0;i<s.length;i++){const r=n[s[i]];r&&r.active()&&e.push(r.wait())}return Promise.all(e)}function $W(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function u4(n,t){const e=n&&n.options||{},s=e.reverse,i=e.min===void 0?t:0,r=e.max===void 0?t:0;return{start:s?r:i,end:s?i:r}}function BW(n,t,e){if(e===!1)return!1;const s=u4(n,e),i=u4(t,e);return{top:i.end,right:s.end,bottom:i.start,left:s.start}}function jW(n){let t,e,s,i;return qe(n)?(t=n.top,e=n.right,s=n.bottom,i=n.left):t=e=s=i=n,{top:t,right:e,bottom:s,left:i,disabled:n===!1}}function Px(n,t){const e=[],s=n._getSortedDatasetMetas(t);let i,r;for(i=0,r=s.length;i<r;++i)e.push(s[i].index);return e}function d4(n,t,e,s={}){const i=n.keys,r=s.mode==="single";let o,a,l,c;if(t===null)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===e){if(u=!0,s.all)continue;break}c=n.values[l],Gn(c)&&(r||t===0||co(t)===co(c))&&(t+=c)}return!u&&!s.all?0:t}function UW(n,t){const{iScale:e,vScale:s}=t,i=e.axis==="x"?"x":"y",r=s.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[i]:u,[r]:n[u]};return a}function g0(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function zW(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function HW(n){const{min:t,max:e,minDefined:s,maxDefined:i}=n.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:i?e:Number.POSITIVE_INFINITY}}function VW(n,t,e){const s=n[t]||(n[t]={});return s[e]||(s[e]={})}function h4(n,t,e,s){for(const i of t.getMatchingVisibleMetas(s).reverse()){const r=n[i.index];if(e&&r>0||!e&&r<0)return i.index}return null}function f4(n,t){const{chart:e,_cachedMeta:s}=n,i=e._stacks||(e._stacks={}),{iScale:r,vScale:o,index:a}=s,l=r.axis,c=o.axis,u=zW(r,o,s),d=t.length;let f;for(let h=0;h<d;++h){const g=t[h],{[l]:m,[c]:b}=g,y=g._stacks||(g._stacks={});f=y[c]=VW(i,u,m),f[a]=b,f._top=h4(f,o,!0,s.type),f._bottom=h4(f,o,!1,s.type);const x=f._visualValues||(f._visualValues={});x[a]=b}}function m0(n,t){const e=n.scales;return Object.keys(e).filter(s=>e[s].axis===t).shift()}function qW(n,t){return Qa(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function WW(n,t,e){return Qa(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function Ad(n,t){const e=n.controller.index,s=n.vScale&&n.vScale.axis;if(s){t=t||n._parsed;for(const i of t){const r=i._stacks;if(!r||r[s]===void 0||r[s][e]===void 0)return;delete r[s][e],r[s]._visualValues!==void 0&&r[s]._visualValues[e]!==void 0&&delete r[s]._visualValues[e]}}}const b0=n=>n==="reset"||n==="none",p4=(n,t)=>t?n:Object.assign({},n),GW=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:Px(e,!0),values:null};class tl{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=g0(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Ad(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,s=this.getDataset(),i=(d,f,h,g)=>d==="x"?f:d==="r"?g:h,r=e.xAxisID=Ie(s.xAxisID,m0(t,"x")),o=e.yAxisID=Ie(s.yAxisID,m0(t,"y")),a=e.rAxisID=Ie(s.rAxisID,m0(t,"r")),l=e.indexAxis,c=e.iAxisID=i(l,r,o,a),u=e.vAxisID=i(l,o,r,a);e.xScale=this.getScaleForId(r),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(c),e.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Xw(this._data,this),t._stacked&&Ad(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),s=this._data;if(qe(e)){const i=this._cachedMeta;this._data=UW(e,i)}else if(s!==e){if(s){Xw(s,this);const i=this._cachedMeta;Ad(i),i._parsed=[]}e&&Object.isExtensible(e)&&Iq(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,s=this.getDataset();let i=!1;this._dataCheck();const r=e._stacked;e._stacked=g0(e.vScale,e),e.stack!==s.stack&&(i=!0,Ad(e),e.stack=s.stack),this._resyncElements(t),(i||r!==e._stacked)&&(f4(this,e._parsed),e._stacked=g0(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:s,_data:i}=this,{iScale:r,_stacked:o}=s,a=r.axis;let l=t===0&&e===i.length?!0:s._sorted,c=t>0&&s._parsed[t-1],u,d,f;if(this._parsing===!1)s._parsed=i,s._sorted=!0,f=i;else{Rn(i[t])?f=this.parseArrayData(s,i,t,e):qe(i[t])?f=this.parseObjectData(s,i,t,e):f=this.parsePrimitiveData(s,i,t,e);const h=()=>d[a]===null||c&&d[a]<c[a];for(u=0;u<e;++u)s._parsed[u+t]=d=f[u],l&&(h()&&(l=!1),c=d);s._sorted=l}o&&f4(this,f)}parsePrimitiveData(t,e,s,i){const{iScale:r,vScale:o}=t,a=r.axis,l=o.axis,c=r.getLabels(),u=r===o,d=new Array(i);let f,h,g;for(f=0,h=i;f<h;++f)g=f+s,d[f]={[a]:u||r.parse(c[g],g),[l]:o.parse(e[g],g)};return d}parseArrayData(t,e,s,i){const{xScale:r,yScale:o}=t,a=new Array(i);let l,c,u,d;for(l=0,c=i;l<c;++l)u=l+s,d=e[u],a[l]={x:r.parse(d[0],u),y:o.parse(d[1],u)};return a}parseObjectData(t,e,s,i){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,d,f,h;for(u=0,d=i;u<d;++u)f=u+s,h=e[f],c[u]={x:r.parse(Ga(h,a),f),y:o.parse(Ga(h,l),f)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,s){const i=this.chart,r=this._cachedMeta,o=e[t.axis],a={keys:Px(i,!0),values:e._stacks[t.axis]._visualValues};return d4(a,o,r.index,{mode:s})}updateRangeFromParsed(t,e,s,i){const r=s[e.axis];let o=r===null?NaN:r;const a=i&&s._stacks[e.axis];i&&a&&(i.values=a,o=d4(i,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const s=this._cachedMeta,i=s._parsed,r=s._sorted&&t===s.iScale,o=i.length,a=this._getOtherScale(t),l=GW(e,s,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=HW(a);let f,h;function g(){h=i[f];const m=h[a.axis];return!Gn(h[t.axis])||u>m||d<m}for(f=0;f<o&&!(!g()&&(this.updateRangeFromParsed(c,t,h,l),r));++f);if(r){for(f=o-1;f>=0;--f)if(!g()){this.updateRangeFromParsed(c,t,h,l);break}}return c}getAllParsedValues(t){const e=this._cachedMeta._parsed,s=[];let i,r,o;for(i=0,r=e.length;i<r;++i)o=e[i][t.axis],Gn(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,s=e.iScale,i=e.vScale,r=this.getParsed(t);return{label:s?""+s.getLabelForValue(r[s.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=jW(Ie(this.options.clip,BW(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,s=this._cachedMeta,i=s.data||[],r=e.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(t,r,a,l),u=a;u<a+l;++u){const d=i[u];d.hidden||(d.active&&c?o.push(d):d.draw(t,r))}for(u=0;u<o.length;++u)o[u].draw(t,r)}getStyle(t,e){const s=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,e,s){const i=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=WW(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=i.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=qW(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!e,r.mode=s,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",s){const i=e==="active",r=this._cachedDataOpts,o=t+"-"+e,a=r[o],l=this.enableOptionSharing&&Rh(s);if(a)return p4(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,t),d=i?[`${t}Hover`,"hover",t,""]:[t,""],f=c.getOptionScopes(this.getDataset(),u),h=Object.keys(Nn.elements[t]),g=()=>this.getContext(s,i,e),m=c.resolveNamedOptions(f,h,g,d);return m.$shared&&(m.$shared=l,r[o]=Object.freeze(p4(m,l))),m}_resolveAnimations(t,e,s){const i=this.chart,r=this._cachedDataOpts,o=`animation-${e}`,a=r[o];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,e),f=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(f,this.getContext(t,s,e))}const c=new Lx(i,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||b0(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const s=this.resolveDataElementOptions(t,e),i=this._sharedOptions,r=this.getSharedOptions(s),o=this.includeOptions(e,r)||r!==i;return this.updateSharedOptions(r,e,s),{sharedOptions:r,includeOptions:o}}updateElement(t,e,s,i){b0(i)?Object.assign(t,s):this._resolveAnimations(e,i).update(t,s)}updateSharedOptions(t,e,s){t&&!b0(e)&&this._resolveAnimations(void 0,e).update(t,s)}_setStyle(t,e,s,i){t.active=i;const r=this.getStyle(e,i);this._resolveAnimations(e,s,i).update(t,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(t,e,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,e,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,s=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=s.length,r=e.length,o=Math.min(r,i);o&&this.parse(0,o),r>i?this._insertElements(i,r-i,t):r<i&&this._removeElements(r,i-r)}_insertElements(t,e,s=!0){const i=this._cachedMeta,r=i.data,o=t+e;let a;const l=c=>{for(c.length+=e,a=c.length-1;a>=o;a--)c[a]=c[a-e]};for(l(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(t,e),s&&this.updateElements(r,t,e,"reset")}updateElements(t,e,s,i){}_removeElements(t,e){const s=this._cachedMeta;if(this._parsing){const i=s._parsed.splice(t,e);s._stacked&&Ad(s,i)}s.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,s,i]=t;this[e](s,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function YW(n,t){if(!n._cache.$bar){const e=n.getMatchingVisibleMetas(t);let s=[];for(let i=0,r=e.length;i<r;i++)s=s.concat(e[i].controller.getAllParsedValues(n));n._cache.$bar=cx(s.sort((i,r)=>i-r))}return n._cache.$bar}function KW(n){const t=n.iScale,e=YW(t,n.type);let s=t._length,i,r,o,a;const l=()=>{o===32767||o===-32768||(Rh(a)&&(s=Math.min(s,Math.abs(o-a)||s)),a=o)};for(i=0,r=e.length;i<r;++i)o=t.getPixelForValue(e[i]),l();for(a=void 0,i=0,r=t.ticks.length;i<r;++i)o=t.getPixelForTick(i),l();return s}function XW(n,t,e,s){const i=e.barThickness;let r,o;return Ve(i)?(r=t.min*e.categoryPercentage,o=e.barPercentage):(r=i*s,o=1),{chunk:r/s,ratio:o,start:t.pixels[n]-r/2}}function ZW(n,t,e,s){const i=t.pixels,r=i[n];let o=n>0?i[n-1]:null,a=n<i.length-1?i[n+1]:null;const l=e.categoryPercentage;o===null&&(o=r-(a===null?t.end-t.start:a-r)),a===null&&(a=r+r-o);const c=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/s,ratio:e.barPercentage,start:c}}function JW(n,t,e,s){const i=e.parse(n[0],s),r=e.parse(n[1],s),o=Math.min(i,r),a=Math.max(i,r);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[e.axis]=c,t._custom={barStart:l,barEnd:c,start:i,end:r,min:o,max:a}}function Ix(n,t,e,s){return Rn(n)?JW(n,t,e,s):t[e.axis]=e.parse(n,s),t}function g4(n,t,e,s){const i=n.iScale,r=n.vScale,o=i.getLabels(),a=i===r,l=[];let c,u,d,f;for(c=e,u=e+s;c<u;++c)f=t[c],d={},d[i.axis]=a||i.parse(o[c],c),l.push(Ix(f,d,r,c));return l}function v0(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function QW(n,t,e){return n!==0?co(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function tG(n){let t,e,s,i,r;return n.horizontal?(t=n.base>n.x,e="left",s="right"):(t=n.base<n.y,e="bottom",s="top"),t?(i="end",r="start"):(i="start",r="end"),{start:e,end:s,reverse:t,top:i,bottom:r}}function eG(n,t,e,s){let i=t.borderSkipped;const r={};if(!i){n.borderSkipped=r;return}if(i===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=tG(n);i==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===s?i=c:(e._bottom||0)===s?i=u:(r[m4(u,o,a,l)]=!0,i=c)),r[m4(i,o,a,l)]=!0,n.borderSkipped=r}function m4(n,t,e,s){return s?(n=nG(n,t,e),n=b4(n,e,t)):n=b4(n,t,e),n}function nG(n,t,e){return n===t?e:n===e?t:n}function b4(n,t,e){return n==="start"?t:n==="end"?e:n}function sG(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}class iG extends tl{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,s,i){return g4(t,e,s,i)}parseArrayData(t,e,s,i){return g4(t,e,s,i)}parseObjectData(t,e,s,i){const{iScale:r,vScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=r.axis==="x"?a:l,u=o.axis==="x"?a:l,d=[];let f,h,g,m;for(f=s,h=s+i;f<h;++f)m=e[f],g={},g[r.axis]=r.parse(Ga(m,c),f),d.push(Ix(Ga(m,u),g,o,f));return d}updateRangeFromParsed(t,e,s,i){super.updateRangeFromParsed(t,e,s,i);const r=s._custom;r&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:s,vScale:i}=e,r=this.getParsed(t),o=r._custom,a=v0(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+s.getLabelForValue(r[s.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,s,i){const r=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:d,includeOptions:f}=this._getSharedOptions(e,i);for(let h=e;h<e+s;h++){const g=this.getParsed(h),m=r||Ve(g[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(h),b=this._calculateBarIndexPixels(h,u),y=(g._stacks||{})[a.axis],x={horizontal:c,base:m.base,enableBorderRadius:!y||v0(g._custom)||o===y._top||o===y._bottom,x:c?m.head:b.center,y:c?b.center:m.head,height:c?b.size:Math.abs(m.size),width:c?Math.abs(m.size):b.size};f&&(x.options=d||this.resolveDataElementOptions(h,t[h].active?"active":i));const _=x.options||t[h].options;eG(x,_,y,o),sG(x,_,u.ratio),this.updateElement(t[h],h,x,i)}}_getStacks(t,e){const{iScale:s}=this._cachedMeta,i=s.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),r=s.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(e),l=a&&a[s.axis],c=u=>{const d=u._parsed.find(h=>h[s.axis]===l),f=d&&d[u.vScale.axis];if(Ve(f)||isNaN(f))return!0};for(const u of i)if(!(e!==void 0&&c(u))&&((r===!1||o.indexOf(u.stack)===-1||r===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(s=>t[s].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)t[Ie(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,s){const i=this._getStacks(t,s),r=e!==void 0?i.indexOf(e):-1;return r===-1?i.length-1:r}_getRuler(){const t=this.options,e=this._cachedMeta,s=e.iScale,i=[];let r,o;for(r=0,o=e.data.length;r<o;++r)i.push(s.getPixelForValue(this.getParsed(r)[s.axis],r));const a=t.barThickness;return{min:a||KW(e),pixels:i,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:s,index:i},options:{base:r,minBarLength:o}}=this,a=r||0,l=this.getParsed(t),c=l._custom,u=v0(c);let d=l[e.axis],f=0,h=s?this.applyStack(e,l,s):d,g,m;h!==d&&(f=h-d,h=d),u&&(d=c.barStart,h=c.barEnd-c.barStart,d!==0&&co(d)!==co(c.barEnd)&&(f=0),f+=d);const b=!Ve(r)&&!u?r:f;let y=e.getPixelForValue(b);if(this.chart.getDataVisibility(t)?g=e.getPixelForValue(f+h):g=y,m=g-y,Math.abs(m)<o){m=QW(m,e,a)*o,d===a&&(y-=m/2);const x=e.getPixelForDecimal(0),_=e.getPixelForDecimal(1),C=Math.min(x,_),A=Math.max(x,_);y=Math.max(Math.min(y,A),C),g=y+m,s&&!u&&(l._stacks[e.axis]._visualValues[i]=e.getValueForPixel(g)-e.getValueForPixel(y))}if(y===e.getPixelForValue(a)){const x=co(m)*e.getLineWidthForValue(a)/2;y+=x,m-=x}return{size:m,base:y,head:g,center:g+m/2}}_calculateBarIndexPixels(t,e){const s=e.scale,i=this.options,r=i.skipNull,o=Ie(i.maxBarThickness,1/0);let a,l;const c=this._getAxisCount();if(e.grouped){const u=r?this._getStackCount(t):e.stackCount,d=i.barThickness==="flex"?ZW(t,e,i,u*c):XW(t,e,i,u*c),f=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,h=this._getAxis().indexOf(Ie(f,this.getFirstScaleIdForIndexAxis())),g=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0)+h;a=d.start+d.chunk*g+d.chunk/2,l=Math.min(o,d.chunk*d.ratio)}else a=s.getPixelForValue(this.getParsed(t)[s.axis],t),l=Math.min(o,e.min*e.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,e=t.vScale,s=t.data,i=s.length;let r=0;for(;r<i;++r)this.getParsed(r)[e.axis]!==null&&!s[r].hidden&&s[r].draw(this._ctx)}}class rG extends tl{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,s,i){const r=super.parsePrimitiveData(t,e,s,i);for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+s).radius;return r}parseArrayData(t,e,s,i){const r=super.parseArrayData(t,e,s,i);for(let o=0;o<r.length;o++){const a=e[s+o];r[o]._custom=Ie(a[2],this.resolveDataElementOptions(o+s).radius)}return r}parseObjectData(t,e,s,i){const r=super.parseObjectData(t,e,s,i);for(let o=0;o<r.length;o++){const a=e[s+o];r[o]._custom=Ie(a&&a.r&&+a.r,this.resolveDataElementOptions(o+s).radius)}return r}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let s=t.length-1;s>=0;--s)e=Math.max(e,t[s].size(this.resolveDataElementOptions(s))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,s=this.chart.data.labels||[],{xScale:i,yScale:r}=e,o=this.getParsed(t),a=i.getLabelForValue(o.x),l=r.getLabelForValue(o.y),c=o._custom;return{label:s[t]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,s,i){const r=i==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(e,i),u=o.axis,d=a.axis;for(let f=e;f<e+s;f++){const h=t[f],g=!r&&this.getParsed(f),m={},b=m[u]=r?o.getPixelForDecimal(.5):o.getPixelForValue(g[u]),y=m[d]=r?a.getBasePixel():a.getPixelForValue(g[d]);m.skip=isNaN(b)||isNaN(y),c&&(m.options=l||this.resolveDataElementOptions(f,h.active?"active":i),r&&(m.options.radius=0)),this.updateElement(h,f,m,i)}}resolveDataElementOptions(t,e){const s=this.getParsed(t);let i=super.resolveDataElementOptions(t,e);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return e!=="active"&&(i.radius=0),i.radius+=Ie(s&&s._custom,r),i}}function oG(n,t,e){let s=1,i=1,r=0,o=0;if(t<Pn){const a=n,l=a+t,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),f=Math.sin(l),h=(_,C,A)=>Nh(_,a,l,!0)?1:Math.max(C,C*e,A,A*e),g=(_,C,A)=>Nh(_,a,l,!0)?-1:Math.min(C,C*e,A,A*e),m=h(0,c,d),b=h(is,u,f),y=g(tn,c,d),x=g(tn+is,u,f);s=(m-y)/2,i=(b-x)/2,r=-(m+y)/2,o=-(b+x)/2}return{ratioX:s,ratioY:i,offsetX:r,offsetY:o}}class wb extends tl{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:s,color:i}}=t.legend.options;return e.labels.map((r,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:s,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,e,s){s.chart.toggleDataVisibility(e.index),s.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const s=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=s;else{let r=l=>+s[l];if(qe(s[t])){const{key:l="value"}=this._parsing;r=c=>+Ga(s[c],l)}let o,a;for(o=t,a=t+e;o<a;++o)i._parsed[o]=r(o)}}_getRotation(){return Tr(this.options.rotation-90)}_getCircumference(){return Tr(this.options.circumference)}_getRotationExtents(){let t=Pn,e=-Pn;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const i=this.chart.getDatasetMeta(s).controller,r=i._getRotation(),o=i._getCircumference();t=Math.min(t,r),e=Math.max(e,r+o)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:s}=e,i=this._cachedMeta,r=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-o)/2,0),l=Math.min(mq(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:h,offsetX:g,offsetY:m}=oG(d,u,l),b=(s.width-o)/f,y=(s.height-o)/h,x=Math.max(Math.min(b,y)/2,0),_=ix(this.options.radius,x),C=Math.max(_*l,0),A=(_-C)/this._getVisibleDatasetWeightTotal();this.offsetX=g*_,this.offsetY=m*_,i.total=this.calculateTotal(),this.outerRadius=_-A*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-A*c,0),this.updateElements(r,0,r.length,t)}_circumference(t,e){const s=this.options,i=this._cachedMeta,r=this._getCircumference();return e&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||i._parsed[t]===null||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*r/Pn)}updateElements(t,e,s,i){const r=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,d=(a.top+a.bottom)/2,f=r&&c.animateScale,h=f?0:this.innerRadius,g=f?0:this.outerRadius,{sharedOptions:m,includeOptions:b}=this._getSharedOptions(e,i);let y=this._getRotation(),x;for(x=0;x<e;++x)y+=this._circumference(x,r);for(x=e;x<e+s;++x){const _=this._circumference(x,r),C=t[x],A={x:u+this.offsetX,y:d+this.offsetY,startAngle:y,endAngle:y+_,circumference:_,outerRadius:g,innerRadius:h};b&&(A.options=m||this.resolveDataElementOptions(x,C.active?"active":i)),y+=_,this.updateElement(C,x,A,i)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let s=0,i;for(i=0;i<e.length;i++){const r=t._parsed[i];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(i)&&!e[i].hidden&&(s+=Math.abs(r))}return s}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?Pn*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,s=this.chart,i=s.data.labels||[],r=rf(e._parsed[t],s.options.locale);return{label:i[t]||"",value:r}}getMaxBorderWidth(t){let e=0;const s=this.chart;let i,r,o,a,l;if(!t){for(i=0,r=s.data.datasets.length;i<r;++i)if(s.isDatasetVisible(i)){o=s.getDatasetMeta(i),t=o.data,a=o.controller;break}}if(!t)return 0;for(i=0,r=t.length;i<r;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(e=Math.max(e,l.borderWidth||0,l.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let s=0,i=t.length;s<i;++s){const r=this.resolveDataElementOptions(s);e=Math.max(e,r.offset||0,r.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(e+=this._getRingWeight(s));return e}_getRingWeight(t){return Math.max(Ie(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class aG extends tl{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:s,data:i=[],_dataset:r}=e,o=this.chart._animationsDisabled;let{start:a,count:l}=hx(e,i,o);this._drawStart=a,this._drawCount=l,fx(e)&&(a=0,l=i.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!r._decimated,s.points=i;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:c},t),this.updateElements(i,a,l,t)}updateElements(t,e,s,i){const r=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(e,i),f=o.axis,h=a.axis,{spanGaps:g,segment:m}=this.options,b=Iu(g)?g:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||r||i==="none",x=e+s,_=t.length;let C=e>0&&this.getParsed(e-1);for(let A=0;A<_;++A){const I=t[A],R=y?I:{};if(A<e||A>=x){R.skip=!0;continue}const L=this.getParsed(A),P=Ve(L[h]),V=R[f]=o.getPixelForValue(L[f],A),T=R[h]=r||P?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,L,l):L[h],A);R.skip=isNaN(V)||isNaN(T)||P,R.stop=A>0&&Math.abs(L[f]-C[f])>b,m&&(R.parsed=L,R.raw=c.data[A]),d&&(R.options=u||this.resolveDataElementOptions(A,I.active?"active":i)),y||this.updateElement(I,A,R,i),C=L}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,s=e.options&&e.options.borderWidth||0,i=t.data||[];if(!i.length)return s;const r=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,r,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}class Dx extends tl{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:s,color:i}}=t.legend.options;return e.labels.map((r,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:s,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,e,s){s.chart.toggleDataVisibility(e.index),s.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,s=this.chart,i=s.data.labels||[],r=rf(e._parsed[t].r,s.options.locale);return{label:i[t]||"",value:r}}parseObjectData(t,e,s,i){return _x.bind(this)(t,e,s,i)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((s,i)=>{const r=this.getParsed(i).r;!isNaN(r)&&this.chart.getDataVisibility(i)&&(r<e.min&&(e.min=r),r>e.max&&(e.max=r))}),e}_updateRadius(){const t=this.chart,e=t.chartArea,s=t.options,i=Math.min(e.right-e.left,e.bottom-e.top),r=Math.max(i/2,0),o=Math.max(s.cutoutPercentage?r/100*s.cutoutPercentage:1,0),a=(r-o)/t.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,e,s,i){const r=i==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,d=c.yCenter,f=c.getIndexAngle(0)-.5*tn;let h=f,g;const m=360/this.countVisibleElements();for(g=0;g<e;++g)h+=this._computeAngle(g,i,m);for(g=e;g<e+s;g++){const b=t[g];let y=h,x=h+this._computeAngle(g,i,m),_=o.getDataVisibility(g)?c.getDistanceFromCenterForValue(this.getParsed(g).r):0;h=x,r&&(l.animateScale&&(_=0),l.animateRotate&&(y=x=f));const C={x:u,y:d,innerRadius:0,outerRadius:_,startAngle:y,endAngle:x,options:this.resolveDataElementOptions(g,b.active?"active":i)};this.updateElement(b,g,C,i)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach((s,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&e++}),e}_computeAngle(t,e,s){return this.chart.getDataVisibility(t)?Tr(this.resolveDataElementOptions(t,e).angle||s):0}}class lG extends wb{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class cG extends tl{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){const e=this._cachedMeta.vScale,s=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(s[e.axis])}}parseObjectData(t,e,s,i){return _x.bind(this)(t,e,s,i)}update(t){const e=this._cachedMeta,s=e.dataset,i=e.data||[],r=e.iScale.getLabels();if(s.points=i,t!=="resize"){const o=this.resolveDatasetElementOptions(t);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:r.length===i.length,options:o};this.updateElement(s,void 0,a,t)}this.updateElements(i,0,i.length,t)}updateElements(t,e,s,i){const r=this._cachedMeta.rScale,o=i==="reset";for(let a=e;a<e+s;a++){const l=t[a],c=this.resolveDataElementOptions(a,l.active?"active":i),u=r.getPointPositionForValue(a,this.getParsed(a).r),d=o?r.xCenter:u.x,f=o?r.yCenter:u.y,h={x:d,y:f,angle:u.angle,skip:isNaN(d)||isNaN(f),options:c};this.updateElement(l,a,h,i)}}}class uG extends tl{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){const e=this._cachedMeta,s=this.chart.data.labels||[],{xScale:i,yScale:r}=e,o=this.getParsed(t),a=i.getLabelForValue(o.x),l=r.getLabelForValue(o.y);return{label:s[t]||"",value:"("+a+", "+l+")"}}update(t){const e=this._cachedMeta,{data:s=[]}=e,i=this.chart._animationsDisabled;let{start:r,count:o}=hx(e,s,i);if(this._drawStart=r,this._drawCount=o,fx(e)&&(r=0,o=s.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=e;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=s;const c=this.resolveDatasetElementOptions(t);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:c},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(s,r,o,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,s,i){const r=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(e,i),d=this.getSharedOptions(u),f=this.includeOptions(i,d),h=o.axis,g=a.axis,{spanGaps:m,segment:b}=this.options,y=Iu(m)?m:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||r||i==="none";let _=e>0&&this.getParsed(e-1);for(let C=e;C<e+s;++C){const A=t[C],I=this.getParsed(C),R=x?A:{},L=Ve(I[g]),P=R[h]=o.getPixelForValue(I[h],C),V=R[g]=r||L?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,I,l):I[g],C);R.skip=isNaN(P)||isNaN(V)||L,R.stop=C>0&&Math.abs(I[h]-_[h])>y,b&&(R.parsed=I,R.raw=c.data[C]),f&&(R.options=d||this.resolveDataElementOptions(C,A.active?"active":i)),x||this.updateElement(A,C,R,i),_=I}this.updateSharedOptions(d,i,u)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let a=0;for(let l=e.length-1;l>=0;--l)a=Math.max(a,e[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const s=t.dataset,i=s.options&&s.options.borderWidth||0;if(!e.length)return i;const r=e[0].size(this.resolveDataElementOptions(0)),o=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(i,r,o)/2}}var dG=Object.freeze({__proto__:null,BarController:iG,BubbleController:rG,DoughnutController:wb,LineController:aG,PieController:lG,PolarAreaController:Dx,RadarController:cG,ScatterController:uG});function Ml(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class _b{static override(t){Object.assign(_b.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return Ml()}parse(){return Ml()}format(){return Ml()}add(){return Ml()}diff(){return Ml()}startOf(){return Ml()}endOf(){return Ml()}}var hG={_date:_b};function fG(n,t,e,s){const{controller:i,data:r,_sorted:o}=n,a=i._cachedMeta.iScale,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&o&&r.length){const c=a._reversePixels?Lq:Go;if(s){if(i._sharedOptions){const u=r[0],d=typeof u.getRange=="function"&&u.getRange(t);if(d){const f=c(r,t,e-d),h=c(r,t,e+d);return{lo:f.lo,hi:h.hi}}}}else{const u=c(r,t,e);if(l){const{vScale:d}=i._cachedMeta,{_parsed:f}=n,h=f.slice(0,u.lo+1).reverse().findIndex(m=>!Ve(m[d.axis]));u.lo-=Math.max(0,h);const g=f.slice(u.hi).findIndex(m=>!Ve(m[d.axis]));u.hi+=Math.max(0,g)}return u}}return{lo:0,hi:r.length-1}}function wg(n,t,e,s,i){const r=n.getSortedVisibleDatasetMetas(),o=e[t];for(let a=0,l=r.length;a<l;++a){const{index:c,data:u}=r[a],{lo:d,hi:f}=fG(r[a],t,o,i);for(let h=d;h<=f;++h){const g=u[h];g.skip||s(g,c,h)}}}function pG(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(s,i){const r=t?Math.abs(s.x-i.x):0,o=e?Math.abs(s.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function y0(n,t,e,s,i){const r=[];return!i&&!n.isPointInArea(t)||wg(n,e,t,function(a,l,c){!i&&!Yo(a,n.chartArea,0)||a.inRange(t.x,t.y,s)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function gG(n,t,e,s){let i=[];function r(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],s),{angle:d}=ax(o,{x:t.x,y:t.y});Nh(d,c,u)&&i.push({element:o,datasetIndex:a,index:l})}return wg(n,e,t,r),i}function mG(n,t,e,s,i,r){let o=[];const a=pG(e);let l=Number.POSITIVE_INFINITY;function c(u,d,f){const h=u.inRange(t.x,t.y,i);if(s&&!h)return;const g=u.getCenterPoint(i);if(!(!!r||n.isPointInArea(g))&&!h)return;const b=a(t,g);b<l?(o=[{element:u,datasetIndex:d,index:f}],l=b):b===l&&o.push({element:u,datasetIndex:d,index:f})}return wg(n,e,t,c),o}function w0(n,t,e,s,i,r){return!r&&!n.isPointInArea(t)?[]:e==="r"&&!s?gG(n,t,e,i):mG(n,t,e,s,i,r)}function v4(n,t,e,s,i){const r=[],o=e==="x"?"inXRange":"inYRange";let a=!1;return wg(n,e,t,(l,c,u)=>{l[o]&&l[o](t[e],i)&&(r.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(t.x,t.y,i))}),s&&!a?[]:r}var bG={modes:{index(n,t,e,s){const i=Bl(t,n),r=e.axis||"x",o=e.includeInvisible||!1,a=e.intersect?y0(n,i,r,s,o):w0(n,i,r,!1,s,o),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(n,t,e,s){const i=Bl(t,n),r=e.axis||"xy",o=e.includeInvisible||!1;let a=e.intersect?y0(n,i,r,s,o):w0(n,i,r,!1,s,o);if(a.length>0){const l=a[0].datasetIndex,c=n.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(n,t,e,s){const i=Bl(t,n),r=e.axis||"xy",o=e.includeInvisible||!1;return y0(n,i,r,s,o)},nearest(n,t,e,s){const i=Bl(t,n),r=e.axis||"xy",o=e.includeInvisible||!1;return w0(n,i,r,e.intersect,s,o)},x(n,t,e,s){const i=Bl(t,n);return v4(n,i,"x",e.intersect,s)},y(n,t,e,s){const i=Bl(t,n);return v4(n,i,"y",e.intersect,s)}}};const Mx=["left","top","right","bottom"];function Sd(n,t){return n.filter(e=>e.pos===t)}function y4(n,t){return n.filter(e=>Mx.indexOf(e.pos)===-1&&e.box.axis===t)}function Ed(n,t){return n.sort((e,s)=>{const i=t?s:e,r=t?e:s;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function vG(n){const t=[];let e,s,i,r,o,a;for(e=0,s=(n||[]).length;e<s;++e)i=n[e],{position:r,options:{stack:o,stackWeight:a=1}}=i,t.push({index:e,box:i,pos:r,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&r+o,stackWeight:a});return t}function yG(n){const t={};for(const e of n){const{stack:s,pos:i,stackWeight:r}=e;if(!s||!Mx.includes(i))continue;const o=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function wG(n,t){const e=yG(n),{vBoxMaxWidth:s,hBoxMaxHeight:i}=t;let r,o,a;for(r=0,o=n.length;r<o;++r){a=n[r];const{fullSize:l}=a.box,c=e[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*s:l&&t.availableWidth,a.height=i):(a.width=s,a.height=u?u*i:l&&t.availableHeight)}return e}function _G(n){const t=vG(n),e=Ed(t.filter(c=>c.box.fullSize),!0),s=Ed(Sd(t,"left"),!0),i=Ed(Sd(t,"right")),r=Ed(Sd(t,"top"),!0),o=Ed(Sd(t,"bottom")),a=y4(t,"x"),l=y4(t,"y");return{fullSize:e,leftAndTop:s.concat(r),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:Sd(t,"chartArea"),vertical:s.concat(i).concat(l),horizontal:r.concat(o).concat(a)}}function w4(n,t,e,s){return Math.max(n[e],t[e])+Math.max(n[s],t[s])}function Rx(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function xG(n,t,e,s){const{pos:i,box:r}=e,o=n.maxPadding;if(!qe(i)){e.size&&(n[i]-=e.size);const d=s[e.stack]||{size:0,count:1};d.size=Math.max(d.size,e.horizontal?r.height:r.width),e.size=d.size/d.count,n[i]+=e.size}r.getPadding&&Rx(o,r.getPadding());const a=Math.max(0,t.outerWidth-w4(o,n,"left","right")),l=Math.max(0,t.outerHeight-w4(o,n,"top","bottom")),c=a!==n.w,u=l!==n.h;return n.w=a,n.h=l,e.horizontal?{same:c,other:u}:{same:u,other:c}}function CG(n){const t=n.maxPadding;function e(s){const i=Math.max(t[s]-n[s],0);return n[s]+=i,i}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function kG(n,t){const e=t.maxPadding;function s(i){const r={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{r[o]=Math.max(t[o],e[o])}),r}return s(n?["left","right"]:["top","bottom"])}function zd(n,t,e,s){const i=[];let r,o,a,l,c,u;for(r=0,o=n.length,c=0;r<o;++r){a=n[r],l=a.box,l.update(a.width||t.w,a.height||t.h,kG(a.horizontal,t));const{same:d,other:f}=xG(t,e,a,s);c|=d&&i.length,u=u||f,l.fullSize||i.push(a)}return c&&zd(i,t,e,s)||u}function S1(n,t,e,s,i){n.top=e,n.left=t,n.right=t+s,n.bottom=e+i,n.width=s,n.height=i}function _4(n,t,e,s){const i=e.padding;let{x:r,y:o}=t;for(const a of n){const l=a.box,c=s[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const d=t.w*u,f=c.size||l.height;Rh(c.start)&&(o=c.start),l.fullSize?S1(l,i.left,o,e.outerWidth-i.right-i.left,f):S1(l,t.left+c.placed,o,d,f),c.start=o,c.placed+=d,o=l.bottom}else{const d=t.h*u,f=c.size||l.width;Rh(c.start)&&(r=c.start),l.fullSize?S1(l,r,i.top,f,e.outerHeight-i.bottom-i.top):S1(l,r,t.top+c.placed,f,d),c.start=r,c.placed+=d,r=l.right}}t.x=r,t.y=o}var ni={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,s){if(!n)return;const i=ii(n.options.layout.padding),r=Math.max(t-i.width,0),o=Math.max(e-i.height,0),a=_G(n.boxes),l=a.vertical,c=a.horizontal;hn(n.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});const u=l.reduce((m,b)=>b.box.options&&b.box.options.display===!1?m:m+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:e,padding:i,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},i);Rx(f,ii(s));const h=Object.assign({maxPadding:f,w:r,h:o,x:i.left,y:i.top},i),g=wG(l.concat(c),d);zd(a.fullSize,h,d,g),zd(l,h,d,g),zd(c,h,d,g)&&zd(l,h,d,g),CG(h),_4(a.leftAndTop,h,d,g),h.x+=h.w,h.y+=h.h,_4(a.rightAndBottom,h,d,g),n.chartArea={left:h.left,top:h.top,right:h.left+h.w,bottom:h.top+h.h,height:h.h,width:h.w},hn(a.chartArea,m=>{const b=m.box;Object.assign(b,n.chartArea),b.update(h.w,h.h,{left:0,top:0,right:0,bottom:0})})}};class Nx{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,s){}removeEventListener(t,e,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,s,i){return e=Math.max(0,e||t.width),s=s||t.height,{width:e,height:Math.max(0,i?Math.floor(e/i):s)}}isAttached(t){return!0}updateConfig(t){}}class AG extends Nx{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const np="$chartjs",SG={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},x4=n=>n===null||n==="";function EG(n,t){const e=n.style,s=n.getAttribute("height"),i=n.getAttribute("width");if(n[np]={initial:{height:s,width:i,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",x4(i)){const r=r4(n,"width");r!==void 0&&(n.width=r)}if(x4(s))if(n.style.height==="")n.height=n.width/(t||2);else{const r=r4(n,"height");r!==void 0&&(n.height=r)}return n}const Ox=xW?{passive:!0}:!1;function TG(n,t,e){n&&n.addEventListener(t,e,Ox)}function LG(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,Ox)}function PG(n,t){const e=SG[n.type]||n.type,{x:s,y:i}=Bl(n,t);return{type:e,chart:t,native:n,x:s!==void 0?s:null,y:i!==void 0?i:null}}function Rp(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function IG(n,t,e){const s=n.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Rp(a.addedNodes,s),o=o&&!Rp(a.removedNodes,s);o&&e()});return i.observe(document,{childList:!0,subtree:!0}),i}function DG(n,t,e){const s=n.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Rp(a.removedNodes,s),o=o&&!Rp(a.addedNodes,s);o&&e()});return i.observe(document,{childList:!0,subtree:!0}),i}const Fh=new Map;let C4=0;function Fx(){const n=window.devicePixelRatio;n!==C4&&(C4=n,Fh.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function MG(n,t){Fh.size||window.addEventListener("resize",Fx),Fh.set(n,t)}function RG(n){Fh.delete(n),Fh.size||window.removeEventListener("resize",Fx)}function NG(n,t,e){const s=n.canvas,i=s&&yb(s);if(!i)return;const r=dx((a,l)=>{const c=i.clientWidth;e(a,l),c<i.clientWidth&&e()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||r(c,u)});return o.observe(i),MG(n,r),o}function _0(n,t,e){e&&e.disconnect(),t==="resize"&&RG(n)}function OG(n,t,e){const s=n.canvas,i=dx(r=>{n.ctx!==null&&e(PG(r,n))},n);return TG(s,t,i),i}class FG extends Nx{acquireContext(t,e){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(EG(t,e),s):null}releaseContext(t){const e=t.canvas;if(!e[np])return!1;const s=e[np].initial;["height","width"].forEach(r=>{const o=s[r];Ve(o)?e.removeAttribute(r):e.setAttribute(r,o)});const i=s.style||{};return Object.keys(i).forEach(r=>{e.style[r]=i[r]}),e.width=e.width,delete e[np],!0}addEventListener(t,e,s){this.removeEventListener(t,e);const i=t.$proxies||(t.$proxies={}),o={attach:IG,detach:DG,resize:NG}[e]||OG;i[e]=o(t,e,s)}removeEventListener(t,e){const s=t.$proxies||(t.$proxies={}),i=s[e];if(!i)return;({attach:_0,detach:_0,resize:_0}[e]||LG)(t,e,i),s[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,s,i){return _W(t,e,s,i)}isAttached(t){const e=t&&yb(t);return!!(e&&e.isConnected)}}function $G(n){return!vb()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?AG:FG}let na=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:s}=this.getProps(["x","y"],t);return{x:e,y:s}}hasValue(){return Iu(this.x)&&Iu(this.y)}getProps(t,e){const s=this.$animations;if(!e||!s)return this;const i={};return t.forEach(r=>{i[r]=s[r]&&s[r].active()?s[r]._to:this[r]}),i}};function BG(n,t){const e=n.options.ticks,s=jG(n),i=Math.min(e.maxTicksLimit||s,s),r=e.major.enabled?zG(t):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>i)return HG(t,c,r,o/i),c;const u=UG(r,t,i);if(o>0){let d,f;const h=o>1?Math.round((l-a)/(o-1)):null;for(E1(t,c,u,Ve(h)?0:a-h,a),d=0,f=o-1;d<f;d++)E1(t,c,u,r[d],r[d+1]);return E1(t,c,u,l,Ve(h)?t.length:l+h),c}return E1(t,c,u),c}function jG(n){const t=n.options.offset,e=n._tickSize(),s=n._length/e+(t?0:1),i=n._maxLength/e;return Math.floor(Math.min(s,i))}function UG(n,t,e){const s=VG(n),i=t.length/e;if(!s)return Math.max(i,1);const r=kq(s);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>i)return l}return Math.max(i,1)}function zG(n){const t=[];let e,s;for(e=0,s=n.length;e<s;e++)n[e].major&&t.push(e);return t}function HG(n,t,e,s){let i=0,r=e[0],o;for(s=Math.ceil(s),o=0;o<n.length;o++)o===r&&(t.push(n[o]),i++,r=e[i*s])}function E1(n,t,e,s,i){const r=Ie(s,0),o=Math.min(Ie(i,n.length),n.length);let a=0,l,c,u;for(e=Math.ceil(e),i&&(l=i-s,e=l/Math.floor(l/e)),u=r;u<0;)a++,u=Math.round(r+a*e);for(c=Math.max(r,0);c<o;c++)c===u&&(t.push(n[c]),a++,u=Math.round(r+a*e))}function VG(n){const t=n.length;let e,s;if(t<2)return!1;for(s=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==s)return!1;return s}const qG=n=>n==="left"?"right":n==="right"?"left":n,k4=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,A4=(n,t)=>Math.min(t||n,n);function S4(n,t){const e=[],s=n.length/t,i=n.length;let r=0;for(;r<i;r+=s)e.push(n[Math.floor(r)]);return e}function WG(n,t,e){const s=n.ticks.length,i=Math.min(t,s-1),r=n._startPixel,o=n._endPixel,a=1e-6;let l=n.getPixelForTick(i),c;if(!(e&&(s===1?c=Math.max(l-r,o-l):t===0?c=(n.getPixelForTick(1)-l)/2:c=(l-n.getPixelForTick(i-1))/2,l+=i<t?c:-c,l<r-a||l>o+a)))return l}function GG(n,t){hn(n,e=>{const s=e.gc,i=s.length/2;let r;if(i>t){for(r=0;r<i;++r)delete e.data[s[r]];s.splice(0,i)}})}function Td(n){return n.drawTicks?n.tickLength:0}function E4(n,t){if(!n.display)return 0;const e=xs(n.font,t),s=ii(n.padding);return(Rn(n.text)?n.text.length:1)*e.lineHeight+s.height}function YG(n,t){return Qa(n,{scale:t,type:"scale"})}function KG(n,t,e){return Qa(n,{tick:e,index:t,type:"tick"})}function XG(n,t,e){let s=hb(n);return(e&&t!=="right"||!e&&t==="right")&&(s=qG(s)),s}function ZG(n,t,e,s){const{top:i,left:r,bottom:o,right:a,chart:l}=n,{chartArea:c,scales:u}=l;let d=0,f,h,g;const m=o-i,b=a-r;if(n.isHorizontal()){if(h=Zs(s,r,a),qe(e)){const y=Object.keys(e)[0],x=e[y];g=u[y].getPixelForValue(x)+m-t}else e==="center"?g=(c.bottom+c.top)/2+m-t:g=k4(n,e,t);f=a-r}else{if(qe(e)){const y=Object.keys(e)[0],x=e[y];h=u[y].getPixelForValue(x)-b+t}else e==="center"?h=(c.left+c.right)/2-b+t:h=k4(n,e,t);g=Zs(s,o,i),d=e==="left"?-is:is}return{titleX:h,titleY:g,maxWidth:f,rotation:d}}class vc extends na{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:s,_suggestedMax:i}=this;return t=$i(t,Number.POSITIVE_INFINITY),e=$i(e,Number.NEGATIVE_INFINITY),s=$i(s,Number.POSITIVE_INFINITY),i=$i(i,Number.NEGATIVE_INFINITY),{min:$i(t,s),max:$i(e,i),minDefined:Gn(t),maxDefined:Gn(e)}}getMinMax(t){let{min:e,max:s,minDefined:i,maxDefined:r}=this.getUserBounds(),o;if(i&&r)return{min:e,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),i||(e=Math.min(e,o.min)),r||(s=Math.max(s,o.max));return e=r&&e>s?s:e,s=i&&e>s?e:s,{min:$i(e,$i(s,e)),max:$i(s,$i(e,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Sn(this.options.beforeUpdate,[this])}update(t,e,s){const{beginAtZero:i,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Qq(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?S4(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=BG(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,s;this.isHorizontal()?(e=this.left,s=this.right):(e=this.top,s=this.bottom,t=!t),this._startPixel=e,this._endPixel=s,this._reversePixels=t,this._length=s-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Sn(this.options.afterUpdate,[this])}beforeSetDimensions(){Sn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Sn(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Sn(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Sn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let s,i,r;for(s=0,i=t.length;s<i;s++)r=t[s],r.label=Sn(e.callback,[r.value,s,t],this)}afterTickToLabelConversion(){Sn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Sn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,s=A4(this.ticks.length,t.ticks.maxTicksLimit),i=e.minRotation||0,r=e.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!e.display||i>=r||s<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),d=u.widest.width,f=u.highest.height,h=Ts(this.chart.width-d,0,this.maxWidth);a=t.offset?this.maxWidth/s:h/(s-1),d+6>a&&(a=h/(s-(t.offset?.5:1)),l=this.maxHeight-Td(t.grid)-e.padding-E4(t.title,this.chart.options.font),c=Math.sqrt(d*d+f*f),o=ub(Math.min(Math.asin(Ts((u.highest.height+6)/a,-1,1)),Math.asin(Ts(l/c,-1,1))-Math.asin(Ts(f/c,-1,1)))),o=Math.max(i,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){Sn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Sn(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:s,title:i,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=E4(i,e.options.font);if(a?(t.width=this.maxWidth,t.height=Td(r)+l):(t.height=this.maxHeight,t.width=Td(r)+l),s.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:f}=this._getLabelSizes(),h=s.padding*2,g=Tr(this.labelRotation),m=Math.cos(g),b=Math.sin(g);if(a){const y=s.mirror?0:b*d.width+m*f.height;t.height=Math.min(this.maxHeight,t.height+y+h)}else{const y=s.mirror?0:m*d.width+b*f.height;t.width=Math.min(this.maxWidth,t.width+y+h)}this._calculatePadding(c,u,b,m)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,s,i){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,h=0;l?c?(f=i*t.width,h=s*e.height):(f=s*t.height,h=i*e.width):r==="start"?h=e.width:r==="end"?f=t.width:r!=="inner"&&(f=t.width/2,h=e.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((h-d+o)*this.width/(this.width-d),0)}else{let u=e.height/2,d=t.height/2;r==="start"?(u=0,d=t.height):r==="end"&&(u=e.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Sn(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,s;for(e=0,s=t.length;e<s;e++)Ve(t[e].label)&&(t.splice(e,1),s--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let s=this.ticks;e<s.length&&(s=S4(s,e)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,s){const{ctx:i,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(e/A4(e,s));let c=0,u=0,d,f,h,g,m,b,y,x,_,C,A;for(d=0;d<e;d+=l){if(g=t[d].label,m=this._resolveTickFontOptions(d),i.font=b=m.string,y=r[b]=r[b]||{data:{},gc:[]},x=m.lineHeight,_=C=0,!Ve(g)&&!Rn(g))_=Dp(i,y.data,y.gc,_,g),C=x;else if(Rn(g))for(f=0,h=g.length;f<h;++f)A=g[f],!Ve(A)&&!Rn(A)&&(_=Dp(i,y.data,y.gc,_,A),C+=x);o.push(_),a.push(C),c=Math.max(_,c),u=Math.max(C,u)}GG(r,e);const I=o.indexOf(c),R=a.indexOf(u),L=P=>({width:o[P]||0,height:a[P]||0});return{first:L(0),last:L(e-1),widest:L(I),highest:L(R),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return Tq(this._alignToPixels?Dl(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const s=e[t];return s.$context||(s.$context=KG(this.getContext(),t,s))}return this.$context||(this.$context=YG(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=Tr(this.labelRotation),s=Math.abs(Math.cos(e)),i=Math.abs(Math.sin(e)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*s>a*i?a/s:l/i:l*i<a*s?l/s:a/i}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,s=this.chart,i=this.options,{grid:r,position:o,border:a}=i,l=r.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=Td(r),h=[],g=a.setContext(this.getContext()),m=g.display?g.width:0,b=m/2,y=function(W){return Dl(s,W,m)};let x,_,C,A,I,R,L,P,V,T,D,K;if(o==="top")x=y(this.bottom),R=this.bottom-f,P=x-b,T=y(t.top)+b,K=t.bottom;else if(o==="bottom")x=y(this.top),T=t.top,K=y(t.bottom)-b,R=x+b,P=this.top+f;else if(o==="left")x=y(this.right),I=this.right-f,L=x-b,V=y(t.left)+b,D=t.right;else if(o==="right")x=y(this.left),V=t.left,D=y(t.right)-b,I=x+b,L=this.left+f;else if(e==="x"){if(o==="center")x=y((t.top+t.bottom)/2+.5);else if(qe(o)){const W=Object.keys(o)[0],F=o[W];x=y(this.chart.scales[W].getPixelForValue(F))}T=t.top,K=t.bottom,R=x+b,P=R+f}else if(e==="y"){if(o==="center")x=y((t.left+t.right)/2);else if(qe(o)){const W=Object.keys(o)[0],F=o[W];x=y(this.chart.scales[W].getPixelForValue(F))}I=x-b,L=I-f,V=t.left,D=t.right}const $=Ie(i.ticks.maxTicksLimit,d),q=Math.max(1,Math.ceil(d/$));for(_=0;_<d;_+=q){const W=this.getContext(_),F=r.setContext(W),O=a.setContext(W),et=F.lineWidth,gt=F.color,lt=O.dash||[],E=O.dashOffset,M=F.tickWidth,B=F.tickColor,at=F.tickBorderDash||[],pt=F.tickBorderDashOffset;C=WG(this,_,l),C!==void 0&&(A=Dl(s,C,et),c?I=L=V=D=A:R=P=T=K=A,h.push({tx1:I,ty1:R,tx2:L,ty2:P,x1:V,y1:T,x2:D,y2:K,width:et,color:gt,borderDash:lt,borderDashOffset:E,tickWidth:M,tickColor:B,tickBorderDash:at,tickBorderDashOffset:pt}))}return this._ticksLength=d,this._borderValue=x,h}_computeLabelItems(t){const e=this.axis,s=this.options,{position:i,ticks:r}=s,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=r,f=Td(s.grid),h=f+u,g=d?-u:h,m=-Tr(this.labelRotation),b=[];let y,x,_,C,A,I,R,L,P,V,T,D,K="middle";if(i==="top")I=this.bottom-g,R=this._getXAxisLabelAlignment();else if(i==="bottom")I=this.top+g,R=this._getXAxisLabelAlignment();else if(i==="left"){const q=this._getYAxisLabelAlignment(f);R=q.textAlign,A=q.x}else if(i==="right"){const q=this._getYAxisLabelAlignment(f);R=q.textAlign,A=q.x}else if(e==="x"){if(i==="center")I=(t.top+t.bottom)/2+h;else if(qe(i)){const q=Object.keys(i)[0],W=i[q];I=this.chart.scales[q].getPixelForValue(W)+h}R=this._getXAxisLabelAlignment()}else if(e==="y"){if(i==="center")A=(t.left+t.right)/2-h;else if(qe(i)){const q=Object.keys(i)[0],W=i[q];A=this.chart.scales[q].getPixelForValue(W)}R=this._getYAxisLabelAlignment(f).textAlign}e==="y"&&(l==="start"?K="top":l==="end"&&(K="bottom"));const $=this._getLabelSizes();for(y=0,x=a.length;y<x;++y){_=a[y],C=_.label;const q=r.setContext(this.getContext(y));L=this.getPixelForTick(y)+r.labelOffset,P=this._resolveTickFontOptions(y),V=P.lineHeight,T=Rn(C)?C.length:1;const W=T/2,F=q.color,O=q.textStrokeColor,et=q.textStrokeWidth;let gt=R;o?(A=L,R==="inner"&&(y===x-1?gt=this.options.reverse?"left":"right":y===0?gt=this.options.reverse?"right":"left":gt="center"),i==="top"?c==="near"||m!==0?D=-T*V+V/2:c==="center"?D=-$.highest.height/2-W*V+V:D=-$.highest.height+V/2:c==="near"||m!==0?D=V/2:c==="center"?D=$.highest.height/2-W*V:D=$.highest.height-T*V,d&&(D*=-1),m!==0&&!q.showLabelBackdrop&&(A+=V/2*Math.sin(m))):(I=L,D=(1-T)*V/2);let lt;if(q.showLabelBackdrop){const E=ii(q.backdropPadding),M=$.heights[y],B=$.widths[y];let at=D-E.top,pt=0-E.left;switch(K){case"middle":at-=M/2;break;case"bottom":at-=M;break}switch(R){case"center":pt-=B/2;break;case"right":pt-=B;break;case"inner":y===x-1?pt-=B:y>0&&(pt-=B/2);break}lt={left:pt,top:at,width:B+E.width,height:M+E.height,color:q.backdropColor}}b.push({label:C,font:P,textOffset:D,options:{rotation:m,color:F,strokeColor:O,strokeWidth:et,textAlign:gt,textBaseline:K,translation:[A,I],backdrop:lt}})}return b}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Tr(this.labelRotation))return t==="top"?"left":"right";let i="center";return e.align==="start"?i="left":e.align==="end"?i="right":e.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:s,mirror:i,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,l=o.widest.width;let c,u;return e==="left"?i?(u=this.right+r,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u=this.left)):e==="right"?i?(u=this.left+r,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:s,top:i,width:r,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(s,i,r,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const i=this.ticks.findIndex(r=>r.value===t);return i>=0?e.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const e=this.options.grid,s=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(l,c,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(c.x,c.y),s.stroke(),s.restore())};if(e.display)for(r=0,o=i.length;r<o;++r){const l=i[r];e.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:s,grid:i}}=this,r=s.setContext(this.getContext()),o=s.display?r.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,f;this.isHorizontal()?(c=Dl(t,this.left,o)-o/2,u=Dl(t,this.right,a)+a/2,d=f=l):(d=Dl(t,this.top,o)-o/2,f=Dl(t,this.bottom,a)+a/2,c=u=l),e.save(),e.lineWidth=r.width,e.strokeStyle=r.color,e.beginPath(),e.moveTo(c,d),e.lineTo(u,f),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,i=this._computeLabelArea();i&&bg(s,i);const r=this.getLabelItems(t);for(const o of r){const a=o.options,l=o.font,c=o.label,u=o.textOffset;hc(s,c,0,u,l,a)}i&&vg(s)}drawTitle(){const{ctx:t,options:{position:e,title:s,reverse:i}}=this;if(!s.display)return;const r=xs(s.font),o=ii(s.padding),a=s.align;let l=r.lineHeight/2;e==="bottom"||e==="center"||qe(e)?(l+=o.bottom,Rn(s.text)&&(l+=r.lineHeight*(s.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:d,rotation:f}=ZG(this,l,e,a);hc(t,s.text,0,0,r,{color:s.color,maxWidth:d,rotation:f,textAlign:XG(a,e,i),textBaseline:"middle",translation:[c,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,s=Ie(t.grid&&t.grid.z,-1),i=Ie(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==vc.prototype.draw?[{z:e,draw:r=>{this.draw(r)}}]:[{z:s,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:e,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",i=[];let r,o;for(r=0,o=e.length;r<o;++r){const a=e[r];a[s]===this.id&&(!t||a.type===t)&&i.push(a)}return i}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return xs(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class T1{constructor(t,e,s){this.type=t,this.scope=e,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let s;tY(e)&&(s=this.register(e));const i=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in i||(i[r]=t,JG(t,o,s),this.override&&Nn.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,s=t.id,i=this.scope;s in e&&delete e[s],i&&s in Nn[i]&&(delete Nn[i][s],this.override&&delete dc[s])}}function JG(n,t,e){const s=Mh(Object.create(null),[e?Nn.get(e):{},Nn.get(t),n.defaults]);Nn.set(t,s),n.defaultRoutes&&QG(t,n.defaultRoutes),n.descriptors&&Nn.describe(t,n.descriptors)}function QG(n,t){Object.keys(t).forEach(e=>{const s=e.split("."),i=s.pop(),r=[n].concat(s).join("."),o=t[e].split("."),a=o.pop(),l=o.join(".");Nn.route(r,i,l,a)})}function tY(n){return"id"in n&&"defaults"in n}class eY{constructor(){this.controllers=new T1(tl,"datasets",!0),this.elements=new T1(na,"elements"),this.plugins=new T1(Object,"plugins"),this.scales=new T1(vc,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,s){[...e].forEach(i=>{const r=s||this._getRegistryForType(i);s||r.isForType(i)||r===this.plugins&&i.id?this._exec(t,r,i):hn(i,o=>{const a=s||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,e,s){const i=cb(t);Sn(s["before"+i],[],s),e[t](s),Sn(s["after"+i],[],s)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const s=this._typedRegistries[e];if(s.isForType(t))return s}return this.plugins}_get(t,e,s){const i=e.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return i}}var to=new eY;class nY{constructor(){this._init=[]}notify(t,e,s,i){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=i?this._descriptors(t).filter(i):this._descriptors(t),o=this._notify(r,t,e,s);return e==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,s,i){i=i||{};for(const r of t){const o=r.plugin,a=o[s],l=[e,i,r.options];if(Sn(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){Ve(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const s=t&&t.config,i=Ie(s.options&&s.options.plugins,{}),r=sY(s);return i===!1&&!e?[]:rY(t,r,i,e)}_notifyStateChanges(t){const e=this._oldCache||[],s=this._cache,i=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(e,s),t,"stop"),this._notify(i(s,e),t,"start")}}function sY(n){const t={},e=[],s=Object.keys(to.plugins.items);for(let r=0;r<s.length;r++)e.push(to.getPlugin(s[r]));const i=n.plugins||[];for(let r=0;r<i.length;r++){const o=i[r];e.indexOf(o)===-1&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}function iY(n,t){return!t&&n===!1?null:n===!0?{}:n}function rY(n,{plugins:t,localIds:e},s,i){const r=[],o=n.getContext();for(const a of t){const l=a.id,c=iY(s[l],i);c!==null&&r.push({plugin:a,options:oY(n.config,{plugin:a,local:e[l]},c,o)})}return r}function oY(n,{plugin:t,local:e},s,i){const r=n.pluginScopeKeys(t),o=n.getOptionScopes(s,r);return e&&t.defaults&&o.push(t.defaults),n.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Bm(n,t){const e=Nn.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function aY(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function lY(n,t){return n===t?"_index_":"_value_"}function T4(n){if(n==="x"||n==="y"||n==="r")return n}function cY(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function jm(n,...t){if(T4(n))return n;for(const e of t){const s=e.axis||cY(e.position)||n.length>1&&T4(n[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function L4(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function uY(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(s=>s.xAxisID===n||s.yAxisID===n);if(e.length)return L4(n,"x",e[0])||L4(n,"y",e[0])}return{}}function dY(n,t){const e=dc[n.type]||{scales:{}},s=t.scales||{},i=Bm(n.type,t),r=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!qe(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=jm(o,a,uY(o,n),Nn.scales[a.type]),c=lY(l,i),u=e.scales||{};r[o]=ch(Object.create(null),[{axis:l},a,u[l],u[c]])}),n.data.datasets.forEach(o=>{const a=o.type||n.type,l=o.indexAxis||Bm(a,t),u=(dc[a]||{}).scales||{};Object.keys(u).forEach(d=>{const f=aY(d,l),h=o[f+"AxisID"]||f;r[h]=r[h]||Object.create(null),ch(r[h],[{axis:f},s[h],u[d]])})}),Object.keys(r).forEach(o=>{const a=r[o];ch(a,[Nn.scales[a.type],Nn.scale])}),r}function $x(n){const t=n.options||(n.options={});t.plugins=Ie(t.plugins,{}),t.scales=dY(n,t)}function Bx(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function hY(n){return n=n||{},n.data=Bx(n.data),$x(n),n}const P4=new Map,jx=new Set;function L1(n,t){let e=P4.get(n);return e||(e=t(),P4.set(n,e),jx.add(e)),e}const Ld=(n,t,e)=>{const s=Ga(t,e);s!==void 0&&n.add(s)};class fY{constructor(t){this._config=hY(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Bx(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),$x(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return L1(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return L1(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return L1(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,s=this.type;return L1(`${s}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const s=this._scopeCache;let i=s.get(t);return(!i||e)&&(i=new Map,s.set(t,i)),i}getOptionScopes(t,e,s){const{options:i,type:r}=this,o=this._cachedScopes(t,s),a=o.get(e);if(a)return a;const l=new Set;e.forEach(u=>{t&&(l.add(t),u.forEach(d=>Ld(l,t,d))),u.forEach(d=>Ld(l,i,d)),u.forEach(d=>Ld(l,dc[r]||{},d)),u.forEach(d=>Ld(l,Nn,d)),u.forEach(d=>Ld(l,Fm,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),jx.has(e)&&o.set(e,c),c}chartOptionScopes(){const{options:t,type:e}=this;return[t,dc[e]||{},Nn.datasets[e]||{},{type:e},Nn,Fm]}resolveNamedOptions(t,e,s,i=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=I4(this._resolverCache,t,i);let l=o;if(gY(o,e)){r.$shared=!1,s=Ya(s)?s():s;const c=this.createResolver(t,s,a);l=Du(o,s,c)}for(const c of e)r[c]=l[c];return r}createResolver(t,e,s=[""],i){const{resolver:r}=I4(this._resolverCache,t,s);return qe(e)?Du(r,e,void 0,i):r}}function I4(n,t,e){let s=n.get(t);s||(s=new Map,n.set(t,s));const i=e.join();let r=s.get(i);return r||(r={resolver:gb(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},s.set(i,r)),r}const pY=n=>qe(n)&&Object.getOwnPropertyNames(n).some(t=>Ya(n[t]));function gY(n,t){const{isScriptable:e,isIndexable:s}=bx(n);for(const i of t){const r=e(i),o=s(i),a=(o||r)&&n[i];if(r&&(Ya(a)||pY(a))||o&&Rn(a))return!0}return!1}var mY="4.5.0";const bY=["top","bottom","left","right","chartArea"];function D4(n,t){return n==="top"||n==="bottom"||bY.indexOf(n)===-1&&t==="x"}function M4(n,t){return function(e,s){return e[n]===s[n]?e[t]-s[t]:e[n]-s[n]}}function R4(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Sn(e&&e.onComplete,[n],t)}function vY(n){const t=n.chart,e=t.options.animation;Sn(e&&e.onProgress,[n],t)}function Ux(n){return vb()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const sp={},N4=n=>{const t=Ux(n);return Object.values(sp).filter(e=>e.canvas===t).pop()};function yY(n,t,e){const s=Object.keys(n);for(const i of s){const r=+i;if(r>=t){const o=n[i];delete n[i],(e>0||r>t)&&(n[r+e]=o)}}}function wY(n,t,e,s){return!e||n.type==="mouseout"?null:s?t:n}class xb{static defaults=Nn;static instances=sp;static overrides=dc;static registry=to;static version=mY;static getChart=N4;static register(...t){to.add(...t),O4()}static unregister(...t){to.remove(...t),O4()}constructor(t,e){const s=this.config=new fY(e),i=Ux(t),r=N4(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||$G(i)),this.platform.updateConfig(s);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=gq(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new nY,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Dq(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],sp[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Ro.listen(this,"complete",R4),Ro.listen(this,"progress",vY),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:s,height:i,_aspectRatio:r}=this;return Ve(t)?e&&r?r:i?s/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return to}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():i4(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return e4(this.canvas,this.ctx),this}stop(){return Ro.stop(this),this}resize(t,e){Ro.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const s=this.options,i=this.canvas,r=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,t,e,r),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,i4(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Sn(s.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};hn(e,(s,i)=>{s.id=i})}buildOrUpdateScales(){const t=this.options,e=t.scales,s=this.scales,i=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let r=[];e&&(r=r.concat(Object.keys(e).map(o=>{const a=e[o],l=jm(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),hn(r,o=>{const a=o.options,l=a.id,c=jm(l,a),u=Ie(a.type,o.dtype);(a.position===void 0||D4(a.position,c)!==D4(o.dposition))&&(a.position=o.dposition),i[l]=!0;let d=null;if(l in s&&s[l].type===u)d=s[l];else{const f=to.getScale(u);d=new f({id:l,type:u,ctx:this.ctx,chart:this}),s[d.id]=d}d.init(a,t)}),hn(i,(o,a)=>{o||delete s[a]}),hn(s,o=>{ni.configure(this,o,o.options),ni.addBox(this,o)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,s=t.length;if(t.sort((i,r)=>i.index-r.index),s>e){for(let i=e;i<s;++i)this._destroyDatasetMeta(i);t.splice(e,s-e)}this._sortedMetasets=t.slice(0).sort(M4("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((s,i)=>{e.filter(r=>r===s._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let s,i;for(this._removeUnreferencedMetasets(),s=0,i=e.length;s<i;s++){const r=e[s];let o=this.getDatasetMeta(s);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=r.indexAxis||Bm(a,this.options),o.order=r.order||0,o.index=s,o.label=""+r.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const l=to.getController(a),{datasetElementType:c,dataElementType:u}=Nn.datasets[a];Object.assign(l,{dataElementType:to.getElement(u),datasetElementType:c&&to.getElement(c)}),o.controller=new l(this,s),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){hn(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const s=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),f=!i&&r.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),i||hn(r,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(M4("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){hn(this.scales,t=>{ni.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!Ww(e,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:s,start:i,count:r}of e){const o=s==="_removeElements"?-r:r;yY(t,i,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,s=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),i=s(0);for(let r=1;r<e;r++)if(!Ww(i,s(r)))return;return Array.from(i).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ni.update(this,this.width,this.height,t);const e=this.chartArea,s=e.width<=0||e.height<=0;this._layers=[],hn(this.boxes,i=>{s&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,r)=>{i._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,s=this.data.datasets.length;e<s;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,s=this.data.datasets.length;e<s;++e)this._updateDataset(e,Ya(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const s=this.getDatasetMeta(t),i={meta:s,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(s.controller._update(e),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ro.has(this)?this.attached&&!Ro.running(this)&&Ro.start(this):(this.draw(),R4({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,s=[];let i,r;for(i=0,r=e.length;i<r;++i){const o=e[i];(!t||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,s={meta:t,index:t.index,cancelable:!0},i=Tx(this,t);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(i&&bg(e,i),t.controller.draw(),i&&vg(e),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return Yo(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,s,i){const r=bG.modes[e];return typeof r=="function"?r(this,t,s,i):[]}getDatasetMeta(t){const e=this.data.datasets[t],s=this._metasets;let i=s.filter(r=>r&&r._dataset===e).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},s.push(i)),i}getContext(){return this.$context||(this.$context=Qa(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!e.hidden}setDatasetVisibility(t,e){const s=this.getDatasetMeta(t);s.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,s){const i=s?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,i);Rh(e)?(r.data[e].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),o.update(r,{visible:s}),this.update(a=>a.datasetIndex===t?i:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Ro.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),e4(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete sp[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,s=(r,o)=>{e.addEventListener(this,r,o),t[r]=o},i=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};hn(this.options.events,r=>s(r,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,s=(l,c)=>{e.addEventListener(this,l,c),t[l]=c},i=(l,c)=>{t[l]&&(e.removeEventListener(this,l,c),delete t[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),s("resize",r),s("detach",o)};o=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),s("attach",a)},e.isAttached(this.canvas)?a():o()}unbindEvents(){hn(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},hn(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,s){const i=s?"set":"remove";let r,o,a,l;for(e==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],s=t.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!Lp(s,e)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,e))}notifyPlugins(t,e,s){return this._plugins.notify(this,t,e,s)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,s){const i=this.options.hover,r=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),o=r(e,t),a=s?t:r(t,e);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(t,e){const s={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},i=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,i)===!1)return;const r=this._handleEvent(t,e,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,i),(r||s.changed)&&this.render(),this}_handleEvent(t,e,s){const{_active:i=[],options:r}=this,o=e,a=this._getActiveElements(t,i,s,o),l=_q(t),c=wY(t,this._lastEvent,s,l);s&&(this._lastEvent=null,Sn(r.onHover,[t,a,this],this),l&&Sn(r.onClick,[t,a,this],this));const u=!Lp(a,i);return(u||e)&&(this._active=a,this._updateHoverStyles(a,i,e)),this._lastEvent=c,u}_getActiveElements(t,e,s,i){if(t.type==="mouseout")return[];if(!s)return e;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,i)}}function O4(){return hn(xb.instances,n=>n._plugins.invalidate())}function _Y(n,t,e){const{startAngle:s,x:i,y:r,outerRadius:o,innerRadius:a,options:l}=t,{borderWidth:c,borderJoinStyle:u}=l,d=Math.min(c/o,Qs(s-e));if(n.beginPath(),n.arc(i,r,o-c/2,s+d/2,e-d/2),a>0){const f=Math.min(c/a,Qs(s-e));n.arc(i,r,a+c/2,e-f/2,s+f/2,!0)}else{const f=Math.min(c/2,o*Qs(s-e));if(u==="round")n.arc(i,r,f,e-tn/2,s+tn/2,!0);else if(u==="bevel"){const h=2*f*f,g=-h*Math.cos(e+tn/2)+i,m=-h*Math.sin(e+tn/2)+r,b=h*Math.cos(s+tn/2)+i,y=h*Math.sin(s+tn/2)+r;n.lineTo(g,m),n.lineTo(b,y)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function xY(n,t,e){const{startAngle:s,pixelMargin:i,x:r,y:o,outerRadius:a,innerRadius:l}=t;let c=i/a;n.beginPath(),n.arc(r,o,a,s-c,e+c),l>i?(c=i/l,n.arc(r,o,l,e+c,s-c,!0)):n.arc(r,o,i,e+is,s-is),n.closePath(),n.clip()}function CY(n){return pb(n,["outerStart","outerEnd","innerStart","innerEnd"])}function kY(n,t,e,s){const i=CY(n.options.borderRadius),r=(e-t)/2,o=Math.min(r,s*t/2),a=l=>{const c=(e-Math.min(r,l))*s/2;return Ts(l,0,Math.min(r,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:Ts(i.innerStart,0,o),innerEnd:Ts(i.innerEnd,0,o)}}function qc(n,t,e,s){return{x:e+n*Math.cos(t),y:s+n*Math.sin(t)}}function Np(n,t,e,s,i,r){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=t,d=Math.max(t.outerRadius+s+e-c,0),f=u>0?u+s+e+c:0;let h=0;const g=i-l;if(s){const q=u>0?u-s:0,W=d>0?d-s:0,F=(q+W)/2,O=F!==0?g*F/(F+s):g;h=(g-O)/2}const m=Math.max(.001,g*d-e/tn)/d,b=(g-m)/2,y=l+b+h,x=i-b-h,{outerStart:_,outerEnd:C,innerStart:A,innerEnd:I}=kY(t,f,d,x-y),R=d-_,L=d-C,P=y+_/R,V=x-C/L,T=f+A,D=f+I,K=y+A/T,$=x-I/D;if(n.beginPath(),r){const q=(P+V)/2;if(n.arc(o,a,d,P,q),n.arc(o,a,d,q,V),C>0){const et=qc(L,V,o,a);n.arc(et.x,et.y,C,V,x+is)}const W=qc(D,x,o,a);if(n.lineTo(W.x,W.y),I>0){const et=qc(D,$,o,a);n.arc(et.x,et.y,I,x+is,$+Math.PI)}const F=(x-I/f+(y+A/f))/2;if(n.arc(o,a,f,x-I/f,F,!0),n.arc(o,a,f,F,y+A/f,!0),A>0){const et=qc(T,K,o,a);n.arc(et.x,et.y,A,K+Math.PI,y-is)}const O=qc(R,y,o,a);if(n.lineTo(O.x,O.y),_>0){const et=qc(R,P,o,a);n.arc(et.x,et.y,_,y-is,P)}}else{n.moveTo(o,a);const q=Math.cos(P)*d+o,W=Math.sin(P)*d+a;n.lineTo(q,W);const F=Math.cos(V)*d+o,O=Math.sin(V)*d+a;n.lineTo(F,O)}n.closePath()}function AY(n,t,e,s,i){const{fullCircles:r,startAngle:o,circumference:a}=t;let l=t.endAngle;if(r){Np(n,t,e,s,l,i);for(let c=0;c<r;++c)n.fill();isNaN(a)||(l=o+(a%Pn||Pn))}return Np(n,t,e,s,l,i),n.fill(),l}function SY(n,t,e,s,i){const{fullCircles:r,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:f,borderRadius:h}=l,g=l.borderAlign==="inner";if(!c)return;n.setLineDash(d||[]),n.lineDashOffset=f,g?(n.lineWidth=c*2,n.lineJoin=u||"round"):(n.lineWidth=c,n.lineJoin=u||"bevel");let m=t.endAngle;if(r){Np(n,t,e,s,m,i);for(let b=0;b<r;++b)n.stroke();isNaN(a)||(m=o+(a%Pn||Pn))}g&&xY(n,t,m),l.selfJoin&&m-o>=tn&&h===0&&u!=="miter"&&_Y(n,t,m),r||(Np(n,t,e,s,m,i),n.stroke())}class EY extends na{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,s){const i=this.getProps(["x","y"],s),{angle:r,distance:o}=ax(i,{x:t,y:e}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:u,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),f=(this.options.spacing+this.options.borderWidth)/2,h=Ie(d,l-a),g=Nh(r,a,l)&&a!==l,m=h>=Pn||g,b=Wo(o,c+f,u+f);return m&&b}getCenterPoint(t){const{x:e,y:s,startAngle:i,endAngle:r,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:l,spacing:c}=this.options,u=(i+r)/2,d=(o+a+c+l)/2;return{x:e+Math.cos(u)*d,y:s+Math.sin(u)*d}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:s}=this,i=(e.offset||0)/4,r=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin=e.borderAlign==="inner"?.33:0,this.fullCircles=s>Pn?Math.floor(s/Pn):0,s===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*i,Math.sin(a)*i);const l=1-Math.sin(Math.min(tn,s||0)),c=i*l;t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,AY(t,this,c,r,o),SY(t,this,c,r,o),t.restore()}}function zx(n,t,e=t){n.lineCap=Ie(e.borderCapStyle,t.borderCapStyle),n.setLineDash(Ie(e.borderDash,t.borderDash)),n.lineDashOffset=Ie(e.borderDashOffset,t.borderDashOffset),n.lineJoin=Ie(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=Ie(e.borderWidth,t.borderWidth),n.strokeStyle=Ie(e.borderColor,t.borderColor)}function TY(n,t,e){n.lineTo(e.x,e.y)}function LY(n){return n.stepped?Vq:n.tension||n.cubicInterpolationMode==="monotone"?qq:TY}function Hx(n,t,e={}){const s=n.length,{start:i=0,end:r=s-1}=e,{start:o,end:a}=t,l=Math.max(i,o),c=Math.min(r,a),u=i<o&&r<o||i>a&&r>a;return{count:s,start:l,loop:t.loop,ilen:c<l&&!u?s+c-l:c-l}}function PY(n,t,e,s){const{points:i,options:r}=t,{count:o,start:a,loop:l,ilen:c}=Hx(i,e,s),u=LY(r);let{move:d=!0,reverse:f}=s||{},h,g,m;for(h=0;h<=c;++h)g=i[(a+(f?c-h:h))%o],!g.skip&&(d?(n.moveTo(g.x,g.y),d=!1):u(n,m,g,f,r.stepped),m=g);return l&&(g=i[(a+(f?c:0))%o],u(n,m,g,f,r.stepped)),!!l}function IY(n,t,e,s){const i=t.points,{count:r,start:o,ilen:a}=Hx(i,e,s),{move:l=!0,reverse:c}=s||{};let u=0,d=0,f,h,g,m,b,y;const x=C=>(o+(c?a-C:C))%r,_=()=>{m!==b&&(n.lineTo(u,b),n.lineTo(u,m),n.lineTo(u,y))};for(l&&(h=i[x(0)],n.moveTo(h.x,h.y)),f=0;f<=a;++f){if(h=i[x(f)],h.skip)continue;const C=h.x,A=h.y,I=C|0;I===g?(A<m?m=A:A>b&&(b=A),u=(d*u+C)/++d):(_(),n.lineTo(C,A),g=I,d=0,m=b=A),y=A}_()}function Um(n){const t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?IY:PY}function DY(n){return n.stepped?CW:n.tension||n.cubicInterpolationMode==="monotone"?kW:jl}function MY(n,t,e,s){let i=t._path;i||(i=t._path=new Path2D,t.path(i,e,s)&&i.closePath()),zx(n,t.options),n.stroke(i)}function RY(n,t,e,s){const{segments:i,options:r}=t,o=Um(t);for(const a of i)zx(n,r,a.style),n.beginPath(),o(n,t,a,{start:e,end:e+s-1})&&n.closePath(),n.stroke()}const NY=typeof Path2D=="function";function OY(n,t,e,s){NY&&!t.options.segment?MY(n,t,e,s):RY(n,t,e,s)}class _g extends na{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const i=s.spanGaps?this._loop:this._fullLoop;gW(this._points,s,t,i,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=PW(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,s=t.length;return s&&e[t[s-1].end]}interpolate(t,e){const s=this.options,i=t[e],r=this.points,o=Ex(this,{property:e,start:i,end:i});if(!o.length)return;const a=[],l=DY(s);let c,u;for(c=0,u=o.length;c<u;++c){const{start:d,end:f}=o[c],h=r[d],g=r[f];if(h===g){a.push(h);continue}const m=Math.abs((i-h[e])/(g[e]-h[e])),b=l(h,g,m,s.stepped);b[e]=t[e],a.push(b)}return a.length===1?a[0]:a}pathSegment(t,e,s){return Um(this)(t,this,e,s)}path(t,e,s){const i=this.segments,r=Um(this);let o=this._loop;e=e||0,s=s||this.points.length-e;for(const a of i)o&=r(t,this,a,{start:e,end:e+s-1});return!!o}draw(t,e,s,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),OY(t,this,s,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function F4(n,t,e,s){const i=n.options,{[e]:r}=n.getProps([e],s);return Math.abs(t-r)<i.radius+i.hitRadius}class FY extends na{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,s){const i=this.options,{x:r,y:o}=this.getProps(["x","y"],s);return Math.pow(t-r,2)+Math.pow(e-o,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(t,e){return F4(this,t,"x",e)}inYRange(t,e){return F4(this,t,"y",e)}getCenterPoint(t){const{x:e,y:s}=this.getProps(["x","y"],t);return{x:e,y:s}}size(t){t=t||this.options||{};let e=t.radius||0;e=Math.max(e,e&&t.hoverRadius||0);const s=e&&t.borderWidth||0;return(e+s)*2}draw(t,e){const s=this.options;this.skip||s.radius<.1||!Yo(this,e,this.size(s)/2)||(t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.fillStyle=s.backgroundColor,$m(t,s,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function Vx(n,t){const{x:e,y:s,base:i,width:r,height:o}=n.getProps(["x","y","base","width","height"],t);let a,l,c,u,d;return n.horizontal?(d=o/2,a=Math.min(e,i),l=Math.max(e,i),c=s-d,u=s+d):(d=r/2,a=e-d,l=e+d,c=Math.min(s,i),u=Math.max(s,i)),{left:a,top:c,right:l,bottom:u}}function Fa(n,t,e,s){return n?0:Ts(t,e,s)}function $Y(n,t,e){const s=n.options.borderWidth,i=n.borderSkipped,r=mx(s);return{t:Fa(i.top,r.top,0,e),r:Fa(i.right,r.right,0,t),b:Fa(i.bottom,r.bottom,0,e),l:Fa(i.left,r.left,0,t)}}function BY(n,t,e){const{enableBorderRadius:s}=n.getProps(["enableBorderRadius"]),i=n.options.borderRadius,r=sc(i),o=Math.min(t,e),a=n.borderSkipped,l=s||qe(i);return{topLeft:Fa(!l||a.top||a.left,r.topLeft,0,o),topRight:Fa(!l||a.top||a.right,r.topRight,0,o),bottomLeft:Fa(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:Fa(!l||a.bottom||a.right,r.bottomRight,0,o)}}function jY(n){const t=Vx(n),e=t.right-t.left,s=t.bottom-t.top,i=$Y(n,e/2,s/2),r=BY(n,e/2,s/2);return{outer:{x:t.left,y:t.top,w:e,h:s,radius:r},inner:{x:t.left+i.l,y:t.top+i.t,w:e-i.l-i.r,h:s-i.t-i.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,r.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(i.b,i.r))}}}}function x0(n,t,e,s){const i=t===null,r=e===null,a=n&&!(i&&r)&&Vx(n,s);return a&&(i||Wo(t,a.left,a.right))&&(r||Wo(e,a.top,a.bottom))}function UY(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function zY(n,t){n.rect(t.x,t.y,t.w,t.h)}function C0(n,t,e={}){const s=n.x!==e.x?-t:0,i=n.y!==e.y?-t:0,r=(n.x+n.w!==e.x+e.w?t:0)-s,o=(n.y+n.h!==e.y+e.h?t:0)-i;return{x:n.x+s,y:n.y+i,w:n.w+r,h:n.h+o,radius:n.radius}}class HY extends na{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:s,backgroundColor:i}}=this,{inner:r,outer:o}=jY(this),a=UY(o.radius)?Oh:zY;t.save(),(o.w!==r.w||o.h!==r.h)&&(t.beginPath(),a(t,C0(o,e,r)),t.clip(),a(t,C0(r,-e,o)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),a(t,C0(r,e)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,e,s){return x0(this,t,e,s)}inXRange(t,e){return x0(this,t,null,e)}inYRange(t,e){return x0(this,null,t,e)}getCenterPoint(t){const{x:e,y:s,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(e+i)/2:e,y:r?s:(s+i)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}var VY=Object.freeze({__proto__:null,ArcElement:EY,BarElement:HY,LineElement:_g,PointElement:FY});const zm=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],$4=zm.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function qx(n){return zm[n%zm.length]}function Wx(n){return $4[n%$4.length]}function qY(n,t){return n.borderColor=qx(t),n.backgroundColor=Wx(t),++t}function WY(n,t){return n.backgroundColor=n.data.map(()=>qx(t++)),t}function GY(n,t){return n.backgroundColor=n.data.map(()=>Wx(t++)),t}function YY(n){let t=0;return(e,s)=>{const i=n.getDatasetMeta(s).controller;i instanceof wb?t=WY(e,t):i instanceof Dx?t=GY(e,t):i&&(t=qY(e,t))}}function B4(n){let t;for(t in n)if(n[t].borderColor||n[t].backgroundColor)return!0;return!1}function KY(n){return n&&(n.borderColor||n.backgroundColor)}function XY(){return Nn.borderColor!=="rgba(0,0,0,0.1)"||Nn.backgroundColor!=="rgba(0,0,0,0.1)"}var ZY={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,t,e){if(!e.enabled)return;const{data:{datasets:s},options:i}=n.config,{elements:r}=i,o=B4(s)||KY(i)||r&&B4(r)||XY();if(!e.forceOverride&&o)return;const a=YY(n);s.forEach(a)}};function JY(n,t,e,s,i){const r=i.samples||s;if(r>=e)return n.slice(t,t+e);const o=[],a=(e-2)/(r-2);let l=0;const c=t+e-1;let u=t,d,f,h,g,m;for(o[l++]=n[u],d=0;d<r-2;d++){let b=0,y=0,x;const _=Math.floor((d+1)*a)+1+t,C=Math.min(Math.floor((d+2)*a)+1,e)+t,A=C-_;for(x=_;x<C;x++)b+=n[x].x,y+=n[x].y;b/=A,y/=A;const I=Math.floor(d*a)+1+t,R=Math.min(Math.floor((d+1)*a)+1,e)+t,{x:L,y:P}=n[u];for(h=g=-1,x=I;x<R;x++)g=.5*Math.abs((L-b)*(n[x].y-P)-(L-n[x].x)*(y-P)),g>h&&(h=g,f=n[x],m=x);o[l++]=f,u=m}return o[l++]=n[c],o}function QY(n,t,e,s){let i=0,r=0,o,a,l,c,u,d,f,h,g,m;const b=[],y=t+e-1,x=n[t].x,C=n[y].x-x;for(o=t;o<t+e;++o){a=n[o],l=(a.x-x)/C*s,c=a.y;const A=l|0;if(A===u)c<g?(g=c,d=o):c>m&&(m=c,f=o),i=(r*i+a.x)/++r;else{const I=o-1;if(!Ve(d)&&!Ve(f)){const R=Math.min(d,f),L=Math.max(d,f);R!==h&&R!==I&&b.push({...n[R],x:i}),L!==h&&L!==I&&b.push({...n[L],x:i})}o>0&&I!==h&&b.push(n[I]),b.push(a),u=A,r=0,g=m=c,d=f=h=o}}return b}function Gx(n){if(n._decimated){const t=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function j4(n){n.data.datasets.forEach(t=>{Gx(t)})}function tK(n,t){const e=t.length;let s=0,i;const{iScale:r}=n,{min:o,max:a,minDefined:l,maxDefined:c}=r.getUserBounds();return l&&(s=Ts(Go(t,r.axis,o).lo,0,e-1)),c?i=Ts(Go(t,r.axis,a).hi+1,s,e)-s:i=e-s,{start:s,count:i}}var eK={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,t,e)=>{if(!e.enabled){j4(n);return}const s=n.width;n.data.datasets.forEach((i,r)=>{const{_data:o,indexAxis:a}=i,l=n.getDatasetMeta(r),c=o||i.data;if(Ud([a,n.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=n.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||n.options.parsing)return;let{start:d,count:f}=tK(l,c);const h=e.threshold||4*s;if(f<=h){Gx(i);return}Ve(o)&&(i._data=c,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(m){this._data=m}}));let g;switch(e.algorithm){case"lttb":g=JY(c,d,f,s,e);break;case"min-max":g=QY(c,d,f,s);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}i._decimated=g})},destroy(n){j4(n)}};function nK(n,t,e){const s=n.segments,i=n.points,r=t.points,o=[];for(const a of s){let{start:l,end:c}=a;c=xg(l,c,i);const u=Hm(e,i[l],i[c],a.loop);if(!t.segments){o.push({source:a,target:u,start:i[l],end:i[c]});continue}const d=Ex(t,u);for(const f of d){const h=Hm(e,r[f.start],r[f.end],f.loop),g=Sx(a,i,h);for(const m of g)o.push({source:m,target:f,start:{[e]:U4(u,h,"start",Math.max)},end:{[e]:U4(u,h,"end",Math.min)}})}}return o}function Hm(n,t,e,s){if(s)return;let i=t[n],r=e[n];return n==="angle"&&(i=Qs(i),r=Qs(r)),{property:n,start:i,end:r}}function sK(n,t){const{x:e=null,y:s=null}=n||{},i=t.points,r=[];return t.segments.forEach(({start:o,end:a})=>{a=xg(o,a,i);const l=i[o],c=i[a];s!==null?(r.push({x:l.x,y:s}),r.push({x:c.x,y:s})):e!==null&&(r.push({x:e,y:l.y}),r.push({x:e,y:c.y}))}),r}function xg(n,t,e){for(;t>n;t--){const s=e[t];if(!isNaN(s.x)&&!isNaN(s.y))break}return t}function U4(n,t,e,s){return n&&t?s(n[e],t[e]):n?n[e]:t?t[e]:0}function Yx(n,t){let e=[],s=!1;return Rn(n)?(s=!0,e=n):e=sK(n,t),e.length?new _g({points:e,options:{tension:0},_loop:s,_fullLoop:s}):null}function z4(n){return n&&n.fill!==!1}function iK(n,t,e){let i=n[t].fill;const r=[t];let o;if(!e)return i;for(;i!==!1&&r.indexOf(i)===-1;){if(!Gn(i))return i;if(o=n[i],!o)return!1;if(o.visible)return i;r.push(i),i=o.fill}return!1}function rK(n,t,e){const s=cK(n);if(qe(s))return isNaN(s.value)?!1:s;let i=parseFloat(s);return Gn(i)&&Math.floor(i)===i?oK(s[0],t,i,e):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function oK(n,t,e,s){return(n==="-"||n==="+")&&(e=t+e),e===t||e<0||e>=s?!1:e}function aK(n,t){let e=null;return n==="start"?e=t.bottom:n==="end"?e=t.top:qe(n)?e=t.getPixelForValue(n.value):t.getBasePixel&&(e=t.getBasePixel()),e}function lK(n,t,e){let s;return n==="start"?s=e:n==="end"?s=t.options.reverse?t.min:t.max:qe(n)?s=n.value:s=t.getBaseValue(),s}function cK(n){const t=n.options,e=t.fill;let s=Ie(e&&e.target,e);return s===void 0&&(s=!!t.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function uK(n){const{scale:t,index:e,line:s}=n,i=[],r=s.segments,o=s.points,a=dK(t,e);a.push(Yx({x:null,y:t.bottom},s));for(let l=0;l<r.length;l++){const c=r[l];for(let u=c.start;u<=c.end;u++)hK(i,o[u],a)}return new _g({points:i,options:{}})}function dK(n,t){const e=[],s=n.getMatchingVisibleMetas("line");for(let i=0;i<s.length;i++){const r=s[i];if(r.index===t)break;r.hidden||e.unshift(r.dataset)}return e}function hK(n,t,e){const s=[];for(let i=0;i<e.length;i++){const r=e[i],{first:o,last:a,point:l}=fK(r,t,"x");if(!(!l||o&&a)){if(o)s.unshift(l);else if(n.push(l),!a)break}}n.push(...s)}function fK(n,t,e){const s=n.interpolate(t,e);if(!s)return{};const i=s[e],r=n.segments,o=n.points;let a=!1,l=!1;for(let c=0;c<r.length;c++){const u=r[c],d=o[u.start][e],f=o[u.end][e];if(Wo(i,d,f)){a=i===d,l=i===f;break}}return{first:a,last:l,point:s}}class Kx{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,s){const{x:i,y:r,radius:o}=this;return e=e||{start:0,end:Pn},t.arc(i,r,o,e.end,e.start,!0),!s.bounds}interpolate(t){const{x:e,y:s,radius:i}=this,r=t.angle;return{x:e+Math.cos(r)*i,y:s+Math.sin(r)*i,angle:r}}}function pK(n){const{chart:t,fill:e,line:s}=n;if(Gn(e))return gK(t,e);if(e==="stack")return uK(n);if(e==="shape")return!0;const i=mK(n);return i instanceof Kx?i:Yx(i,s)}function gK(n,t){const e=n.getDatasetMeta(t);return e&&n.isDatasetVisible(t)?e.dataset:null}function mK(n){return(n.scale||{}).getPointPositionForValue?vK(n):bK(n)}function bK(n){const{scale:t={},fill:e}=n,s=aK(e,t);if(Gn(s)){const i=t.isHorizontal();return{x:i?s:null,y:i?null:s}}return null}function vK(n){const{scale:t,fill:e}=n,s=t.options,i=t.getLabels().length,r=s.reverse?t.max:t.min,o=lK(e,t,r),a=[];if(s.grid.circular){const l=t.getPointPositionForValue(0,r);return new Kx({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(t.getPointPositionForValue(l,o));return a}function k0(n,t,e){const s=pK(t),{chart:i,index:r,line:o,scale:a,axis:l}=t,c=o.options,u=c.fill,d=c.backgroundColor,{above:f=d,below:h=d}=u||{},g=i.getDatasetMeta(r),m=Tx(i,g);s&&o.points.length&&(bg(n,e),yK(n,{line:o,target:s,above:f,below:h,area:e,scale:a,axis:l,clip:m}),vg(n))}function yK(n,t){const{line:e,target:s,above:i,below:r,area:o,scale:a,clip:l}=t,c=e._loop?"angle":t.axis;n.save();let u=r;r!==i&&(c==="x"?(H4(n,s,o.top),A0(n,{line:e,target:s,color:i,scale:a,property:c,clip:l}),n.restore(),n.save(),H4(n,s,o.bottom)):c==="y"&&(V4(n,s,o.left),A0(n,{line:e,target:s,color:r,scale:a,property:c,clip:l}),n.restore(),n.save(),V4(n,s,o.right),u=i)),A0(n,{line:e,target:s,color:u,scale:a,property:c,clip:l}),n.restore()}function H4(n,t,e){const{segments:s,points:i}=t;let r=!0,o=!1;n.beginPath();for(const a of s){const{start:l,end:c}=a,u=i[l],d=i[xg(l,c,i)];r?(n.moveTo(u.x,u.y),r=!1):(n.lineTo(u.x,e),n.lineTo(u.x,u.y)),o=!!t.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(d.x,e)}n.lineTo(t.first().x,e),n.closePath(),n.clip()}function V4(n,t,e){const{segments:s,points:i}=t;let r=!0,o=!1;n.beginPath();for(const a of s){const{start:l,end:c}=a,u=i[l],d=i[xg(l,c,i)];r?(n.moveTo(u.x,u.y),r=!1):(n.lineTo(e,u.y),n.lineTo(u.x,u.y)),o=!!t.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(e,d.y)}n.lineTo(e,t.first().y),n.closePath(),n.clip()}function A0(n,t){const{line:e,target:s,property:i,color:r,scale:o,clip:a}=t,l=nK(e,s,i);for(const{source:c,target:u,start:d,end:f}of l){const{style:{backgroundColor:h=r}={}}=c,g=s!==!0;n.save(),n.fillStyle=h,wK(n,o,a,g&&Hm(i,d,f)),n.beginPath();const m=!!e.pathSegment(n,c);let b;if(g){m?n.closePath():q4(n,s,f,i);const y=!!s.pathSegment(n,u,{move:m,reverse:!0});b=m&&y,b||q4(n,s,d,i)}n.closePath(),n.fill(b?"evenodd":"nonzero"),n.restore()}}function wK(n,t,e,s){const i=t.chart.chartArea,{property:r,start:o,end:a}=s||{};if(r==="x"||r==="y"){let l,c,u,d;r==="x"?(l=o,c=i.top,u=a,d=i.bottom):(l=i.left,c=o,u=i.right,d=a),n.beginPath(),e&&(l=Math.max(l,e.left),u=Math.min(u,e.right),c=Math.max(c,e.top),d=Math.min(d,e.bottom)),n.rect(l,c,u-l,d-c),n.clip()}}function q4(n,t,e,s){const i=t.interpolate(e,s);i&&n.lineTo(i.x,i.y)}var _K={id:"filler",afterDatasetsUpdate(n,t,e){const s=(n.data.datasets||[]).length,i=[];let r,o,a,l;for(o=0;o<s;++o)r=n.getDatasetMeta(o),a=r.dataset,l=null,a&&a.options&&a instanceof _g&&(l={visible:n.isDatasetVisible(o),index:o,fill:rK(a,o,s),chart:n,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,i.push(l);for(o=0;o<s;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=iK(i,o,e.propagate))},beforeDraw(n,t,e){const s=e.drawTime==="beforeDraw",i=n.getSortedVisibleDatasetMetas(),r=n.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(r,a.axis),s&&a.fill&&k0(n.ctx,a,r))}},beforeDatasetsDraw(n,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;const s=n.getSortedVisibleDatasetMetas();for(let i=s.length-1;i>=0;--i){const r=s[i].$filler;z4(r)&&k0(n.ctx,r,n.chartArea)}},beforeDatasetDraw(n,t,e){const s=t.meta.$filler;!z4(s)||e.drawTime!=="beforeDatasetDraw"||k0(n.ctx,s,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const W4=(n,t)=>{let{boxHeight:e=t,boxWidth:s=t}=n;return n.usePointStyle&&(e=Math.min(e,t),s=n.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:e,itemHeight:Math.max(t,e)}},xK=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class G4 extends na{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,s){this.maxWidth=t,this.maxHeight=e,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Sn(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(s=>t.filter(s,this.chart.data))),t.sort&&(e=e.sort((s,i)=>t.sort(s,i,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,i=xs(s.font),r=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=W4(s,r);let c,u;e.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,r,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,e,s,i){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let d=t;r.textAlign="left",r.textBaseline="middle";let f=-1,h=-u;return this.legendItems.forEach((g,m)=>{const b=s+e/2+r.measureText(g.text).width;(m===0||c[c.length-1]+b+2*a>o)&&(d+=u,c[c.length-(m>0?0:1)]=0,h+=u,f++),l[m]={left:0,top:h,row:f,width:b,height:i},c[c.length-1]+=b+a}),d}_fitCols(t,e,s,i){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-t;let d=a,f=0,h=0,g=0,m=0;return this.legendItems.forEach((b,y)=>{const{itemWidth:x,itemHeight:_}=CK(s,e,r,b,i);y>0&&h+_+2*a>u&&(d+=f+a,c.push({width:f,height:h}),g+=f+a,m++,f=h=0),l[y]={left:g,top:h,col:m,width:x,height:_},f=Math.max(f,x),h+=_+a}),d+=f,c.push({width:f,height:h}),d}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:s,labels:{padding:i},rtl:r}}=this,o=mu(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=Zs(s,this.left+i,this.right-this.lineWidths[a]);for(const c of e)a!==c.row&&(a=c.row,l=Zs(s,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+t+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=Zs(s,this.top+t+i,this.bottom-this.columnSizes[a].height);for(const c of e)c.col!==a&&(a=c.col,l=Zs(s,this.top+t+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;bg(t,this),this._draw(),vg(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:s,ctx:i}=this,{align:r,labels:o}=t,a=Nn.color,l=mu(t.rtl,this.left,this.width),c=xs(o.font),{padding:u}=o,d=c.size,f=d/2;let h;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:g,boxHeight:m,itemHeight:b}=W4(o,d),y=function(I,R,L){if(isNaN(g)||g<=0||isNaN(m)||m<0)return;i.save();const P=Ie(L.lineWidth,1);if(i.fillStyle=Ie(L.fillStyle,a),i.lineCap=Ie(L.lineCap,"butt"),i.lineDashOffset=Ie(L.lineDashOffset,0),i.lineJoin=Ie(L.lineJoin,"miter"),i.lineWidth=P,i.strokeStyle=Ie(L.strokeStyle,a),i.setLineDash(Ie(L.lineDash,[])),o.usePointStyle){const V={radius:m*Math.SQRT2/2,pointStyle:L.pointStyle,rotation:L.rotation,borderWidth:P},T=l.xPlus(I,g/2),D=R+f;gx(i,V,T,D,o.pointStyleWidth&&g)}else{const V=R+Math.max((d-m)/2,0),T=l.leftForLtr(I,g),D=sc(L.borderRadius);i.beginPath(),Object.values(D).some(K=>K!==0)?Oh(i,{x:T,y:V,w:g,h:m,radius:D}):i.rect(T,V,g,m),i.fill(),P!==0&&i.stroke()}i.restore()},x=function(I,R,L){hc(i,L.text,I,R+b/2,c,{strikethrough:L.hidden,textAlign:l.textAlign(L.textAlign)})},_=this.isHorizontal(),C=this._computeTitleHeight();_?h={x:Zs(r,this.left+u,this.right-s[0]),y:this.top+u+C,line:0}:h={x:this.left+u,y:Zs(r,this.top+C+u,this.bottom-e[0].height),line:0},Cx(this.ctx,t.textDirection);const A=b+u;this.legendItems.forEach((I,R)=>{i.strokeStyle=I.fontColor,i.fillStyle=I.fontColor;const L=i.measureText(I.text).width,P=l.textAlign(I.textAlign||(I.textAlign=o.textAlign)),V=g+f+L;let T=h.x,D=h.y;l.setWidth(this.width),_?R>0&&T+V+u>this.right&&(D=h.y+=A,h.line++,T=h.x=Zs(r,this.left+u,this.right-s[h.line])):R>0&&D+A>this.bottom&&(T=h.x=T+e[h.line].width+u,h.line++,D=h.y=Zs(r,this.top+C+u,this.bottom-e[h.line].height));const K=l.x(T);if(y(K,D,I),T=Mq(P,T+g+f,_?T+V:this.right,t.rtl),x(l.x(T),D,I),_)h.x+=V+u;else if(typeof I.text!="string"){const $=c.lineHeight;h.y+=Xx(I,$)+u}else h.y+=A}),kx(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,s=xs(e.font),i=ii(e.padding);if(!e.display)return;const r=mu(t.rtl,this.left,this.width),o=this.ctx,a=e.position,l=s.size/2,c=i.top+l;let u,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+c,d=Zs(t.align,d,this.right-f);else{const g=this.columnSizes.reduce((m,b)=>Math.max(m,b.height),0);u=c+Zs(t.align,this.top,this.bottom-g-t.labels.padding-this._computeTitleHeight())}const h=Zs(a,d,d+f);o.textAlign=r.textAlign(hb(a)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=s.string,hc(o,e.text,h,u,s)}_computeTitleHeight(){const t=this.options.title,e=xs(t.font),s=ii(t.padding);return t.display?e.lineHeight+s.height:0}_getLegendItemAt(t,e){let s,i,r;if(Wo(t,this.left,this.right)&&Wo(e,this.top,this.bottom)){for(r=this.legendHitBoxes,s=0;s<r.length;++s)if(i=r[s],Wo(t,i.left,i.left+i.width)&&Wo(e,i.top,i.top+i.height))return this.legendItems[s]}return null}handleEvent(t){const e=this.options;if(!SK(t.type,e))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const i=this._hoveredItem,r=xK(i,s);i&&!r&&Sn(e.onLeave,[t,i,this],this),this._hoveredItem=s,s&&!r&&Sn(e.onHover,[t,s,this],this)}else s&&Sn(e.onClick,[t,s,this],this)}}function CK(n,t,e,s,i){const r=kK(s,n,t,e),o=AK(i,s,t.lineHeight);return{itemWidth:r,itemHeight:o}}function kK(n,t,e,s){let i=n.text;return i&&typeof i!="string"&&(i=i.reduce((r,o)=>r.length>o.length?r:o)),t+e.size/2+s.measureText(i).width}function AK(n,t,e){let s=n;return typeof t.text!="string"&&(s=Xx(t,e)),s}function Xx(n,t){const e=n.text?n.text.length:0;return t*e}function SK(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var EK={id:"legend",_element:G4,start(n,t,e){const s=n.legend=new G4({ctx:n.ctx,options:e,chart:n});ni.configure(n,s,e),ni.addBox(n,s)},stop(n){ni.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const s=n.legend;ni.configure(n,s,e),s.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const s=t.datasetIndex,i=e.chart;i.isDatasetVisible(s)?(i.hide(s),t.hidden=!0):(i.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:s,textAlign:i,color:r,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(e?0:void 0),u=ii(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:s||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class Cb extends na{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const i=Rn(s.text)?s.text.length:1;this._padding=ii(s.padding);const r=i*xs(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:s,bottom:i,right:r,options:o}=this,a=o.align;let l=0,c,u,d;return this.isHorizontal()?(u=Zs(a,s,r),d=e+t,c=r-s):(o.position==="left"?(u=s+t,d=Zs(a,i,e),l=tn*-.5):(u=r-t,d=Zs(a,e,i),l=tn*.5),c=i-e),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const s=xs(e.font),r=s.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);hc(t,e.text,0,0,s,{color:e.color,maxWidth:l,rotation:c,textAlign:hb(e.align),textBaseline:"middle",translation:[o,a]})}}function TK(n,t){const e=new Cb({ctx:n.ctx,options:t,chart:n});ni.configure(n,e,t),ni.addBox(n,e),n.titleBlock=e}var LK={id:"title",_element:Cb,start(n,t,e){TK(n,e)},stop(n){const t=n.titleBlock;ni.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){const s=n.titleBlock;ni.configure(n,s,e),s.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const P1=new WeakMap;var PK={id:"subtitle",start(n,t,e){const s=new Cb({ctx:n.ctx,options:e,chart:n});ni.configure(n,s,e),ni.addBox(n,s),P1.set(n,s)},stop(n){ni.removeBox(n,P1.get(n)),P1.delete(n)},beforeUpdate(n,t,e){const s=P1.get(n);ni.configure(n,s,e),s.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Hd={average(n){if(!n.length)return!1;let t,e,s=new Set,i=0,r=0;for(t=0,e=n.length;t<e;++t){const a=n[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();s.add(l.x),i+=l.y,++r}}return r===0||s.size===0?!1:{x:[...s].reduce((a,l)=>a+l)/s.size,y:i/r}},nearest(n,t){if(!n.length)return!1;let e=t.x,s=t.y,i=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=n.length;r<o;++r){const l=n[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=Om(t,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();e=l.x,s=l.y}return{x:e,y:s}}};function Jr(n,t){return t&&(Rn(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function No(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function IK(n,t){const{element:e,datasetIndex:s,index:i}=t,r=n.getDatasetMeta(s).controller,{label:o,value:a}=r.getLabelAndValue(i);return{chart:n,label:o,parsed:r.getParsed(i),raw:n.data.datasets[s].data[i],formattedValue:a,dataset:r.getDataset(),dataIndex:i,datasetIndex:s,element:e}}function Y4(n,t){const e=n.chart.ctx,{body:s,footer:i,title:r}=n,{boxWidth:o,boxHeight:a}=t,l=xs(t.bodyFont),c=xs(t.titleFont),u=xs(t.footerFont),d=r.length,f=i.length,h=s.length,g=ii(t.padding);let m=g.height,b=0,y=s.reduce((C,A)=>C+A.before.length+A.lines.length+A.after.length,0);if(y+=n.beforeBody.length+n.afterBody.length,d&&(m+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),y){const C=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;m+=h*C+(y-h)*l.lineHeight+(y-1)*t.bodySpacing}f&&(m+=t.footerMarginTop+f*u.lineHeight+(f-1)*t.footerSpacing);let x=0;const _=function(C){b=Math.max(b,e.measureText(C).width+x)};return e.save(),e.font=c.string,hn(n.title,_),e.font=l.string,hn(n.beforeBody.concat(n.afterBody),_),x=t.displayColors?o+2+t.boxPadding:0,hn(s,C=>{hn(C.before,_),hn(C.lines,_),hn(C.after,_)}),x=0,e.font=u.string,hn(n.footer,_),e.restore(),b+=g.width,{width:b,height:m}}function DK(n,t){const{y:e,height:s}=t;return e<s/2?"top":e>n.height-s/2?"bottom":"center"}function MK(n,t,e,s){const{x:i,width:r}=s,o=e.caretSize+e.caretPadding;if(n==="left"&&i+r+o>t.width||n==="right"&&i-r-o<0)return!0}function RK(n,t,e,s){const{x:i,width:r}=e,{width:o,chartArea:{left:a,right:l}}=n;let c="center";return s==="center"?c=i<=(a+l)/2?"left":"right":i<=r/2?c="left":i>=o-r/2&&(c="right"),MK(c,n,t,e)&&(c="center"),c}function K4(n,t,e){const s=e.yAlign||t.yAlign||DK(n,e);return{xAlign:e.xAlign||t.xAlign||RK(n,t,e,s),yAlign:s}}function NK(n,t){let{x:e,width:s}=n;return t==="right"?e-=s:t==="center"&&(e-=s/2),e}function OK(n,t,e){let{y:s,height:i}=n;return t==="top"?s+=e:t==="bottom"?s-=i+e:s-=i/2,s}function X4(n,t,e,s){const{caretSize:i,caretPadding:r,cornerRadius:o}=n,{xAlign:a,yAlign:l}=e,c=i+r,{topLeft:u,topRight:d,bottomLeft:f,bottomRight:h}=sc(o);let g=NK(t,a);const m=OK(t,l,c);return l==="center"?a==="left"?g+=c:a==="right"&&(g-=c):a==="left"?g-=Math.max(u,f)+i:a==="right"&&(g+=Math.max(d,h)+i),{x:Ts(g,0,s.width-t.width),y:Ts(m,0,s.height-t.height)}}function I1(n,t,e){const s=ii(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-s.right:n.x+s.left}function Z4(n){return Jr([],No(n))}function FK(n,t,e){return Qa(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function J4(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const Zx={beforeTitle:Mo,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,s=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return e[t.dataIndex]}return""},afterTitle:Mo,beforeBody:Mo,beforeLabel:Mo,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return Ve(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Mo,afterBody:Mo,beforeFooter:Mo,footer:Mo,afterFooter:Mo};function wi(n,t,e,s){const i=n[t].call(e,s);return typeof i>"u"?Zx[t].call(e,s):i}class Q4 extends na{static positioners=Hd;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,s=this.options.setContext(this.getContext()),i=s.enabled&&e.options.animation&&s.animations,r=new Lx(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=FK(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:s}=e,i=wi(s,"beforeTitle",this,t),r=wi(s,"title",this,t),o=wi(s,"afterTitle",this,t);let a=[];return a=Jr(a,No(i)),a=Jr(a,No(r)),a=Jr(a,No(o)),a}getBeforeBody(t,e){return Z4(wi(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:s}=e,i=[];return hn(t,r=>{const o={before:[],lines:[],after:[]},a=J4(s,r);Jr(o.before,No(wi(a,"beforeLabel",this,r))),Jr(o.lines,wi(a,"label",this,r)),Jr(o.after,No(wi(a,"afterLabel",this,r))),i.push(o)}),i}getAfterBody(t,e){return Z4(wi(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:s}=e,i=wi(s,"beforeFooter",this,t),r=wi(s,"footer",this,t),o=wi(s,"afterFooter",this,t);let a=[];return a=Jr(a,No(i)),a=Jr(a,No(r)),a=Jr(a,No(o)),a}_createItems(t){const e=this._active,s=this.chart.data,i=[],r=[],o=[];let a=[],l,c;for(l=0,c=e.length;l<c;++l)a.push(IK(this.chart,e[l]));return t.filter&&(a=a.filter((u,d,f)=>t.filter(u,d,f,s))),t.itemSort&&(a=a.sort((u,d)=>t.itemSort(u,d,s))),hn(a,u=>{const d=J4(t.callbacks,u);i.push(wi(d,"labelColor",this,u)),r.push(wi(d,"labelPointStyle",this,u)),o.push(wi(d,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,e){const s=this.options.setContext(this.getContext()),i=this._active;let r,o=[];if(!i.length)this.opacity!==0&&(r={opacity:0});else{const a=Hd[s.position].call(this,i,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const l=this._size=Y4(this,s),c=Object.assign({},a,l),u=K4(this.chart,s,c),d=X4(s,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,s,i){const r=this.getCaretPosition(t,s,i);e.lineTo(r.x1,r.y1),e.lineTo(r.x2,r.y2),e.lineTo(r.x3,r.y3)}getCaretPosition(t,e,s){const{xAlign:i,yAlign:r}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=sc(a),{x:f,y:h}=t,{width:g,height:m}=e;let b,y,x,_,C,A;return r==="center"?(C=h+m/2,i==="left"?(b=f,y=b-o,_=C+o,A=C-o):(b=f+g,y=b+o,_=C-o,A=C+o),x=b):(i==="left"?y=f+Math.max(l,u)+o:i==="right"?y=f+g-Math.max(c,d)-o:y=this.caretX,r==="top"?(_=h,C=_-o,b=y-o,x=y+o):(_=h+m,C=_+o,b=y+o,x=y-o),A=_),{x1:b,x2:y,x3:x,y1:_,y2:C,y3:A}}drawTitle(t,e,s){const i=this.title,r=i.length;let o,a,l;if(r){const c=mu(s.rtl,this.x,this.width);for(t.x=I1(this,s.titleAlign,s),e.textAlign=c.textAlign(s.titleAlign),e.textBaseline="middle",o=xs(s.titleFont),a=s.titleSpacing,e.fillStyle=s.titleColor,e.font=o.string,l=0;l<r;++l)e.fillText(i[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===r&&(t.y+=s.titleMarginBottom-a)}}_drawColorBox(t,e,s,i,r){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:c}=r,u=xs(r.bodyFont),d=I1(this,"left",r),f=i.x(d),h=l<u.lineHeight?(u.lineHeight-l)/2:0,g=e.y+h;if(r.usePointStyle){const m={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},b=i.leftForLtr(f,c)+c/2,y=g+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,$m(t,m,b,y),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,$m(t,m,b,y)}else{t.lineWidth=qe(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const m=i.leftForLtr(f,c),b=i.leftForLtr(i.xPlus(f,1),c-2),y=sc(o.borderRadius);Object.values(y).some(x=>x!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,Oh(t,{x:m,y:g,w:c,h:l,radius:y}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Oh(t,{x:b,y:g+1,w:c-2,h:l-2,radius:y}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(m,g,c,l),t.strokeRect(m,g,c,l),t.fillStyle=o.backgroundColor,t.fillRect(b,g+1,c-2,l-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,e,s){const{body:i}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=s,d=xs(s.bodyFont);let f=d.lineHeight,h=0;const g=mu(s.rtl,this.x,this.width),m=function(L){e.fillText(L,g.x(t.x+h),t.y+f/2),t.y+=f+r},b=g.textAlign(o);let y,x,_,C,A,I,R;for(e.textAlign=o,e.textBaseline="middle",e.font=d.string,t.x=I1(this,b,s),e.fillStyle=s.bodyColor,hn(this.beforeBody,m),h=a&&b!=="right"?o==="center"?c/2+u:c+2+u:0,C=0,I=i.length;C<I;++C){for(y=i[C],x=this.labelTextColors[C],e.fillStyle=x,hn(y.before,m),_=y.lines,a&&_.length&&(this._drawColorBox(e,t,C,g,s),f=Math.max(d.lineHeight,l)),A=0,R=_.length;A<R;++A)m(_[A]),f=d.lineHeight;hn(y.after,m)}h=0,f=d.lineHeight,hn(this.afterBody,m),t.y-=r}drawFooter(t,e,s){const i=this.footer,r=i.length;let o,a;if(r){const l=mu(s.rtl,this.x,this.width);for(t.x=I1(this,s.footerAlign,s),t.y+=s.footerMarginTop,e.textAlign=l.textAlign(s.footerAlign),e.textBaseline="middle",o=xs(s.footerFont),e.fillStyle=s.footerColor,e.font=o.string,a=0;a<r;++a)e.fillText(i[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s.footerSpacing}}drawBackground(t,e,s,i){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=t,{width:c,height:u}=s,{topLeft:d,topRight:f,bottomLeft:h,bottomRight:g}=sc(i.cornerRadius);e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.beginPath(),e.moveTo(a+d,l),o==="top"&&this.drawCaret(t,e,s,i),e.lineTo(a+c-f,l),e.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&r==="right"&&this.drawCaret(t,e,s,i),e.lineTo(a+c,l+u-g),e.quadraticCurveTo(a+c,l+u,a+c-g,l+u),o==="bottom"&&this.drawCaret(t,e,s,i),e.lineTo(a+h,l+u),e.quadraticCurveTo(a,l+u,a,l+u-h),o==="center"&&r==="left"&&this.drawCaret(t,e,s,i),e.lineTo(a,l+d),e.quadraticCurveTo(a,l,a+d,l),e.closePath(),e.fill(),i.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,s=this.$animations,i=s&&s.x,r=s&&s.y;if(i||r){const o=Hd[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Y4(this,t),l=Object.assign({},o,this._size),c=K4(e,t,l),u=X4(t,l,c,e);(i._to!==u.x||r._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(e);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=ii(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=s,this.drawBackground(r,t,i,e),Cx(t,e.textDirection),r.y+=o.top,this.drawTitle(r,t,e),this.drawBody(r,t,e),this.drawFooter(r,t,e),kx(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const s=this._active,i=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!Lp(s,i),o=this._positionChanged(i,e);(r||o)&&(this._active=i,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,s=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],o=this._getActiveElements(t,r,e,s),a=this._positionChanged(o,t),l=e||!Lp(o,r)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),l}_getActiveElements(t,e,s,i){const r=this.options;if(t.type==="mouseout")return[];if(!i)return e.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,r.mode,r,s);return r.reverse&&o.reverse(),o}_positionChanged(t,e){const{caretX:s,caretY:i,options:r}=this,o=Hd[r.position].call(this,t,e);return o!==!1&&(s!==o.x||i!==o.y)}}var $K={id:"tooltip",_element:Q4,positioners:Hd,afterInit(n,t,e){e&&(n.tooltip=new Q4({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Zx},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},BK=Object.freeze({__proto__:null,Colors:ZY,Decimation:eK,Filler:_K,Legend:EK,SubTitle:PK,Title:LK,Tooltip:$K});const jK=(n,t,e,s)=>(typeof t=="string"?(e=n.push(t)-1,s.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function UK(n,t,e,s){const i=n.indexOf(t);if(i===-1)return jK(n,t,e,s);const r=n.lastIndexOf(t);return i!==r?e:i}const zK=(n,t)=>n===null?null:Ts(Math.round(n),0,t);function t9(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class HK extends vc{static id="category";static defaults={ticks:{callback:t9}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const s=this.getLabels();for(const{index:i,label:r}of e)s[i]===r&&s.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Ve(t))return null;const s=this.getLabels();return e=isFinite(e)&&s[e]===t?e:UK(s,t,Ie(e,t),this._addedLabels),zK(e,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:s,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),e||(i=this.getLabels().length-1)),this.min=s,this.max=i}buildTicks(){const t=this.min,e=this.max,s=this.options.offset,i=[];let r=this.getLabels();r=t===0&&e===r.length-1?r:r.slice(t,e+1),this._valueRange=Math.max(r.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=t;o<=e;o++)i.push({value:o});return i}getLabelForValue(t){return t9.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function VK(n,t){const e=[],{bounds:i,step:r,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:f}=n,h=r||1,g=u-1,{min:m,max:b}=t,y=!Ve(o),x=!Ve(a),_=!Ve(c),C=(b-m)/(d+1);let A=Yw((b-m)/g/h)*h,I,R,L,P;if(A<1e-14&&!y&&!x)return[{value:m},{value:b}];P=Math.ceil(b/A)-Math.floor(m/A),P>g&&(A=Yw(P*A/g/h)*h),Ve(l)||(I=Math.pow(10,l),A=Math.ceil(A*I)/I),i==="ticks"?(R=Math.floor(m/A)*A,L=Math.ceil(b/A)*A):(R=m,L=b),y&&x&&r&&Sq((a-o)/r,A/1e3)?(P=Math.round(Math.min((a-o)/A,u)),A=(a-o)/P,R=o,L=a):_?(R=y?o:R,L=x?a:L,P=c-1,A=(L-R)/P):(P=(L-R)/A,uh(P,Math.round(P),A/1e3)?P=Math.round(P):P=Math.ceil(P));const V=Math.max(Kw(A),Kw(R));I=Math.pow(10,Ve(l)?V:l),R=Math.round(R*I)/I,L=Math.round(L*I)/I;let T=0;for(y&&(f&&R!==o?(e.push({value:o}),R<o&&T++,uh(Math.round((R+T*A)*I)/I,o,e9(o,C,n))&&T++):R<o&&T++);T<P;++T){const D=Math.round((R+T*A)*I)/I;if(x&&D>a)break;e.push({value:D})}return x&&f&&L!==a?e.length&&uh(e[e.length-1].value,a,e9(a,C,n))?e[e.length-1].value=a:e.push({value:a}):(!x||L===a)&&e.push({value:L}),e}function e9(n,t,{horizontal:e,minRotation:s}){const i=Tr(s),r=(e?Math.sin(i):Math.cos(i))||.001,o=.75*t*(""+n).length;return Math.min(t/r,o)}class Op extends vc{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Ve(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:s}=this.getUserBounds();let{min:i,max:r}=this;const o=l=>i=e?i:l,a=l=>r=s?r:l;if(t){const l=co(i),c=co(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===r){let l=r===0?1:Math.abs(r*.05);a(r+l),t||o(i-l)}this.min=i,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:s}=t,i;return s?(i=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),e=e||11),e&&(i=Math.min(e,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const i={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},r=this._range||this,o=VK(i,r);return t.bounds==="ticks"&&ox(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let e=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const i=(s-e)/Math.max(t.length-1,1)/2;e-=i,s+=i}this._startValue=e,this._endValue=s,this._valueRange=s-e}getLabelForValue(t){return rf(t,this.chart.options.locale,this.options.ticks.format)}}class qK extends Op{static id="linear";static defaults={ticks:{callback:mg.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Gn(t)?t:0,this.max=Gn(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,s=Tr(this.options.ticks.minRotation),i=(t?Math.sin(s):Math.cos(s))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,r.lineHeight/i))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const $h=n=>Math.floor(Oa(n)),Rl=(n,t)=>Math.pow(10,$h(n)+t);function n9(n){return n/Math.pow(10,$h(n))===1}function s9(n,t,e){const s=Math.pow(10,e),i=Math.floor(n/s);return Math.ceil(t/s)-i}function WK(n,t){const e=t-n;let s=$h(e);for(;s9(n,t,s)>10;)s++;for(;s9(n,t,s)<10;)s--;return Math.min(s,$h(n))}function GK(n,{min:t,max:e}){t=$i(n.min,t);const s=[],i=$h(t);let r=WK(t,e),o=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),l=i>r?Math.pow(10,i):0,c=Math.round((t-l)*o)/o,u=Math.floor((t-l)/a/10)*a*10;let d=Math.floor((c-u)/Math.pow(10,r)),f=$i(n.min,Math.round((l+u+d*Math.pow(10,r))*o)/o);for(;f<e;)s.push({value:f,major:n9(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(r++,d=2,o=r>=0?1:o),f=Math.round((l+u+d*Math.pow(10,r))*o)/o;const h=$i(n.max,f);return s.push({value:h,major:n9(h),significand:d}),s}class YK extends vc{static id="logarithmic";static defaults={ticks:{callback:mg.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const s=Op.prototype.parse.apply(this,[t,e]);if(s===0){this._zero=!0;return}return Gn(s)&&s>0?s:null}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Gn(t)?Math.max(0,t):null,this.max=Gn(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Gn(this._userMin)&&(this.min=t===Rl(this.min,0)?Rl(this.min,-1):Rl(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let s=this.min,i=this.max;const r=a=>s=t?s:a,o=a=>i=e?i:a;s===i&&(s<=0?(r(1),o(10)):(r(Rl(s,-1)),o(Rl(i,1)))),s<=0&&r(Rl(i,-1)),i<=0&&o(Rl(s,1)),this.min=s,this.max=i}buildTicks(){const t=this.options,e={min:this._userMin,max:this._userMax},s=GK(e,this);return t.bounds==="ticks"&&ox(s,this,"value"),t.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}getLabelForValue(t){return t===void 0?"0":rf(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Oa(t),this._valueRange=Oa(this.max)-Oa(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Oa(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function Vm(n){const t=n.ticks;if(t.display&&n.display){const e=ii(t.backdropPadding);return Ie(t.font&&t.font.size,Nn.font.size)+e.height}return 0}function KK(n,t,e){return e=Rn(e)?e:[e],{w:Hq(n,t.string,e),h:e.length*t.lineHeight}}function i9(n,t,e,s,i){return n===s||n===i?{start:t-e/2,end:t+e/2}:n<s||n>i?{start:t-e,end:t}:{start:t,end:t+e}}function XK(n){const t={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},e=Object.assign({},t),s=[],i=[],r=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?tn/r:0;for(let l=0;l<r;l++){const c=o.setContext(n.getPointLabelContext(l));i[l]=c.padding;const u=n.getPointPosition(l,n.drawingArea+i[l],a),d=xs(c.font),f=KK(n.ctx,d,n._pointLabels[l]);s[l]=f;const h=Qs(n.getIndexAngle(l)+a),g=Math.round(ub(h)),m=i9(g,u.x,f.w,0,180),b=i9(g,u.y,f.h,90,270);ZK(e,t,h,m,b)}n.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),n._pointLabelItems=tX(n,s,i)}function ZK(n,t,e,s,i){const r=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e));let a=0,l=0;s.start<t.l?(a=(t.l-s.start)/r,n.l=Math.min(n.l,t.l-a)):s.end>t.r&&(a=(s.end-t.r)/r,n.r=Math.max(n.r,t.r+a)),i.start<t.t?(l=(t.t-i.start)/o,n.t=Math.min(n.t,t.t-l)):i.end>t.b&&(l=(i.end-t.b)/o,n.b=Math.max(n.b,t.b+l))}function JK(n,t,e){const s=n.drawingArea,{extra:i,additionalAngle:r,padding:o,size:a}=e,l=n.getPointPosition(t,s+i+o,r),c=Math.round(ub(Qs(l.angle+is))),u=sX(l.y,a.h,c),d=eX(c),f=nX(l.x,a.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:f,top:u,right:f+a.w,bottom:u+a.h}}function QK(n,t){if(!t)return!0;const{left:e,top:s,right:i,bottom:r}=n;return!(Yo({x:e,y:s},t)||Yo({x:e,y:r},t)||Yo({x:i,y:s},t)||Yo({x:i,y:r},t))}function tX(n,t,e){const s=[],i=n._pointLabels.length,r=n.options,{centerPointLabels:o,display:a}=r.pointLabels,l={extra:Vm(r)/2,additionalAngle:o?tn/i:0};let c;for(let u=0;u<i;u++){l.padding=e[u],l.size=t[u];const d=JK(n,u,l);s.push(d),a==="auto"&&(d.visible=QK(d,c),d.visible&&(c=d))}return s}function eX(n){return n===0||n===180?"center":n<180?"left":"right"}function nX(n,t,e){return e==="right"?n-=t:e==="center"&&(n-=t/2),n}function sX(n,t,e){return e===90||e===270?n-=t/2:(e>270||e<90)&&(n-=t),n}function iX(n,t,e){const{left:s,top:i,right:r,bottom:o}=e,{backdropColor:a}=t;if(!Ve(a)){const l=sc(t.borderRadius),c=ii(t.backdropPadding);n.fillStyle=a;const u=s-c.left,d=i-c.top,f=r-s+c.width,h=o-i+c.height;Object.values(l).some(g=>g!==0)?(n.beginPath(),Oh(n,{x:u,y:d,w:f,h,radius:l}),n.fill()):n.fillRect(u,d,f,h)}}function rX(n,t){const{ctx:e,options:{pointLabels:s}}=n;for(let i=t-1;i>=0;i--){const r=n._pointLabelItems[i];if(!r.visible)continue;const o=s.setContext(n.getPointLabelContext(i));iX(e,o,r);const a=xs(o.font),{x:l,y:c,textAlign:u}=r;hc(e,n._pointLabels[i],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function Jx(n,t,e,s){const{ctx:i}=n;if(e)i.arc(n.xCenter,n.yCenter,t,0,Pn);else{let r=n.getPointPosition(0,t);i.moveTo(r.x,r.y);for(let o=1;o<s;o++)r=n.getPointPosition(o,t),i.lineTo(r.x,r.y)}}function oX(n,t,e,s,i){const r=n.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!s||!a||!l||e<0||(r.save(),r.strokeStyle=a,r.lineWidth=l,r.setLineDash(i.dash||[]),r.lineDashOffset=i.dashOffset,r.beginPath(),Jx(n,e,o,s),r.closePath(),r.stroke(),r.restore())}function aX(n,t,e){return Qa(n,{label:e,index:t,type:"pointLabel"})}class lX extends Op{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:mg.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=ii(Vm(this.options)/2),e=this.width=this.maxWidth-t.width,s=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+s/2+t.top),this.drawingArea=Math.floor(Math.min(e,s)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=Gn(t)&&!isNaN(t)?t:0,this.max=Gn(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Vm(this.options))}generateTickLabels(t){Op.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,s)=>{const i=Sn(this.options.pointLabels.callback,[e,s],this);return i||i===0?i:""}).filter((e,s)=>this.chart.getDataVisibility(s))}fit(){const t=this.options;t.display&&t.pointLabels.display?XK(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,s,i){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((s-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,s,i))}getIndexAngle(t){const e=Pn/(this._pointLabels.length||1),s=this.options.startAngle||0;return Qs(t*e+Tr(s))}getDistanceFromCenterForValue(t){if(Ve(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(Ve(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const s=e[t];return aX(this.getContext(),t,s)}}getPointPosition(t,e,s=0){const i=this.getIndexAngle(t)-is+s;return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter,angle:i}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:s,right:i,bottom:r}=this._pointLabelItems[t];return{left:e,top:s,right:i,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const s=this.ctx;s.save(),s.beginPath(),Jx(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),s.closePath(),s.fillStyle=t,s.fill(),s.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:s,grid:i,border:r}=e,o=this._pointLabels.length;let a,l,c;if(e.pointLabels.display&&rX(this,o),i.display&&this.ticks.forEach((u,d)=>{if(d!==0||d===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const f=this.getContext(d),h=i.setContext(f),g=r.setContext(f);oX(this,h,l,o,g)}}),s.display){for(t.save(),a=o-1;a>=0;a--){const u=s.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:f}=u;!f||!d||(t.lineWidth=f,t.strokeStyle=d,t.setLineDash(u.borderDash),t.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),c=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,s=e.ticks;if(!s.display)return;const i=this.getIndexAngle(0);let r,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!e.reverse)return;const c=s.setContext(this.getContext(l)),u=xs(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=u.string,o=t.measureText(a.label).width,t.fillStyle=c.backdropColor;const d=ii(c.backdropPadding);t.fillRect(-o/2-d.left,-r-u.size/2-d.top,o+d.width,u.size+d.height)}hc(t,a.label,0,-r,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),t.restore()}drawTitle(){}}const Cg={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ci=Object.keys(Cg);function r9(n,t){return n-t}function o9(n,t){if(Ve(t))return null;const e=n._adapter,{parser:s,round:i,isoWeekday:r}=n._parseOpts;let o=t;return typeof s=="function"&&(o=s(o)),Gn(o)||(o=typeof s=="string"?e.parse(o,s):e.parse(o)),o===null?null:(i&&(o=i==="week"&&(Iu(r)||r===!0)?e.startOf(o,"isoWeek",r):e.startOf(o,i)),+o)}function a9(n,t,e,s){const i=Ci.length;for(let r=Ci.indexOf(n);r<i-1;++r){const o=Cg[Ci[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(a*o.size))<=s)return Ci[r]}return Ci[i-1]}function cX(n,t,e,s,i){for(let r=Ci.length-1;r>=Ci.indexOf(e);r--){const o=Ci[r];if(Cg[o].common&&n._adapter.diff(i,s,o)>=t-1)return o}return Ci[e?Ci.indexOf(e):0]}function uX(n){for(let t=Ci.indexOf(n)+1,e=Ci.length;t<e;++t)if(Cg[Ci[t]].common)return Ci[t]}function l9(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:s,hi:i}=db(e,t),r=e[s]>=t?e[s]:e[i];n[r]=!0}}function dX(n,t,e,s){const i=n._adapter,r=+i.startOf(t[0].value,s),o=t[t.length-1].value;let a,l;for(a=r;a<=o;a=+i.add(a,1,s))l=e[a],l>=0&&(t[l].major=!0);return t}function c9(n,t,e){const s=[],i={},r=t.length;let o,a;for(o=0;o<r;++o)a=t[o],i[a]=o,s.push({value:a,major:!1});return r===0||!e?s:dX(n,s,i,e)}class qm extends vc{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const s=t.time||(t.time={}),i=this._adapter=new hG._date(t.adapters.date);i.init(e),ch(s.displayFormats,i.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:o9(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,s=t.time.unit||"day";let{min:i,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Gn(i)&&!isNaN(i)?i:+e.startOf(Date.now(),s),r=Gn(r)&&!isNaN(r)?r:+e.endOf(Date.now(),s)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],s=t[t.length-1]),{min:e,max:s}}buildTicks(){const t=this.options,e=t.time,s=t.ticks,i=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,o=this.max,a=Pq(i,r,o);return this._unit=e.unit||(s.autoSkip?a9(e.minUnit,this.min,this.max,this._getLabelCapacity(r)):cX(this,a.length,e.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:uX(this._unit),this.initOffsets(i),t.reverse&&a.reverse(),c9(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,s=0,i,r;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),t.length===1?e=1-i:e=(this.getDecimalForValue(t[1])-i)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?s=r:s=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;e=Ts(e,0,o),s=Ts(s,0,o),this._offsets={start:e,end:s,factor:1/(e+1+s)}}_generate(){const t=this._adapter,e=this.min,s=this.max,i=this.options,r=i.time,o=r.unit||a9(r.minUnit,e,s,this._getLabelCapacity(e)),a=Ie(i.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=Iu(l)||l===!0,u={};let d=e,f,h;if(c&&(d=+t.startOf(d,"isoWeek",l)),d=+t.startOf(d,c?"day":o),t.diff(s,e,o)>1e5*a)throw new Error(e+" and "+s+" are too far apart with stepSize of "+a+" "+o);const g=i.ticks.source==="data"&&this.getDataTimestamps();for(f=d,h=0;f<s;f=+t.add(f,a,o),h++)l9(u,f,g);return(f===s||i.bounds==="ticks"||h===1)&&l9(u,f,g),Object.keys(u).sort(r9).map(m=>+m)}getLabelForValue(t){const e=this._adapter,s=this.options.time;return s.tooltipFormat?e.format(t,s.tooltipFormat):e.format(t,s.displayFormats.datetime)}format(t,e){const i=this.options.time.displayFormats,r=this._unit,o=e||i[r];return this._adapter.format(t,o)}_tickFormatFunction(t,e,s,i){const r=this.options,o=r.ticks.callback;if(o)return Sn(o,[t,e,s],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],d=c&&a[c],f=s[e],h=c&&d&&f&&f.major;return this._adapter.format(t,i||(h?d:u))}generateTickLabels(t){let e,s,i;for(e=0,s=t.length;e<s;++e)i=t[e],i.label=this._tickFormatFunction(i.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+s)*e.factor)}getValueForPixel(t){const e=this._offsets,s=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,s=this.ctx.measureText(t).width,i=Tr(this.isHorizontal()?e.maxRotation:e.minRotation),r=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:s*r+a*o,h:s*o+a*r}}_getLabelCapacity(t){const e=this.options.time,s=e.displayFormats,i=s[e.unit]||s.millisecond,r=this._tickFormatFunction(t,0,c9(this,[t],this._majorUnit),i),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],e,s;if(t.length)return t;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(e=0,s=i.length;e<s;++e)t=t.concat(i[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,s;if(t.length)return t;const i=this.getLabels();for(e=0,s=i.length;e<s;++e)t.push(o9(this,i[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return cx(t.sort(r9))}}function D1(n,t,e){let s=0,i=n.length-1,r,o,a,l;e?(t>=n[s].pos&&t<=n[i].pos&&({lo:s,hi:i}=Go(n,"pos",t)),{pos:r,time:a}=n[s],{pos:o,time:l}=n[i]):(t>=n[s].time&&t<=n[i].time&&({lo:s,hi:i}=Go(n,"time",t)),{time:r,pos:a}=n[s],{time:o,pos:l}=n[i]);const c=o-r;return c?a+(l-a)*(t-r)/c:a}class hX extends qm{static id="timeseries";static defaults=qm.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=D1(e,this.min),this._tableRange=D1(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:s}=this,i=[],r=[];let o,a,l,c,u;for(o=0,a=t.length;o<a;++o)c=t[o],c>=e&&c<=s&&i.push(c);if(i.length<2)return[{time:e,pos:0},{time:s,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],l=i[o-1],c=i[o],Math.round((u+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const t=this.min,e=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(e)||s.length===1)&&s.push(e),s.sort((i,r)=>i-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),s=this.getLabelTimestamps();return e.length&&s.length?t=this.normalize(e.concat(s)):t=e.length?e:s,t=this._cache.all=t,t}getDecimalForValue(t){return(D1(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,s=this.getDecimalForPixel(t)/e.factor-e.end;return D1(this._table,s*this._tableRange+this._minPos,!0)}}var fX=Object.freeze({__proto__:null,CategoryScale:HK,LinearScale:qK,LogarithmicScale:YK,RadialLinearScale:lX,TimeScale:qm,TimeSeriesScale:hX});const pX=[dG,VY,BK,fX];xb.register(...pX);const fo="/assets/DICT-Logo-icon_only%20(1)-B6RTI4Ug.png",gX={class:"organization-homepage"},mX={class:"avatar"},bX=["src"],vX={key:0,class:"profile-section"},yX={class:"org-name"},wX={class:"profile-actions"},_X={class:"content"},xX={class:"cards-container"},CX={class:"card"},kX={class:"cards-counter"},AX={class:"card"},SX={class:"cards-counter"},EX={class:"card"},TX={class:"cards-counter"},LX={class:"card"},PX={class:"cards-counter"},IX={class:"card"},DX={class:"cards-counter"},MX={class:"card"},RX={class:"cards-counter"},NX={class:"charts-container"},OX={class:"main-chart"},FX=["id"],$X={class:"side-charts"},BX=["onClick"],jX=["id"],UX={name:"OrganizationHomePage",data(){return{dictLogo:fo}},setup(){ut(!0);const n=ut("Loading...");je(()=>{const t=localStorage.getItem("organizationName");n.value=t||"My Organization"})}},zX=Object.assign(UX,{setup(n){const t=gi(),e=ut(!0),s=()=>e.value=!e.value,i=ut("Loading...");je(()=>{const W=localStorage.getItem("user");if(W){const F=JSON.parse(W);i.value=F.organizationName||F.displayName||F.name||"Unknown Org"}});const r=ut(0),o=ut(0),a=ut(0),l=ut(0),c=ut(0),u=ut(0),d=ut([]),f=ut([]),h=ut([]),g=ut([]),m=ut([]),b=ut([]),y=async()=>{try{let W;try{({data:W}=await Er.get("/organization/trainings"))}catch(O){console.warn("Org trainings endpoint unavailable for homepage, falling back:",O?.response?.status);const et=localStorage.getItem("user"),gt=et?JSON.parse(et):null,lt=gt?.organizationID??gt?.organization?.organizationID??null;({data:W}=await Er.get("/trainings",{params:lt?{organizationID:lt}:{}}))}d.value=Array.isArray(W)?W:[];const F=new Date;r.value=d.value.length,o.value=d.value.filter(O=>{const et=O.schedule?new Date(O.schedule):null;return et&&et>F}).length,a.value=r.value-o.value}catch(W){console.error("Failed to fetch training stats:",W),d.value=[]}},x=async()=>{try{const{data:W}=await Er.get("/organization/careers");f.value=Array.isArray(W)?W:[];const F=new Date;l.value=f.value.length,c.value=f.value.filter(O=>{const et=O.deadlineOfSubmission?new Date(O.deadlineOfSubmission):null;return et&&et>=F}).length,u.value=l.value-c.value}catch(W){console.error("Failed to fetch career stats:",W),f.value=[]}},_=ut({}),C=ut({id:"chart1",title:"General Overview"}),A=ut([{id:"chart2",title:"Training Summary"},{id:"chart3",title:"Applicant Engagement"},{id:"chart4",title:"Career Insights"}]),I=ut({chart1:{type:"line",data:{labels:[],datasets:[{label:"Training Registrants",data:[],borderColor:"#44576D",backgroundColor:"rgba(68,87,109,0.2)",tension:.3,fill:!0},{label:"Career Applicants",data:[],borderColor:"#A7B1C2",backgroundColor:"rgba(167,177,194,0.2)",tension:.3,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top"}}}},chart2:{type:"pie",data:{labels:["On-site","Online"],datasets:[{data:[],backgroundColor:["#44576D","#A7B1C2"]}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"bottom"}}}},chart3:{type:"bar",data:{labels:["Careers","Trainings"],datasets:[{label:"Bookmarks",data:[],backgroundColor:"#44576D"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}}},chart4:{type:"doughnut",data:{labels:["Submitted","In Review","For Interview","Accepted","Rejected"],datasets:[{data:[],backgroundColor:["#44576D","#A7B1C2","#DFE3EA","#8FA5B3","#6B7D8F"]}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"bottom"}}}}}),R=async()=>{try{const W=[];for(const F of d.value)try{const{data:O}=await Er.get(`/trainings/${F.trainingID}/registrants`);Array.isArray(O)&&O.forEach(et=>{W.push({...et,trainingID:F.trainingID,registrationDate:et.dateRegistered||et.registrationDate})})}catch(O){console.warn(`Failed to fetch registrants for training ${F.trainingID}:`,O)}h.value=W}catch(W){console.warn("Failed to fetch registrations:",W),h.value=[]}},L=async()=>{try{const W=[];for(const F of f.value)try{const{data:O}=await Er.get(`/careers/${F.careerID}/applicants`);Array.isArray(O)&&O.forEach(et=>{W.push({...et,careerID:F.careerID,dateSubmitted:et.dateSubmitted,applciationStatus:et.status||et.applicationStatus||et.applciationStatus})})}catch(O){console.warn(`Failed to fetch applicants for career ${F.careerID}:`,O)}g.value=W}catch(W){console.warn("Failed to fetch applications:",W),g.value=[]}},P=async()=>{try{try{const{data:W}=await Er.get("/organization/bookmarks/counts");if(W&&(W.careerBookmarks!==void 0||W.trainingBookmarks!==void 0)){m.value=W.careerBookmarks||0,b.value=W.trainingBookmarks||0;return}}catch(W){console.warn("Bookmark counts endpoint not available, will calculate from data:",W)}m.value=[],b.value=[]}catch(W){console.warn("Failed to fetch bookmark counts:",W),m.value=[],b.value=[]}},V=()=>{const W=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],F=new Date().getFullYear(),O=W.map((M,B)=>{const at=B+1,pt=h.value.filter(ct=>{if(!ct.registrationDate&&!ct.dateRegistered)return!1;const G=ct.registrationDate||ct.dateRegistered;if(!G)return!1;const rt=new Date(G);return isNaN(rt.getTime())?!1:rt.getMonth()+1===at&&rt.getFullYear()===F}).length,nt=g.value.filter(ct=>{if(!ct.dateSubmitted)return!1;const G=new Date(ct.dateSubmitted);return isNaN(G.getTime())?!1:G.getMonth()+1===at&&G.getFullYear()===F}).length;return{registrants:pt,applicants:nt}});I.value.chart1.data.labels=W,I.value.chart1.data.datasets[0].data=O.map(M=>M.registrants),I.value.chart1.data.datasets[1].data=O.map(M=>M.applicants);const et={onsite:d.value.filter(M=>{const B=(M.mode||M.Mode||"").toLowerCase();return B==="onsite"||B==="on-site"||B==="on site"}).length,online:d.value.filter(M=>(M.mode||M.Mode||"").toLowerCase()==="online").length};I.value.chart2.data.datasets[0].data=[et.onsite,et.online];let gt=0,lt=0;Array.isArray(m.value)&&m.value.length>0?gt=new Set(m.value).size:gt=new Set(g.value.map(B=>B.applicantID).filter(Boolean)).size,Array.isArray(b.value)&&b.value.length>0?lt=new Set(b.value).size:lt=new Set(h.value.map(B=>B.applicantID||B.id).filter(Boolean)).size,I.value.chart3.data.datasets[0].data=[gt,lt];const E={submitted:g.value.filter(M=>{const B=(M.applciationStatus||M.applicationStatus||M.status||"").toLowerCase();return B==="submitted"||B===""}).length,inReview:g.value.filter(M=>{const B=(M.applciationStatus||M.applicationStatus||M.status||"").toLowerCase();return B==="in review"||B==="pending"}).length,forInterview:g.value.filter(M=>(M.applciationStatus||M.applicationStatus||M.status||"").toLowerCase()==="for interview").length,accepted:g.value.filter(M=>(M.applciationStatus||M.applicationStatus||M.status||"").toLowerCase()==="accepted").length,rejected:g.value.filter(M=>(M.applciationStatus||M.applicationStatus||M.status||"").toLowerCase()==="rejected").length};I.value.chart4.data.datasets[0].data=[E.submitted,E.inReview,E.forInterview,E.accepted,E.rejected]},T=async()=>{V(),await Si(),D(C.value.id),A.value.forEach(W=>D(W.id))};function D(W){const F=document.getElementById(W);if(!F){console.warn(`Canvas element with id "${W}" not found`);return}_.value[W]&&_.value[W].destroy();const O=I.value[W];if(!O){console.warn(`Chart config for "${W}" not found`);return}_.value[W]=new xb(F,O)}function K(W){const F={...C.value};C.value=W,A.value=A.value.map(O=>O.id===W.id?F:O),Si(()=>{Object.values(_.value).forEach(O=>O.destroy()),_.value={},D(C.value.id),A.value.forEach(O=>D(O.id))})}je(async()=>{await Promise.all([y(),x()]),await Promise.all([R(),L(),P()]),await T()});const $=W=>t.push(W),q=()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),t.push({name:"Login"})};return(W,F)=>(j(),z("div",gX,[p("button",{class:fe(["hamburger",{open:e.value,shifted:e.value}]),onClick:s},F[5]||(F[5]=[p("span",null,null,-1),p("span",null,null,-1),p("span",null,null,-1)]),2),Ce(dr,{name:"slide"},{default:hs(()=>[p("aside",{class:fe(["sidebar",{collapsed:!e.value}])},[F[12]||(F[12]=p("div",{class:"space"},null,-1)),p("div",mX,[p("img",{src:Qe(fo),alt:"DICT Logo",class:"avatar-img"},null,8,bX)]),Ce(dr,{name:"fade"},{default:hs(()=>[e.value?(j(),z("div",vX,[p("h3",yX,J(i.value),1),p("div",wX,[p("div",{class:"action",onClick:F[0]||(F[0]=O=>$({name:"OrgUpdateProfile"}))},F[6]||(F[6]=[p("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M11.7278 8.27191C12.7534 9.87525 14.1247 11.2375 15.7464 12.2534L8.85673 19.144C8.43166 19.569 8.21841 19.7816 7.95731 19.9213C7.69637 20.0609 7.40171 20.1199 6.81278 20.2377L3.73563 20.853C3.40302 20.9195 3.23649 20.9525 3.14188 20.8578C3.04759 20.7632 3.08035 20.5971 3.14677 20.2651L3.76298 17.1879C3.88087 16.5985 3.93965 16.3035 4.07938 16.0424C4.21912 15.7814 4.43173 15.569 4.85673 15.144L11.7278 8.27191ZM16.1116 4.03656C16.6711 3.75929 17.3284 3.75931 17.888 4.03656C18.1821 4.18229 18.455 4.45518 19.0003 5.00043C19.5453 5.54545 19.8184 5.81774 19.9641 6.11175C20.2414 6.67123 20.2413 7.32861 19.9641 7.88812C19.8184 8.18221 19.5455 8.45517 19.0003 9.00043L17.2034 10.7963C15.5308 9.84498 14.1456 8.46859 13.1819 6.81781L15.0003 5.00043C15.5453 4.45539 15.8176 4.18234 16.1116 4.03656Z",fill:"#FFFDFD"})],-1),p("span",null,"Update Profile",-1)]))])])):Ct("",!0)]),_:1}),p("div",{class:"icon",onClick:F[1]||(F[1]=O=>$("/organization"))},F[7]||(F[7]=[p("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M6.25 17.0585C6.25 16.0494 6.25 15.5448 6.47166 15.1141C6.69333 14.6833 7.1039 14.3901 7.92505 13.8035L13.8375 9.58034C14.3989 9.17938 14.6795 8.9789 15 8.9789C15.3205 8.9789 15.6011 9.17938 16.1625 9.58034L22.075 13.8035C22.8961 14.3901 23.3067 14.6833 23.5283 15.1141C23.75 15.5448 23.75 16.0494 23.75 17.0585V24.25C23.75 25.1928 23.75 25.6642 23.4571 25.9571C23.1642 26.25 22.6928 26.25 21.75 26.25H8.25C7.30719 26.25 6.83579 26.25 6.54289 25.9571C6.25 25.6642 6.25 25.1928 6.25 24.25V17.0585Z",fill:"white"}),p("path",{d:"M3.75 15.6366C3.75 15.9035 3.75 16.0369 3.8341 16.0781C3.91819 16.1192 4.02352 16.0373 4.23418 15.8734L13.7721 8.45502C14.362 7.99625 14.6569 7.76686 15 7.76686C15.3431 7.76686 15.638 7.99625 16.2279 8.45502L25.7658 15.8734C25.9765 16.0373 26.0818 16.1192 26.1659 16.0781C26.25 16.0369 26.25 15.9035 26.25 15.6366V14.7282C26.25 14.2478 26.25 14.0076 26.1483 13.7997C26.0466 13.5918 25.857 13.4444 25.4779 13.1495L16.2279 5.95502C15.638 5.49625 15.3431 5.26686 15 5.26686C14.6569 5.26686 14.362 5.49625 13.7721 5.95502L4.52212 13.1495C4.14295 13.4444 3.95337 13.5918 3.85168 13.7997C3.75 14.0076 3.75 14.2478 3.75 14.7282V15.6366Z",fill:"white"}),p("path",{d:"M16.125 18.75H13.875C12.7704 18.75 11.875 19.6454 11.875 20.75V26.1C11.875 26.1828 11.9422 26.25 12.025 26.25H17.975C18.0578 26.25 18.125 26.1828 18.125 26.1V20.75C18.125 19.6454 17.2296 18.75 16.125 18.75Z",fill:"white"}),p("rect",{x:"20",y:"6.25",width:"2.5",height:"5",rx:"0.5",fill:"white"})],-1),p("span",null,"Home",-1)])),p("div",{class:"icon",onClick:F[2]||(F[2]=O=>$({name:"OrgTrainings"}))},F[8]||(F[8]=[p("svg",{width:"29",height:"29",viewBox:"0 0 29 29",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M20.5837 3.625C23.4119 3.625 24.8261 3.62526 25.7048 4.50391C26.5833 5.3826 26.5837 6.79675 26.5837 9.625V19.375C26.5837 22.2033 26.5833 23.6174 25.7048 24.4961C24.8261 25.3747 23.4119 25.375 20.5837 25.375H8.41666C5.58824 25.375 4.17425 25.3748 3.29557 24.4961C2.41689 23.6174 2.41666 22.2034 2.41666 19.375V9.625C2.41666 6.79657 2.41689 5.38259 3.29557 4.50391C4.17425 3.62523 5.58824 3.625 8.41666 3.625H20.5837ZM9.66666 12.292C9.11438 12.292 8.66666 12.7397 8.66666 13.292V20.542L8.67155 20.6445C8.72303 21.1485 9.1491 21.542 9.66666 21.542C10.1842 21.542 10.6103 21.1485 10.6618 20.6445L10.6667 20.542V13.292C10.6667 12.7397 10.2189 12.292 9.66666 12.292ZM19.3337 9.875C18.7814 9.875 18.3337 10.3227 18.3337 10.875V20.542L18.3385 20.6436C18.3896 21.148 18.8158 21.542 19.3337 21.542C19.8514 21.5418 20.2778 21.1479 20.3288 20.6436L20.3337 20.542V10.875C20.3337 10.3228 19.8858 9.87518 19.3337 9.875ZM14.4997 14.708C13.9476 14.7082 13.4998 15.156 13.4997 15.708V20.541L13.5046 20.6436C13.5557 21.1477 13.982 21.5408 14.4997 21.541C15.0175 21.541 15.4436 21.1478 15.4948 20.6436L15.4997 20.541V15.708C15.4995 15.1559 15.0518 14.708 14.4997 14.708Z",fill:"white"})],-1),p("span",null,"Trainings",-1)])),p("div",{class:"icon",onClick:F[3]||(F[3]=O=>$({name:"OrgCareers"}))},F[9]||(F[9]=[p("svg",{width:"25",height:"25",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M22.8798 11.0484C23.4046 10.8642 23.9845 11.1431 24.1081 11.6855C24.4792 13.3134 24.4217 15.0018 23.9268 16.6191C23.4739 18.0989 22.6698 19.4685 21.5787 20.6449C21.2148 21.0372 20.6017 21.0197 20.2239 20.6408L14.9487 15.3495C14.4292 14.8284 14.6314 13.9436 15.3257 13.6999L22.8798 11.0484ZM13 4.0826C13 3.50231 13.4932 3.04057 14.0672 3.12592C15.8633 3.39302 17.5788 4.00579 19.085 4.93161C20.3794 5.72731 21.4793 6.72976 22.3343 7.87824C22.709 8.38157 22.4513 9.07932 21.8592 9.28718L14.3313 11.9301C13.6809 12.1584 13 11.6758 13 10.9865V4.0826Z",fill:"white"}),p("path",{d:"M11.9511 13.2908C11.9512 13.5763 12.0581 13.8518 12.25 14.0632L19.2677 21.7886C19.6714 22.233 19.5963 22.9337 19.0759 23.2331C18.245 23.7112 17.354 24.0924 16.4209 24.365C14.5402 24.9144 12.5476 25.0087 10.6201 24.6394C8.69236 24.2701 6.88846 23.4478 5.36911 22.2468C3.84993 21.0459 2.66126 19.5025 1.90915 17.7537C1.15711 16.0048 0.864996 14.1043 1.05759 12.2205C1.25024 10.3365 1.92171 8.52693 3.01364 6.95288C4.1056 5.37884 5.58398 4.08845 7.31735 3.19605C8.43484 2.62073 9.63633 2.22318 10.8757 2.01305C11.4515 1.91541 11.9511 2.37876 11.9511 2.96284V13.2908Z",fill:"white"})],-1),p("span",null,"Career",-1)])),p("div",{class:"icon",onClick:F[4]||(F[4]=O=>$({name:"OrgCalendar"}))},F[10]||(F[10]=[p("svg",{width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M2.16675 9.4165C2.16675 7.53089 2.16675 6.58808 2.75253 6.00229C3.33832 5.4165 4.28113 5.4165 6.16675 5.4165H19.8334C21.719 5.4165 22.6618 5.4165 23.2476 6.00229C23.8334 6.58808 23.8334 7.53089 23.8334 9.4165V9.83317C23.8334 10.3046 23.8334 10.5403 23.687 10.6867C23.5405 10.8332 23.3048 10.8332 22.8334 10.8332H3.16675C2.69534 10.8332 2.45964 10.8332 2.31319 10.6867C2.16675 10.5403 2.16675 10.3046 2.16675 9.83317V9.4165Z",fill:"white"}),p("path",{d:"M22.833 13C23.3042 13 23.5401 13.0002 23.6865 13.1465C23.833 13.2929 23.833 13.5286 23.833 14V19.833C23.833 21.7186 23.8329 22.6613 23.2471 23.2471C22.6613 23.8329 21.7186 23.833 19.833 23.833H6.16699C4.28137 23.833 3.33872 23.8329 2.75293 23.2471C2.16714 22.6613 2.16699 21.7186 2.16699 19.833V14C2.16699 13.5286 2.16703 13.2929 2.31348 13.1465C2.45994 13.0002 2.69576 13 3.16699 13H22.833ZM8.58301 19.5C8.11182 19.5 7.87591 19.5001 7.72949 19.6465C7.58321 19.7929 7.58301 20.0288 7.58301 20.5V20.667C7.58301 21.1382 7.58308 21.3741 7.72949 21.5205C7.87591 21.6669 8.11182 21.667 8.58301 21.667H10.917C11.3882 21.667 11.6241 21.6669 11.7705 21.5205C11.9169 21.3741 11.917 21.1382 11.917 20.667V20.5C11.917 20.0288 11.9168 19.7929 11.7705 19.6465C11.6241 19.5001 11.3882 19.5 10.917 19.5H8.58301ZM15.083 19.5C14.6118 19.5 14.3759 19.5001 14.2295 19.6465C14.0832 19.7929 14.083 20.0288 14.083 20.5V20.667C14.083 21.1382 14.0831 21.3741 14.2295 21.5205C14.3759 21.6669 14.6118 21.667 15.083 21.667H17.417C17.8882 21.667 18.1241 21.6669 18.2705 21.5205C18.4169 21.3741 18.417 21.1382 18.417 20.667V20.5C18.417 20.0288 18.4168 19.7929 18.2705 19.6465C18.1241 19.5001 17.8882 19.5 17.417 19.5H15.083ZM8.58301 15.167C8.11182 15.167 7.87591 15.1671 7.72949 15.3135C7.58337 15.4599 7.58301 15.6959 7.58301 16.167V16.333C7.58301 16.8041 7.58337 17.0401 7.72949 17.1865C7.87591 17.3329 8.11182 17.333 8.58301 17.333H10.917C11.3882 17.333 11.6241 17.3329 11.7705 17.1865C11.9166 17.0401 11.917 16.8041 11.917 16.333V16.167C11.917 15.6959 11.9166 15.4599 11.7705 15.3135C11.6241 15.1671 11.3882 15.167 10.917 15.167H8.58301ZM15.083 15.167C14.6118 15.167 14.3759 15.1671 14.2295 15.3135C14.0834 15.4599 14.083 15.6959 14.083 16.167V16.333C14.083 16.8041 14.0834 17.0401 14.2295 17.1865C14.3759 17.3329 14.6118 17.333 15.083 17.333H17.417C17.8882 17.333 18.1241 17.3329 18.2705 17.1865C18.4166 17.0401 18.417 16.8041 18.417 16.333V16.167C18.417 15.6959 18.4166 15.4599 18.2705 15.3135C18.1241 15.1671 17.8882 15.167 17.417 15.167H15.083Z",fill:"white"}),p("path",{d:"M7.58325 3.25L7.58325 6.5",stroke:"white","stroke-width":"2","stroke-linecap":"round"}),p("path",{d:"M18.4167 3.25L18.4167 6.5",stroke:"white","stroke-width":"2","stroke-linecap":"round"})],-1),p("span",null,"Calendar",-1)])),F[13]||(F[13]=p("div",{class:"spacer"},null,-1)),p("div",{class:"icon signout",onClick:q},F[11]||(F[11]=[p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[p("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),p("polyline",{points:"16 17 21 12 16 7"}),p("line",{x1:"21",y1:"12",x2:"9",y2:"12"})],-1),p("span",null,"Sign Out",-1)]))],2)]),_:1}),p("main",_X,[F[20]||(F[20]=p("header",{class:"topbar"},[p("div",{class:"Pathfinder-wrapper"},[p("span",{class:"logo-text"},"Pathfinder")])],-1)),p("section",xX,[p("div",CX,[F[14]||(F[14]=p("h4",{class:"cards-title"},"Total Trainings",-1)),p("span",kX,J(r.value),1)]),p("div",AX,[F[15]||(F[15]=p("h4",{class:"cards-title"},"Upcoming Trainings",-1)),p("span",SX,J(o.value),1)]),p("div",EX,[F[16]||(F[16]=p("h4",{class:"cards-title"},"Completed Trainings",-1)),p("span",TX,J(a.value),1)]),p("div",LX,[F[17]||(F[17]=p("h4",{class:"cards-title"},"Total Careers",-1)),p("span",PX,J(l.value),1)]),p("div",IX,[F[18]||(F[18]=p("h4",{class:"cards-title"},"Open Careers",-1)),p("span",DX,J(c.value),1)]),p("div",MX,[F[19]||(F[19]=p("h4",{class:"cards-title"},"Closed Careers",-1)),p("span",RX,J(u.value),1)])]),p("section",NX,[p("div",OX,[p("canvas",{id:C.value.id},null,8,FX),p("h3",null,J(C.value.title),1)]),p("div",$X,[(j(!0),z(Kt,null,pe(A.value,O=>(j(),z("div",{key:O.id,class:"side-chart",onClick:et=>K(O)},[p("canvas",{id:O.id},null,8,jX),p("h4",null,J(O.title),1)],8,BX))),128))])])])]))}}),HX=gr(zX,[["__scopeId","data-v-a9952f18"]]),Ru=ut(null),Gl=ut(null),Bh=ut(null);let S0=null;async function u9(n){try{const t=localStorage.getItem("token");if(!t)throw new Error("No token found");const e=await At.post("https://pathfinder-development-production.up.railway.app/api/trainings/generate-qr",{trainingID:n.trainingID},{headers:{Authorization:`Bearer ${t}`}});Ru.value=`https://pathfinder-development-production.up.railway.app/api/attendance/checkin?trainingID=${n.trainingID}&key=${e.data.key}`,Gl.value=new Date(e.data.expires_at),Bh.value=n.trainingID,S0&&clearTimeout(S0);const s=new Date,i=Gl.value-s;i>0&&(S0=setTimeout(()=>{Ru.value=null,Gl.value=null,Bh.value=null,console.log(`QR for "${n.title}" expired.`)},i)),console.log(` QR Generated for "${n.title}", expires at ${Gl.value}`)}catch(t){console.error("QR GENERATION FAILED:",t)}}function VX(n){const t=new Date,e=new Date(n.schedule),s=new Date(n.end_time);if(t>=e&&t<s)u9(n);else if(t<e){const i=e-t;setTimeout(()=>u9(n),i),console.log(`QR for "${n.title}" will generate in ${i/1e3}s`)}Gl.value&&t>=Gl.value&&(Ru.value=null,Gl.value=null,Bh.value=null)}const ui=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Wm=[.001,0,0,.001,0,0],E0=1.35,Bi={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Da={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},jh="pdfjs_internal_editor_",Ne={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Ye={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},qX={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Gm={TRIANGLES:1,LATTICE:2},Ns={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},ip={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},us={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Qc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},kg={ERRORS:0,WARNINGS:1,INFOS:5},Uh={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Pd={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},WX={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Ag=kg.WARNINGS;function GX(n){Number.isInteger(n)&&(Ag=n)}function YX(){return Ag}function Sg(n){Ag>=kg.INFOS&&console.info(`Info: ${n}`)}function Pe(n){Ag>=kg.WARNINGS&&console.warn(`Warning: ${n}`)}function wn(n){throw new Error(n)}function Ke(n,t){n||wn(t)}function KX(n){switch(n?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Qx(n,t=null,e=null){if(!n)return null;if(e&&typeof n=="string"&&(e.addDefaultProtocol&&n.startsWith("www.")&&n.match(/\./g)?.length>=2&&(n=`http://${n}`),e.tryConvertEncoding))try{n=tZ(n)}catch{}const s=t?URL.parse(n,t):URL.parse(n);return KX(s)?s:null}function tC(n,t,e=!1){const s=URL.parse(n);return s?(s.hash=t,s.href):e&&Qx(n,"http://example.com")?n.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Fe(n,t,e,s=!1){return Object.defineProperty(n,t,{value:e,enumerable:!s,configurable:!0,writable:!1}),e}const yc=function(){function t(e,s){this.message=e,this.name=s}return t.prototype=new Error,t.constructor=t,t}();class d9 extends yc{constructor(t,e){super(t,"PasswordException"),this.code=e}}class T0 extends yc{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Ym extends yc{constructor(t){super(t,"InvalidPDFException")}}class Fp extends yc{constructor(t,e,s){super(t,"ResponseException"),this.status=e,this.missing=s}}class XX extends yc{constructor(t){super(t,"FormatError")}}class Ka extends yc{constructor(t){super(t,"AbortException")}}function eC(n){(typeof n!="object"||n?.length===void 0)&&wn("Invalid argument for bytesToString");const t=n.length,e=8192;if(t<e)return String.fromCharCode.apply(null,n);const s=[];for(let i=0;i<t;i+=e){const r=Math.min(i+e,t),o=n.subarray(i,r);s.push(String.fromCharCode.apply(null,o))}return s.join("")}function of(n){typeof n!="string"&&wn("Invalid argument for stringToBytes");const t=n.length,e=new Uint8Array(t);for(let s=0;s<t;++s)e[s]=n.charCodeAt(s)&255;return e}function ZX(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function JX(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function QX(){try{return new Function(""),!0}catch{return!1}}class zs{static get isLittleEndian(){return Fe(this,"isLittleEndian",JX())}static get isEvalSupported(){return Fe(this,"isEvalSupported",QX())}static get isOffscreenCanvasSupported(){return Fe(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Fe(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return Fe(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return Fe(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return Fe(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return Fe(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const L0=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));class ee{static makeHexColor(t,e,s){return`#${L0[t]}${L0[e]}${L0[s]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let s;t[0]?(t[0]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[3],e[3]*=t[3]):(s=e[0],e[0]=e[1],e[1]=s,s=e[2],e[2]=e[3],e[3]=s,t[1]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,s=0){const i=t[s],r=t[s+1];t[s]=i*e[0]+r*e[2]+e[4],t[s+1]=i*e[1]+r*e[3]+e[5]}static applyTransformToBezier(t,e,s=0){const i=e[0],r=e[1],o=e[2],a=e[3],l=e[4],c=e[5];for(let u=0;u<6;u+=2){const d=t[s+u],f=t[s+u+1];t[s+u]=d*i+f*o+l,t[s+u+1]=d*r+f*a+c}}static applyInverseTransform(t,e){const s=t[0],i=t[1],r=e[0]*e[3]-e[1]*e[2];t[0]=(s*e[3]-i*e[2]+e[2]*e[5]-e[4]*e[3])/r,t[1]=(-s*e[1]+i*e[0]+e[4]*e[1]-e[5]*e[0])/r}static axialAlignedBoundingBox(t,e,s){const i=e[0],r=e[1],o=e[2],a=e[3],l=e[4],c=e[5],u=t[0],d=t[1],f=t[2],h=t[3];let g=i*u+l,m=g,b=i*f+l,y=b,x=a*d+c,_=x,C=a*h+c,A=C;if(r!==0||o!==0){const I=r*u,R=r*f,L=o*d,P=o*h;g+=L,y+=L,b+=P,m+=P,x+=I,A+=I,C+=R,_+=R}s[0]=Math.min(s[0],g,b,m,y),s[1]=Math.min(s[1],x,C,_,A),s[2]=Math.max(s[2],g,b,m,y),s[3]=Math.max(s[3],x,C,_,A)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const s=t[0],i=t[1],r=t[2],o=t[3],a=s**2+i**2,l=s*r+i*o,c=r**2+o**2,u=(a+c)/2,d=Math.sqrt(u**2-(a*c-l**2));e[0]=Math.sqrt(u+d||1),e[1]=Math.sqrt(u-d||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const s=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(s>i)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>o?null:[s,r,i,o]}static pointBoundingBox(t,e,s){s[0]=Math.min(s[0],t),s[1]=Math.min(s[1],e),s[2]=Math.max(s[2],t),s[3]=Math.max(s[3],e)}static rectBoundingBox(t,e,s,i,r){r[0]=Math.min(r[0],t,s),r[1]=Math.min(r[1],e,i),r[2]=Math.max(r[2],t,s),r[3]=Math.max(r[3],e,i)}static#t(t,e,s,i,r,o,a,l,c,u){if(c<=0||c>=1)return;const d=1-c,f=c*c,h=f*c,g=d*(d*(d*t+3*c*e)+3*f*s)+h*i,m=d*(d*(d*r+3*c*o)+3*f*a)+h*l;u[0]=Math.min(u[0],g),u[1]=Math.min(u[1],m),u[2]=Math.max(u[2],g),u[3]=Math.max(u[3],m)}static#e(t,e,s,i,r,o,a,l,c,u,d,f){if(Math.abs(c)<1e-12){Math.abs(u)>=1e-12&&this.#t(t,e,s,i,r,o,a,l,-d/u,f);return}const h=u**2-4*d*c;if(h<0)return;const g=Math.sqrt(h),m=2*c;this.#t(t,e,s,i,r,o,a,l,(-u+g)/m,f),this.#t(t,e,s,i,r,o,a,l,(-u-g)/m,f)}static bezierBoundingBox(t,e,s,i,r,o,a,l,c){c[0]=Math.min(c[0],t,a),c[1]=Math.min(c[1],e,l),c[2]=Math.max(c[2],t,a),c[3]=Math.max(c[3],e,l),this.#e(t,s,r,a,e,i,o,l,3*(-t+3*(s-r)+a),6*(t-2*s+r),3*(s-t),c),this.#e(t,s,r,a,e,i,o,l,3*(-e+3*(i-o)+l),6*(e-2*i+o),3*(i-e),c)}}function tZ(n){return decodeURIComponent(escape(n))}let P0=null,h9=null;function eZ(n){return P0||(P0=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,h9=new Map([["","t"]])),n.replaceAll(P0,(t,e,s)=>e?e.normalize("NFKC"):h9.get(s))}function nC(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),eC(n)}const iu="pdfjs_internal_id_";function nZ(n,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[s,i,...r]=e;if(!n(s)&&!Number.isInteger(s)||!t(i))return!1;const o=r.length;let a=!0;switch(i.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;a=!1;break;default:return!1}for(const l of r)if(!(typeof l=="number"||a&&l===null))return!1;return!0}function di(n,t,e){return Math.min(Math.max(n,t),e)}function sC(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(eC(n))}function sZ(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):of(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...t){return new Promise(e=>{e(n(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((t,e)=>t+e,0)});class zh{static textContent(t){const e=[],s={items:e,styles:Object.create(null)};function i(r){if(!r)return;let o=null;const a=r.name;if(a==="#text")o=r.value;else if(zh.shouldBuildText(a))r?.attributes?.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&e.push({str:o}),!!r.children)for(const l of r.children)i(l)}return i(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class iC{static setupStorage(t,e,s,i,r){const o=i.getValue(e,{value:null});switch(s.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),r==="print")break;t.addEventListener("input",a=>{i.setValue(e,{value:a.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(o.value===s.attributes.xfaOn?t.setAttribute("checked",!0):o.value===s.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",a=>{i.setValue(e,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),r==="print")break;t.addEventListener("input",a=>{i.setValue(e,{value:a.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const a of s.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}t.addEventListener("input",a=>{const l=a.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;i.setValue(e,{value:c})});break}}static setAttributes({html:t,element:e,storage:s=null,intent:i,linkService:r}){const{attributes:o}=e,a=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${i}`);for(const[l,c]of Object.entries(o))if(c!=null)switch(l){case"class":c.length&&t.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",c);break;case"style":Object.assign(t.style,c);break;case"textContent":t.textContent=c;break;default:(!a||l!=="href"&&l!=="newWindow")&&t.setAttribute(l,c)}a&&r.addLinkAttributes(t,o.href,o.newWindow),s&&o.dataId&&this.setupStorage(t,o.dataId,e,s)}static render(t){const e=t.annotationStorage,s=t.linkService,i=t.xfaHtml,r=t.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:r,linkService:s});const a=r!=="richText",l=t.div;if(l.append(o),t.viewport){const d=`matrix(${t.viewport.transform.join(",")})`;l.style.transform=d}a&&l.setAttribute("class","xfaLayer xfaFont");const c=[];if(i.children.length===0){if(i.value){const d=document.createTextNode(i.value);o.append(d),a&&zh.shouldBuildText(i.name)&&c.push(d)}return{textDivs:c}}const u=[[i,-1,o]];for(;u.length>0;){const[d,f,h]=u.at(-1);if(f+1===d.children.length){u.pop();continue}const g=d.children[++u.at(-1)[1]];if(g===null)continue;const{name:m}=g;if(m==="#text"){const y=document.createTextNode(g.value);c.push(y),h.append(y);continue}const b=g?.attributes?.xmlns?document.createElementNS(g.attributes.xmlns,m):document.createElement(m);if(h.append(b),g.attributes&&this.setAttributes({html:b,element:g,storage:e,intent:r,linkService:s}),g.children?.length>0)u.push([g,-1,b]);else if(g.value){const y=document.createTextNode(g.value);a&&zh.shouldBuildText(m)&&c.push(y),b.append(y)}}for(const d of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))d.setAttribute("readOnly",!0);return{textDivs:c}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Oo="http://www.w3.org/2000/svg";class Nu{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function af(n,t="text"){if(Vd(n,document.baseURI)){const e=await fetch(n);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,s)=>{const i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=t,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(i.response);return}e(i.responseText);return}s(new Error(i.statusText))}},i.send(null)})}class lf{constructor({viewBox:t,userUnit:e,scale:s,rotation:i,offsetX:r=0,offsetY:o=0,dontFlip:a=!1}){this.viewBox=t,this.userUnit=e,this.scale=s,this.rotation=i,this.offsetX=r,this.offsetY=o,s*=e;const l=(t[2]+t[0])/2,c=(t[3]+t[1])/2;let u,d,f,h;switch(i%=360,i<0&&(i+=360),i){case 180:u=-1,d=0,f=0,h=1;break;case 90:u=0,d=1,f=1,h=0;break;case 270:u=0,d=-1,f=-1,h=0;break;case 0:u=1,d=0,f=0,h=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(f=-f,h=-h);let g,m,b,y;u===0?(g=Math.abs(c-t[1])*s+r,m=Math.abs(l-t[0])*s+o,b=(t[3]-t[1])*s,y=(t[2]-t[0])*s):(g=Math.abs(l-t[0])*s+r,m=Math.abs(c-t[1])*s+o,b=(t[2]-t[0])*s,y=(t[3]-t[1])*s),this.transform=[u*s,d*s,f*s,h*s,g-u*s*l-f*s*c,m-d*s*l-h*s*c],this.width=b,this.height=y}get rawDims(){const t=this.viewBox;return Fe(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:s=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}={}){return new lf({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:i,dontFlip:r})}convertToViewportPoint(t,e){const s=[t,e];return ee.applyTransform(s,this.transform),s}convertToViewportRectangle(t){const e=[t[0],t[1]];ee.applyTransform(e,this.transform);const s=[t[2],t[3]];return ee.applyTransform(s,this.transform),[e[0],e[1],s[0],s[1]]}convertToPdfPoint(t,e){const s=[t,e];return ee.applyInverseTransform(s,this.transform),s}}class kb extends yc{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Eg(n){const t=n.length;let e=0;for(;e<t&&n[e].trim()==="";)e++;return n.substring(e,e+5).toLowerCase()==="data:"}function Ab(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function iZ(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function rZ(n,t="document.pdf"){if(typeof n!="string")return t;if(Eg(n))return Pe('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const s=(a=>{try{return new URL(a)}catch{try{return new URL(decodeURIComponent(a))}catch{try{return new URL(a,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(a),"https://foo.bar")}catch{return null}}}}})(n);if(!s)return t;const i=a=>{try{let l=decodeURIComponent(a);return l.includes("/")?(l=l.split("/").at(-1),l.test(/^\.pdf$/i)?l:a):l}catch{return a}},r=/\.pdf$/i,o=s.pathname.split("/").at(-1);if(r.test(o))return i(o);if(s.searchParams.size>0){const a=Array.from(s.searchParams.values()).reverse();for(const c of a)if(r.test(c))return i(c);const l=Array.from(s.searchParams.keys()).reverse();for(const c of l)if(r.test(c))return i(c)}if(s.hash){const l=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(l)return i(l[0])}return t}class f9{started=Object.create(null);times=[];time(t){t in this.started&&Pe(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Pe(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:s}of this.times)e=Math.max(s.length,e);for(const{name:s,start:i,end:r}of this.times)t.push(`${s.padEnd(e)} ${r-i}ms
`);return t.join("")}}function Vd(n,t){const e=t?URL.parse(n,t):URL.parse(n);return e?.protocol==="http:"||e?.protocol==="https:"}function pr(n){n.preventDefault()}function Wn(n){n.preventDefault(),n.stopPropagation()}function oZ(n){console.log("Deprecated API usage: "+n)}class Km{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const s=parseInt(e[1],10);let i=parseInt(e[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(e[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(e[6],10);l=l>=0&&l<=59?l:0;const c=e[7]||"Z";let u=parseInt(e[8],10);u=u>=0&&u<=23?u:0;let d=parseInt(e[9],10)||0;return d=d>=0&&d<=59?d:0,c==="-"?(o+=u,a+=d):c==="+"&&(o-=u,a-=d),new Date(Date.UTC(s,i,r,o,a,l))}}function aZ(n,{scale:t=1,rotation:e=0}){const{width:s,height:i}=n.attributes.style,r=[0,0,parseInt(s),parseInt(i)];return new lf({viewBox:r,userUnit:1,scale:t,rotation:e})}function cf(n){if(n.startsWith("#")){const t=parseInt(n.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(t=>parseInt(t)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Pe(`Not a valid color format: "${n}"`),[0,0,0])}function lZ(n){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of n.keys()){t.style.color=e;const s=window.getComputedStyle(t).color;n.set(e,cf(s))}t.remove()}function Fn(n){const{a:t,b:e,c:s,d:i,e:r,f:o}=n.getTransform();return[t,e,s,i,r,o]}function Kr(n){const{a:t,b:e,c:s,d:i,e:r,f:o}=n.getTransform().invertSelf();return[t,e,s,i,r,o]}function fc(n,t,e=!1,s=!0){if(t instanceof lf){const{pageWidth:i,pageHeight:r}=t.rawDims,{style:o}=n,a=zs.isCSSRoundSupported,l=`var(--total-scale-factor) * ${i}px`,c=`var(--total-scale-factor) * ${r}px`,u=a?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,d=a?`round(down, ${c}, var(--scale-round-y))`:`calc(${c})`;!e||t.rotation%180===0?(o.width=u,o.height=d):(o.width=d,o.height=u)}s&&n.setAttribute("data-main-rotation",t.rotation)}class uo{constructor(){const{pixelRatio:t}=uo;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,s,i,r=-1){let o=1/0,a=1/0,l=1/0;s=uo.capPixels(s,r),s>0&&(o=Math.sqrt(s/(t*e))),i!==-1&&(a=i/t,l=i/e);const c=Math.min(o,a,l);return this.sx>c||this.sy>c?(this.sx=c,this.sy=c,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,s):s}return t}}const Xm=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class cZ{static get isDarkMode(){return Fe(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class uZ{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:s}=window.getComputedStyle(t);return t.remove(),Fe(this,"commentForegroundColor",cf(s))}}function dZ(n,t,e,s){s=Math.min(Math.max(s??1,0),1);const i=255*(1-s);return n=Math.round(n*s+i),t=Math.round(t*s+i),e=Math.round(e*s+i),[n,t,e]}function p9(n,t){const e=n[0]/255,s=n[1]/255,i=n[2]/255,r=Math.max(e,s,i),o=Math.min(e,s,i),a=(r+o)/2;if(r===o)t[0]=t[1]=0;else{const l=r-o;switch(t[1]=a<.5?l/(r+o):l/(2-r-o),r){case e:t[0]=((s-i)/l+(s<i?6:0))*60;break;case s:t[0]=((i-e)/l+2)*60;break;case i:t[0]=((e-s)/l+4)*60;break}}t[2]=a}function Zm(n,t){const e=n[0],s=n[1],i=n[2],r=(1-Math.abs(2*i-1))*s,o=r*(1-Math.abs(e/60%2-1)),a=i-r/2;switch(Math.floor(e/60)){case 0:t[0]=r+a,t[1]=o+a,t[2]=a;break;case 1:t[0]=o+a,t[1]=r+a,t[2]=a;break;case 2:t[0]=a,t[1]=r+a,t[2]=o+a;break;case 3:t[0]=a,t[1]=o+a,t[2]=r+a;break;case 4:t[0]=o+a,t[1]=a,t[2]=r+a;break;case 5:case 6:t[0]=r+a,t[1]=a,t[2]=o+a;break}}function g9(n){return n<=.03928?n/12.92:((n+.055)/1.055)**2.4}function m9(n,t,e){Zm(n,e),e.map(g9);const s=.2126*e[0]+.7152*e[1]+.0722*e[2];Zm(t,e),e.map(g9);const i=.2126*e[0]+.7152*e[1]+.0722*e[2];return s>i?(s+.05)/(i+.05):(i+.05)/(s+.05)}const b9=new Map;function hZ(n,t){const e=n[0]+n[1]*256+n[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let s=b9.get(e);if(s)return s;const i=new Float32Array(9),r=i.subarray(0,3),o=i.subarray(3,6);p9(n,o);const a=i.subarray(6,9);p9(t,a);const l=a[2]<.5,c=l?12:4.5;if(o[2]=l?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),m9(o,a,r)<c){let u,d;l?(u=o[2],d=1):(u=0,d=o[2]);const f=.005;for(;d-u>f;){const h=o[2]=(u+d)/2;l===m9(o,a,r)<c?u=h:d=h}o[2]=l?d:u}return Zm(o,r),s=ee.makeHexColor(Math.round(r[0]*255),Math.round(r[1]*255),Math.round(r[2]*255)),b9.set(e,s),s}function rC({html:n,dir:t,className:e},s){const i=document.createDocumentFragment();if(typeof n=="string"){const r=document.createElement("p");r.dir=t||"auto";const o=n.split(/(?:\r\n?|\n)/);for(let a=0,l=o.length;a<l;++a){const c=o[a];r.append(document.createTextNode(c)),a<l-1&&r.append(document.createElement("br"))}i.append(r)}else iC.render({xfaHtml:n,div:i,intent:"richText"});i.firstChild.classList.add("richText",e),s.append(i)}function oC(n){const t=new Path2D;if(!n)return t;for(let e=0,s=n.length;e<s;)switch(n[e++]){case Pd.moveTo:t.moveTo(n[e++],n[e++]);break;case Pd.lineTo:t.lineTo(n[e++],n[e++]);break;case Pd.curveTo:t.bezierCurveTo(n[e++],n[e++],n[e++],n[e++],n[e++],n[e++]);break;case Pd.quadraticCurveTo:t.quadraticCurveTo(n[e++],n[e++],n[e++],n[e++]);break;case Pd.closePath:t.closePath();break;default:Pe(`Unrecognized drawing path operator: ${n[e-1]}`);break}return t}class fh{#t=null;#e=null;#s;#n=null;#o=null;#r=null;#i=null;#a=null;static#c=null;constructor(t){this.#s=t,fh.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#s._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",pr,{signal:e}),t.addEventListener("pointerdown",fh.#l,{signal:e}));const s=this.#n=document.createElement("div");s.className="buttons",t.append(s);const i=this.#s.toolbarPosition;if(i){const{style:r}=t,o=this.#s._uiManager.direction==="ltr"?1-i[0]:i[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#h(t){this.#s._focusEventsAllowed=!1,Wn(t)}#d(t){this.#s._focusEventsAllowed=!0,Wn(t)}#f(t){const e=this.#s._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",this.#h.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#d.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",pr,{signal:e}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#o?.shown(),this.#r?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#s,s=document.createElement("button");s.classList.add("basic","deleteButton"),s.tabIndex=0,s.setAttribute("data-l10n-id",fh.#c[t]),this.#f(s)&&s.addEventListener("click",i=>{e.delete()},{signal:e._signal}),this.#n.append(s)}get#m(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#f(e),this.#n.append(e,this.#m),this.#o=t}addComment(t,e=null){if(this.#r)return;const s=t.renderForToolbar();if(!s)return;this.#f(s);const i=this.#i=this.#m;e?(this.#n.insertBefore(s,e),this.#n.insertBefore(i,e)):this.#n.append(s,i),this.#r=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const e=t.renderButton();this.#f(e),this.#n.append(e,this.#m)}async addEditSignatureButton(t){const e=this.#a=await t.renderEditButton(this.#s);this.#f(e),this.#n.append(e,this.#m)}removeButton(t){switch(t){case"comment":this.#r?.removeToolbarCommentButton(),this.#r=null,this.#i?.remove(),this.#i=null;break}}async addButton(t,e){switch(t){case"colorPicker":e&&this.addColorPicker(e);break;case"altText":e&&await this.addAltText(e);break;case"editSignature":e&&await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":e&&this.addComment(e);break}}async addButtonBefore(t,e,s){if(!e&&t==="comment")return;const i=this.#n.querySelector(s);i&&t==="comment"&&this.addComment(e,i)}updateEditSignatureButton(t){this.#a&&(this.#a.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class fZ{#t=null;#e=null;#s;constructor(t){this.#s=t}#n(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const e=this.#s._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",pr,{signal:e});const s=this.#t=document.createElement("div");return s.className="buttons",t.append(s),this.#s.hasCommentManager()&&this.#r("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#s.commentSelection("floating_button")}),this.#r("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#s.highlightSelection("floating_button")}),t}#o(t,e){let s=0,i=0;for(const r of t){const o=r.y+r.height;if(o<s)continue;const a=r.x+(e?r.width:0);if(o>s){i=a,s=o;continue}e?a>i&&(i=a):a<i&&(i=a)}return[e?1-i:i,s]}show(t,e,s){const[i,r]=this.#o(e,s),{style:o}=this.#e||=this.#n();t.append(this.#e),o.insetInlineEnd=`${100*i}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#r(t,e,s,i){const r=document.createElement("button");r.classList.add("basic",t),r.tabIndex=0,r.setAttribute("data-l10n-id",e);const o=document.createElement("span");r.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",s);const a=this.#s._signal;a instanceof AbortSignal&&!a.aborted&&(r.addEventListener("contextmenu",pr,{signal:a}),r.addEventListener("click",i,{signal:a})),this.#t.append(r)}}function aC(n,t,e){for(const s of e)t.addEventListener(s,n[s].bind(n))}class sn{static#t=NaN;static#e=null;static#s=NaN;static#n=null;static initializeAndAddPointerId(t){(sn.#e||=new Set).add(t)}static setPointer(t,e){sn.#t||=e,sn.#n??=t}static setTimeStamp(t){sn.#s=t}static isSamePointerId(t){return sn.#t===t}static isSamePointerIdOrRemove(t){return sn.#t===t?!0:(sn.#e?.delete(t),!1)}static isSamePointerType(t){return sn.#n===t}static isInitializedAndDifferentPointerType(t){return sn.#n!==null&&!sn.isSamePointerType(t)}static isSameTimeStamp(t){return sn.#s===t}static isUsingMultiplePointers(){return sn.#e?.size>=1}static clearPointerType(){sn.#n=null}static clearPointerIds(){sn.#t=NaN,sn.#e=null}static clearTimeStamp(){sn.#s=NaN}}class pZ{#t=0;get id(){return`${jh}${this.#t++}`}}class Sb{#t=nC();#e=0;#s=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=t;const r=i.decode().then(()=>(s.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return Fe(this,"_isSVGFittingCanvas",r)}async#n(t,e){this.#s||=new Map;let s=this.#s.get(t);if(s===null)return null;if(s?.bitmap)return s.refCounter+=1,s;try{s||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let i;if(typeof e=="string"?(s.url=e,i=await af(e,"blob")):e instanceof File?i=s.file=e:e instanceof Blob&&(i=e),i.type==="image/svg+xml"){const r=Sb._isSVGFittingCanvas,o=new FileReader,a=new Image,l=new Promise((c,u)=>{a.onload=()=>{s.bitmap=a,s.isSvg=!0,c()},o.onload=async()=>{const d=s.svgUrl=o.result;a.src=await r?`${d}#svgView(preserveAspectRatio(none))`:d},a.onerror=o.onerror=u});o.readAsDataURL(i),await l}else s.bitmap=await createImageBitmap(i);s.refCounter=1}catch(i){Pe(i),s=null}return this.#s.set(t,s),s&&this.#s.set(s.id,s),s}async getFromFile(t){const{lastModified:e,name:s,size:i,type:r}=t;return this.#n(`${e}_${s}_${i}_${r}`,t)}async getFromUrl(t){return this.#n(t,t)}async getFromBlob(t,e){const s=await e;return this.#n(t,s)}async getFromId(t){this.#s||=new Map;const e=this.#s.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:s}=e;return delete e.blobPromise,this.getFromBlob(e.id,s)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#s||=new Map;let s=this.#s.get(t);if(s?.bitmap)return s.refCounter+=1,s;const i=new OffscreenCanvas(e.width,e.height);return i.getContext("2d").drawImage(e,0,0),s={bitmap:i.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#s.set(t,s),this.#s.set(s.id,s),s}getSvgUrl(t){const e=this.#s.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#s||=new Map;const e=this.#s.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:s}=e;if(!e.url&&!e.file){const i=new OffscreenCanvas(s.width,s.height);i.getContext("bitmaprenderer").transferFromImageBitmap(s),e.blobPromise=i.convertToBlob()}s.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class gZ{#t=[];#e=!1;#s;#n=-1;constructor(t=128){this.#s=t}add({cmd:t,undo:e,post:s,mustExec:i,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(i&&t(),this.#e)return;const l={cmd:t,undo:e,post:s,type:r};if(this.#n===-1){this.#t.length>0&&(this.#t.length=0),this.#n=0,this.#t.push(l);return}if(o&&this.#t[this.#n].type===r){a&&(l.undo=this.#t[this.#n].undo),this.#t[this.#n]=l;return}const c=this.#n+1;c===this.#s?this.#t.splice(0,1):(this.#n=c,c<this.#t.length&&this.#t.splice(c)),this.#t.push(l)}undo(){if(this.#n===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1,this.#n-=1}redo(){if(this.#n<this.#t.length-1){this.#n+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#t.length-1}cleanType(t){if(this.#n!==-1){for(let e=this.#n;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#n-e),this.#n=e;return}this.#t.length=0,this.#n=-1}}destroy(){this.#t=null}}class uf{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=zs.platform;for(const[s,i,r={}]of t)for(const o of s){const a=o.startsWith("mac+");e&&a?(this.callbacks.set(o.slice(4),{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1))):!e&&!a&&(this.callbacks.set(o,{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const s=this.callbacks.get(this.#t(e));if(!s)return;const{callback:i,options:{bubbles:r=!1,args:o=[],checker:a=null}}=s;a&&!a(t,e)||(i.bind(t,...o,e)(),r||Wn(e))}}class Eb{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return lZ(t),Fe(this,"_colors",t)}convert(t){const e=cf(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[s,i]of this._colors)if(i.every((r,o)=>r===e[o]))return Eb._colorsMapping.get(s);return e}getHexCode(t){const e=this._colors.get(t);return e?ee.makeHexColor(...e):t}}class Xa{#t=new AbortController;#e=null;#s=null;#n=new Map;#o=new Map;#r=null;#i=null;#a=null;#c=new gZ;#l=null;#h=null;#d=null;#f=0;#m=new Set;#g=null;#u=null;#p=new Set;_editorUndoBar=null;#b=!1;#y=!1;#v=!1;#A=null;#C=null;#_=null;#E=null;#w=!1;#k=null;#P=new pZ;#T=!1;#L=!1;#F=!1;#D=null;#R=null;#$=null;#N=null;#V=null;#S=Ne.NONE;#x=new Set;#M=null;#B=null;#U=null;#G=null;#W=null;#Y={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#z=[0,0];#O=null;#q=null;#J=null;#Q=null;#j=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=Xa.prototype,e=o=>o.#q.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),s=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:l}=a;return l!=="text"&&l!=="number"}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return Fe(this,"_keyboardManager",new uf([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&o.#q.contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&o.#q.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}constructor(t,e,s,i,r,o,a,l,c,u,d,f,h,g,m,b){const y=this._signal=this.#t.signal;this.#q=t,this.#J=e,this.#Q=s,this.#r=i,this.#l=r,this.#B=o,this.#W=l,this._eventBus=a,a._on("editingaction",this.onEditingAction.bind(this),{signal:y}),a._on("pagechanging",this.onPageChanging.bind(this),{signal:y}),a._on("scalechanging",this.onScaleChanging.bind(this),{signal:y}),a._on("rotationchanging",this.onRotationChanging.bind(this),{signal:y}),a._on("setpreference",this.onSetPreference.bind(this),{signal:y}),a._on("switchannotationeditorparams",x=>this.updateParams(x.type,x.value),{signal:y}),window.addEventListener("pointerdown",()=>{this.#L=!0},{capture:!0,signal:y}),window.addEventListener("pointerup",()=>{this.#L=!1},{capture:!0,signal:y}),this.#ot(),this.#ht(),this.#et(),this.#i=l.annotationStorage,this.#A=l.filterFactory,this.#U=c,this.#E=u||null,this.#b=d,this.#y=f,this.#v=h,this.#V=g||null,this.viewParameters={realScale:Nu.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=m||null,this._supportsPinchToZoom=b!==!1,r?.setSidebarUiManager(this)}destroy(){this.#j?.resolve(),this.#j=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#o.values())t.destroy();this.#o.clear(),this.#n.clear(),this.#p.clear(),this.#N?.clear(),this.#e=null,this.#x.clear(),this.#c.destroy(),this.#r?.destroy(),this.#l?.destroy(),this.#B?.destroy(),this.#k?.hide(),this.#k=null,this.#$?.destroy(),this.#$=null,this.#s=null,this.#C&&(clearTimeout(this.#C),this.#C=null),this.#O&&(clearTimeout(this.#O),this.#O=null),this._editorUndoBar?.destroy(),this.#W=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#V}get useNewAltTextFlow(){return this.#y}get useNewAltTextWhenAddingImage(){return this.#v}get hcmFilter(){return Fe(this,"hcmFilter",this.#U?this.#A.addHCMFilter(this.#U.foreground,this.#U.background):"none")}get direction(){return Fe(this,"direction",getComputedStyle(this.#q).direction)}get _highlightColors(){return Fe(this,"_highlightColors",this.#E?new Map(this.#E.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return Fe(this,"highlightColors",null);const e=new Map,s=!!this.#U;for(const[i,r]of t){const o=i.endsWith("_HCM");if(s&&o){e.set(i.replace("_HCM",""),r);continue}!s&&!o&&e.set(i,r)}return Fe(this,"highlightColors",e)}get highlightColorNames(){return Fe(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#d=t}setMainHighlightColorPicker(t){this.#$=t}editAltText(t,e=!1){this.#r?.editAltText(this,t,e)}hasCommentManager(){return!!this.#l}editComment(t,e,s,i){this.#l?.showDialog(this,t,e,s,i)}selectComment(t,e){this.#o.get(t)?.getEditorByUID(e)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}toggleComment(t,e,s=void 0){this.#l?.toggleCommentPopup(t,e,s)}makeCommentColor(t,e){return t&&this.#l?.makeCommentColor(t,e)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#o.has(t-1))return;const{resolve:e,promise:s}=Promise.withResolvers(),i=r=>{r.pageNumber===t&&(this._eventBus._off("editorsrendered",i),e())};this._eventBus.on("editorsrendered",i),await s}getSignature(t){this.#B?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#B}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":this.#v=e;break}}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#q.focus()}findParent(t,e){for(const s of this.#o.values()){const{x:i,y:r,width:o,height:a}=s.div.getBoundingClientRect();if(t>=i&&t<=i+o&&e>=r&&e<=r+a)return s}return null}disableUserSelect(t=!1){this.#J.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#p.add(t)}removeShouldRescale(t){this.#p.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*Nu.PDF_TO_CSS_UNITS;for(const e of this.#p)e.onScaleChanging();this.#d?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Z({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const s of this.#o.values())if(s.hasTextLayer(t))return s;return null}highlightSelection(t="",e=!1){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:i,anchorOffset:r,focusNode:o,focusOffset:a}=s,l=s.toString(),u=this.#Z(s).closest(".textLayer"),d=this.getSelectionBoxes(u);if(!d)return;s.empty();const f=this.#tt(u),h=this.#S===Ne.NONE,g=()=>{const m=f?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:d,anchorNode:i,anchorOffset:r,focusNode:o,focusOffset:a,text:l});h&&this.showAllEditors("highlight",!0,!0),e&&m?.editComment()};if(h){this.switchToMode(Ne.HIGHLIGHT,g);return}g()}commentSelection(t=""){this.highlightSelection(t,!0)}#it(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=this.#Z(t).closest(".textLayer"),i=this.getSelectionBoxes(s);i&&(this.#k||=new fZ(this),this.#k.show(s,i,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#i)return null;const e=`${jh}${t}`,s=this.#i.getRawValue(e);return s&&this.#i.remove(e),s}addToAnnotationStorage(t){!t.isEmpty()&&this.#i&&!this.#i.has(t.id)&&this.#i.setValue(t.id,t)}a11yAlert(t,e=null){const s=this.#Q;s&&(s.setAttribute("data-l10n-id",t),e?s.setAttribute("data-l10n-args",JSON.stringify(e)):s.removeAttribute("data-l10n-args"))}#rt(){const t=document.getSelection();if(!t||t.isCollapsed){this.#M&&(this.#k?.hide(),this.#M=null,this.#I({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#M)return;const i=this.#Z(t).closest(".textLayer");if(!i){this.#M&&(this.#k?.hide(),this.#M=null,this.#I({hasSelectedText:!1}));return}if(this.#k?.hide(),this.#M=e,this.#I({hasSelectedText:!0}),!(this.#S!==Ne.HIGHLIGHT&&this.#S!==Ne.NONE)&&(this.#S===Ne.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#w=this.isShiftKeyDown,!this.isShiftKeyDown)){const r=this.#S===Ne.HIGHLIGHT?this.#tt(i):null;if(r?.toggleDrawing(),this.#L){const o=new AbortController,a=this.combinedSignal(o),l=c=>{c.type==="pointerup"&&c.button!==0||(o.abort(),r?.toggleDrawing(!0),c.type==="pointerup"&&this.#K("main_toolbar"))};window.addEventListener("pointerup",l,{signal:a}),window.addEventListener("blur",l,{signal:a})}else r?.toggleDrawing(!0),this.#K("main_toolbar")}}#K(t=""){this.#S===Ne.HIGHLIGHT?this.highlightSelection(t):this.#b&&this.#it()}#ot(){document.addEventListener("selectionchange",this.#rt.bind(this),{signal:this._signal})}#at(){if(this.#_)return;this.#_=new AbortController;const t=this.combinedSignal(this.#_);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#lt(){this.#_?.abort(),this.#_=null}blur(){if(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#K("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#x)if(e.div.contains(t)){this.#R=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#R)return;const[t,e]=this.#R;this.#R=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#et(){if(this.#D)return;this.#D=new AbortController;const t=this.combinedSignal(this.#D);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ct(){this.#D?.abort(),this.#D=null}#ut(){if(this.#h)return;this.#h=new AbortController;const t=this.combinedSignal(this.#h);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#dt(){this.#h?.abort(),this.#h=null}#ht(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.setEditingState(!0)}removeEditListeners(){this.#ct(),this.setEditingState(!1)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(e.type)){s.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const s of this.#x){const i=s.serialize(!0);i&&e.push(i)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const o of this.#u)if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let s=e.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(r){Pe(`paste: "${r.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const i=this.currentLayer;try{const r=[];for(const l of s){const c=await i.deserialize(l);if(!c)return;r.push(c)}const o=()=>{for(const l of r)this.#nt(l);this.#st(r)},a=()=>{for(const l of r)l.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(r){Pe(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#S!==Ne.NONE&&!this.isEditorHandlingKeyboard&&Xa._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#K("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#I(t){Object.entries(t).some(([s,i])=>this.#Y[s]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#Y,t)}),this.#S===Ne.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#H([[Ye.HIGHLIGHT_FREE,!0]]))}#H(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#at(),this.#ut(),this.#I({isEditing:this.#S!==Ne.NONE,isEmpty:this.#X(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#lt(),this.#dt(),this.#I({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const e of this.#u)this.#H(e.defaultPropertiesToUpdate)}}getId(){return this.#P.id}get currentLayer(){return this.#o.get(this.#f)}getLayer(t){return this.#o.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#o.set(t.pageIndex,t),this.#T?t.enable():t.disable()}removeLayer(t){this.#o.delete(t.pageIndex)}async updateMode(t,e=null,s=!1,i=!1,r=!1){if(this.#S!==t&&!(this.#j&&(await this.#j.promise,!this.#j))){if(this.#j=Promise.withResolvers(),this.#d?.commitOrRemove(),this.#S===Ne.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#S=t,t===Ne.NONE){this.setEditingState(!1),this.#pt();for(const o of this.#n.values())o.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#j.resolve();return}for(const o of this.#n.values())o.addStandaloneCommentButton();t===Ne.SIGNATURE&&await this.#B?.loadSignatures(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const o of this.#o.values())o.updateMode(t);if(t===Ne.POPUP){this.#s||=await this.#W.getAnnotationsByType(new Set(this.#u.map(l=>l._editorType)));const o=new Set,a=[];for(const l of this.#n.values()){const{annotationElementId:c,hasComment:u,deleted:d}=l;c&&o.add(c),u&&!d&&a.push(l.getData())}for(const l of this.#s){const{id:c,popupRef:u,contentsObj:d}=l;u&&d?.str&&!o.has(c)&&!this.#m.has(c)&&a.push(l)}this.#l?.showSidebar(a)}if(!e){s&&this.addNewEditorFromKeyboard(),this.#j.resolve();return}for(const o of this.#n.values())o.uid===e?(this.setSelected(o),r?o.editComment():i?o.enterInEditMode():o.focus()):o.unselect();this.#j.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#S&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#u){switch(t){case Ye.CREATE:this.currentLayer.addNewEditor(e);return;case Ye.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#G||=new Map).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const s of this.#x)s.updateParams(t,e);else for(const s of this.#u)s.updateDefaultParams(t,e)}}showAllEditors(t,e,s=!1){for(const r of this.#n.values())r.editorType===t&&r.show(e);(this.#G?.get(Ye.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#H([[Ye.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#F!==t){this.#F=t;for(const e of this.#o.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#T){this.#T=!0;const t=[];for(const e of this.#o.values())t.push(e.enable());await Promise.all(t);for(const e of this.#n.values())e.enable()}}#pt(){if(this.unselectAll(),this.#T){this.#T=!1;for(const t of this.#o.values())t.disable();for(const t of this.#n.values())t.disable()}}*getEditors(t){for(const e of this.#n.values())e.pageIndex===t&&(yield e)}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#C&&clearTimeout(this.#C),this.#C=setTimeout(()=>{this.focusMainContainer(),this.#C=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#N?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#m.has(t.annotationElementId))&&this.#i?.remove(t.id)}addDeletedAnnotationElement(t){this.#m.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#m.has(t)}removeDeletedAnnotationElement(t){this.#m.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#nt(t){const e=this.#o.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#H(t.propertiesToUpdate))}get#gt(){let t=null;for(t of this.#x);return t}updateUI(t){this.#gt===t&&this.#H(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#H(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#x.has(t)){this.#x.delete(t),t.unselect(),this.#I({hasSelectedEditor:this.hasSelection});return}this.#x.add(t),t.select(),this.#H(t.propertiesToUpdate),this.#I({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.uid}),this.#d?.commitOrRemove();for(const e of this.#x)e!==t&&e.unselect();this.#x.clear(),this.#x.add(t),t.select(),this.#H(t.propertiesToUpdate),this.#I({hasSelectedEditor:!0})}isSelected(t){return this.#x.has(t)}get firstSelectedEditor(){return this.#x.values().next().value}unselect(t){t.unselect(),this.#x.delete(t),this.#I({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#x.size!==0}get isEnterHandled(){return this.#x.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#I({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#X()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#I({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#X()})}addCommands(t){this.#c.add(t),this.#I({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#X()})}cleanUndoStack(t){this.#c.cleanType(t)}#X(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#x],s=()=>{this._editorUndoBar?.show(i,e.length===1?e[0].editorType:e.length);for(const r of e)r.remove()},i=()=>{for(const r of e)this.#nt(r)};this.addCommands({cmd:s,undo:i,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#st(t){for(const e of this.#x)e.unselect();this.#x.clear();for(const e of t)e.isEmpty()||(this.#x.add(e),e.select());this.#I({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#x)t.commit();this.#st(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#S!==Ne.NONE))&&!this.#d?.commitOrRemove()&&this.hasSelection){for(const t of this.#x)t.unselect();this.#x.clear(),this.#I({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;this.#z[0]+=t,this.#z[1]+=e;const[i,r]=this.#z,o=[...this.#x],a=1e3;this.#O&&clearTimeout(this.#O),this.#O=setTimeout(()=>{this.#O=null,this.#z[0]=this.#z[1]=0,this.addCommands({cmd:()=>{for(const l of o)this.#n.has(l.id)&&(l.translateInPage(i,r),l.translationDone())},undo:()=>{for(const l of o)this.#n.has(l.id)&&(l.translateInPage(-i,-r),l.translationDone())},mustExec:!1})},a);for(const l of o)l.translateInPage(t,e),l.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#g=new Map;for(const t of this.#x)this.#g.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#g)return!1;this.disableUserSelect(!1);const t=this.#g;this.#g=null;let e=!1;for(const[{x:i,y:r,pageIndex:o},a]of t)a.newX=i,a.newY=r,a.newPageIndex=o,e||=i!==a.savedX||r!==a.savedY||o!==a.savedPageIndex;if(!e)return!1;const s=(i,r,o,a)=>{if(this.#n.has(i.id)){const l=this.#o.get(a);l?i._setParentAndPosition(l,r,o):(i.pageIndex=a,i.x=r,i.y=o)}};return this.addCommands({cmd:()=>{for(const[i,{newX:r,newY:o,newPageIndex:a}]of t)s(i,r,o,a)},undo:()=>{for(const[i,{savedX:r,savedY:o,savedPageIndex:a}]of t)s(i,r,o,a)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#g)for(const s of this.#g.keys())s.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#x.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#S}isEditingMode(){return this.#S!==Ne.NONE}get imageManager(){return Fe(this,"imageManager",new Sb)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let c=0,u=e.rangeCount;c<u;c++)if(!t.contains(e.getRangeAt(c).commonAncestorContainer))return null;const{x:s,y:i,width:r,height:o}=t.getBoundingClientRect();let a;switch(t.getAttribute("data-main-rotation")){case"90":a=(c,u,d,f)=>({x:(u-i)/o,y:1-(c+d-s)/r,width:f/o,height:d/r});break;case"180":a=(c,u,d,f)=>({x:1-(c+d-s)/r,y:1-(u+f-i)/o,width:d/r,height:f/o});break;case"270":a=(c,u,d,f)=>({x:1-(u+f-i)/o,y:(c-s)/r,width:f/o,height:d/r});break;default:a=(c,u,d,f)=>({x:(c-s)/r,y:(u-i)/o,width:d/r,height:f/o});break}const l=[];for(let c=0,u=e.rangeCount;c<u;c++){const d=e.getRangeAt(c);if(!d.collapsed)for(const{x:f,y:h,width:g,height:m}of d.getClientRects())g===0||m===0||l.push(a(f,h,g,m))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#a||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#a?.delete(t)}renderAnnotationElement(t){const e=this.#a?.get(t.data.id);if(!e)return;const s=this.#i.getRawValue(e);s&&(this.#S===Ne.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}setMissingCanvas(t,e,s){const i=this.#N?.get(t);i&&(i.setCanvas(e,s),this.#N.delete(t))}addMissingCanvas(t,e){(this.#N||=new Map).set(t,e)}}class no{#t=null;#e=!1;#s=null;#n=null;#o=null;#r=null;#i=!1;#a=null;#c=null;#l=null;#h=null;#d=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#d=t._uiManager.useNewAltTextFlow,no.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){no._l10n??=t}async render(){const t=this.#s=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#n=document.createElement("span");t.append(e),this.#d?(t.classList.add("new"),t.setAttribute("data-l10n-id",no.#f.missing),e.setAttribute("data-l10n-id",no.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=this.#c._uiManager._signal;t.addEventListener("contextmenu",pr,{signal:s}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:s});const i=r=>{r.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#d&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return t.addEventListener("click",i,{capture:!0,signal:s}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(this.#i=!0,i(r))},{signal:s}),await this.#g(),t}get#m(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#s&&(this.#s.focus({focusVisible:this.#i}),this.#i=!1)}isEmpty(){return this.#d?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#d?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#h=await no._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#g())}toggleAltTextBadge(t=!1){if(!this.#d||this.#t){this.#a?.remove(),this.#a=null;return}if(!this.#a){const e=this.#a=document.createElement("div");e.className="noAltTextBadge",this.#c.div.append(e)}this.#a.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#l===e&&(e=this.#h),{altText:e,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#h}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:s,textWithDisclaimer:i,cancel:r=!1}){s&&(this.#l=s,this.#h=i),!(this.#t===t&&this.#e===e)&&(r||(this.#t=t,this.#e=e),this.#g())}toggle(t=!1){this.#s&&(!t&&this.#r&&(clearTimeout(this.#r),this.#r=null),this.#s.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#s?.remove(),this.#s=null,this.#n=null,this.#o=null,this.#a?.remove(),this.#a=null}async#g(){const t=this.#s;if(!t)return;if(this.#d){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",no.#f[this.#m]),this.#n?.setAttribute("data-l10n-id",no.#f[`${this.#m}-label`]),!this.#t){this.#o?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#o?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#o;if(!e){this.#o=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#c.id}`;const i=100,r=this.#c._uiManager._signal;r.addEventListener("abort",()=>{clearTimeout(this.#r),this.#r=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#r=setTimeout(()=>{this.#r=null,this.#o.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},i)},{signal:r}),t.addEventListener("mouseleave",()=>{this.#r&&(clearTimeout(this.#r),this.#r=null),this.#o?.classList.remove("show")},{signal:r})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#c.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class M1{#t=null;#e=null;#s=!1;#n=null;#o=null;#r=null;#i=null;#a=null;#c=!1;#l=null;constructor(t){this.#n=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#h(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const e=this.#n.commentButtonPosition;if(e){const{style:s}=t;s.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,s.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const i=this.#n.commentButtonColor;i&&(s.backgroundColor=i)}return this.#h(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#n.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:e,height:s}=this.#t.getBoundingClientRect(),{x:i,y:r,width:o,height:a}=this.#n.parent.boundingClientRect;return[(t-i)/o,(e+s-r)/a]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:e}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=e)}#h(t,e){if(!this.#n._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const s=this.#n._uiManager._signal;if(!(s instanceof AbortSignal)||s.aborted)return t;t.addEventListener("contextmenu",pr,{signal:s}),e&&(t.addEventListener("focusin",r=>{this.#n._focusEventsAllowed=!1,Wn(r)},{capture:!0,signal:s}),t.addEventListener("focusout",r=>{this.#n._focusEventsAllowed=!0,Wn(r)},{capture:!0,signal:s})),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:s});const i=r=>{r.preventDefault(),t===this.#e?this.edit():this.#n.toggleComment(!0)};return t.addEventListener("click",i,{capture:!0,signal:s}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(this.#s=!0,i(r))},{signal:s}),t.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:s}),t.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:s}),t}edit(t){const e=this.commentPopupPositionInLayer;let s,i;if(e)[s,i]=e;else{[s,i]=this.#n.commentButtonPosition;const{width:u,height:d,x:f,y:h}=this.#n;s=f+s*u,i=h+i*d}const r=this.#n.parent.boundingClientRect,{x:o,y:a,width:l,height:c}=r;this.#n._uiManager.editComment(this.#n,o+s*l,a+i*c,{...t,parentDimensions:r})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#s}),this.#s=!1)}isDeleted(){return this.#c||this.#i===""}isEmpty(){return this.#i===null}hasBeenEdited(){return this.isDeleted()||this.#i!==this.#o}serialize(){return this.data}get data(){return{text:this.#i,richText:this.#r,date:this.#a,deleted:this.isDeleted()}}set data(t){if(t!==this.#i&&(this.#r=null),t===null){this.#i="",this.#c=!0;return}this.#i=t,this.#a=new Date,this.#c=!1}setInitialText(t,e=null){this.#o=t,this.data=t,this.#a=null,this.#r=e}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#i="",this.#r=null,this.#a=null,this.#n=null,this.#s=!1,this.#c=!1}}class Tg{#t;#e=!1;#s=null;#n;#o;#r;#i;#a=null;#c;#l=null;#h;#d=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:s=null,onPinchStart:i=null,onPinching:r=null,onPinchEnd:o=null,signal:a}){this.#t=t,this.#s=s,this.#n=e,this.#o=i,this.#r=r,this.#i=o,this.#h=new AbortController,this.#c=AbortSignal.any([a,this.#h.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/uo.pixelRatio}#f(t){if(this.#n?.())return;if(t.touches.length===1){if(this.#a)return;const i=this.#a=new AbortController,r=AbortSignal.any([this.#c,i.signal]),o=this.#t,a={capture:!0,signal:r,passive:!1},l=c=>{c.pointerType==="touch"&&(this.#a?.abort(),this.#a=null)};o.addEventListener("pointerdown",c=>{c.pointerType==="touch"&&(Wn(c),l(c))},a),o.addEventListener("pointerup",l,a),o.addEventListener("pointercancel",l,a);return}if(!this.#d){this.#d=new AbortController;const i=AbortSignal.any([this.#c,this.#d.signal]),r=this.#t,o={signal:i,capture:!1,passive:!1};r.addEventListener("touchmove",this.#m.bind(this),o);const a=this.#g.bind(this);r.addEventListener("touchend",a,o),r.addEventListener("touchcancel",a,o),o.capture=!0,r.addEventListener("pointerdown",Wn,o),r.addEventListener("pointermove",Wn,o),r.addEventListener("pointercancel",Wn,o),r.addEventListener("pointerup",Wn,o),this.#o?.()}if(Wn(t),t.touches.length!==2||this.#s?.()){this.#l=null;return}let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]),this.#l={touch0X:e.screenX,touch0Y:e.screenY,touch1X:s.screenX,touch1Y:s.screenY}}#m(t){if(!this.#l||t.touches.length!==2)return;Wn(t);let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]);const{screenX:i,screenY:r}=e,{screenX:o,screenY:a}=s,l=this.#l,{touch0X:c,touch0Y:u,touch1X:d,touch1Y:f}=l,h=d-c,g=f-u,m=o-i,b=a-r,y=Math.hypot(m,b)||1,x=Math.hypot(h,g)||1;if(!this.#e&&Math.abs(x-y)<=Tg.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=i,l.touch0Y=r,l.touch1X=o,l.touch1Y=a,!this.#e){this.#e=!0;return}const _=[(i+o)/2,(r+a)/2];this.#r?.(_,x,y)}#g(t){t.touches.length>=2||(this.#d&&(this.#d.abort(),this.#d=null,this.#i?.()),this.#l&&(Wn(t),this.#l=null,this.#e=!1))}destroy(){this.#h?.abort(),this.#h=null,this.#a?.abort(),this.#a=null}}class ye{#t=null;#e=null;#s=null;#n=null;#o=null;#r=!1;#i=null;#a="";#c=null;#l=null;#h=null;#d=null;#f=null;#m="";#g=!1;#u=null;#p=!1;#b=!1;#y=!1;#v=null;#A=0;#C=0;#_=null;#E=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#w=!1;#k=ye._zIndex++;static _borderLineWidth=-1;static _colorManager=new Eb;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=ye.prototype._resizeWithKeyboard,e=Xa.TRANSLATE_SMALL,s=Xa.TRANSLATE_BIG;return Fe(this,"_resizerKeyboardManager",new uf([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],ye.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;const{rotation:e,rawDims:{pageWidth:s,pageHeight:i,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,i],this.pageTranslation=[r,o];const[a,l]=this.parentDimensions;this.x=t.x/a,this.y=t.y/l,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Fe(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new mZ({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(ye._l10n??=t,ye._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),ye._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);ye._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){wn("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#w}set _isDraggable(t){this.#w=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#k}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#O(),this.#d?.remove(),this.#d=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#g?this.#g=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,s,i){const[r,o]=this.parentDimensions;[s,i]=this.screenToPageTranslation(s,i),this.x=(t+s)/r,this.y=(e+i)/o,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[s,i]=this.parentDimensions;this.setAt(t*s,e*i,this.width*s,this.height*i),this._onTranslated()}#P([t,e],s,i){[s,i]=this.screenToPageTranslation(s,i),this.x+=s/t,this.y+=i/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#P(this.parentDimensions,t,e)}translateInPage(t,e){this.#u||=[this.x,this.y,this.width,this.height],this.#P(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#u||=[this.x,this.y,this.width,this.height];const{div:s,parentDimensions:[i,r]}=this;if(this.x+=t/i,this.y+=e/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:a}=this;const[l,c]=this.getBaseTranslation();o+=l,a+=c;const{style:u}=s;u.left=`${(100*o).toFixed(2)}%`,u.top=`${(100*a).toFixed(2)}%`,this._onTranslating(o,a),s.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:s}=ye,i=s/t,r=s/e;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[s,i]}=this;let{x:r,y:o,width:a,height:l}=this;if(a*=s,l*=i,r*=s,o*=i,this._mustFixPosition)switch(t){case 0:r=di(r,0,s-a),o=di(o,0,i-l);break;case 90:r=di(r,0,s-l),o=di(o,a,i);break;case 180:r=di(r,a,s),o=di(o,l,i);break;case 270:r=di(r,l,s),o=di(o,0,i-a);break}this.x=r/=s,this.y=o/=i;const[c,u]=this.getBaseTranslation();r+=c,o+=u,e.left=`${(100*r).toFixed(2)}%`,e.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}static#T(t,e,s){switch(s){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return ye.#T(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return ye.#T(t,e,360-this.parentRotation)}#L(t){switch(t){case 90:{const[e,s]=this.pageDimensions;return[0,-e/s,s/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,s]=this.pageDimensions;return[0,e/s,-s/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,s]}=this;return[e*t,s*t]}setDims(){const{div:{style:t},width:e,height:s}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*s).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#F(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const s of t){const i=document.createElement("div");this.#c.append(i),i.classList.add("resizer",s),i.setAttribute("data-resizer-name",s),i.addEventListener("pointerdown",this.#D.bind(this,s),{signal:e}),i.addEventListener("contextmenu",pr,{signal:e}),i.tabIndex=-1}this.div.prepend(this.#c)}#D(t,e){e.preventDefault();const{isMac:s}=zs.platform;if(e.button!==0||e.ctrlKey&&s)return;this.#s?.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,this.#l=[e.screenX,e.screenY];const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#N.bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Wn,{passive:!1,signal:o}),window.addEventListener("contextmenu",pr,{signal:o}),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const a=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const c=()=>{r.abort(),this.parent.togglePointerEvents(!0),this.#s?.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=a,this.div.style.cursor=l,this.#$()};window.addEventListener("pointerup",c,{signal:o}),window.addEventListener("blur",c,{signal:o})}#R(t,e,s,i){this.width=s,this.height=i,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#$(){if(!this.#h)return;const{savedX:t,savedY:e,savedWidth:s,savedHeight:i}=this.#h;this.#h=null;const r=this.x,o=this.y,a=this.width,l=this.height;r===t&&o===e&&a===s&&l===i||this.addCommands({cmd:this.#R.bind(this,r,o,a,l),undo:this.#R.bind(this,t,e,s,i),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#N(t,e){const[s,i]=this.parentDimensions,r=this.x,o=this.y,a=this.width,l=this.height,c=ye.MIN_SIZE/s,u=ye.MIN_SIZE/i,d=this.#L(this.rotation),f=(W,F)=>[d[0]*W+d[2]*F,d[1]*W+d[3]*F],h=this.#L(360-this.rotation),g=(W,F)=>[h[0]*W+h[2]*F,h[1]*W+h[3]*F];let m,b,y=!1,x=!1;switch(t){case"topLeft":y=!0,m=(W,F)=>[0,0],b=(W,F)=>[W,F];break;case"topMiddle":m=(W,F)=>[W/2,0],b=(W,F)=>[W/2,F];break;case"topRight":y=!0,m=(W,F)=>[W,0],b=(W,F)=>[0,F];break;case"middleRight":x=!0,m=(W,F)=>[W,F/2],b=(W,F)=>[0,F/2];break;case"bottomRight":y=!0,m=(W,F)=>[W,F],b=(W,F)=>[0,0];break;case"bottomMiddle":m=(W,F)=>[W/2,F],b=(W,F)=>[W/2,0];break;case"bottomLeft":y=!0,m=(W,F)=>[0,F],b=(W,F)=>[W,0];break;case"middleLeft":x=!0,m=(W,F)=>[0,F/2],b=(W,F)=>[W,F/2];break}const _=m(a,l),C=b(a,l);let A=f(...C);const I=ye._round(r+A[0]),R=ye._round(o+A[1]);let L=1,P=1,V,T;if(e.fromKeyboard)({deltaX:V,deltaY:T}=e);else{const{screenX:W,screenY:F}=e,[O,et]=this.#l;[V,T]=this.screenToPageTranslation(W-O,F-et),this.#l[0]=W,this.#l[1]=F}if([V,T]=g(V/s,T/i),y){const W=Math.hypot(a,l);L=P=Math.max(Math.min(Math.hypot(C[0]-_[0]-V,C[1]-_[1]-T)/W,1/a,1/l),c/a,u/l)}else x?L=di(Math.abs(C[0]-_[0]-V),c,1)/a:P=di(Math.abs(C[1]-_[1]-T),u,1)/l;const D=ye._round(a*L),K=ye._round(l*P);A=f(...b(D,K));const $=I-A[0],q=R-A[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=D,this.height=K,this.x=$,this.y=q,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#s?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#b)return this._editToolbar;this._editToolbar=new fh(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,s]of t)await this._editToolbar.addButton(e,s);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#s?.destroy()}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#s||(no.initialize(ye._l10n),this.#s=new no(this),this.#t&&(this.#s.data=this.#t,this.#t=null)),this.#s}get altTextData(){return this.#s?.data}set altTextData(t){this.#s&&(this.#s.data=t)}get guessedAltText(){return this.#s?.guessedText}async setGuessedAltText(t){await this.#s?.setGuessedText(t)}serializeAltText(t){return this.#s?.serialize(t)}hasAltText(){return!!this.#s&&!this.#s.isEmpty()}hasAltTextData(){return this.#s?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.canAddComment?this.#n||=new M1(this):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(this.#o){this._uiManager.isEditingMode()&&this.#o.classList.remove("hidden");return}this.hasComment&&(this.#o=this.#n.renderForStandalone(),this.div.append(this.#o))}}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#o=null}hideStandaloneCommentButton(){this.#o?.classList.add("hidden")}get comment(){const{data:{richText:t,text:e,date:s,deleted:i}}=this.#n;return{text:e,richText:t,date:s,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#n||=new M1(this),this.#n.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:s}){if(!e||(this.#n||=new M1(this),this.#n.setInitialText(t,s),!this.annotationElementId))return;const i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(t){this.#n||=new M1(this),this.#n.edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){this.#n.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,i]=t.rect,[r]=this.pageDimensions,[o]=this.pageTranslation,a=o+r+1,l=i-100,c=a+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[a,l,c,i]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){this.#n.data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#r?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#U();const[e,s]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*s/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/s).toFixed(2)}%`);const[i,r]=this.getInitialTranslation();return this.translate(i,r),aC(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#E||=new Tg({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#V.bind(this),onPinching:this.#S.bind(this),onPinchEnd:this.#x.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#V(){this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#s?.toggle(!1),this.parent.togglePointerEvents(!1)}#S(t,e,s){let r=.7*(s/e)+1-.7;if(r===1)return;const o=this.#L(this.rotation),a=(I,R)=>[o[0]*I+o[2]*R,o[1]*I+o[3]*R],[l,c]=this.parentDimensions,u=this.x,d=this.y,f=this.width,h=this.height,g=ye.MIN_SIZE/l,m=ye.MIN_SIZE/c;r=Math.max(Math.min(r,1/f,1/h),g/f,m/h);const b=ye._round(f*r),y=ye._round(h*r);if(b===f&&y===h)return;this.#u||=[u,d,f,h];const x=a(f/2,h/2),_=ye._round(u+x[0]),C=ye._round(d+x[1]),A=a(b/2,y/2);this.x=_-A[0],this.y=C-A[1],this.width=b,this.height=y,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#x(){this.#s?.toggle(!0),this.parent.togglePointerEvents(!0),this.#$()}pointerdown(t){const{isMac:e}=zs.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#g=!0,this._isDraggable){this.#B(t);return}this.#M(t)}#M(t){const{isMac:e}=zs.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#B(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let s=!1;const i=new AbortController,r=this._uiManager.combinedSignal(i),o={capture:!0,passive:!1,signal:r},a=c=>{i.abort(),this.#i=null,this.#g=!1,this._uiManager.endDragSession()||this.#M(c),s&&this._onStopDragging()};e&&(this.#A=t.clientX,this.#C=t.clientY,this.#i=t.pointerId,this.#a=t.pointerType,window.addEventListener("pointermove",c=>{s||(s=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:u,clientY:d,pointerId:f}=c;if(f!==this.#i){Wn(c);return}const[h,g]=this.screenToPageTranslation(u-this.#A,d-this.#C);this.#A=u,this.#C=d,this._uiManager.dragSelectedEditors(h,g)},o),window.addEventListener("touchmove",Wn,o),window.addEventListener("pointerdown",c=>{c.pointerType===this.#a&&(this.#E||c.isPrimary)&&a(c),Wn(c)},o));const l=c=>{if(!this.#i||this.#i===c.pointerId){a(c);return}Wn(c)};window.addEventListener("pointerup",l,{signal:r}),window.addEventListener("blur",l,{signal:r})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.#v=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,s){t.changeParent(this),this.x=e,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,s=this.rotation){const i=this.parentScale,[r,o]=this.pageDimensions,[a,l]=this.pageTranslation,c=t/i,u=e/i,d=this.x*r,f=this.y*o,h=this.width*r,g=this.height*o;switch(s){case 0:return[d+c+a,o-f-u-g+l,d+c+h+a,o-f-u+l];case 90:return[d+u+a,o-f+c+l,d+u+g+a,o-f+c+h+l];case 180:return[d-c-h+a,o-f+u+l,d-c+a,o-f+u+g+l];case 270:return[d-u-g+a,o-f-c-h+l,d-u+a,o-f-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[s,i,r,o]=t,a=r-s,l=o-i;switch(this.rotation){case 0:return[s,e-o,a,l];case 90:return[s,e-i,l,a];case 180:return[r,e-i,a,l];case 270:return[r,e-o,l,a];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&ye._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:s,opacity:i,deleted:r,richText:o},uid:a,pageIndex:l,creationDate:c,modificationDate:u}=this;return{id:a,pageIndex:l,rect:this.getPDFRect(),richText:o,contentsObj:{str:t},creationDate:c,modificationDate:s||u,popupRef:!r,color:e,opacity:i}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#b=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#b=!1,!0):!1}isInEditMode(){return this.#b}shouldGetKeyboardEvents(){return this.#y}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:s,right:i}=this.getClientDimensions(),{innerHeight:r,innerWidth:o}=window;return e<o&&i>0&&t<r&&s>0}#U(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#U()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,e,s){const i=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:s,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});i.rotation=t.rotation,i.#t=t.accessibilityData,i._isCopy=t.isCopy||!1;const[r,o]=i.pageDimensions,[a,l,c,u]=i.getRectInCurrentCoords(t.rect,o);return i.x=a/r,i.y=l/o,i.width=c/r,i.height=u/o,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),this.#v&&(clearTimeout(this.#v),this.#v=null),this.#O(),this.removeEditToolbar(),this.#_){for(const t of this.#_.values())clearTimeout(t);this.#_=null}this.parent=null,this.#E?.destroy(),this.#E=null,this.#d?.remove(),this.#d=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#F(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[s,i,r,o]=this.getPDFRect();return[ye._round(s+(r-s)*t),ye._round(i+(o-i)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(t){this.#n.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#n?.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#c.children;if(!this.#e){this.#e=Array.from(e);const o=this.#G.bind(this),a=this.#W.bind(this),l=this._uiManager._signal;for(const c of this.#e){const u=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",o,{signal:l}),c.addEventListener("blur",a,{signal:l}),c.addEventListener("focus",this.#Y.bind(this,u),{signal:l}),c.setAttribute("data-l10n-id",ye._l10nResizer[u])}}const s=this.#e[0];let i=0;for(const o of e){if(o===s)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(r!==i){if(r<i)for(let a=0;a<i-r;a++)this.#c.append(this.#c.firstChild);else if(r>i)for(let a=0;a<r-i;a++)this.#c.firstChild.before(this.#c.lastChild);let o=0;for(const a of e){const c=this.#e[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",ye._l10nResizer[c])}}this.#z(0),this.#y=!0,this.#c.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#G(t){ye._resizerKeyboardManager.exec(this,t)}#W(t){this.#y&&t.relatedTarget?.parentNode!==this.#c&&this.#O()}#Y(t){this.#m=this.#y?t:""}#z(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#y&&this.#N(this.#m,{deltaX:t,deltaY:e,fromKeyboard:!0})}#O(){this.#y=!1,this.#z(-1),this.#$()}_stopResizingWithKeyboard(){this.#O(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#s?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#s?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(t){this.#p=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#_||=new Map;const{action:s}=t;let i=this.#_.get(s);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(t),this.#_.delete(s),this.#_.size===0&&(this.#_=null)},ye._telemetryTimeout),this.#_.set(s,i);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#r=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#r=!0}updateFakeAnnotationElement(t){if(!this.#d&&!this.deleted){this.#d=t.addFakeAnnotation(this);return}if(this.deleted){this.#d.remove(),this.#d=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#d.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const s=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),s.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class mZ extends ye{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const v9=3285377520,nr=4294901760,Xr=65535;class lC{constructor(t){this.h1=t?t&4294967295:v9,this.h2=t?t&4294967295:v9}update(t){let e,s;if(typeof t=="string"){e=new Uint8Array(t.length*2),s=0;for(let m=0,b=t.length;m<b;m++){const y=t.charCodeAt(m);y<=255?e[s++]=y:(e[s++]=y>>>8,e[s++]=y&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),s=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=s>>2,r=s-i*4,o=new Uint32Array(e.buffer,0,i);let a=0,l=0,c=this.h1,u=this.h2;const d=3432918353,f=461845907,h=d&Xr,g=f&Xr;for(let m=0;m<i;m++)m&1?(a=o[m],a=a*d&nr|a*h&Xr,a=a<<15|a>>>17,a=a*f&nr|a*g&Xr,c^=a,c=c<<13|c>>>19,c=c*5+3864292196):(l=o[m],l=l*d&nr|l*h&Xr,l=l<<15|l>>>17,l=l*f&nr|l*g&Xr,u^=l,u=u<<13|u>>>19,u=u*5+3864292196);switch(a=0,r){case 3:a^=e[i*4+2]<<16;case 2:a^=e[i*4+1]<<8;case 1:a^=e[i*4],a=a*d&nr|a*h&Xr,a=a<<15|a>>>17,a=a*f&nr|a*g&Xr,i&1?c^=a:u^=a}this.h1=c,this.h2=u}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&nr|t*36045&Xr,e=e*4283543511&nr|((e<<16|t>>>16)*2950163797&nr)>>>16,t^=e>>>1,t=t*444984403&nr|t*60499&Xr,e=e*3301882366&nr|((e<<16|t>>>16)*3120437893&nr)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Jm=Object.freeze({map:null,hash:"",transfer:void 0});class Tb{#t=!1;#e=null;#s=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const s=this.#n.get(t);return s===void 0?e:Object.assign(e,s)}getRawValue(t){return this.#n.get(t)}remove(t){const e=this.#n.get(t);if(e!==void 0&&(e instanceof ye&&this.#s.delete(e.annotationElementId),this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const s of this.#n.values())if(s instanceof ye)return;this.onAnnotationEditor(null)}}setValue(t,e){const s=this.#n.get(t);let i=!1;if(s!==void 0)for(const[r,o]of Object.entries(e))s[r]!==o&&(i=!0,s[r]=o);else i=!0,this.#n.set(t,e);i&&this.#o(),e instanceof ye&&((this.#s||=new Map).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return this.#n.has(t)}get size(){return this.#n.size}#o(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new cC(this)}get serializable(){if(this.#n.size===0)return Jm;const t=new Map,e=new lC,s=[],i=Object.create(null);let r=!1;for(const[o,a]of this.#n){const l=a instanceof ye?a.serialize(!1,i):a;l&&(t.set(o,l),e.update(`${o}:${JSON.stringify(l)}`),r||=!!l.bitmap)}if(r)for(const o of t.values())o.bitmap&&s.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:s}:Jm}get editorStats(){let t=null;const e=new Map;let s=0,i=0;for(const r of this.#n.values()){if(!(r instanceof ye)){r.popup&&(r.popup.deleted?i+=1:s+=1);continue}r.isCommentDeleted?i+=1:r.hasEditedComment&&(s+=1);const o=r.telemetryFinalData;if(!o)continue;const{type:a}=o;e.has(a)||e.set(a,Object.getPrototypeOf(r).constructor),t||=Object.create(null);const l=t[a]||=new Map;for(const[c,u]of Object.entries(o)){if(c==="type")continue;let d=l.get(c);d||(d=new Map,l.set(c,d));const f=d.get(u)??0;d.set(u,f+1)}}if((i>0||s>0)&&(t||=Object.create(null),t.comments={deleted:i,edited:s}),!t)return null;for(const[r,o]of e)t[r]=o.computeTelemetryFinalData(t[r]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,e){const s=this.#s?.get(t);return s?(s.updateFromAnnotationLayer(e),!0):!1}getEditor(t){return this.#s?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#s)for(const e of this.#s.values())e.serialize()&&t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class cC extends Tb{#t;constructor(t){super();const{map:e,hash:s,transfer:i}=t.serializable,r=structuredClone(e,i?{transfer:i}:null);this.#t={map:r,hash:s,transfer:i}}get print(){wn("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return Fe(this,"modifiedIds",{ids:new Set,hash:""})}}class bZ{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:s}){if(!(!t||this.#t.has(t.loadedName))){if(Ke(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:r,style:o}=t,a=new FontFace(i,r,o);this.addNativeFontFace(a);try{await a.load(),this.#t.add(i),s?.(t)}catch{Pe(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}wn("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(i){throw Pe(`Failed to load font '${s.family}': '${i}'.`),t.disableFontFace=!0,i}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const i=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,i)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return Fe(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Fe(this,"isSyncFontLoadingSupported",ui||zs.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(Ke(!i.done,"completeRequest() cannot be called twice."),i.done=!0;s.length>0&&s[0].done;){const r=s.shift();setTimeout(r.callback,0)}}const{loadingRequests:s}=this,i={done:!1,complete:e,callback:t};return s.push(i),i}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Fe(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function s(C,A){return C.charCodeAt(A)<<24|C.charCodeAt(A+1)<<16|C.charCodeAt(A+2)<<8|C.charCodeAt(A+3)&255}function i(C,A,I,R){const L=C.substring(0,A),P=C.substring(A+I);return L+R+P}let r,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const l=a.getContext("2d");let c=0;function u(C,A){if(++c>30){Pe("Load test font never loaded."),A();return}if(l.font="30px "+C,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){A();return}setTimeout(u.bind(null,C,A))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=i(f,976,d.length,d);const g=16,m=1482184792;let b=s(f,g);for(r=0,o=d.length-3;r<o;r+=4)b=b-m+s(d,r)|0;r<d.length&&(b=b-m+s(d+"XXX",r)|0),f=i(f,g,4,ZX(b));const y=`url(data:font/opentype;base64,${btoa(f)});`,x=`@font-face {font-family:"${d}";src:${y}}`;this.insertRule(x);const _=this._document.createElement("div");_.style.visibility="hidden",_.style.width=_.style.height="10px",_.style.position="absolute",_.style.top=_.style.left="0px";for(const C of[t.loadedName,d]){const A=this._document.createElement("span");A.textContent="Hi",A.style.fontFamily=C,_.append(A)}this._document.body.append(_),u(d,()=>{_.remove(),e.complete()})}}class vZ{#t;constructor(t,e=null,s,i){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=e,s&&Object.assign(this,s),i&&(this.charProcOperatorList=i)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${sC(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const s=this.loadedName+"_path_"+e;let i;try{i=t.get(s)}catch(o){Pe(`getPathGenerator - ignoring character: "${o}".`)}const r=oC(i);return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[e]=r}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}class bu{#t;#e;#s;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const e=new TextEncoder,s={};let i=0;for(const c of bu.strings){const u=e.encode(t[c]);s[c]=u,i+=4+u.length}const r=new ArrayBuffer(i),o=new Uint8Array(r),a=new DataView(r);let l=0;for(const c of bu.strings){const u=s[c],d=u.length;a.setUint32(l,d),o.set(u,l+4),l+=4+d}return Ke(l===r.byteLength,"CssFontInfo.write: Buffer overflow"),r}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#s=new TextDecoder}#n(t){Ke(t<bu.strings.length,"Invalid string index");let e=0;for(let i=0;i<t;i++)e+=this.#e.getUint32(e)+4;const s=this.#e.getUint32(e);return this.#s.decode(new Uint8Array(this.#t,e+4,s))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class vu{#t;#e;#s;static strings=["css","loadedName","baseFontName","src"];static write(t){const e=new TextEncoder,s={};let i=0;for(const f of vu.strings){const h=e.encode(t[f]);s[f]=h,i+=4+h.length}i+=4;let r,o,a=1+i;t.style&&(r=e.encode(t.style.style),o=e.encode(t.style.weight),a+=4+r.length+4+o.length);const l=new ArrayBuffer(a),c=new Uint8Array(l),u=new DataView(l);let d=0;u.setUint8(d++,t.guessFallback?1:0),u.setUint32(d,0),d+=4,i=0;for(const f of vu.strings){const h=s[f],g=h.length;i+=4+g,u.setUint32(d,g),c.set(h,d+4),d+=4+g}return u.setUint32(d-i-4,i),t.style&&(u.setUint32(d,r.length),c.set(r,d+4),d+=4+r.length,u.setUint32(d,o.length),c.set(o,d+4),d+=4+o.length),Ke(d<=l.byteLength,"SubstitionInfo.write: Buffer overflow"),l.transferToFixedLength(d)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#s=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#n(t){Ke(t<vu.strings.length,"Invalid string index");let e=5;for(let i=0;i<t;i++)e+=this.#e.getUint32(e)+4;const s=this.#e.getUint32(e);return this.#s.decode(new Uint8Array(this.#t,e+4,s))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const e=this.#e.getUint32(t),s=this.#s.decode(new Uint8Array(this.#t,t+4,e));t+=4+e;const i=this.#e.getUint32(t),r=this.#s.decode(new Uint8Array(this.#t,t+4,i));return{style:s,weight:r}}}class pn{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#s=this.#e+1+2*4;static#n=this.#s+1+8*6;static#o=this.#n+1+2*3;#r;#i;#a;constructor({data:t,extra:e}){this.#r=t,this.#i=new TextDecoder,this.#a=new DataView(this.#r),e&&Object.assign(this,e)}#c(t){Ke(t<pn.bools.length,"Invalid boolean index");const e=Math.floor(t/4),s=t*2%8,i=this.#a.getUint8(e)>>s&3;return i===0?void 0:i===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return Ke(t<pn.numbers.length,"Invalid number index"),this.#a.getFloat64(pn.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=pn.#e;if(this.#a.getUint8(t)===0)return;t+=1;const s=[];for(let i=0;i<4;i++)s.push(this.#a.getInt16(t,!0)),t+=2;return s}get fontMatrix(){let t=pn.#s;if(this.#a.getUint8(t)===0)return;t+=1;const s=[];for(let i=0;i<6;i++)s.push(this.#a.getFloat64(t,!0)),t+=8;return s}get defaultVMetrics(){let t=pn.#n;if(this.#a.getUint8(t)===0)return;t+=1;const s=[];for(let i=0;i<3;i++)s.push(this.#a.getInt16(t,!0)),t+=2;return s}#h(t){Ke(t<pn.strings.length,"Invalid string index");let e=pn.#o+4;for(let r=0;r<t;r++)e+=this.#a.getUint32(e)+4;const s=this.#a.getUint32(e),i=new Uint8Array(s);return i.set(new Uint8Array(this.#r,e+4,s)),this.#i.decode(i)}get fallbackName(){return this.#h(0)}get loadedName(){return this.#h(1)}get mimetype(){return this.#h(2)}get name(){return this.#h(3)}get data(){let t=pn.#o;const e=this.#a.getUint32(t);t+=4+e;const s=this.#a.getUint32(t);t+=4+s;const i=this.#a.getUint32(t);t+=4+i;const r=this.#a.getUint32(t);if(r!==0)return new Uint8Array(this.#r,t+4,r)}clearData(){let t=pn.#o;const e=this.#a.getUint32(t);t+=4+e;const s=this.#a.getUint32(t);t+=4+s;const i=this.#a.getUint32(t);t+=4+i;const r=this.#a.getUint32(t);new Uint8Array(this.#r,t+4,r).fill(0),this.#a.setUint32(t,0)}get cssFontInfo(){let t=pn.#o;const e=this.#a.getUint32(t);t+=4+e;const s=this.#a.getUint32(t);t+=4+s;const i=this.#a.getUint32(t);if(i===0)return null;const r=new Uint8Array(i);return r.set(new Uint8Array(this.#r,t+4,i)),new bu(r.buffer)}get systemFontInfo(){let t=pn.#o;const e=this.#a.getUint32(t);t+=4+e;const s=this.#a.getUint32(t);if(s===0)return null;const i=new Uint8Array(s);return i.set(new Uint8Array(this.#r,t+4,s)),new vu(i.buffer)}static write(t){const e=t.systemFontInfo?vu.write(t.systemFontInfo):null,s=t.cssFontInfo?bu.write(t.cssFontInfo):null,i=new TextEncoder,r={};let o=0;for(const m of pn.strings)r[m]=i.encode(t[m]),o+=4+r[m].length;const a=pn.#o+4+o+4+(e?e.byteLength:0)+4+(s?s.byteLength:0)+4+(t.data?t.data.length:0),l=new ArrayBuffer(a),c=new Uint8Array(l),u=new DataView(l);let d=0;const f=pn.bools.length;let h=0,g=0;for(let m=0;m<f;m++){const b=t[pn.bools[m]];h|=(b===void 0?0:b?2:1)<<g,g+=2,(g===8||m===f-1)&&(u.setUint8(d++,h),h=0,g=0)}Ke(d===pn.#t,"FontInfo.write: Boolean properties offset mismatch");for(const m of pn.numbers)u.setFloat64(d,t[m]),d+=8;if(Ke(d===pn.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){u.setUint8(d++,4);for(const m of t.bbox)u.setInt16(d,m,!0),d+=2}else u.setUint8(d++,0),d+=2*4;if(Ke(d===pn.#s,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){u.setUint8(d++,6);for(const m of t.fontMatrix)u.setFloat64(d,m,!0),d+=8}else u.setUint8(d++,0),d+=8*6;if(Ke(d===pn.#n,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){u.setUint8(d++,1);for(const m of t.defaultVMetrics)u.setInt16(d,m,!0),d+=2}else u.setUint8(d++,0),d+=3*2;Ke(d===pn.#o,"FontInfo.write: DefaultVMetrics properties offset mismatch"),u.setUint32(pn.#o,0),d+=4;for(const m of pn.strings){const b=r[m],y=b.length;u.setUint32(d,y),c.set(b,d+4),d+=4+y}if(u.setUint32(pn.#o,d-pn.#o-4),!e)u.setUint32(d,0),d+=4;else{const m=e.byteLength;u.setUint32(d,m),Ke(d+4+m<=l.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),c.set(new Uint8Array(e),d+4),d+=4+m}if(!s)u.setUint32(d,0),d+=4;else{const m=s.byteLength;u.setUint32(d,m),Ke(d+4+m<=l.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),c.set(new Uint8Array(s),d+4),d+=4+m}return t.data===void 0?(u.setUint32(d,0),d+=4):(u.setUint32(d,t.data.length),c.set(t.data,d+4),d+=4+t.data.length),Ke(d<=l.byteLength,"FontInfo.write: Buffer overflow"),l.transferToFixedLength(d)}}class ks{static#t=0;static#e=1;static#s=2;static#n=3;static#o=4;static#r=8;static#i=12;static#a=16;constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let e,s=null,i=[],r=[],o=[],a=[],l=null,c=null;switch(t[0]){case"RadialAxial":e=t[1]==="axial"?1:2,s=t[2],o=t[3],e===1?i.push(...t[4],...t[5]):i.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":e=3,l=t[1],i=t[2],r=t[3],a=t[4]||[],s=t[6],c=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}const u=Math.floor(i.length/2),d=Math.floor(r.length/3),f=o.length,h=a.length;let g=0;for(const A of a)g+=1,g=Math.ceil(g/4)*4,g+=4+A.coords.length*4,g+=4+A.colors.length*4,A.verticesPerRow!==void 0&&(g+=4);const m=20+u*8+d*3+f*8+(s?16:0)+(c?3:0)+g,b=new ArrayBuffer(m),y=new DataView(b),x=new Uint8Array(b);y.setUint8(ks.#t,e),y.setUint8(ks.#e,s?1:0),y.setUint8(ks.#s,c?1:0),y.setUint8(ks.#n,l),y.setUint32(ks.#o,u,!0),y.setUint32(ks.#r,d,!0),y.setUint32(ks.#i,f,!0),y.setUint32(ks.#a,h,!0);let _=20;new Float32Array(b,_,u*2).set(i),_+=u*8,x.set(r,_),_+=d*3;for(const[A,I]of o)y.setFloat32(_,A,!0),_+=4,y.setUint32(_,parseInt(I.slice(1),16),!0),_+=4;if(s)for(const A of s)y.setFloat32(_,A,!0),_+=4;c&&(x.set(c,_),_+=3);for(let A=0;A<a.length;A++){const I=a[A];y.setUint8(_,I.type),_+=1,_=Math.ceil(_/4)*4,y.setUint32(_,I.coords.length,!0),_+=4,new Int32Array(b,_,I.coords.length).set(I.coords),_+=I.coords.length*4,y.setUint32(_,I.colors.length,!0),_+=4,new Int32Array(b,_,I.colors.length).set(I.colors),_+=I.colors.length*4,I.verticesPerRow!==void 0&&(y.setUint32(_,I.verticesPerRow,!0),_+=4)}return b}getIR(){const t=this.view,e=this.data[ks.#t],s=!!this.data[ks.#e],i=!!this.data[ks.#s],r=t.getUint32(ks.#o,!0),o=t.getUint32(ks.#r,!0),a=t.getUint32(ks.#i,!0),l=t.getUint32(ks.#a,!0);let c=20;const u=new Float32Array(this.buffer,c,r*2);c+=r*8;const d=new Uint8Array(this.buffer,c,o*3);c+=o*3;const f=[];for(let b=0;b<a;++b){const y=t.getFloat32(c,!0);c+=4;const x=t.getUint32(c,!0);c+=4,f.push([y,`#${x.toString(16).padStart(6,"0")}`])}let h=null;if(s){h=[];for(let b=0;b<4;++b)h.push(t.getFloat32(c,!0)),c+=4}let g=null;i&&(g=new Uint8Array(this.buffer,c,3),c+=3);const m=[];for(let b=0;b<l;++b){const y=t.getUint8(c);c+=1,c=Math.ceil(c/4)*4;const x=t.getUint32(c,!0);c+=4;const _=new Int32Array(this.buffer,c,x);c+=x*4;const C=t.getUint32(c,!0);c+=4;const A=new Int32Array(this.buffer,c,C);c+=C*4;const I={type:y,coords:_,colors:A};y===Gm.LATTICE&&(I.verticesPerRow=t.getUint32(c,!0),c+=4),m.push(I)}if(e===1)return["RadialAxial","axial",h,f,Array.from(u.slice(0,2)),Array.from(u.slice(2,4)),null,null];if(e===2)return["RadialAxial","radial",h,f,[u[0],u[1]],[u[3],u[4]],u[2],u[5]];if(e===3){const b=this.data[ks.#n];let y=null;if(u.length>0){let x=u[0],_=u[0],C=u[1],A=u[1];for(let I=0;I<u.length;I+=2){const R=u[I],L=u[I+1];x=x>R?R:x,C=C>L?L:C,_=_<R?R:_,A=A<L?L:A}y=[x,C,_,A]}return["Mesh",b,u,d,m,y,h,g]}throw new Error(`Unsupported pattern kind: ${e}`)}}function yZ(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(ui)return n;const t=URL.parse(n,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function wZ(n){if(ui&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return of(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n?.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function R1(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const Qm=n=>typeof n=="object"&&Number.isInteger(n?.num)&&n.num>=0&&Number.isInteger(n?.gen)&&n.gen>=0,_Z=n=>typeof n=="object"&&typeof n?.name=="string",xZ=nZ.bind(null,Qm,_Z);class CZ{#t=new Map;#e=Promise.resolve();postMessage(t,e){const s={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[i]of this.#t)i.call(this,s)})}addEventListener(t,e,s=null){let i=null;if(s?.signal instanceof AbortSignal){const{signal:r}=s;if(r.aborted){Pe("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(t,e);i=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}this.#t.set(e,i)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const N1={DATA:1,ERROR:2},cs={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function y9(){}function _i(n){if(n instanceof Ka||n instanceof Ym||n instanceof d9||n instanceof Fp||n instanceof T0)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||wn('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Ka(n.message);case"InvalidPDFException":return new Ym(n.message);case"PasswordException":return new d9(n.message,n.code);case"ResponseException":return new Fp(n.message,n.status,n.missing);case"UnknownErrorException":return new T0(n.message,n.details)}return new T0(n.message,n.toString())}class qd{#t=new AbortController;constructor(t,e,s){this.sourceName=t,this.targetName=e,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#n(t);return}if(t.callback){const s=t.callbackId,i=this.callbackCapabilities[s];if(!i)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===N1.DATA)i.resolve(t.data);else if(t.callback===N1.ERROR)i.reject(_i(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,i=t.sourceName,r=this.comObj;Promise.try(e,t.data).then(function(o){r.postMessage({sourceName:s,targetName:i,callback:N1.DATA,callbackId:t.callbackId,data:o})},function(o){r.postMessage({sourceName:s,targetName:i,callback:N1.ERROR,callbackId:t.callbackId,reason:_i(o)})});return}if(t.streamId){this.#s(t);return}e(t.data)}on(t,e){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=e}send(t,e,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},s)}sendWithPromise(t,e,s){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:e},s)}catch(o){r.reject(o)}return r.promise}sendWithStream(t,e,s,i){const r=this.streamId++,o=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{const u=Promise.withResolvers();return this.streamControllers[r]={controller:c,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:o,targetName:a,action:t,streamId:r,data:e,desiredSize:c.desiredSize},i),u.promise},pull:c=>{const u=Promise.withResolvers();return this.streamControllers[r].pullCall=u,l.postMessage({sourceName:o,targetName:a,stream:cs.PULL,streamId:r,desiredSize:c.desiredSize}),u.promise},cancel:c=>{Ke(c instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[r].cancelCall=u,this.streamControllers[r].isClosed=!0,l.postMessage({sourceName:o,targetName:a,stream:cs.CANCEL,streamId:r,reason:_i(c)}),u.promise}},s)}#s(t){const e=t.streamId,s=this.sourceName,i=t.sourceName,r=this.comObj,o=this,a=this.actionHandler[t.action],l={enqueue(c,u=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=u,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:s,targetName:i,stream:cs.ENQUEUE,streamId:e,chunk:c},d)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:cs.CLOSE,streamId:e}),delete o.streamSinks[e])},error(c){Ke(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:cs.ERROR,streamId:e,reason:_i(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[e]=l,Promise.try(a,t.data,l).then(function(){r.postMessage({sourceName:s,targetName:i,stream:cs.START_COMPLETE,streamId:e,success:!0})},function(c){r.postMessage({sourceName:s,targetName:i,stream:cs.START_COMPLETE,streamId:e,reason:_i(c)})})}#n(t){const e=t.streamId,s=this.sourceName,i=t.sourceName,r=this.comObj,o=this.streamControllers[e],a=this.streamSinks[e];switch(t.stream){case cs.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(_i(t.reason));break;case cs.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(_i(t.reason));break;case cs.PULL:if(!a){r.postMessage({sourceName:s,targetName:i,stream:cs.PULL_COMPLETE,streamId:e,success:!0});break}a.desiredSize<=0&&t.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=t.desiredSize,Promise.try(a.onPull||y9).then(function(){r.postMessage({sourceName:s,targetName:i,stream:cs.PULL_COMPLETE,streamId:e,success:!0})},function(c){r.postMessage({sourceName:s,targetName:i,stream:cs.PULL_COMPLETE,streamId:e,reason:_i(c)})});break;case cs.ENQUEUE:if(Ke(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case cs.CLOSE:if(Ke(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),this.#o(o,e);break;case cs.ERROR:Ke(o,"error should have stream controller"),o.controller.error(_i(t.reason)),this.#o(o,e);break;case cs.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(_i(t.reason)),this.#o(o,e);break;case cs.CANCEL:if(!a)break;const l=_i(t.reason);Promise.try(a.onCancel||y9,l).then(function(){r.postMessage({sourceName:s,targetName:i,stream:cs.CANCEL_COMPLETE,streamId:e,success:!0})},function(c){r.postMessage({sourceName:s,targetName:i,stream:cs.CANCEL_COMPLETE,streamId:e,reason:_i(c)})}),a.sinkCapability.reject(l),a.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#o(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class uC{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,e);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,s){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){wn("Abstract method `_createCanvas` called.")}}class kZ extends uC{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const s=this._document.createElement("canvas");return s.width=t,s.height=e,s}}class dC{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){wn("Abstract method `_fetch` called.")}}class w9 extends dC{async _fetch(t){const e=await af(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):of(e)}}class hC{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,s,i,r){return"none"}destroy(t=!1){}}class AZ extends hC{#t;#e;#s;#n;#o;#r;#i=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#n=t,this.#o=e}get#a(){return this.#e||=new Map}get#c(){return this.#r||=new Map}get#l(){if(!this.#s){const t=this.#o.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const s=this.#o.createElementNS(Oo,"svg");s.setAttribute("width",0),s.setAttribute("height",0),this.#s=this.#o.createElementNS(Oo,"defs"),t.append(s),s.append(this.#s),this.#o.body.append(t)}return this.#s}#h(t){if(t.length===1){const l=t[0],c=new Array(256);for(let d=0;d<256;d++)c[d]=l[d]/255;const u=c.join(",");return[u,u,u]}const[e,s,i]=t,r=new Array(256),o=new Array(256),a=new Array(256);for(let l=0;l<256;l++)r[l]=e[l]/255,o[l]=s[l]/255,a[l]=i[l]/255;return[r.join(","),o.join(","),a.join(",")]}#d(t){if(this.#t===void 0){this.#t="";const e=this.#o.URL;e!==this.#o.baseURI&&(Eg(e)?Pe('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=tC(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#a.get(t);if(e)return e;const[s,i,r]=this.#h(t),o=t.length===1?s:`${s}${i}${r}`;if(e=this.#a.get(o),e)return this.#a.set(t,e),e;const a=`g_${this.#n}_transfer_map_${this.#i++}`,l=this.#d(a);this.#a.set(t,l),this.#a.set(o,l);const c=this.#g(a);return this.#p(s,i,r,c),l}addHCMFilter(t,e){const s=`${t}-${e}`,i="base";let r=this.#c.get(i);if(r?.key===s||(r?(r.filter?.remove(),r.key=s,r.url="none",r.filter=null):(r={key:s,url:"none",filter:null},this.#c.set(i,r)),!t||!e))return r.url;const o=this.#y(t);t=ee.makeHexColor(...o);const a=this.#y(e);if(e=ee.makeHexColor(...a),this.#l.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return r.url;const l=new Array(256);for(let h=0;h<=255;h++){const g=h/255;l[h]=g<=.03928?g/12.92:((g+.055)/1.055)**2.4}const c=l.join(","),u=`g_${this.#n}_hcm_filter`,d=r.filter=this.#g(u);this.#p(c,c,c,d),this.#m(d);const f=(h,g)=>{const m=o[h]/255,b=a[h]/255,y=new Array(g+1);for(let x=0;x<=g;x++)y[x]=m+x/g*(b-m);return y.join(",")};return this.#p(f(0,5),f(1,5),f(2,5),d),r.url=this.#d(u),r.url}addAlphaFilter(t){let e=this.#a.get(t);if(e)return e;const[s]=this.#h([t]),i=`alpha_${s}`;if(e=this.#a.get(i),e)return this.#a.set(t,e),e;const r=`g_${this.#n}_alpha_map_${this.#i++}`,o=this.#d(r);this.#a.set(t,o),this.#a.set(i,o);const a=this.#g(r);return this.#b(s,a),o}addLuminosityFilter(t){let e=this.#a.get(t||"luminosity");if(e)return e;let s,i;if(t?([s]=this.#h([t]),i=`luminosity_${s}`):i="luminosity",e=this.#a.get(i),e)return this.#a.set(t,e),e;const r=`g_${this.#n}_luminosity_map_${this.#i++}`,o=this.#d(r);this.#a.set(t,o),this.#a.set(i,o);const a=this.#g(r);return this.#f(a),t&&this.#b(s,a),o}addHighlightHCMFilter(t,e,s,i,r){const o=`${e}-${s}-${i}-${r}`;let a=this.#c.get(t);if(a?.key===o||(a?(a.filter?.remove(),a.key=o,a.url="none",a.filter=null):(a={key:o,url:"none",filter:null},this.#c.set(t,a)),!e||!s))return a.url;const[l,c]=[e,s].map(this.#y.bind(this));let u=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),d=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),[f,h]=[i,r].map(this.#y.bind(this));d<u&&([u,d,f,h]=[d,u,h,f]),this.#l.style.color="";const g=(y,x,_)=>{const C=new Array(256),A=(d-u)/_,I=y/255,R=(x-y)/(255*_);let L=0;for(let P=0;P<=_;P++){const V=Math.round(u+P*A),T=I+P*R;for(let D=L;D<=V;D++)C[D]=T;L=V+1}for(let P=L;P<256;P++)C[P]=C[L-1];return C.join(",")},m=`g_${this.#n}_hcm_${t}_filter`,b=a.filter=this.#g(m);return this.#m(b),this.#p(g(f[0],h[0],5),g(f[1],h[1],5),g(f[2],h[2],5),b),a.url=this.#d(m),a.url}destroy(t=!1){t&&this.#r?.size||(this.#s?.parentNode.parentNode.remove(),this.#s=null,this.#e?.clear(),this.#e=null,this.#r?.clear(),this.#r=null,this.#i=0)}#f(t){const e=this.#o.createElementNS(Oo,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#m(t){const e=this.#o.createElementNS(Oo,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#g(t){const e=this.#o.createElementNS(Oo,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#l.append(e),e}#u(t,e,s){const i=this.#o.createElementNS(Oo,e);i.setAttribute("type","discrete"),i.setAttribute("tableValues",s),t.append(i)}#p(t,e,s,i){const r=this.#o.createElementNS(Oo,"feComponentTransfer");i.append(r),this.#u(r,"feFuncR",t),this.#u(r,"feFuncG",e),this.#u(r,"feFuncB",s)}#b(t,e){const s=this.#o.createElementNS(Oo,"feComponentTransfer");e.append(s),this.#u(s,"feFuncA",t)}#y(t){return this.#l.style.color=t,cf(getComputedStyle(this.#l).getPropertyValue("color"))}}class fC{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(s=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){wn("Abstract method `_fetch` called.")}}class _9 extends fC{async _fetch(t){const e=await af(t,"arraybuffer");return new Uint8Array(e)}}class pC{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(s=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){wn("Abstract method `_fetch` called.")}}class x9 extends pC{async _fetch(t){const e=await af(t,"arraybuffer");return new Uint8Array(e)}}ui&&Pe("Please use the `legacy` build in Node.js environments.");async function Lb(n){const e=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(e)}class SZ extends hC{}class EZ extends uC{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class TZ extends dC{async _fetch(t){return Lb(t)}}class LZ extends fC{async _fetch(t){return Lb(t)}}class PZ extends pC{async _fetch(t){return Lb(t)}}const Wc="__forcedDependency",{floor:C9,ceil:k9}=Math;function O1(n,t,e,s,i,r){n[t*4+0]=Math.min(n[t*4+0],e),n[t*4+1]=Math.min(n[t*4+1],s),n[t*4+2]=Math.max(n[t*4+2],i),n[t*4+3]=Math.max(n[t*4+3],r)}const t5=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class IZ{#t;#e;constructor(t,e){this.#t=t,this.#e=e}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===t5}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const F1=(n,t)=>{if(!n)return;let e=n.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},n.set(t,e)),e};class DZ{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[Wc]:[]};#s=new Map;#n=[];#o=[];#r=[[1,0,0,1,0,0]];#i=[-1/0,-1/0,1/0,1/0];#a=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#h=new Map;#d=new Map;#f;#m;#g;#u;#p;constructor(t,e,s=!1){this.#f=t.width,this.#m=t.height,this.#b(e),s&&(this.#p=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#b(t,this.#u)}#b(t,e){const s=new ArrayBuffer(t*4);this.#g=new Uint8ClampedArray(s),this.#u=new Uint32Array(s),e&&e.length>0?(this.#u.set(e),this.#u.fill(t5,e.length)):this.#u.fill(t5)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[Wc]:{__proto__:this.#e[Wc]}},this.#i={__proto__:this.#i},this.#n.push(t),this}restore(t){const e=Object.getPrototypeOf(this.#t);if(e===null)return this;this.#t=e,this.#e=Object.getPrototypeOf(this.#e),this.#i=Object.getPrototypeOf(this.#i);const s=this.#n.pop();return s!==void 0&&(F1(this.#p,t)?.dependencies.add(s),this.#u[t]=this.#u[s]),this}recordOpenMarker(t){return this.#n.push(t),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(t){const e=this.#n.pop();return e!==void 0&&(F1(this.#p,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}beginMarkedContent(t){return this.#o.push(t),this}endMarkedContent(t){const e=this.#o.pop();return e!==void 0&&(F1(this.#p,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}pushBaseTransform(t){return this.#r.push(ee.multiplyByDOMMatrix(this.#r.at(-1),t.getTransform())),this}popBaseTransform(){return this.#r.length>1&&this.#r.pop(),this}recordSimpleData(t,e){return this.#t[t]=e,this}recordIncrementalData(t,e){return this.#e[t].push(e),this}resetIncrementalData(t,e){return this.#e[t].length=0,this}recordNamedData(t,e){return this.#s.set(t,e),this}recordSimpleDataFromNamed(t,e,s){this.#t[t]=this.#s.get(e)??s}recordFutureForcedDependency(t,e){return this.recordIncrementalData(Wc,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in this.#t&&this.recordFutureForcedDependency(e,this.#t[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency(Wc,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#a[0]=1/0,this.#a[1]=1/0,this.#a[2]=-1/0,this.#a[3]=-1/0),this}recordClipBox(t,e,s,i,r,o){const a=ee.multiplyByDOMMatrix(this.#r.at(-1),e.getTransform()),l=[1/0,1/0,-1/0,-1/0];ee.axialAlignedBoundingBox([s,r,i,o],a,l);const c=ee.intersect(this.#i,l);return c?(this.#i[0]=c[0],this.#i[1]=c[1],this.#i[2]=c[2],this.#i[3]=c[3]):(this.#i[0]=this.#i[1]=1/0,this.#i[2]=this.#i[3]=-1/0),this}recordBBox(t,e,s,i,r,o){const a=this.#i;if(a[0]===1/0)return this;const l=ee.multiplyByDOMMatrix(this.#r.at(-1),e.getTransform());if(a[0]===-1/0)return ee.axialAlignedBoundingBox([s,r,i,o],l,this.#a),this;const c=[1/0,1/0,-1/0,-1/0];return ee.axialAlignedBoundingBox([s,r,i,o],l,c),this.#a[0]=Math.min(this.#a[0],Math.max(c[0],a[0])),this.#a[1]=Math.min(this.#a[1],Math.max(c[1],a[1])),this.#a[2]=Math.max(this.#a[2],Math.min(c[2],a[2])),this.#a[3]=Math.max(this.#a[3],Math.min(c[3],a[3])),this}recordCharacterBBox(t,e,s,i=1,r=0,o=0,a){const l=s.bbox;let c,u;if(l&&(c=l[2]!==l[0]&&l[3]!==l[1]&&this.#d.get(s),c!==!1&&(u=[0,0,0,0],ee.axialAlignedBoundingBox(l,s.fontMatrix,u),(i!==1||r!==0||o!==0)&&ee.scaleMinMax([i,0,0,-i,r,o],u),c)))return this.recordBBox(t,e,u[0],u[2],u[1],u[3]);if(!a)return this.recordFullPageBBox(t);const d=a();return l&&u&&c===void 0&&(c=u[0]<=r-d.actualBoundingBoxLeft&&u[2]>=r+d.actualBoundingBoxRight&&u[1]<=o-d.actualBoundingBoxAscent&&u[3]>=o+d.actualBoundingBoxDescent,this.#d.set(s,c),c)?this.recordBBox(t,e,u[0],u[2],u[1],u[3]):this.recordBBox(t,e,r-d.actualBoundingBoxLeft,r+d.actualBoundingBoxRight,o-d.actualBoundingBoxAscent,o+d.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#a[0]=Math.max(0,this.#i[0]),this.#a[1]=Math.max(0,this.#i[1]),this.#a[2]=Math.min(this.#f,this.#i[2]),this.#a[3]=Math.min(this.#m,this.#i[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,e){const s=this.#l,i=this.#t,r=this.#e;for(const o of e)o in this.#t?s.add(i[o]):o in r&&r[o].forEach(s.add,s);return this}recordNamedDependency(t,e){return this.#s.has(e)&&this.#l.add(this.#s.get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[Wc]),this.#p){const s=F1(this.#p,t),{dependencies:i}=s;this.#l.forEach(i.add,i),this.#n.forEach(i.add,i),this.#o.forEach(i.add,i),i.delete(t),s.isRenderingOperation=!0}if(this.#c===t){const s=C9(this.#a[0]*256/this.#f),i=C9(this.#a[1]*256/this.#m),r=k9(this.#a[2]*256/this.#f),o=k9(this.#a[3]*256/this.#m);O1(this.#g,t,s,i,r,o);for(const a of this.#l)a!==t&&O1(this.#g,a,s,i,r,o);for(const a of this.#n)a!==t&&O1(this.#g,a,s,i,r,o);for(const a of this.#o)a!==t&&O1(this.#g,a,s,i,r,o);e||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,e=!1){const s=Array.from(this.#l);this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const i of s)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(t,e=!1){return this.#c===t&&(this.#c=-1,this.#i[0]=Math.max(this.#i[0],this.#a[0]),this.#i[1]=Math.max(this.#i[1],this.#a[1]),this.#i[2]=Math.min(this.#i[2],this.#a[2]),this.#i[3]=Math.min(this.#i[3],this.#a[3]),e||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const e=this.#h.get(t);return this.#h.delete(t),e}_pushPendingDependencies(t){for(const e of t)this.#l.add(e)}take(){return this.#d.clear(),new IZ(this.#u,this.#g)}takeDebugMetadata(){return this.#p}}class $p{#t;#e;#s;#n=0;#o=0;constructor(t,e,s){if(t instanceof $p&&t.#s===!!s)return t;this.#t=t,this.#e=e,this.#s=!!s}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#o++,this.#t.save(this.#e),this}restore(t){return this.#o>0&&(this.#t.restore(this.#e),this.#o--),this}recordOpenMarker(t){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#n--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,e){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,e){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,e){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,s){return this.#t.recordSimpleDataFromNamed(t,e,this.#e),this}recordFutureForcedDependency(t,e){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#s||this.#t.resetBBox(this.#e),this}recordClipBox(t,e,s,i,r,o){return this.#s||this.#t.recordClipBox(this.#e,e,s,i,r,o),this}recordBBox(t,e,s,i,r,o){return this.#s||this.#t.recordBBox(this.#e,e,s,i,r,o),this}recordCharacterBBox(t,e,s,i,r,o,a){return this.#s||this.#t.recordCharacterBBox(this.#e,e,s,i,r,o,a),this}recordFullPageBBox(t){return this.#s||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,e){return this.#t.recordDependencies(this.#e,e),this}recordNamedDependency(t,e){return this.#t.recordNamedDependency(this.#e,e),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#s||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const sr={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Bs={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function e5(n,t){if(!t)return;const e=t[2]-t[0],s=t[3]-t[1],i=new Path2D;i.rect(t[0],t[1],e,s),n.clip(i)}class Pb{isModifyingCurrentTransform(){return!1}getPattern(){wn("Abstract method `getPattern` called.")}}class MZ extends Pb{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)e.addColorStop(s[0],s[1]);return e}getPattern(t,e,s,i){let r;if(i===Bs.STROKE||i===Bs.FILL){const o=e.current.getClippedPathBoundingBox(i,Fn(t))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,l=Math.ceil(o[3]-o[1])||1,c=e.cachedCanvases.getCanvas("pattern",a,l),u=c.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-o[0],-o[1]),s=ee.transform(s,[1,0,0,1,o[0],o[1]]),u.transform(...e.baseTransform),this.matrix&&u.transform(...this.matrix),e5(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),r=t.createPattern(c.canvas,"no-repeat");const d=new DOMMatrix(s);r.setTransform(d)}else e5(t,this._bbox),r=this._createGradient(t);return r}}function I0(n,t,e,s,i,r,o,a){const l=t.coords,c=t.colors,u=n.data,d=n.width*4;let f;l[e+1]>l[s+1]&&(f=e,e=s,s=f,f=r,r=o,o=f),l[s+1]>l[i+1]&&(f=s,s=i,i=f,f=o,o=a,a=f),l[e+1]>l[s+1]&&(f=e,e=s,s=f,f=r,r=o,o=f);const h=(l[e]+t.offsetX)*t.scaleX,g=(l[e+1]+t.offsetY)*t.scaleY,m=(l[s]+t.offsetX)*t.scaleX,b=(l[s+1]+t.offsetY)*t.scaleY,y=(l[i]+t.offsetX)*t.scaleX,x=(l[i+1]+t.offsetY)*t.scaleY;if(g>=x)return;const _=c[r],C=c[r+1],A=c[r+2],I=c[o],R=c[o+1],L=c[o+2],P=c[a],V=c[a+1],T=c[a+2],D=Math.round(g),K=Math.round(x);let $,q,W,F,O,et,gt,lt;for(let E=D;E<=K;E++){if(E<b){const nt=E<g?0:(g-E)/(g-b);$=h-(h-m)*nt,q=_-(_-I)*nt,W=C-(C-R)*nt,F=A-(A-L)*nt}else{let nt;E>x?nt=1:b===x?nt=0:nt=(b-E)/(b-x),$=m-(m-y)*nt,q=I-(I-P)*nt,W=R-(R-V)*nt,F=L-(L-T)*nt}let M;E<g?M=0:E>x?M=1:M=(g-E)/(g-x),O=h-(h-y)*M,et=_-(_-P)*M,gt=C-(C-V)*M,lt=A-(A-T)*M;const B=Math.round(Math.min($,O)),at=Math.round(Math.max($,O));let pt=d*E+B*4;for(let nt=B;nt<=at;nt++)M=($-nt)/($-O),M<0?M=0:M>1&&(M=1),u[pt++]=q-(q-et)*M|0,u[pt++]=W-(W-gt)*M|0,u[pt++]=F-(F-lt)*M|0,u[pt++]=255}}function RZ(n,t,e){const s=t.coords,i=t.colors;let r,o;switch(t.type){case Gm.LATTICE:const a=t.verticesPerRow,l=Math.floor(s.length/a)-1,c=a-1;for(r=0;r<l;r++){let u=r*a;for(let d=0;d<c;d++,u++)I0(n,e,s[u],s[u+1],s[u+a],i[u],i[u+1],i[u+a]),I0(n,e,s[u+a+1],s[u+1],s[u+a],i[u+a+1],i[u+1],i[u+a])}break;case Gm.TRIANGLES:for(r=0,o=s.length;r<o;r+=3)I0(n,e,s[r],s[r+1],s[r+2],i[r],i[r+1],i[r+2]);break;default:throw new Error("illegal figure")}}class NZ extends Pb{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,s){const a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-a,u=Math.ceil(this._bounds[3])-l,d=Math.min(Math.ceil(Math.abs(c*t[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(u*t[1]*1.1)),3e3),h=c/d,g=u/f,m={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/h,scaleY:1/g},b=d+2*2,y=f+2*2,x=s.getCanvas("mesh",b,y),_=x.context,C=_.createImageData(d,f);if(e){const I=C.data;for(let R=0,L=I.length;R<L;R+=4)I[R]=e[0],I[R+1]=e[1],I[R+2]=e[2],I[R+3]=255}for(const I of this._figures)RZ(C,I,m);return _.putImageData(C,2,2),{canvas:x.canvas,offsetX:a-2*h,offsetY:l-2*g,scaleX:h,scaleY:g}}isModifyingCurrentTransform(){return!0}getPattern(t,e,s,i){e5(t,this._bbox);const r=new Float32Array(2);if(i===Bs.SHADING)ee.singularValueDecompose2dScale(Fn(t),r);else if(this.matrix){ee.singularValueDecompose2dScale(this.matrix,r);const[a,l]=r;ee.singularValueDecompose2dScale(e.baseTransform,r),r[0]*=a,r[1]*=l}else ee.singularValueDecompose2dScale(e.baseTransform,r);const o=this._createMeshCanvas(r,i===Bs.SHADING?null:this._background,e.cachedCanvases);return i!==Bs.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class OZ extends Pb{getPattern(){return"hotpink"}}function FZ(n){switch(n[0]){case"RadialAxial":return new MZ(n);case"Mesh":return new NZ(n);case"Dummy":return new OZ}throw new Error(`Unknown IR type: ${n[0]}`)}const A9={COLORED:1,UNCOLORED:2};class Ib{static MAX_PATTERN_SIZE=3e3;constructor(t,e,s,i){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=s,this.baseTransform=i}createPatternCanvas(t,e){const{bbox:s,operatorList:i,paintType:r,tilingType:o,color:a,canvasGraphicsFactory:l}=this;let{xstep:c,ystep:u}=this;c=Math.abs(c),u=Math.abs(u),Sg("TilingType: "+o);const d=s[0],f=s[1],h=s[2],g=s[3],m=h-d,b=g-f,y=new Float32Array(2);ee.singularValueDecompose2dScale(this.matrix,y);const[x,_]=y;ee.singularValueDecompose2dScale(this.baseTransform,y);const C=x*y[0],A=_*y[1];let I=m,R=b,L=!1,P=!1;const V=Math.ceil(c*C),T=Math.ceil(u*A),D=Math.ceil(m*C),K=Math.ceil(b*A);V>=D?I=c:L=!0,T>=K?R=u:P=!0;const $=this.getSizeAndScale(I,this.ctx.canvas.width,C),q=this.getSizeAndScale(R,this.ctx.canvas.height,A),W=t.cachedCanvases.getCanvas("pattern",$.size,q.size),F=W.context,O=l.createCanvasGraphics(F,e);if(O.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(O,r,a),F.translate(-$.scale*d,-q.scale*f),O.transform(0,$.scale,0,0,q.scale,0,0),F.save(),O.dependencyTracker?.save(),this.clipBbox(O,d,f,h,g),O.baseTransform=Fn(O.ctx),O.executeOperatorList(i),O.endDrawing(),O.dependencyTracker?.restore(),F.restore(),L||P){const et=W.canvas;L&&(I=c),P&&(R=u);const gt=this.getSizeAndScale(I,this.ctx.canvas.width,C),lt=this.getSizeAndScale(R,this.ctx.canvas.height,A),E=gt.size,M=lt.size,B=t.cachedCanvases.getCanvas("pattern-workaround",E,M),at=B.context,pt=L?Math.floor(m/c):0,nt=P?Math.floor(b/u):0;for(let ct=0;ct<=pt;ct++)for(let G=0;G<=nt;G++)at.drawImage(et,E*ct,M*G,E,M,0,0,E,M);return{canvas:B.canvas,scaleX:gt.scale,scaleY:lt.scale,offsetX:d,offsetY:f}}return{canvas:W.canvas,scaleX:$.scale,scaleY:q.scale,offsetX:d,offsetY:f}}getSizeAndScale(t,e,s){const i=Math.max(Ib.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*s);return r>=i?r=i:s=r/t,{scale:s,size:r}}clipBbox(t,e,s,i,r){const o=i-e,a=r-s;t.ctx.rect(e,s,o,a),ee.axialAlignedBoundingBox([e,s,i,r],Fn(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,s){const i=t.ctx,r=t.current;switch(e){case A9.COLORED:const{fillStyle:o,strokeStyle:a}=this.ctx;i.fillStyle=r.fillColor=o,i.strokeStyle=r.strokeColor=a;break;case A9.UNCOLORED:i.fillStyle=i.strokeStyle=s,r.fillColor=r.strokeColor=s;break;default:throw new XX(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,s,i,r){let o=s;i!==Bs.SHADING&&(o=ee.transform(o,e.baseTransform),this.matrix&&(o=ee.transform(o,this.matrix)));const a=this.createPatternCanvas(e,r);let l=new DOMMatrix(o);l=l.translate(a.offsetX,a.offsetY),l=l.scale(1/a.scaleX,1/a.scaleY);const c=t.createPattern(a.canvas,"repeat");return c.setTransform(l),c}}function $Z({src:n,srcPos:t=0,dest:e,width:s,height:i,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const a=zs.isLittleEndian?4278190080:255,[l,c]=o?[r,a]:[a,r],u=s>>3,d=s&7,f=n.length;e=new Uint32Array(e.buffer);let h=0;for(let g=0;g<i;g++){for(const b=t+u;t<b;t++){const y=t<f?n[t]:255;e[h++]=y&128?c:l,e[h++]=y&64?c:l,e[h++]=y&32?c:l,e[h++]=y&16?c:l,e[h++]=y&8?c:l,e[h++]=y&4?c:l,e[h++]=y&2?c:l,e[h++]=y&1?c:l}if(d===0)continue;const m=t<f?n[t++]:255;for(let b=0;b<d;b++)e[h++]=m&1<<7-b?c:l}return{srcPos:t,destPos:h}}const S9=16,E9=100,BZ=15,T9=10,xi=16,D0=new DOMMatrix,ji=new Float32Array(2),ru=new Float32Array([1/0,1/0,-1/0,-1/0]);function jZ(n,t){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){t.save(),this.__originalSave()},n.restore=function(){t.restore(),this.__originalRestore()},n.translate=function(e,s){t.translate(e,s),this.__originalTranslate(e,s)},n.scale=function(e,s){t.scale(e,s),this.__originalScale(e,s)},n.transform=function(e,s,i,r,o,a){t.transform(e,s,i,r,o,a),this.__originalTransform(e,s,i,r,o,a)},n.setTransform=function(e,s,i,r,o,a){t.setTransform(e,s,i,r,o,a),this.__originalSetTransform(e,s,i,r,o,a)},n.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},n.rotate=function(e){t.rotate(e),this.__originalRotate(e)},n.clip=function(e){t.clip(e),this.__originalClip(e)},n.moveTo=function(e,s){t.moveTo(e,s),this.__originalMoveTo(e,s)},n.lineTo=function(e,s){t.lineTo(e,s),this.__originalLineTo(e,s)},n.bezierCurveTo=function(e,s,i,r,o,a){t.bezierCurveTo(e,s,i,r,o,a),this.__originalBezierCurveTo(e,s,i,r,o,a)},n.rect=function(e,s,i,r){t.rect(e,s,i,r),this.__originalRect(e,s,i,r)},n.closePath=function(){t.closePath(),this.__originalClosePath()},n.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class UZ{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,s){let i;return this.cache[t]!==void 0?(i=this.cache[t],this.canvasFactory.reset(i,e,s)):(i=this.canvasFactory.create(e,s),this.cache[t]=i),i}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function $1(n,t,e,s,i,r,o,a,l,c){const[u,d,f,h,g,m]=Fn(n);if(d===0&&f===0){const x=o*u+g,_=Math.round(x),C=a*h+m,A=Math.round(C),I=(o+l)*u+g,R=Math.abs(Math.round(I)-_)||1,L=(a+c)*h+m,P=Math.abs(Math.round(L)-A)||1;return n.setTransform(Math.sign(u),0,0,Math.sign(h),_,A),n.drawImage(t,e,s,i,r,0,0,R,P),n.setTransform(u,d,f,h,g,m),[R,P]}if(u===0&&h===0){const x=a*f+g,_=Math.round(x),C=o*d+m,A=Math.round(C),I=(a+c)*f+g,R=Math.abs(Math.round(I)-_)||1,L=(o+l)*d+m,P=Math.abs(Math.round(L)-A)||1;return n.setTransform(0,Math.sign(d),Math.sign(f),0,_,A),n.drawImage(t,e,s,i,r,0,0,P,R),n.setTransform(u,d,f,h,g,m),[P,R]}n.drawImage(t,e,s,i,r,o,a,l,c);const b=Math.hypot(u,d),y=Math.hypot(f,h);return[b*l,y*c]}class L9{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Wm;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Ns.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e,s){s?.(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=ru.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Bs.FILL,e=null){const s=this.minMax.slice();if(t===Bs.STROKE){e||wn("Stroke bounding box must include transform."),ee.singularValueDecompose2dScale(e,ji);const i=ji[0]*this.lineWidth/2,r=ji[1]*this.lineWidth/2;s[0]-=i,s[1]-=r,s[2]+=i,s[3]+=r}return s}updateClipFromPath(){const t=ee.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(ru,0)}getClippedPathBoundingBox(t=Bs.FILL,e=null){return ee.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function P9(n,t){if(t instanceof ImageData){n.putImageData(t,0,0);return}const e=t.height,s=t.width,i=e%xi,r=(e-i)/xi,o=i===0?r:r+1,a=n.createImageData(s,xi);let l=0,c;const u=t.data,d=a.data;let f,h,g,m;if(t.kind===ip.GRAYSCALE_1BPP){const b=u.byteLength,y=new Uint32Array(d.buffer,0,d.byteLength>>2),x=y.length,_=s+7>>3,C=4294967295,A=zs.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(g=f<r?xi:i,c=0,h=0;h<g;h++){const I=b-l;let R=0;const L=I>_?s:I*8-7,P=L&-8;let V=0,T=0;for(;R<P;R+=8)T=u[l++],y[c++]=T&128?C:A,y[c++]=T&64?C:A,y[c++]=T&32?C:A,y[c++]=T&16?C:A,y[c++]=T&8?C:A,y[c++]=T&4?C:A,y[c++]=T&2?C:A,y[c++]=T&1?C:A;for(;R<L;R++)V===0&&(T=u[l++],V=128),y[c++]=T&V?C:A,V>>=1}for(;c<x;)y[c++]=0;n.putImageData(a,0,f*xi)}}else if(t.kind===ip.RGBA_32BPP){for(h=0,m=s*xi*4,f=0;f<r;f++)d.set(u.subarray(l,l+m)),l+=m,n.putImageData(a,0,h),h+=xi;f<o&&(m=s*i*4,d.set(u.subarray(l,l+m)),n.putImageData(a,0,h))}else if(t.kind===ip.RGB_24BPP)for(g=xi,m=s*g,f=0;f<o;f++){for(f>=r&&(g=i,m=s*g),c=0,h=m;h--;)d[c++]=u[l++],d[c++]=u[l++],d[c++]=u[l++],d[c++]=255;n.putImageData(a,0,f*xi)}else throw new Error(`bad image kind: ${t.kind}`)}function I9(n,t){if(t.bitmap){n.drawImage(t.bitmap,0,0);return}const e=t.height,s=t.width,i=e%xi,r=(e-i)/xi,o=i===0?r:r+1,a=n.createImageData(s,xi);let l=0;const c=t.data,u=a.data;for(let d=0;d<o;d++){const f=d<r?xi:i;({srcPos:l}=$Z({src:c,srcPos:l,dest:u,width:s,height:f,nonBlackColor:0})),n.putImageData(a,0,d*xi)}}function Id(n,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of e)n[s]!==void 0&&(t[s]=n[s]);n.setLineDash!==void 0&&(t.setLineDash(n.getLineDash()),t.lineDashOffset=n.lineDashOffset)}function B1(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:t}=n;t!=="none"&&t!==""&&(n.filter="none")}function D9(n,t){if(t)return!0;ee.singularValueDecompose2dScale(n,ji);const e=Math.fround(uo.pixelRatio*Nu.PDF_TO_CSS_UNITS);return ji[0]<=e&&ji[1]<=e}const zZ=["butt","round","square"],HZ=["miter","round","bevel"],VZ={},M9={};class yu{constructor(t,e,s,i,r,{optionalContentConfig:o,markedContentStack:a=null},l,c,u){this.ctx=t,this.current=new L9(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=s,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new UZ(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=u??null}getObject(t,e,s=null){return typeof e=="string"?(this.dependencyTracker?.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):s}beginDrawing({transform:t,viewport:e,transparency:s=!1,background:i=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=a,s){const l=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...Fn(this.compositeCtx))}this.ctx.save(),B1(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Fn(this.ctx)}executeOperatorList(t,e,s,i,r){const o=t.argsArray,a=t.fnArray;let l=e||0;const c=o.length;if(c===l)return l;const u=c-l>T9&&typeof s=="function",d=u?Date.now()+BZ:0;let f=0;const h=this.commonObjs,g=this.objs;let m,b;for(;;){if(i!==void 0&&l===i.nextBreakPoint)return i.breakIt(l,s),l;if(!r||r(l))if(m=a[l],b=o[l]??null,m!==Uh.dependency)b===null?this[m](l):this[m](l,...b);else for(const y of b){this.dependencyTracker?.recordNamedData(y,l);const x=y.startsWith("g_")?h:g;if(!x.has(y))return x.get(y,s),l}if(l++,l===c)return l;if(u&&++f>T9){if(Date.now()>d)return s(),l;f=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const s=t.width??t.displayWidth,i=t.height??t.displayHeight;let r=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),a=s,l=i,c="prescale1",u,d;for(;r>2&&a>1||o>2&&l>1;){let f=a,h=l;r>2&&a>1&&(f=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),r/=a/f),o>2&&l>1&&(h=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,o/=l/h),u=this.cachedCanvases.getCanvas(c,f,h),d=u.context,d.clearRect(0,0,f,h),d.drawImage(t,0,0,a,l,0,0,f,h),t=u.canvas,a=f,l=h,c=c==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:a,paintHeight:l}}_createMaskCanvas(t,e){const s=this.ctx,{width:i,height:r}=e,o=this.current.fillColor,a=this.current.patternFill,l=Fn(s);let c,u,d,f;if((e.bitmap||e.data)&&e.count>1){const V=e.bitmap||e.data.buffer;u=JSON.stringify(a?l:[l.slice(0,4),o]),c=this._cachedBitmapsMap.get(V),c||(c=new Map,this._cachedBitmapsMap.set(V,c));const T=c.get(u);if(T&&!a){const D=Math.round(Math.min(l[0],l[2])+l[4]),K=Math.round(Math.min(l[1],l[3])+l[5]);return this.dependencyTracker?.recordDependencies(t,sr.transformAndFill),{canvas:T,offsetX:D,offsetY:K}}d=T}d||(f=this.cachedCanvases.getCanvas("maskCanvas",i,r),I9(f.context,e));let h=ee.transform(l,[1/i,0,0,-1/r,0,0]);h=ee.transform(h,[1,0,0,1,0,-r]);const g=ru.slice();ee.axialAlignedBoundingBox([0,0,i,r],h,g);const[m,b,y,x]=g,_=Math.round(y-m)||1,C=Math.round(x-b)||1,A=this.cachedCanvases.getCanvas("fillCanvas",_,C),I=A.context,R=m,L=b;I.translate(-R,-L),I.transform(...h),d||(d=this._scaleImage(f.canvas,Kr(I)),d=d.img,c&&a&&c.set(u,d)),I.imageSmoothingEnabled=D9(Fn(I),e.interpolate),$1(I,d,0,0,d.width,d.height,0,0,i,r),I.globalCompositeOperation="source-in";const P=ee.transform(Kr(I),[1,0,0,1,-R,-L]);return I.fillStyle=a?o.getPattern(s,this,P,Bs.FILL,t):o,I.fillRect(0,0,i,r),c&&!a&&(this.cachedCanvases.delete("fillCanvas"),c.set(u,A.canvas)),this.dependencyTracker?.recordDependencies(t,sr.transformAndFill),{canvas:A.canvas,offsetX:Math.round(R),offsetY:Math.round(L)}}setLineWidth(t,e){this.dependencyTracker?.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=zZ[e]}setLineJoin(t,e){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=HZ[e]}setMiterLimit(t,e){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,s){this.dependencyTracker?.recordSimpleData("dash",t);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(e),i.lineDashOffset=s)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){for(const[s,i]of e)switch(s){case"LW":this.setLineWidth(t,i);break;case"LC":this.setLineCap(t,i);break;case"LJ":this.setLineJoin(t,i);break;case"ML":this.setMiterLimit(t,i);break;case"D":this.setDash(t,i[0],i[1]);break;case"RI":this.setRenderingIntent(t,i);break;case"FL":this.setFlatness(t,i);break;case"Font":this.setFont(t,i[0],i[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=i;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=i;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=i;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,s=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(i,e,s);this.suspendedCtx=this.ctx;const o=this.ctx=r.context;o.setTransform(this.suspendedCtx.getTransform()),Id(this.suspendedCtx,o),jZ(o,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Id(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,s,i){const r=i[0],o=i[1],a=i[2]-r,l=i[3]-o;a===0||l===0||(this.genericComposeSMask(e.context,s,a,l,e.subtype,e.backdrop,e.transferMap,r,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,e,s,i,r,o,a,l,c,u,d){let f=t.canvas,h=l-u,g=c-d;if(o)if(h<0||g<0||h+s>f.width||g+i>f.height){const b=this.cachedCanvases.getCanvas("maskExtension",s,i),y=b.context;y.drawImage(f,-h,-g),y.globalCompositeOperation="destination-atop",y.fillStyle=o,y.fillRect(0,0,s,i),y.globalCompositeOperation="source-over",f=b.canvas,h=g=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const b=new Path2D;b.rect(h,g,s,i),t.clip(b),t.globalCompositeOperation="destination-atop",t.fillStyle=o,t.fillRect(h,g,s,i),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&a?e.filter=this.filterFactory.addAlphaFilter(a):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(a));const m=new Path2D;m.rect(l,c,s,i),e.clip(m),e.globalCompositeOperation="destination-in",e.drawImage(f,h,g,s,i,l,c,s,i),e.restore()}save(t){this.inSMaskMode&&Id(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Id(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,s,i,r,o,a){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(e,s,i,r,o,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,s,i){let[r]=s;if(!i){r||=s[0]=new Path2D,this[e](t,r);return}if(this.dependencyTracker!==null){const o=e===Uh.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,i[0]-o,i[2]+o,i[1]-o,i[3]+o).recordDependencies(t,["transform"])}r instanceof Path2D||(r=s[0]=oC(r)),ee.axialAlignedBoundingBox(i,Fn(this.ctx),this.current.minMax),this[e](t,r),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,s=!0){const i=this.ctx,r=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof r=="object"&&r?.getPattern){const o=r.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=r.getPattern(i,this,Kr(i),Bs.STROKE,t),o){const a=new Path2D;a.addPath(e,i.getTransform().invertSelf().multiplySelf(o)),e=a}this.rescaleAndStroke(e,!1),i.restore()}else this.rescaleAndStroke(e,!0);this.dependencyTracker?.recordDependencies(t,sr.stroke),s&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(Bs.STROKE,Fn(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,s=!0){const i=this.ctx,r=this.current.fillColor,o=this.current.patternFill;let a=!1;if(o){const c=r.isModifyingCurrentTransform()?i.getTransform():null;if(this.dependencyTracker?.save(t),i.save(),i.fillStyle=r.getPattern(i,this,Kr(i),Bs.FILL,t),c){const u=new Path2D;u.addPath(e,i.getTransform().invertSelf().multiplySelf(c)),e=u}a=!0}const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(i.fill(e,"evenodd"),this.pendingEOFill=!1):i.fill(e)),this.dependencyTracker?.recordDependencies(t,sr.fill),a&&(i.restore(),this.dependencyTracker?.restore(t)),s&&this.consumePath(t,e,l)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){this.ctx.fill(e),this.dependencyTracker?.recordDependencies(t,sr.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=VZ}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=M9}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,s=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;e!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",t),i.recordCloseMarker(t)}if(e!==void 0){const i=new Path2D,r=s.getTransform().invertSelf();for(const{transform:o,x:a,y:l,fontSize:c,path:u}of e)u&&i.addPath(u,new DOMMatrix(o).preMultiplySelf(r).translate(a,l).scale(c,-c));s.clip(i)}delete this.pendingTextPaths}setCharSpacing(t,e){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,s){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const i=this.commonObjs.get(e),r=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=i.fontMatrix||Wm,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&Pe("Invalid font matrix for font "+e),s<0?(s=-s,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=s,i.isType3Font)return;const o=i.loadedName||"sans-serif",a=i.systemFontInfo?.css||`"${o}", ${i.fallbackName}`;let l="normal";i.black?l="900":i.bold&&(l="bold");const c=i.italic?"italic":"normal";let u=s;s<S9?u=S9:s>E9&&(u=E9),this.current.fontSizeScale=s/u,this.ctx.font=`${c} ${l} ${u}px ${a}`}setTextRenderingMode(t,e){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,s){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=s}setLeadingMoveText(t,e,s){this.setLeading(t,-s),this.moveText(t,e,s)}setTextMatrix(t,e){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);const{current:s}=this;s.textMatrix=e,s.textMatrixScale=Math.hypot(e[0],e[1]),s.x=s.lineX=0,s.y=s.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#s(t,e,s){const i=new Path2D;return i.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(e)),i}paintChar(t,e,s,i,r,o){const a=this.ctx,l=this.current,c=l.font,u=l.textRenderingMode,d=l.fontSize/l.fontSizeScale,f=u&Ns.FILL_STROKE_MASK,h=!!(u&Ns.ADD_TO_PATH_FLAG),g=l.patternFill&&!c.missingFile,m=l.patternStroke&&!c.missingFile;let b;if((c.disableFontFace||h||g||m)&&!c.missingFile&&(b=c.getPathGenerator(this.commonObjs,e)),b&&(c.disableFontFace||g||m)){a.save(),a.translate(s,i),a.scale(d,-d),this.dependencyTracker?.recordCharacterBBox(t,a,c);let y;if(f===Ns.FILL||f===Ns.FILL_STROKE)if(r){y=a.getTransform(),a.setTransform(...r);const x=this.#s(b,y,r);a.fill(x)}else a.fill(b);if(f===Ns.STROKE||f===Ns.FILL_STROKE)if(o){y||=a.getTransform(),a.setTransform(...o);const{a:x,b:_,c:C,d:A}=y,I=ee.inverseTransform(o),R=ee.transform([x,_,C,A,0,0],I);ee.singularValueDecompose2dScale(R,ji),a.lineWidth*=Math.max(ji[0],ji[1])/d,a.stroke(this.#s(b,y,o))}else a.lineWidth/=d,a.stroke(b);a.restore()}else(f===Ns.FILL||f===Ns.FILL_STROKE)&&(a.fillText(e,s,i),this.dependencyTracker?.recordCharacterBBox(t,a,c,d,s,i,()=>a.measureText(e))),(f===Ns.STROKE||f===Ns.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,a,c,d,s,i,()=>a.measureText(e)).recordDependencies(t,sr.stroke),a.strokeText(e,s,i));h&&((this.pendingTextPaths||=[]).push({transform:Fn(a),x:s,y:i,fontSize:d,path:b}),this.dependencyTracker?.recordCharacterBBox(t,a,c,d,s,i))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let s=!1;for(let i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){s=!0;break}return Fe(this,"isFontSubpixelAAEnabled",s)}showText(t,e){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,sr.showText).resetBBox(t),this.current.textRenderingMode&Ns.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const s=this.current,i=s.font;if(i.isType3Font){this.showType3Text(t,e),this.dependencyTracker?.recordShowTextOperation(t);return}const r=s.fontSize;if(r===0){this.dependencyTracker?.recordOperation(t);return}const o=this.ctx,a=s.fontSizeScale,l=s.charSpacing,c=s.wordSpacing,u=s.fontDirection,d=s.textHScale*u,f=e.length,h=i.vertical,g=h?1:-1,m=i.defaultVMetrics,b=r*s.fontMatrix[0],y=s.textRenderingMode===Ns.FILL&&!i.disableFontFace&&!s.patternFill;o.save(),s.textMatrix&&o.transform(...s.textMatrix),o.translate(s.x,s.y+s.textRise),u>0?o.scale(d,-1):o.scale(d,1);let x,_;if(s.patternFill){o.save();const L=s.fillColor.getPattern(o,this,Kr(o),Bs.FILL,t);x=Fn(o),o.restore(),o.fillStyle=L}if(s.patternStroke){o.save();const L=s.strokeColor.getPattern(o,this,Kr(o),Bs.STROKE,t);_=Fn(o),o.restore(),o.strokeStyle=L}let C=s.lineWidth;const A=s.textMatrixScale;if(A===0||C===0){const L=s.textRenderingMode&Ns.FILL_STROKE_MASK;(L===Ns.STROKE||L===Ns.FILL_STROKE)&&(C=this.getSinglePixelWidth())}else C/=A;if(a!==1&&(o.scale(a,a),C/=a),o.lineWidth=C,i.isInvalidPDFjsFont){const L=[];let P=0;for(const T of e)L.push(T.unicode),P+=T.width;const V=L.join("");if(o.fillText(V,0,0),this.dependencyTracker!==null){const T=o.measureText(V);this.dependencyTracker.recordBBox(t,this.ctx,-T.actualBoundingBoxLeft,T.actualBoundingBoxRight,-T.actualBoundingBoxAscent,T.actualBoundingBoxDescent).recordShowTextOperation(t)}s.x+=P*b*d,o.restore(),this.compose();return}let I=0,R;for(R=0;R<f;++R){const L=e[R];if(typeof L=="number"){I+=g*L*r/1e3;continue}let P=!1;const V=(L.isSpace?c:0)+l,T=L.fontChar,D=L.accent;let K,$,q=L.width;if(h){const O=L.vmetric||m,et=-(L.vmetric?O[1]:q*.5)*b,gt=O[2]*b;q=O?-O[0]:q,K=et/a,$=(I+gt)/a}else K=I/a,$=0;let W;if(i.remeasure&&q>0){W=o.measureText(T);const O=W.width*1e3/r*a;if(q<O&&this.isFontSubpixelAAEnabled){const et=q/O;P=!0,o.save(),o.scale(et,1),K/=et}else q!==O&&(K+=(q-O)/2e3*r/a)}if(this.contentVisible&&(L.isInFont||i.missingFile)){if(y&&!D)o.fillText(T,K,$),this.dependencyTracker?.recordCharacterBBox(t,o,W?{bbox:null}:i,r/a,K,$,()=>W??o.measureText(T));else if(this.paintChar(t,T,K,$,x,_),D){const O=K+r*D.offset.x/a,et=$-r*D.offset.y/a;this.paintChar(t,D.fontChar,O,et,x,_)}}const F=h?q*b-V*u:q*b+V*u;I+=F,P&&o.restore()}h?s.y-=I:s.x+=I*d,o.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,e){const s=this.ctx,i=this.current,r=i.font,o=i.fontSize,a=i.fontDirection,l=r.vertical?1:-1,c=i.charSpacing,u=i.wordSpacing,d=i.textHScale*a,f=i.fontMatrix||Wm,h=e.length,g=i.textRenderingMode===Ns.INVISIBLE;let m,b,y,x;if(g||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),i.textMatrix&&s.transform(...i.textMatrix),s.translate(i.x,i.y+i.textRise),s.scale(d,a);const _=this.dependencyTracker;for(this.dependencyTracker=_?new $p(_,t):null,m=0;m<h;++m){if(b=e[m],typeof b=="number"){x=l*b*o/1e3,this.ctx.translate(x,0),i.x+=x*d;continue}const C=(b.isSpace?u:0)+c,A=r.charProcOperatorList[b.operatorListId];A?this.contentVisible&&(this.save(),s.scale(o,o),s.transform(...f),this.executeOperatorList(A),this.restore()):Pe(`Type3 character "${b.operatorListId}" is not available.`);const I=[b.width,0];ee.applyTransform(I,f),y=I[0]*o+C,s.translate(y,0),i.x+=y*d}s.restore(),_&&(this.dependencyTracker=_)}setCharWidth(t,e,s){}setCharWidthAndBounds(t,e,s,i,r,o,a){const l=new Path2D;l.rect(i,r,o-i,a-r),this.ctx.clip(l),this.dependencyTracker?.recordBBox(t,this.ctx,i,o,r,a).recordClipBox(t,this.ctx,i,o,r,a),this.endPath(t)}getColorN_Pattern(t,e){let s;if(e[0]==="TilingPattern"){const i=this.baseTransform||Fn(this.ctx),r={createCanvasGraphics:(o,a)=>new yu(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new $p(this.dependencyTracker,a,!0):null)};s=new Ib(e,this.ctx,r,i)}else s=this._getPattern(t,e[1],e[2]);return s}setStrokeColorN(t,...e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,s=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=FZ(this.getObject(t,e)),this.cachedPatterns.set(e,i)),s&&(i.matrix=s),i}shadingFill(t,e){if(!this.contentVisible)return;const s=this.ctx;this.save(t);const i=this._getPattern(t,e);s.fillStyle=i.getPattern(s,this,Kr(s),Bs.SHADING,t);const r=Kr(s);if(r){const{width:o,height:a}=s.canvas,l=ru.slice();ee.axialAlignedBoundingBox([0,0,o,a],r,l);const[c,u,d,f]=l;this.ctx.fillRect(c,u,d-c,f-u)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,sr.transform).recordDependencies(t,sr.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){wn("Should not call beginInlineImage")}beginImageData(){wn("Should not call beginImageData")}paintFormXObjectBegin(t,e,s){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=Fn(this.ctx),s)){ee.axialAlignedBoundingBox(s,this.baseTransform,this.current.minMax);const[i,r,o,a]=s,l=new Path2D;l.rect(i,r,o-i,a-r),this.ctx.clip(l),this.dependencyTracker?.recordClipBox(t,this.ctx,i,o,r,a),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;e.isolated||Sg("TODO: Support non-isolated groups."),e.knockout&&Pe("Knockout groups not supported.");const i=Fn(s);if(e.matrix&&s.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=ru.slice();ee.axialAlignedBoundingBox(e.bbox,Fn(s),r);const o=[0,0,s.canvas.width,s.canvas.height];r=ee.intersect(r,o)||[0,0,0,0];const a=Math.floor(r[0]),l=Math.floor(r[1]),c=Math.max(Math.ceil(r[2])-a,1),u=Math.max(Math.ceil(r[3])-l,1);this.current.startNewPathAndClipBox([0,0,c,u]);let d="groupAt"+this.groupLevel;e.smask&&(d+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(d,c,u),h=f.context;h.translate(-a,-l),h.transform(...i);let g=new Path2D;const[m,b,y,x]=e.bbox;if(g.rect(m,b,y-m,x-b),e.matrix){const _=new Path2D;_.addPath(g,new DOMMatrix(e.matrix)),g=_}h.clip(g),e.smask&&this.smaskStack.push({canvas:f.canvas,context:h,offsetX:a,offsetY:l,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(s.setTransform(1,0,0,1,0,0),s.translate(a,l),s.save()),Id(s,h),this.ctx=h,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(s),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(t,e){if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const r=Fn(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...r);const o=ru.slice();ee.axialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],r,o),this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(t,e,s,i,r,o){if(this.#t(),B1(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const a=s[2]-s[0],l=s[3]-s[1];if(o&&this.annotationCanvasMap){i=i.slice(),i[4]-=s[0],i[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=a,s[3]=l,ee.singularValueDecompose2dScale(Fn(this.ctx),ji);const{viewportScale:c}=this,u=Math.ceil(a*this.outputScaleX*c),d=Math.ceil(l*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(u,d);const{canvas:f,context:h}=this.annotationCanvas;this.annotationCanvasMap.set(e,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=h,this.ctx.save(),this.ctx.setTransform(ji[0],0,0,-ji[1],0,l*ji[1]),B1(this.ctx)}else{B1(this.ctx),this.endPath(t);const c=new Path2D;c.rect(s[0],s[1],a,l),this.ctx.clip(c)}}this.current=new L9(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...i),this.transform(t,...r)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){if(!this.contentVisible)return;const s=e.count;e=this.getObject(t,e.data,e),e.count=s;const i=this.ctx,r=this._createMaskCanvas(t,e),o=r.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(o,r.offsetX,r.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,r.offsetX,r.offsetX+o.width,r.offsetY,r.offsetY+o.height).recordOperation(t),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,s,i=0,r=0,o,a){if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const l=this.ctx;l.save();const c=Fn(l);l.transform(s,i,r,o,0,0);const u=this._createMaskCanvas(t,e);l.setTransform(1,0,0,1,u.offsetX-c[4],u.offsetY-c[5]),this.dependencyTracker?.resetBBox(t);for(let d=0,f=a.length;d<f;d+=2){const h=ee.transform(c,[s,i,r,o,a[d],a[d+1]]);l.drawImage(u.canvas,h[4],h[5]),this.dependencyTracker?.recordBBox(t,this.ctx,h[4],h[4]+u.canvas.width,h[5],h[5]+u.canvas.height)}l.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,e){if(!this.contentVisible)return;const s=this.ctx,i=this.current.fillColor,r=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,sr.transformAndFill);for(const o of e){const{data:a,width:l,height:c,transform:u}=o,d=this.cachedCanvases.getCanvas("maskCanvas",l,c),f=d.context;f.save();const h=this.getObject(t,a,o);I9(f,h),f.globalCompositeOperation="source-in",f.fillStyle=r?i.getPattern(f,this,Kr(s),Bs.FILL,t):i,f.fillRect(0,0,l,c),f.restore(),s.save(),s.transform(...u),s.scale(1,-1),$1(s,d.canvas,0,0,l,c,0,-1,1,1),this.dependencyTracker?.recordBBox(t,s,0,l,0,c),s.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const s=this.getObject(t,e);if(!s){Pe("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,s)}paintImageXObjectRepeat(t,e,s,i,r){if(!this.contentVisible)return;const o=this.getObject(t,e);if(!o){Pe("Dependent image isn't ready yet");return}const a=o.width,l=o.height,c=[];for(let u=0,d=r.length;u<d;u+=2)c.push({transform:[s,0,0,i,r[u],r[u+1]],x:0,y:0,w:a,h:l});this.paintInlineImageXObjectGroup(t,o,c)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:s,height:i}=t,r=this.cachedCanvases.getCanvas("inlineImage",s,i),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",r.canvas}paintInlineImageXObject(t,e){if(!this.contentVisible)return;const s=e.width,i=e.height,r=this.ctx;this.save(t);const{filter:o}=r;o!=="none"&&o!==""&&(r.filter="none"),r.scale(1/s,-1/i);let a;if(e.bitmap)a=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)a=e;else{const u=this.cachedCanvases.getCanvas("inlineImage",s,i).context;P9(u,e),a=this.applyTransferMapsToCanvas(u)}const l=this._scaleImage(a,Kr(r));r.imageSmoothingEnabled=D9(Fn(r),e.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,r,0,s,-i,0).recordDependencies(t,sr.imageXObject).recordOperation(t),$1(r,l.img,0,0,l.paintWidth,l.paintHeight,0,-i,s,i),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,s){if(!this.contentVisible)return;const i=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const o=e.width,a=e.height,c=this.cachedCanvases.getCanvas("inlineImage",o,a).context;P9(c,e),r=this.applyTransferMapsToCanvas(c)}this.dependencyTracker?.resetBBox(t);for(const o of s)i.save(),i.transform(...o.transform),i.scale(1,-1),$1(i,r,o.x,o.y,o.w,o.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,i,0,1,-1,0),i.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,sr.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,s){}beginMarkedContent(t,e){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,s){this.dependencyTracker?.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,s){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const r=this.ctx;this.pendingClip?(i||(this.pendingClip===M9?r.clip(e,"evenodd"):r.clip(e)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Fn(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),i=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,i)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:s,c:i,d:r}=this.ctx.getTransform();let o,a;if(s===0&&i===0){const l=Math.abs(e),c=Math.abs(r);if(l===c)if(t===0)o=a=1/l;else{const u=l*t;o=a=u<1?1/u:1}else if(t===0)o=1/l,a=1/c;else{const u=l*t,d=c*t;o=u<1?1/u:1,a=d<1?1/d:1}}else{const l=Math.abs(e*r-s*i),c=Math.hypot(e,s),u=Math.hypot(i,r);if(t===0)o=u/l,a=c/l;else{const d=t*l;o=u>d?u/d:1,a=c>d?c/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:s,current:{lineWidth:i}}=this,[r,o]=this.getScaleForStroking();if(r===o){s.lineWidth=(i||1)*r,s.stroke(t);return}const a=s.getLineDash();e&&s.save(),s.scale(r,o),D0.a=1/r,D0.d=1/o;const l=new Path2D;if(l.addPath(t,D0),a.length>0){const c=Math.max(r,o);s.setLineDash(a.map(u=>u/c)),s.lineDashOffset/=c}s.lineWidth=i||1,s.stroke(l),e&&s.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const n in Uh)yu.prototype[n]!==void 0&&(yu.prototype[Uh[n]]=yu.prototype[n]);class wu{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class qZ{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const tu=Symbol("INTERNAL");class WZ{#t=!1;#e=!1;#s=!1;#n=!0;constructor(t,{name:e,intent:s,usage:i,rbGroups:r}){this.#t=!!(t&Bi.DISPLAY),this.#e=!!(t&Bi.PRINT),this.name=e,this.intent=s,this.usage=i,this.rbGroups=r}get visible(){if(this.#s)return this.#n;if(!this.#n)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,s=!1){t!==tu&&wn("Internal method `_setVisible` called."),this.#s=s,this.#n=e}}class GZ{#t=null;#e=new Map;#s=null;#n=null;constructor(t,e=Bi.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#n=t.order;for(const s of t.groups)this.#e.set(s.id,new WZ(e,s));if(t.baseState==="OFF")for(const s of this.#e.values())s._setVisible(tu,!1);for(const s of t.on)this.#e.get(s)._setVisible(tu,!0);for(const s of t.off)this.#e.get(s)._setVisible(tu,!1);this.#s=this.getHash()}}#o(t){const e=t.length;if(e<2)return!0;const s=t[0];for(let i=1;i<e;i++){const r=t[i];let o;if(Array.isArray(r))o=this.#o(r);else if(this.#e.has(r))o=this.#e.get(r).visible;else return Pe(`Optional content group not found: ${r}`),!0;switch(s){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return s==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return Sg("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(Pe(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#o(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return Pe(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return Pe(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return Pe(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return Pe(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return Pe(`Unknown optional content policy ${t.policy}.`),!0}return Pe(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,s=!0){const i=this.#e.get(t);if(!i){Pe(`Optional content group not found: ${t}`);return}if(s&&e&&i.rbGroups.length)for(const r of i.rbGroups)for(const o of r)o!==t&&this.#e.get(o)?._setVisible(tu,!1,!0);i._setVisible(tu,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let s;for(const i of t){switch(i){case"ON":case"OFF":case"Toggle":s=i;continue}const r=this.#e.get(i);if(r)switch(s){case"ON":this.setVisibility(i,!0,e);break;case"OFF":this.setVisibility(i,!1,e);break;case"Toggle":this.setVisibility(i,!r.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#s===null||this.getHash()===this.#s}getOrder(){return this.#e.size?this.#n?this.#n.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new lC;for(const[e,s]of this.#e)t.update(`${e}:${s.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class YZ{constructor(t,{disableRange:e=!1,disableStream:s=!1}){Ke(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:r,progressiveDone:o,contentDispositionFilename:a}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,r?.length>0){const l=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!e,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),t.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),t.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const s=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const i=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(s),!0)});Ke(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Ke(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new KZ(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new XZ(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class KZ{constructor(t,e,s=!1,i=null){this._stream=t,this._done=s||!1,this._filename=Ab(i)?i:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class XZ{constructor(t,e,s){this._stream=t,this._begin=e,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function ZZ(n){let t=!0,e=s("filename\\*","i").exec(n);if(e){e=e[1];let u=a(e);return u=unescape(u),u=l(u),u=c(u),r(u)}if(e=o(n),e){const u=c(e);return r(u)}if(e=s("filename","i").exec(n),e){e=e[1];let u=a(e);return u=c(u),r(u)}function s(u,d){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function i(u,d){if(u){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(u,{fatal:!0}),h=of(d);d=f.decode(h),t=!1}catch{}}return d}function r(u){return t&&/[\x80-\xff]/.test(u)&&(u=i("utf-8",u),t&&(u=i("iso-8859-1",u))),u}function o(u){const d=[];let f;const h=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=h.exec(u))!==null;){let[,m,b,y]=f;if(m=parseInt(m,10),m in d){if(m===0)break;continue}d[m]=[b,y]}const g=[];for(let m=0;m<d.length&&m in d;++m){let[b,y]=d[m];y=a(y),b&&(y=unescape(y),m===0&&(y=l(y))),g.push(y)}return g.join("")}function a(u){if(u.startsWith('"')){const d=u.slice(1).split('\\"');for(let f=0;f<d.length;++f){const h=d[f].indexOf('"');h!==-1&&(d[f]=d[f].slice(0,h),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}u=d.join('"')}return u}function l(u){const d=u.indexOf("'");if(d===-1)return u;const f=u.slice(0,d),g=u.slice(d+1).replace(/^[^']*'/,"");return i(f,g)}function c(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,h,g){if(h==="q"||h==="Q")return g=g.replaceAll("_"," "),g=g.replaceAll(/=([0-9a-fA-F]{2})/g,function(m,b){return String.fromCharCode(parseInt(b,16))}),i(f,g);try{g=atob(g)}catch{}return i(f,g)})}return""}function gC(n,t){const e=new Headers;if(!n||!t||typeof t!="object")return e;for(const s in t){const i=t[s];i!==void 0&&e.append(s,i)}return e}function Lg(n){return URL.parse(n)?.origin??null}function mC({responseHeaders:n,isHttp:t,rangeChunkSize:e,disableRange:s}){const i={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(n.get("Content-Length"),10);return!Number.isInteger(r)||(i.suggestedLength=r,r<=2*e)||s||!t||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function bC(n){const t=n.get("Content-Disposition");if(t){let e=ZZ(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Ab(e))return e}return null}function df(n,t){return new Fp(`Unexpected server response (${n}) while retrieving PDF "${t}".`,n,n===404||n===0&&t.startsWith("file:"))}function vC(n){return n===200||n===206}function yC(n,t,e){return{method:"GET",headers:n,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function wC(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(Pe(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class JZ{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=gC(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Ke(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new QZ(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new tJ(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class QZ{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const s=new Headers(t.headers),i=e.url;fetch(i,yC(s,this._withCredentials,this._abortController)).then(r=>{if(t._responseOrigin=Lg(r.url),!vC(r.status))throw df(r.status,i);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=r.headers,{allowRangeRequests:a,suggestedLength:l}=mC({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=bC(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ka("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:wC(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class tJ{constructor(t,e,s){this._stream=t,this._reader=null,this._loaded=0;const i=t.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const r=new Headers(t.headers);r.append("Range",`bytes=${e}-${s-1}`);const o=i.url;fetch(o,yC(r,this._withCredentials,this._abortController)).then(a=>{const l=Lg(a.url);if(l!==t._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${t._responseOrigin}".`);if(!vC(a.status))throw df(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:wC(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const M0=200,R0=206;function eJ(n){const t=n.response;return typeof t!="string"?t:of(t).buffer}class nJ{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:s}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=gC(this.isHttp,e),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,s=this.currXhrId++,i=this.pendingRequests[s]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[r,o]of this.headers)e.setRequestHeader(r,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),i.expectedStatus=R0):i.expectedStatus=M0,e.responseType="arraybuffer",Ke(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,s),e.onprogress=this.onProgress.bind(this,s),i.onHeadersReceived=t.onHeadersReceived,i.onDone=t.onDone,i.onError=t.onError,i.onProgress=t.onProgress,e.send(null),s}onProgress(t,e){const s=this.pendingRequests[t];s&&s.onProgress?.(e)}onStateChange(t,e){const s=this.pendingRequests[t];if(!s)return;const i=s.xhr;if(i.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),i.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],i.status===0&&this.isHttp){s.onError(i.status);return}const r=i.status||M0;if(!(r===M0&&s.expectedStatus===R0)&&r!==s.expectedStatus){s.onError(i.status);return}const a=eJ(i);if(r===R0){const l=i.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);c?s.onDone({begin:parseInt(c[1],10),chunk:a}):(Pe('Missing or invalid "Content-Range" header.'),s.onError(0))}else a?s.onDone({begin:0,chunk:a}):s.onError(i.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class sJ{constructor(t){this._source=t,this._manager=new nJ(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Ke(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new iJ(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const s=new rJ(this._manager,t,e);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class iJ{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=Lg(e.responseURL);const s=e.getAllResponseHeaders(),i=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{const[l,...c]=a.split(": ");return[l,c.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:o}=mC({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=bC(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=df(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class rJ{constructor(t,e,s){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=Lg(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=df(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const oJ=/^[a-z][a-z0-9\-+.]+:/i;function aJ(n){if(oJ.test(n))return new URL(n);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(n))}class lJ{constructor(t){this.source=t,this.url=aJ(t.url),Ke(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Ke(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new cJ(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new uJ(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class cJ{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=df(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ka("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class uJ{constructor(t,e,s){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=t.source;this._isStreamingSupported=!i.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:e,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Dd=Symbol("INITIAL_DATA");class _C{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:Dd}}get(t,e=null){if(e){const i=this.#e(t);return i.promise.then(()=>e(i.data)),null}const s=this.#t[t];if(!s||s.data===Dd)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const e=this.#t[t];return!!e&&e.data!==Dd}delete(t){const e=this.#t[t];return!e||e.data===Dd?!1:(delete this.#t[t],!0)}resolve(t,e=null){const s=this.#e(t);s.data=e,s.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==Dd&&(yield[t,e])}}}const dJ=1e5,R9=30;class ci{#t=Promise.withResolvers();#e=null;#s=!1;#n=!!globalThis.FontInspector?.enabled;#o=null;#r=null;#i=0;#a=0;#c=null;#l=null;#h=0;#d=0;#f=Object.create(null);#m=[];#g=null;#u=[];#p=new WeakMap;#b=null;static#y=new Map;static#v=new Map;static#A=new WeakMap;static#C=null;static#_=new Set;constructor({textContentSource:t,container:e,viewport:s}){if(t instanceof ReadableStream)this.#g=t;else if(typeof t=="object")this.#g=new ReadableStream({start(l){l.enqueue(t),l.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=e,this.#d=s.scale*uo.pixelRatio,this.#h=s.rotation,this.#r={div:null,properties:null,ctx:null};const{pageWidth:i,pageHeight:r,pageX:o,pageY:a}=s.rawDims;this.#b=[1,0,0,-1,-o,a+r],this.#a=i,this.#i=r,ci.#L(),fc(e,s),this.#t.promise.finally(()=>{ci.#_.delete(this),this.#r=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=zs.platform;return Fe(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:e,done:s})=>{if(s){this.#t.resolve();return}this.#o??=e.lang,Object.assign(this.#f,e.styles),this.#E(e.items),t()},this.#t.reject)};return this.#c=this.#g.getReader(),ci.#_.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const s=t.scale*uo.pixelRatio,i=t.rotation;if(i!==this.#h&&(e?.(),this.#h=i,fc(this.#l,{rotation:i})),s!==this.#d){e?.(),this.#d=s;const r={div:null,properties:null,ctx:ci.#P(this.#o)};for(const o of this.#u)r.properties=this.#p.get(o),r.div=o,this.#k(r)}}cancel(){const t=new Ka("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#m}#E(t){if(this.#s)return;this.#r.ctx??=ci.#P(this.#o);const e=this.#u,s=this.#m;for(const i of t){if(e.length>dJ){Pe("Ignoring additional textDivs for performance reasons."),this.#s=!0;return}if(i.str===void 0){if(i.type==="beginMarkedContentProps"||i.type==="beginMarkedContent"){const r=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),i.id&&this.#e.setAttribute("id",`${i.id}`),r.append(this.#e)}else i.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}s.push(i.str),this.#w(i)}}#w(t){const e=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(e);const i=ee.transform(this.#b,t.transform);let r=Math.atan2(i[1],i[0]);const o=this.#f[t.fontName];o.vertical&&(r+=Math.PI/2);let a=this.#n&&o.fontSubstitution||o.fontFamily;a=ci.fontFamilyMap.get(a)||a;const l=Math.hypot(i[2],i[3]),c=l*ci.#F(a,o,this.#o);let u,d;r===0?(u=i[4],d=i[5]-c):(u=i[4]+c*Math.sin(r),d=i[5]-c*Math.cos(r));const f="calc(var(--total-scale-factor) *",h=e.style;this.#e===this.#l?(h.left=`${(100*u/this.#a).toFixed(2)}%`,h.top=`${(100*d/this.#i).toFixed(2)}%`):(h.left=`${f}${u.toFixed(2)}px)`,h.top=`${f}${d.toFixed(2)}px)`),h.fontSize=`${f}${(ci.#C*l).toFixed(2)}px)`,h.fontFamily=a,s.fontSize=l,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#n&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),r!==0&&(s.angle=r*(180/Math.PI));let g=!1;if(t.str.length>1)g=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const m=Math.abs(t.transform[0]),b=Math.abs(t.transform[3]);m!==b&&Math.max(m,b)/Math.min(m,b)>1.5&&(g=!0)}if(g&&(s.canvasWidth=o.vertical?t.height:t.width),this.#p.set(e,s),this.#r.div=e,this.#r.properties=s,this.#k(this.#r),s.hasText&&this.#e.append(e),s.hasEOL){const m=document.createElement("br");m.setAttribute("role","presentation"),this.#e.append(m)}}#k(t){const{div:e,properties:s,ctx:i}=t,{style:r}=e;let o="";if(ci.#C>1&&(o=`scale(${1/ci.#C})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:a}=r,{canvasWidth:l,fontSize:c}=s;ci.#T(i,c*this.#d,a);const{width:u}=i.measureText(e.textContent);u>0&&(o=`scaleX(${l*this.#d/u}) ${o}`)}s.angle!==0&&(o=`rotate(${s.angle}deg) ${o}`),o.length>0&&(r.transform=o)}static cleanup(){if(!(this.#_.size>0)){this.#y.clear();for(const{canvas:t}of this.#v.values())t.remove();this.#v.clear()}}static#P(t=null){let e=this.#v.get(t||="");if(!e){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),e=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#v.set(t,e),this.#A.set(e,{size:0,family:""})}return e}static#T(t,e,s){const i=this.#A.get(t);e===i.size&&s===i.family||(t.font=`${e}px ${s}`,i.size=e,i.family=s)}static#L(){if(this.#C!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#C=t.getBoundingClientRect().height,t.remove()}static#F(t,e,s){const i=this.#y.get(t);if(i)return i;const r=this.#P(s);r.canvas.width=r.canvas.height=R9,this.#T(r,R9,t);const o=r.measureText(""),a=o.fontBoundingBoxAscent,l=Math.abs(o.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let c=.8;return a?c=a/(a+l):(zs.platform.isFirefox&&Pe("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?c=e.ascent:e.descent&&(c=1+e.descent)),this.#y.set(t,c),c}}const hJ=100;function xC(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const t=new Db,{docId:e}=t,s=n.url?yZ(n.url):null,i=n.data?wZ(n.data):null,r=n.httpHeaders||null,o=n.withCredentials===!0,a=n.password??null,l=n.range instanceof CC?n.range:null,c=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let u=n.worker instanceof Hh?n.worker:null;const d=n.verbosity,f=typeof n.docBaseUrl=="string"&&!Eg(n.docBaseUrl)?n.docBaseUrl:null,h=R1(n.cMapUrl),g=n.cMapPacked!==!1,m=n.CMapReaderFactory||(ui?TZ:w9),b=R1(n.iccUrl),y=R1(n.standardFontDataUrl),x=n.StandardFontDataFactory||(ui?LZ:_9),_=R1(n.wasmUrl),C=n.WasmFactory||(ui?PZ:x9),A=n.stopAtErrors!==!0,I=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,R=n.isEvalSupported!==!1,L=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!ui,P=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!ui&&(zs.platform.isFirefox||!globalThis.chrome),V=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,T=typeof n.disableFontFace=="boolean"?n.disableFontFace:ui,D=n.fontExtraProperties===!0,K=n.enableXfa===!0,$=n.ownerDocument||globalThis.document,q=n.disableRange===!0,W=n.disableStream===!0,F=n.disableAutoFetch===!0,O=n.pdfBug===!0,et=n.CanvasFactory||(ui?EZ:kZ),gt=n.FilterFactory||(ui?SZ:AZ),lt=n.enableHWA===!0,E=n.useWasm!==!1,M=l?l.length:n.length??NaN,B=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!ui&&!T,at=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(m===w9&&x===_9&&C===x9&&h&&y&&_&&Vd(h,document.baseURI)&&Vd(y,document.baseURI)&&Vd(_,document.baseURI)),pt=null;GX(d);const nt={canvasFactory:new et({ownerDocument:$,enableHWA:lt}),filterFactory:new gt({docId:e,ownerDocument:$}),cMapReaderFactory:at?null:new m({baseUrl:h,isCompressed:g}),standardFontDataFactory:at?null:new x({baseUrl:y}),wasmFactory:at?null:new C({baseUrl:_})};u||(u=Hh.create({verbosity:d,port:wu.workerPort}),t._worker=u);const ct={docId:e,apiVersion:"5.4.394",data:i,password:a,disableAutoFetch:F,rangeChunkSize:c,length:M,docBaseUrl:f,enableXfa:K,evaluatorOptions:{maxImageSize:I,disableFontFace:T,ignoreErrors:A,isEvalSupported:R,isOffscreenCanvasSupported:L,isImageDecoderSupported:P,canvasMaxAreaInBytes:V,fontExtraProperties:D,useSystemFonts:B,useWasm:E,useWorkerFetch:at,cMapUrl:h,iccUrl:b,standardFontDataUrl:y,wasmUrl:_}},G={ownerDocument:$,pdfBug:O,styleElement:pt,loadingParams:{disableAutoFetch:F,enableXfa:K}};return u.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const rt=u.messageHandler.sendWithPromise("GetDocRequest",ct,i?[i.buffer]:null);let wt;if(l)wt=new YZ(l,{disableRange:q,disableStream:W});else if(!i){if(!s)throw new Error("getDocument - no `url` parameter provided.");const Q=Vd(s)?JZ:ui?lJ:sJ;wt=new Q({url:s,length:M,httpHeaders:r,withCredentials:o,rangeChunkSize:c,disableRange:q,disableStream:W})}return rt.then(Q=>{if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const it=new qd(e,Q,u.port),ot=new gJ(it,t,wt,G,nt,lt);t._transport=ot,it.send("Ready",null)})}).catch(t._capability.reject),t}class Db{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${Db.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class CC{#t=Promise.withResolvers();#e=[];#s=[];#n=[];#o=[];constructor(t,e,s=!1,i=null){this.length=t,this.initialData=e,this.progressiveDone=s,this.contentDispositionFilename=i}addRangeListener(t){this.#o.push(t)}addProgressListener(t){this.#n.push(t)}addProgressiveReadListener(t){this.#s.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const s of this.#o)s(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const s of this.#n)s(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#s)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){wn("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class fJ{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Fe(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class pJ{#t=!1;constructor(t,e,s,i=!1){this._pageIndex=t,this._pageInfo=e,this._transport=s,this._stats=i?new f9:null,this._pdfBug=i,this.commonObjs=s.commonObjs,this.objs=new _C,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:s=0,offsetY:i=0,dontFlip:r=!1}={}){return new lf({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:i,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Fe(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:s,intent:i="display",annotationMode:r=Da.ENABLE,transform:o=null,background:a=null,optionalContentConfigPromise:l=null,annotationCanvasMap:c=null,pageColors:u=null,printAnnotationStorage:d=null,isEditing:f=!1,recordOperations:h=!1,operationsFilter:g=null}){this._stats?.time("Overall");const m=this._transport.getRenderingIntent(i,r,d,f),{renderingIntent:b,cacheKey:y}=m;this.#t=!1,l||=this._transport.getOptionalContentConfig(b);let x=this._intentStates.get(y);x||(x=Object.create(null),this._intentStates.set(y,x)),x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null);const _=!!(b&Bi.PRINT);x.displayReadyCapability||(x.displayReadyCapability=Promise.withResolvers(),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(m));const C=!!(this._pdfBug&&globalThis.StepperManager?.enabled),A=!this.recordedBBoxes&&(h||C),I=P=>{if(x.renderTasks.delete(R),A){const V=R.gfx?.dependencyTracker.take();V&&(R.stepper&&R.stepper.setOperatorBBoxes(V,R.gfx.dependencyTracker.takeDebugMetadata()),h&&(this.recordedBBoxes=V))}_&&(this.#t=!0),this.#e(),P?(R.capability.reject(P),this._abortOperatorList({intentState:x,reason:P instanceof Error?P:new Error(P)})):R.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},R=new ou({callback:I,params:{canvas:e,canvasContext:t,dependencyTracker:A?new DZ(e,x.operatorList.length,C):null,viewport:s,transform:o,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!_,pdfBug:this._pdfBug,pageColors:u,enableHWA:this._transport.enableHWA,operationsFilter:g});(x.renderTasks||=new Set).add(R);const L=R.task;return Promise.all([x.displayReadyCapability.promise,l]).then(([P,V])=>{if(this.destroyed){I();return}if(this._stats?.time("Rendering"),!(V.renderingIntent&b))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");R.initializeGraphics({transparency:P,optionalContentConfig:V}),R.operatorListChanged()}).catch(I),L}getOperatorList({intent:t="display",annotationMode:e=Da.ENABLE,printAnnotationStorage:s=null,isEditing:i=!1}={}){function r(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(l))}const o=this._transport.getRenderingIntent(t,e,s,i,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let l;return a.opListReadCapability||(l=Object.create(null),l.operatorListChanged=r,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||=new Set).add(l),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>zh.textContent(s));const e=this.streamTextContent(t);return new Promise(function(s,i){function r(){o.read().then(function({value:l,done:c}){if(c){s(a);return}a.lang??=l.lang,Object.assign(a.styles,l.styles),a.items.push(...l.items),r()},i)}const o=e.getReader(),a={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const s of e.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#e();return t&&e&&(this._stats&&=new f9),e}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const s=this._intentStates.get(e);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let s=0,i=t.length;s<i;s++)e.operatorList.fnArray.push(t.fnArray[s]),e.operatorList.argsArray.push(t.argsArray[s]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const s of e.renderTasks)s.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:s,modifiedIds:i}){const{map:r,transfer:o}=s,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:i},o).getReader(),c=this._intentStates.get(e);c.streamReader=l;const u=()=>{l.read().then(({value:d,done:f})=>{if(f){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,c),u())},d=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const f of c.renderTasks)f.operatorListChanged();this.#e()}if(c.displayReadyCapability)c.displayReadyCapability.reject(d);else if(c.opListReadCapability)c.opListReadCapability.reject(d);else throw d}})};u()}_abortOperatorList({intentState:t,reason:e,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(e instanceof kb){let i=hJ;e.extraDelay>0&&e.extraDelay<1e3&&(i+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},i);return}}if(t.streamReader.cancel(new Ka(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[i,r]of this._intentStates)if(r===t){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}var Ma,Sr,zo,Kl,jp,Xl,Zl,pi,rp,kC,AC,Wd,_u,op;const Mn=class Mn{constructor({name:t=null,port:e=null,verbosity:s=YX()}={}){qr(this,pi);qr(this,Ma,Promise.withResolvers());qr(this,Sr,null);qr(this,zo,null);qr(this,Kl,null);if(this.name=t,this.destroyed=!1,this.verbosity=s,e){if(In(Mn,Zl).has(e))throw new Error("Cannot use more than one PDFWorker per port.");In(Mn,Zl).set(e,this),Wr(this,pi,kC).call(this,e)}else Wr(this,pi,AC).call(this)}get promise(){return In(this,Ma).promise}get port(){return In(this,zo)}get messageHandler(){return In(this,Sr)}destroy(){this.destroyed=!0,In(this,Kl)?.terminate(),yi(this,Kl,null),In(Mn,Zl).delete(In(this,zo)),yi(this,zo,null),In(this,Sr)?.destroy(),yi(this,Sr,null)}static create(t){const e=In(this,Zl).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Mn(t)}static get workerSrc(){if(wu.workerSrc)return wu.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Fe(this,"_setupFakeWorkerGlobal",(async()=>In(this,_u,op)?In(this,_u,op):(await import(this.workerSrc)).WorkerMessageHandler)())}};Ma=new WeakMap,Sr=new WeakMap,zo=new WeakMap,Kl=new WeakMap,jp=new WeakMap,Xl=new WeakMap,Zl=new WeakMap,pi=new WeakSet,rp=function(){In(this,Ma).resolve(),In(this,Sr).send("configure",{verbosity:this.verbosity})},kC=function(t){yi(this,zo,t),yi(this,Sr,new qd("main","worker",t)),In(this,Sr).on("ready",()=>{}),Wr(this,pi,rp).call(this)},AC=function(){if(In(Mn,Xl)||In(Mn,_u,op)){Wr(this,pi,Wd).call(this);return}let{workerSrc:t}=Mn;try{Mn._isSameOrigin(window.location,t)||(t=Mn._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),s=new qd("main","worker",e),i=()=>{r.abort(),s.destroy(),e.terminate(),this.destroyed?In(this,Ma).reject(new Error("Worker was destroyed")):Wr(this,pi,Wd).call(this)},r=new AbortController;e.addEventListener("error",()=>{In(this,Kl)||i()},{signal:r.signal}),s.on("test",a=>{if(r.abort(),this.destroyed||!a){i();return}yi(this,Sr,s),yi(this,zo,e),yi(this,Kl,e),Wr(this,pi,rp).call(this)}),s.on("ready",a=>{if(r.abort(),this.destroyed){i();return}try{o()}catch{Wr(this,pi,Wd).call(this)}});const o=()=>{const a=new Uint8Array;s.send("test",a,[a.buffer])};o();return}catch{Sg("The worker has been disabled.")}Wr(this,pi,Wd).call(this)},Wd=function(){In(Mn,Xl)||(Pe("Setting up fake worker."),yi(Mn,Xl,!0)),Mn._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){In(this,Ma).reject(new Error("Worker was destroyed"));return}const e=new CZ;yi(this,zo,e);const s=`fake${Cv(Mn,jp)._++}`,i=new qd(s+"_worker",s,e);t.setup(i,e),yi(this,Sr,new qd(s,s+"_worker",e)),Wr(this,pi,rp).call(this)}).catch(t=>{In(this,Ma).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},_u=new WeakSet,op=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},qr(Mn,_u),qr(Mn,jp,0),qr(Mn,Xl,!1),qr(Mn,Zl,new WeakMap),ui&&(yi(Mn,Xl,!0),wu.workerSrc||="./pdf.worker.mjs"),Mn._isSameOrigin=(t,e)=>{const s=URL.parse(t);if(!s?.origin||s.origin==="null")return!1;const i=new URL(e,s);return s.origin===i.origin},Mn._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Mn.fromPort=t=>{if(oZ("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Mn.create(t)};let Hh=Mn;class gJ{#t=new Map;#e=new Map;#s=new Map;#n=new Map;#o=null;constructor(t,e,s,i,r,o){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new _C,this.fontLoader=new bZ({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}#r(t,e=null){const s=this.#t.get(t);if(s)return s;const i=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,i),i}get annotationStorage(){return Fe(this,"annotationStorage",new Tb)}getRenderingIntent(t,e=Da.ENABLE,s=null,i=!1,r=!1){let o=Bi.DISPLAY,a=Jm;switch(t){case"any":o=Bi.ANY;break;case"display":break;case"print":o=Bi.PRINT;break;default:Pe(`getRenderingIntent - invalid intent: ${t}`)}const l=o&Bi.PRINT&&s instanceof cC?s:this.annotationStorage;switch(e){case Da.DISABLE:o+=Bi.ANNOTATIONS_DISABLE;break;case Da.ENABLE:break;case Da.ENABLE_FORMS:o+=Bi.ANNOTATIONS_FORMS;break;case Da.ENABLE_STORAGE:o+=Bi.ANNOTATIONS_STORAGE,a=l.serializable;break;default:Pe(`getRenderingIntent - invalid annotationMode: ${e}`)}i&&(o+=Bi.IS_EDITING),r&&(o+=Bi.OPLIST);const{ids:c,hash:u}=l.modifiedIds,d=[o,a.hash,u];return{renderingIntent:o,cacheKey:d.join("_"),annotationStorageSerializable:a,modifiedIds:c}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#o?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of this.#e.values())t.push(s._destroy());this.#e.clear(),this.#s.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),ci.cleanup(),this._networkStream?.cancelAllRequests(new Ka("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(s,i)=>{Ke(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},i.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){i.close();return}Ke(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{i.error(r)})},i.onCancel=r=>{this._fullReader.cancel(r),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",async s=>{await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:r,contentLength:o}=this._fullReader;return(!i||!r)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=a=>{e.onProgress?.({loaded:a.loaded,total:a.total})}),{isStreamingSupported:i,isRangeSupported:r,contentLength:o}}),t.on("GetRangeReader",(s,i)=>{Ke(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(s.begin,s.end);if(!r){i.close();return}i.onPull=()=>{r.read().then(function({value:o,done:a}){if(a){i.close();return}Ke(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{r.cancel(o),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,e._capability.resolve(new fJ(s,this))}),t.on("DocException",s=>{e._capability.reject(_i(s))}),t.on("PasswordRequest",s=>{this.#o=Promise.withResolvers();try{if(!e.onPassword)throw _i(s);const i=r=>{r instanceof Error?this.#o.reject(r):this.#o.resolve({password:r})};e.onPassword(i,s.code)}catch(i){this.#o.reject(i)}return this.#o.promise}),t.on("DataLoaded",s=>{e.onProgress?.({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;this.#e.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,i,r])=>{if(this.destroyed||this.commonObjs.has(s))return null;switch(i){case"Font":if("error"in r){const d=r.error;Pe(`Error during font loading: ${d}`),this.commonObjs.resolve(s,d);break}const o=new pn(r),a=this._params.pdfBug&&globalThis.FontInspector?.enabled?(d,f)=>globalThis.FontInspector.fontAdded(d,f):null,l=new vZ(o,a,r.extra,r.charProcOperatorList);this.fontLoader.bind(l).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!l.fontExtraProperties&&l.data&&l.clearData(),this.commonObjs.resolve(s,l)});break;case"CopyLocalImage":const{imageRef:c}=r;Ke(c,"The imageRef must be defined.");for(const d of this.#e.values())for(const[,f]of d.objs)if(f?.ref===c)return f.dataLen?(this.commonObjs.resolve(s,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":this.commonObjs.resolve(s,r);break;case"Pattern":const u=new ks(r);this.commonObjs.resolve(s,u.getIR());break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),t.on("obj",([s,i,r,o])=>{if(this.destroyed)return;const a=this.#e.get(i);if(!a.objs.has(s)){if(a._intentStates.size===0){o?.bitmap?.close();return}switch(r){case"Image":case"Pattern":a.objs.resolve(s,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",s=>{this.destroyed||e.onProgress?.({loaded:s.loaded,total:s.total})}),t.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[s.type];if(!i)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Pe("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,s=this.#s.get(e);if(s)return s;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&this.#n.set(r.refStr,t);const o=new pJ(e,r,this,this._params.pdfBug);return this.#e.set(e,o),o});return this.#s.set(e,i),i}getPageIndex(t){return Qm(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#r("GetFieldObjects")}hasJSActions(){return this.#r("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return this.#r("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#r("GetOptionalContentConfig").then(e=>new GZ(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const s=this.messageHandler.sendWithPromise(t,null).then(i=>({info:i[0],metadata:i[1]?new qZ(i[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),ci.cleanup()}}cachedPageNumber(t){if(!Qm(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#n.get(e)??null}}class mJ{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}}class ou{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:s,commonObjs:i,annotationCanvasMap:r,operatorList:o,pageIndex:a,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:d=!1,pageColors:f=null,enableHWA:h=!1,operationsFilter:g=null}){this.callback=t,this.params=e,this.objs=s,this.commonObjs=i,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new mJ(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=h,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=g}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(ou.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ou.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:i,background:r,dependencyTracker:o}=this.params,a=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new yu(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:i,viewport:s,transparency:t,background:r}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),ou.#e.delete(this._canvas),t||=new kb(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ou.#e.delete(this._canvas),this.callback())))}}const bJ="5.4.394",vJ="2cc809ade";class rr{#t=null;#e=null;#s;#n=null;#o=!1;#r=!1;#i=null;#a;#c=null;#l=null;static#h=null;static get _keyboardManager(){return Fe(this,"_keyboardManager",new uf([[["Escape","mac+Escape"],rr.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],rr.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],rr.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],rr.prototype._moveToPrevious],[["Home","mac+Home"],rr.prototype._moveToBeginning],[["End","mac+End"],rr.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#r=!1,this.#i=t):this.#r=!0,this.#l=t?._uiManager||e,this.#a=this.#l._eventBus,this.#s=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",rr.#h||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#i&&(t.ariaControls=`${this.#i.id}_colorpicker_dropdown`);const e=this.#l._signal;t.addEventListener("click",this.#g.bind(this),{signal:e}),t.addEventListener("keydown",this.#m.bind(this),{signal:e});const s=this.#e=document.createElement("span");return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=this.#s,t.append(s),t}renderMainDropdown(){const t=this.#n=this.#d();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#d(){const t=document.createElement("div"),e=this.#l._signal;t.addEventListener("contextmenu",pr,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#i&&(t.id=`${this.#i.id}_colorpicker_dropdown`);for(const[s,i]of this.#l.highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=s,r.setAttribute("data-l10n-id",rr.#h[s]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=i,r.ariaSelected=i===this.#s,r.addEventListener("click",this.#f.bind(this,i),{signal:e}),t.append(r)}return t.addEventListener("keydown",this.#m.bind(this),{signal:e}),t}#f(t,e){e.stopPropagation(),this.#a.dispatch("switchannotationeditorparams",{source:this,type:Ye.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#g(t);return}const e=t.target.getAttribute("data-color");e&&this.#f(e,t)}_moveToNext(t){if(!this.#p){this.#g(t);return}if(t.target===this.#t){this.#n.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#n?.firstChild||t.target===this.#t){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#g(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#p){this.#g(t);return}this.#n.firstChild?.focus()}_moveToEnd(t){if(!this.#p){this.#g(t);return}this.#n.lastChild?.focus()}#m(t){rr._keyboardManager.exec(this,t)}#g(t){if(this.#p){this.hideDropdown();return}if(this.#o=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const e=this.#n=this.#d();this.#t.append(e)}#u(t){this.#n?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#p(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#r){if(!this.#p){this.#i?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#o})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#n)return;const e=this.#l.highlightColors.values();for(const s of this.#n.children)s.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#n?.remove(),this.#n=null}}class Vh{#t=null;#e=null;#s=null;static#n=null;constructor(t){this.#e=t,this.#s=t._uiManager,Vh.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:e,color:s}=this.#e,i=this.#t=document.createElement("input");return i.type="color",i.value=s||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",Vh.#n[t]),i.addEventListener("input",()=>{this.#s.updateParams(e,i.value)},{signal:this.#s._signal}),i}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function N9(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function Md(n){return Math.max(0,Math.min(255,255*n))}class O9{static CMYK_G([t,e,s,i]){return["G",1-Math.min(1,.3*t+.59*s+.11*e+i)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Md(t),[t,t,t]}static G_HTML([t]){const e=N9(t);return`#${e}${e}${e}`}static RGB_G([t,e,s]){return["G",.3*t+.59*e+.11*s]}static RGB_rgb(t){return t.map(Md)}static RGB_HTML(t){return`#${t.map(N9).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,s,i]){return["RGB",1-Math.min(1,t+i),1-Math.min(1,s+i),1-Math.min(1,e+i)]}static CMYK_rgb([t,e,s,i]){return[Md(1-Math.min(1,t+i)),Md(1-Math.min(1,s+i)),Md(1-Math.min(1,e+i))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,s]){const i=1-t,r=1-e,o=1-s,a=Math.min(i,r,o);return["CMYK",i,r,o,a]}}class yJ{create(t,e,s=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),s||(i.setAttribute("width",`${t}px`),i.setAttribute("height",`${e}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${t} ${e}`),i}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){wn("Abstract method `_createSVG` called.")}}class Bp extends yJ{_createSVG(t){return document.createElementNS(Oo,t)}}const wJ=9,pc=new WeakSet,_J=new Date().getTimezoneOffset()*60*1e3;class N0{static create(t){switch(t.data.annotationType){case us.LINK:return new Mb(t);case us.TEXT:return new CJ(t);case us.WIDGET:switch(t.data.fieldType){case"Tx":return new kJ(t);case"Btn":return t.data.radioButton?new SC(t):t.data.checkBox?new SJ(t):new EJ(t);case"Ch":return new TJ(t);case"Sig":return new AJ(t)}return new wc(t);case us.POPUP:return new n5(t);case us.FREETEXT:return new EC(t);case us.LINE:return new PJ(t);case us.SQUARE:return new IJ(t);case us.CIRCLE:return new DJ(t);case us.POLYLINE:return new TC(t);case us.CARET:return new RJ(t);case us.INK:return new Rb(t);case us.POLYGON:return new MJ(t);case us.HIGHLIGHT:return new LC(t);case us.UNDERLINE:return new NJ(t);case us.SQUIGGLY:return new OJ(t);case us.STRIKEOUT:return new FJ(t);case us.STAMP:return new PC(t);case us.FILEATTACHMENT:return new $J(t);default:return new Bn(t)}}}class Bn{#t=null;#e=!1;#s=null;constructor(t,{isRenderable:e=!1,ignoreBorder:s=!1,createQuadrilaterals:i=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,e&&(this.contentElement=this.container=this._createContainer(s)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Bn._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,e=this.annotationStorage?.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:s,rect:i}=this.data;let r=-1/0,o=-1/0;if(e?.length>=8){for(let a=0;a<e.length;a+=8)e[a+1]>o?(o=e[a+1],r=e[a+2]):e[a+1]===o&&(r=Math.max(r,e[a+2]));return[r,o]}if(s?.length>=1){for(const a of s)for(let l=0,c=a.length;l<c;l+=2)a[l+1]>o?(o=a[l+1],r=a[l]):a[l+1]===o&&(r=Math.max(r,a[l]));if(r!==1/0)return[r,o]}return i?[i[2],i[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:s,pageHeight:i,pageX:r,pageY:o}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-r)/s,t[1]=100*(t[1]-o)/i,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${jh}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:e}=this,s={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:s})||this.annotationStorage.setValue(`${jh}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:s,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#s?.popup||this.popup)?.remove(),this.#s=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:e,popup:s}=t;e&&this.#n(e);let i=this.#s?.popup||this.popup;!i&&s?.text&&(this._createPopup(s),i=this.#s.popup),i&&(i.updateEdited(t),s?.deleted&&(i.remove(),this.#s=null,this.popup=null))}resetEdited(){this.#t&&(this.#n(this.#t.rect),this.#s?.popup.resetEdited(),this.#t=null)}#n(t){const{container:{style:e},data:{rect:s,rotation:i},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:l}}}}=this;s?.splice(0,4,...t),e.left=`${100*(t[0]-a)/r}%`,e.top=`${100*(o-t[3]+l)/o}%`,i===0?(e.width=`${100*(t[2]-t[0])/r}%`,e.height=`${100*(t[3]-t[1])/o}%`):this.setRotation(i)}_createContainer(t){const{data:e,parent:{page:s,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),!(this instanceof wc)&&!(this instanceof Mb)&&(r.tabIndex=0);const{style:o}=r;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof n5){const{rotation:m}=e;return!e.hasOwnCanvas&&m!==0&&this.setRotation(m,r),r}const{width:a,height:l}=this;if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;const m=e.borderStyle.horizontalCornerRadius,b=e.borderStyle.verticalCornerRadius;if(m>0||b>0){const x=`calc(${m}px * var(--total-scale-factor)) / calc(${b}px * var(--total-scale-factor))`;o.borderRadius=x}else if(this instanceof SC){const x=`calc(${a}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;o.borderRadius=x}switch(e.borderStyle.style){case Qc.SOLID:o.borderStyle="solid";break;case Qc.DASHED:o.borderStyle="dashed";break;case Qc.BEVELED:Pe("Unimplemented border style: beveled");break;case Qc.INSET:Pe("Unimplemented border style: inset");break;case Qc.UNDERLINE:o.borderBottomStyle="solid";break}const y=e.borderColor||null;y?(this.#e=!0,o.borderColor=ee.makeHexColor(y[0]|0,y[1]|0,y[2]|0)):o.borderWidth=0}const c=ee.normalizeRect([e.rect[0],s.view[3]-e.rect[1]+s.view[1],e.rect[2],s.view[3]-e.rect[3]+s.view[1]]),{pageWidth:u,pageHeight:d,pageX:f,pageY:h}=i.rawDims;o.left=`${100*(c[0]-f)/u}%`,o.top=`${100*(c[1]-h)/d}%`;const{rotation:g}=e;return e.hasOwnCanvas||g===0?(o.width=`${100*a/u}%`,o.height=`${100*l/d}%`):this.setRotation(g,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:i}=this.parent.viewport.rawDims;let{width:r,height:o}=this;t%180!==0&&([r,o]=[o,r]),e.style.width=`${100*r/s}%`,e.style.height=`${100*o/i}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,s,i)=>{const r=i.detail[e],o=r[0],a=r.slice(1);i.target.style[s]=O9[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[s]:O9[`${o}_rgb`](a)})};return Fe(this,"_commonActions",{display:e=>{const{display:s}=e.detail,i=s%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:s===1||s===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:s}=e.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const s=e.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,e){const s=this._commonActions;for(const i of Object.keys(e.detail))(t[i]||s[i])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const s=this._commonActions;for(const[i,r]of Object.entries(e)){const o=s[i];if(o){const a={detail:{[i]:r},target:t};o(a),delete e[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,s,i,r]=this.data.rect.map(m=>Math.fround(m));if(t.length===8){const[m,b,y,x]=t.subarray(2,6);if(i===m&&r===b&&e===y&&s===x)return}const{style:o}=this.container;let a;if(this.#e){const{borderColor:m,borderWidth:b}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${m}" stroke-width="${b}">`],this.container.classList.add("hasBorder")}const l=i-e,c=r-s,{svgFactory:u}=this,d=u.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0),d.role="none";const f=u.createElement("defs");d.append(f);const h=u.createElement("clipPath"),g=`clippath_${this.data.id}`;h.setAttribute("id",g),h.setAttribute("clipPathUnits","objectBoundingBox"),f.append(h);for(let m=2,b=t.length;m<b;m+=8){const y=t[m],x=t[m+1],_=t[m+2],C=t[m+3],A=u.createElement("rect"),I=(_-e)/l,R=(r-x)/c,L=(y-_)/l,P=(x-C)/c;A.setAttribute("x",I),A.setAttribute("y",R),A.setAttribute("width",L),A.setAttribute("height",P),h.append(A),a?.push(`<rect vector-effect="non-scaling-stroke" x="${I}" y="${R}" width="${L}" height="${P}"/>`)}this.#e&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(d),this.container.style.clipPath=`url(#${g})`}_createPopup(t=null){const{data:e}=this;let s,i;t?(s={str:t.text},i=t.date):(s=e.contentsObj,i=e.modificationDate),this.#s=new n5({data:{color:e.color,titleObj:e.titleObj,modificationDate:i,contentsObj:s,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]})}get hasPopupElement(){return!!(this.#s||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#s}render(){wn("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const s=[];if(this._fieldObjects){const i=this._fieldObjects[t];if(i)for(const{page:r,id:o,exportValues:a}of i){if(r===-1||o===e)continue;const l=typeof a=="string"?a:null,c=document.querySelector(`[data-element-id="${o}"]`);if(c&&!pc.has(c)){Pe(`_getElementsByName - element not allowed: ${o}`);continue}s.push({id:o,exportValue:l,domElement:c})}return s}for(const i of document.getElementsByName(t)){const{exportValue:r}=i,o=i.getAttribute("data-element-id");o!==e&&pc.has(i)&&s.push({id:o,exportValue:r,domElement:i})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class xJ extends Bn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}class Mb extends Bn{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let i=!1;return t.url?(e.addLinkAttributes(s,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(s,t.action,t.overlaidText),i=!0):t.attachment?(this.#e(s,t.attachment,t.overlaidText,t.attachmentDest),i=!0):t.setOCGState?(this.#s(s,t.setOCGState,t.overlaidText),i=!0):t.dest?(this._bindLink(s,t.dest,t.overlaidText),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),i=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(s,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&(this.contentElement=s,this.container.append(s)),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,s=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t(),s&&(t.title=s)}_bindNamedAction(t,e,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),s&&(t.title=s),this.#t()}#e(t,e,s="",i=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:s&&(t.title=s),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,i),!1),this.#t()}#s(t,e,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),s&&(t.title=s),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(e.actions)){const r=s.get(i);r&&(t[r]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:i}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){Pe('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{s?.();const{fields:i,refs:r,include:o}=e,a=[];if(i.length!==0||r.length!==0){const u=new Set(r);for(const d of i){const f=this._fieldObjects[d]||[];for(const{id:h}of f)u.add(h)}for(const d of Object.values(this._fieldObjects))for(const f of d)u.has(f.id)===o&&a.push(f)}else for(const u of Object.values(this._fieldObjects))a.push(...u);const l=this.annotationStorage,c=[];for(const u of a){const{id:d}=u;switch(c.push(d),u.type){case"text":{const h=u.defaultValue||"";l.setValue(d,{value:h});break}case"checkbox":case"radiobutton":{const h=u.defaultValue===u.exportValues;l.setValue(d,{value:h});break}case"combobox":case"listbox":{const h=u.defaultValue||"";l.setValue(d,{value:h});break}default:continue}const f=document.querySelector(`[data-element-id="${d}"]`);if(f){if(!pc.has(f)){Pe(`_bindResetFormAction - element not allowed: ${d}`);continue}}else continue;f.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:c,name:"ResetForm"}}),!1}}}class CJ extends Bn{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}}class wc extends Bn{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return zs.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,s,i,r){s.includes("mouse")?t.addEventListener(s,o=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(s,o=>{if(s==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(s==="focus"){if(e.focused)return;e.focused=!0}r&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o)}})})}_setEventListeners(t,e,s,i){for(const[r,o]of s)(o==="Action"||this.data.actions?.[o])&&((o==="Focus"||o==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,r,o,i),o==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):o==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":ee.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||wJ,r=t.style;let o;const a=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a),u=Math.round(c/(E0*i))||1,d=c/u;o=Math.min(i,l(d/E0))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(i,l(c/E0))}r.fontSize=`calc(${o}px * var(--total-scale-factor))`,r.color=ee.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class kJ extends wc{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,s,i){const r=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=s),r.setValue(o.id,{[i]:s})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const i=t.getValue(e,{value:this.data.fieldValue});let r=i.value||"";const o=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;o&&r.length>o&&(r=r.slice(0,o));let a=i.formattedValue||this.data.textContent?.join(`
`)||null;a&&this.data.comb&&(a=a.replaceAll(/\s+/g,""));const l={userValue:r,formattedValue:a,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=a??r,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",a??r),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),pc.add(s),this.contentElement=s,s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:c,datetimeType:u,timeStep:d}=this.data,f=!!u&&this.enableScripting;c&&(s.title=c),this._setRequired(s,this.data.required),o&&(s.maxLength=o),s.addEventListener("input",g=>{t.setValue(e,{value:g.target.value}),this.setPropertyOnSiblings(s,"value",g.target.value,"value"),l.formattedValue=null}),s.addEventListener("resetform",g=>{const m=this.data.defaultFieldValue??"";s.value=l.userValue=m,l.formattedValue=null});let h=g=>{const{formattedValue:m}=l;m!=null&&(g.target.value=m),g.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",m=>{if(l.focused)return;const{target:b}=m;if(f&&(b.type=u,d&&(b.step=d)),l.userValue){const y=l.userValue;if(f)if(u==="time"){const x=new Date(y),_=[x.getHours(),x.getMinutes(),x.getSeconds()];b.value=_.map(C=>C.toString().padStart(2,"0")).join(":")}else b.value=new Date(y-_J).toISOString().split(u==="date"?"T":".",1)[0];else b.value=y}l.lastCommittedValue=b.value,l.commitKey=1,this.data.actions?.Focus||(l.focused=!0)}),s.addEventListener("updatefromsandbox",m=>{this.showElementAndHideCanvas(m.target);const b={value(y){l.userValue=y.detail.value??"",f||t.setValue(e,{value:l.userValue.toString()}),y.target.value=l.userValue},formattedValue(y){const{formattedValue:x}=y.detail;l.formattedValue=x,x!=null&&y.target!==document.activeElement&&(y.target.value=x);const _={formattedValue:x};f&&(_.value=x),t.setValue(e,_)},selRange(y){y.target.setSelectionRange(...y.detail.selRange)},charLimit:y=>{const{charLimit:x}=y.detail,{target:_}=y;if(x===0){_.removeAttribute("maxLength");return}_.setAttribute("maxLength",x);let C=l.userValue;!C||C.length<=x||(C=C.slice(0,x),_.value=l.userValue=C,t.setValue(e,{value:C}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:C,willCommit:!0,commitKey:1,selStart:_.selectionStart,selEnd:_.selectionEnd}}))}};this._dispatchEventFromSandbox(b,m)}),s.addEventListener("keydown",m=>{l.commitKey=1;let b=-1;if(m.key==="Escape"?b=0:m.key==="Enter"&&!this.data.multiLine?b=2:m.key==="Tab"&&(l.commitKey=3),b===-1)return;const{value:y}=m.target;l.lastCommittedValue!==y&&(l.lastCommittedValue=y,l.userValue=y,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:y,willCommit:!0,commitKey:b,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}}))});const g=h;h=null,s.addEventListener("blur",m=>{if(!l.focused||!m.relatedTarget)return;this.data.actions?.Blur||(l.focused=!1);const{target:b}=m;let{value:y}=b;if(f){if(y&&u==="time"){const x=y.split(":").map(_=>parseInt(_,10));y=new Date(2e3,0,1,x[0],x[1],x[2]||0).valueOf(),b.step=""}else y.includes("T")||(y=`${y}T00:00`),y=new Date(y).valueOf();b.type="text"}l.userValue=y,l.lastCommittedValue!==y&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:y,willCommit:!0,commitKey:l.commitKey,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}}),g(m)}),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",m=>{l.lastCommittedValue=null;const{data:b,target:y}=m,{value:x,selectionStart:_,selectionEnd:C}=y;let A=_,I=C;switch(m.inputType){case"deleteWordBackward":{const R=x.substring(0,_).match(/\w*[^\w]*$/);R&&(A-=R[0].length);break}case"deleteWordForward":{const R=x.substring(_).match(/^[^\w]*\w*/);R&&(I+=R[0].length);break}case"deleteContentBackward":_===C&&(A-=1);break;case"deleteContentForward":_===C&&(I+=1);break}m.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:x,change:b||"",willCommit:!1,selStart:A,selEnd:I}})}),this._setEventListeners(s,l,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],m=>m.target.value)}if(h&&s.addEventListener("blur",h),this.data.comb){const m=(this.data.rect[2]-this.data.rect[0])/o;s.classList.add("comb"),s.style.letterSpacing=`calc(${m}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class AJ extends wc{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class SJ extends wc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,s=e.id;let i=t.getValue(s,{value:e.exportValue===e.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",t.setValue(s,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return pc.add(r),r.setAttribute("data-element-id",s),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=0,r.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,s)){const u=l&&c.exportValue===e.exportValue;c.domElement&&(c.domElement.checked=u),t.setValue(c.id,{value:u})}t.setValue(s,{value:l})}),r.addEventListener("resetform",o=>{const a=e.defaultFieldValue||"Off";o.target.checked=a===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const a={value(l){l.target.checked=l.detail.value!=="Off",t.setValue(s,{value:l.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class SC extends wc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,s=e.id;let i=t.getValue(s,{value:e.fieldValue===e.buttonValue}).value;if(typeof i=="string"&&(i=i!==e.buttonValue,t.setValue(s,{value:i})),i)for(const o of this._getElementsByName(e.fieldName,s))t.setValue(o.id,{value:!1});const r=document.createElement("input");if(pc.add(r),r.setAttribute("data-element-id",s),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=0,r.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,s))t.setValue(c.id,{value:!1});t.setValue(s,{value:l})}),r.addEventListener("resetform",o=>{const a=e.defaultFieldValue;o.target.checked=a!=null&&a===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;r.addEventListener("updatefromsandbox",a=>{const l={value:c=>{const u=o===c.detail.value;for(const d of this._getElementsByName(c.target.name)){const f=u&&d.id===s;d.domElement&&(d.domElement.checked=f),t.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class EJ extends Mb{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class TJ extends wc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,s=t.getValue(e,{value:this.data.fieldValue}),i=document.createElement("select");pc.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",u=>{const d=this.data.defaultFieldValue;for(const f of i.options)f.selected=f.value===d});for(const u of this.data.options){const d=document.createElement("option");d.textContent=u.displayValue,d.value=u.exportValue,s.value.includes(u.exportValue)&&(d.setAttribute("selected",!0),r=!1),i.append(d)}let o=null;if(r){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),i.prepend(u),o=()=>{u.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}const a=u=>{const d=u?"value":"textContent",{options:f,multiple:h}=i;return h?Array.prototype.filter.call(f,g=>g.selected).map(g=>g[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let l=a(!1);const c=u=>{const d=u.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",u=>{const d={value(f){o?.();const h=f.detail.value,g=new Set(Array.isArray(h)?h:[h]);for(const m of i.options)m.selected=g.has(m.value);t.setValue(e,{value:a(!0)}),l=a(!1)},multipleSelection(f){i.multiple=!0},remove(f){const h=i.options,g=f.detail.remove;h[g].selected=!1,i.remove(g),h.length>0&&Array.prototype.findIndex.call(h,b=>b.selected)===-1&&(h[0].selected=!0),t.setValue(e,{value:a(!0),items:c(f)}),l=a(!1)},clear(f){for(;i.length!==0;)i.remove(0);t.setValue(e,{value:null,items:[]}),l=a(!1)},insert(f){const{index:h,displayValue:g,exportValue:m}=f.detail.insert,b=i.children[h],y=document.createElement("option");y.textContent=g,y.value=m,b?b.before(y):i.append(y),t.setValue(e,{value:a(!0),items:c(f)}),l=a(!1)},items(f){const{items:h}=f.detail;for(;i.length!==0;)i.remove(0);for(const g of h){const{displayValue:m,exportValue:b}=g,y=document.createElement("option");y.textContent=m,y.value=b,i.append(y)}i.options.length>0&&(i.options[0].selected=!0),t.setValue(e,{value:a(!0),items:c(f)}),l=a(!1)},indices(f){const h=new Set(f.detail.indices);for(const g of f.target.options)g.selected=h.has(g.index);t.setValue(e,{value:a(!0)}),l=a(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,u)}),i.addEventListener("input",u=>{const d=a(!0),f=a(!1);t.setValue(e,{value:d}),u.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:l,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):i.addEventListener("input",function(u){t.setValue(e,{value:a(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class n5 extends Bn{constructor(t){const{data:e,elements:s,parent:i}=t,r=!!i._commentManager;if(super(t,{isRenderable:!r&&Bn._hasPopupData(e)}),this.elements=s,r&&Bn._hasPopupData(e)){const o=this.popup=this.#t();for(const a of s)a.popup=o}else this.popup=null}#t(){return new LJ({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=this.#t(),s=[];for(const i of this.elements)i.popup=e,i.container.ariaHasPopup="dialog",s.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(i=>`${iu}${i}`).join(",")),this.container}}class LJ{#t=null;#e=this.#V.bind(this);#s=this.#B.bind(this);#n=this.#M.bind(this);#o=this.#x.bind(this);#r=null;#i=null;#a=null;#c=null;#l=null;#h=null;#d=null;#f=!1;#m=null;#g=null;#u=null;#p=null;#b=null;#y=null;#v=null;#A=null;#C=null;#_=null;#E=!1;#w=null;#k=null;constructor({container:t,color:e,elements:s,titleObj:i,modificationDate:r,contentsObj:o,richText:a,parent:l,rect:c,parentRect:u,open:d,commentManager:f=null}){this.#i=t,this.#C=i,this.#a=o,this.#A=a,this.#h=l,this.#r=e,this.#v=c,this.#d=u,this.#l=s,this.#t=f,this.#w=s[0],this.#c=Km.toDateObject(r),this.trigger=s.flatMap(h=>h.getElementsToTriggerPopup()),f||(this.#P(),this.#i.hidden=!0,d&&this.#x())}#P(){if(this.#g)return;this.#g=new AbortController;const{signal:t}=this.#g;for(const e of this.trigger)e.addEventListener("click",this.#o,{signal:t}),e.addEventListener("pointerenter",this.#n,{signal:t}),e.addEventListener("pointerleave",this.#s,{signal:t}),e.classList.add("popupTriggerArea");for(const e of this.#l)e.container?.addEventListener("keydown",this.#e,{signal:t})}#T(){const t=this.#l.find(e=>e.hasCommentButton);t&&(this.#b=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#p){this.#p.parentNode||this.#w.container.after(this.#p);return}if(this.#b||this.#T(),!this.#b)return;const{signal:t}=this.#g=new AbortController,e=this.#w.hasOwnCommentButton,s=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!e)},i=()=>{this.#t.toggleCommentPopup(this,!1,!0,!e)},r=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(e){this.#p=this.#w.container;for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",this.#e,{signal:t}),o.addEventListener("click",s,{signal:t}),o.addEventListener("pointerenter",i,{signal:t}),o.addEventListener("pointerleave",r,{signal:t}),o.classList.add("popupTriggerArea")}else{const o=this.#p=document.createElement("button");o.className="annotationCommentButton";const a=this.#w.container;o.style.zIndex=a.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#F(),this.#L(),o.addEventListener("keydown",this.#e,{signal:t}),o.addEventListener("click",s,{signal:t}),o.addEventListener("pointerenter",i,{signal:t}),o.addEventListener("pointerleave",r,{signal:t}),a.after(o)}}#L(){if(this.#w.extraPopupElement&&!this.#w.editor)return;this.#p||this.renderCommentButton();const[t,e]=this.#b,{style:s}=this.#p;s.left=`calc(${t}%)`,s.top=`calc(${e}% - var(--comment-button-dim))`}#F(){this.#w.extraPopupElement||(this.#p||this.renderCommentButton(),this.#p.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:e}=this.#w.commentData;return t?this.#h._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{this.#p?.focus()},0)}getData(){const{richText:t,color:e,opacity:s,creationDate:i,modificationDate:r}=this.#w.commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:s,creationDate:i,modificationDate:r}}get elementBeforePopup(){return this.#p}get comment(){return this.#k||=this.#w.commentText,this.#k}set comment(t){t!==this.comment&&(this.#w.commentText=this.#k=t)}focus(){this.#w.container?.focus()}get parentBoundingClientRect(){return this.#w.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){this.#p&&(this.#p.classList.toggle("selected",t),this.#p.ariaExpanded=e)}setSelectedCommentButton(t){this.#p.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#y)return this.#y;const{x:t,y:e,height:s}=this.#p.getBoundingClientRect(),{x:i,y:r,width:o,height:a}=this.#w.layer.getBoundingClientRect();return[(t-i)/o,(e+s-r)/a]}set commentPopupPosition(t){this.#y=t}hasDefaultPopupPosition(){return this.#y===null}get commentButtonPosition(){return this.#b}get commentButtonWidth(){return this.#p.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,s]=this.#y||this.commentButtonPosition.map(c=>c/100),i=this.parentBoundingClientRect,{x:r,y:o,width:a,height:l}=i;this.#t.showDialog(null,this,r+e*a,o+s*l,{...t,parentDimensions:i})}render(){if(this.#m)return;const t=this.#m=document.createElement("div");if(t.className="popup",this.#r){const s=t.style.outlineColor=ee.makeHexColor(...this.#r);t.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const e=document.createElement("span");if(e.className="header",this.#C?.str){const s=document.createElement("span");s.className="title",e.append(s),{dir:s.dir,str:s.textContent}=this.#C}if(t.append(e),this.#c){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),s.dateTime=this.#c.toISOString(),e.append(s)}rC({html:this.#D||this.#a.str,dir:this.#a?.dir,className:"popupContent"},t),this.#i.append(t)}get#D(){const t=this.#A,e=this.#a;return t?.str&&(!e?.str||e.str===t.str)&&this.#A.html||null}get#R(){return this.#D?.attributes?.style?.fontSize||0}get#$(){return this.#D?.attributes?.style?.color||null}#N(t){const e=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},i={style:{color:this.#$,fontSize:this.#R?`calc(${this.#R}px * var(--total-scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:i});return s}#V(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#x()}updateEdited({rect:t,popup:e,deleted:s}){if(this.#t){s?(this.remove(),this.#k=null):e&&(e.deleted?this.remove():(this.#F(),this.#k=e.text)),t&&(this.#b=null,this.#T(),this.#L());return}if(s||e?.deleted){this.remove();return}this.#P(),this.#_||={contentsObj:this.#a,richText:this.#A},t&&(this.#u=null),e&&e.text&&(this.#A=this.#N(e.text),this.#c=Km.toDateObject(e.date),this.#a=null),this.#m?.remove(),this.#m=null}resetEdited(){this.#_&&({contentsObj:this.#a,richText:this.#A}=this.#_,this.#_=null,this.#m?.remove(),this.#m=null,this.#u=null)}remove(){if(this.#g?.abort(),this.#g=null,this.#m?.remove(),this.#m=null,this.#E=!1,this.#f=!1,this.#p?.remove(),this.#p=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#S(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:s,pageX:i,pageY:r}}}=this.#h;let o=!!this.#d,a=o?this.#d:this.#v;for(const g of this.#l)if(!a||ee.intersect(g.data.rect,a)!==null){a=g.data.rect,o=!0;break}const l=ee.normalizeRect([a[0],t[3]-a[1]+t[1],a[2],t[3]-a[3]+t[1]]),u=o?a[2]-a[0]+5:0,d=l[0]+u,f=l[1];this.#u=[100*(d-i)/e,100*(f-r)/s];const{style:h}=this.#i;h.left=`${this.#u[0]}%`,h.top=`${this.#u[1]}%`}#x(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#M(),this.#i.addEventListener("click",this.#o),this.#i.addEventListener("keydown",this.#e)):(this.#B(),this.#i.removeEventListener("click",this.#o),this.#i.removeEventListener("keydown",this.#e))}#M(){this.#m||this.render(),this.isVisible?this.#f&&this.#i.classList.add("focused"):(this.#S(),this.#i.hidden=!1,this.#i.style.zIndex=parseInt(this.#i.style.zIndex)+1e3)}#B(){this.#i.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#i.hidden=!0,this.#i.style.zIndex=parseInt(this.#i.style.zIndex)-1e3)}forceHide(){this.#E=this.isVisible,this.#E&&(this.#i.hidden=!0)}maybeShow(){this.#t||(this.#P(),this.#E&&(this.#m||this.#M(),this.#E=!1,this.#i.hidden=!1))}get isVisible(){return this.#t?!1:this.#i.hidden===!1}}class EC extends Bn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Ne.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const s=document.createElement("span");s.textContent=e,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class PJ extends Bn{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:s}=this,i=this.svgFactory.create(e,s,!0),r=this.#t=this.svgFactory.createElement("svg:line");return r.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),r.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),r.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),r.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),r.setAttribute("stroke-width",t.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),i.append(r),this.container.append(i),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class IJ extends Bn{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:s}=this,i=this.svgFactory.create(e,s,!0),r=t.borderStyle.width,o=this.#t=this.svgFactory.createElement("svg:rect");return o.setAttribute("x",r/2),o.setAttribute("y",r/2),o.setAttribute("width",e-r),o.setAttribute("height",s-r),o.setAttribute("stroke-width",r||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class DJ extends Bn{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:s}=this,i=this.svgFactory.create(e,s,!0),r=t.borderStyle.width,o=this.#t=this.svgFactory.createElement("svg:ellipse");return o.setAttribute("cx",e/2),o.setAttribute("cy",s/2),o.setAttribute("rx",e/2-r/2),o.setAttribute("ry",s/2-r/2),o.setAttribute("stroke-width",r||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class TC extends Bn{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:s,popupRef:i},width:r,height:o}=this;if(!e)return this.container;const a=this.svgFactory.create(r,o,!0);let l=[];for(let u=0,d=e.length;u<d;u+=2){const f=e[u]-t[0],h=t[3]-e[u+1];l.push(`${f},${h}`)}l=l.join(" ");const c=this.#t=this.svgFactory.createElement(this.svgElementName);return c.setAttribute("points",l),c.setAttribute("stroke-width",s.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class MJ extends TC{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class RJ extends Bn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}class Rb extends Bn{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Ne.HIGHLIGHT:Ne.INK}#s(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:s,borderStyle:i,popupRef:r}}=this,{transform:o,width:a,height:l}=this.#s(e,t),c=this.svgFactory.create(a,l,!0),u=this.#t=this.svgFactory.createElement("svg:g");c.append(u),u.setAttribute("stroke-width",i.width||1),u.setAttribute("stroke-linecap","round"),u.setAttribute("stroke-linejoin","round"),u.setAttribute("stroke-miterlimit",10),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),u.setAttribute("transform",o);for(let d=0,f=s.length;d<f;d++){const h=this.svgFactory.createElement(this.svgElementName);this.#e.push(h),h.setAttribute("points",s[d].join(",")),u.append(h)}return!r&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(c),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:s,rect:i}=t,r=this.#t;if(e>=0&&r.setAttribute("stroke-width",e||1),s)for(let o=0,a=this.#e.length;o<a;o++)this.#e[o].setAttribute("points",s[o].join(","));if(i){const{transform:o,width:a,height:l}=this.#s(this.data.rotation,i);r.parentElement.setAttribute("viewBox",`0 0 ${a} ${l}`),r.setAttribute("transform",o)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class LC extends Bn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Ne.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class NJ extends Bn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class OJ extends Bn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class FJ extends Bn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class PC extends Bn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Ne.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class $J extends Bn{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let s;e.hasAppearance||e.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),s.addEventListener("dblclick",this.#e.bind(this)),this.#t=s;const{isMac:i}=zs.platform;return t.addEventListener("keydown",r=>{r.key==="Enter"&&(i?r.metaKey:r.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class Nb{#t=null;#e=null;#s=null;#n=new Map;#o=null;#r=null;#i=[];#a=!1;constructor({div:t,accessibilityManager:e,annotationCanvasMap:s,annotationEditorUIManager:i,page:r,viewport:o,structTreeLayer:a,commentManager:l,linkService:c,annotationStorage:u}){this.div=t,this.#t=e,this.#e=s,this.#o=a||null,this.#r=c||null,this.#s=u||new Tb,this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=l||null}hasEditableAnnotations(){return this.#n.size>0}async render(t){const{annotations:e}=t,s=this.div;fc(s,this.viewport);const i=new Map,r=[],o={data:null,layer:s,linkService:this.#r,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Bp,annotationStorage:this.#s,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const a of e){if(a.noHTML)continue;const l=a.annotationType===us.POPUP;if(l){const d=i.get(a.id);if(!d)continue;if(!this._commentManager){r.push(a);continue}o.elements=d}else if(a.rect[2]===a.rect[0]||a.rect[3]===a.rect[1])continue;o.data=a;const c=N0.create(o);if(!c.isRenderable)continue;if(!l&&(this.#i.push(c),a.popupRef)){const d=i.get(a.popupRef);d?d.push(c):i.set(a.popupRef,[c])}const u=c.render();a.hidden&&(u.style.visibility="hidden"),c._isEditable&&(this.#n.set(c.data.id,c),this._annotationEditorUIManager?.renderAnnotationElement(c))}await this.#c();for(const a of r){const l=o.elements=i.get(a.id);o.data=a;const c=N0.create(o);if(!c.isRenderable)continue;const u=c.render();c.contentElement.id=`${iu}${a.id}`,a.hidden&&(u.style.visibility="hidden"),l.at(-1).container.after(u)}this.#l()}async#c(){if(this.#i.length===0)return;this.div.replaceChildren();const t=[];if(!this.#a){this.#a=!0;for(const{contentElement:s,data:{id:i}}of this.#i){const r=s.id=`${iu}${i}`;t.push(this.#o?.getAriaAttributes(r).then(o=>{if(o)for(const[a,l]of o)s.setAttribute(a,l)}))}}this.#i.sort(({data:{rect:[s,i,r,o]}},{data:{rect:[a,l,c,u]}})=>{if(s===r&&i===o)return 1;if(a===c&&l===u)return-1;const d=o,f=i,h=(i+o)/2,g=u,m=l,b=(l+u)/2;if(h>=g&&b<=f)return-1;if(b>=d&&h<=m)return 1;const y=(s+r)/2,x=(a+c)/2;return y-x});const e=document.createDocumentFragment();for(const s of this.#i)e.append(s.container),this._commentManager?(s.extraPopupElement?.popup||s.popup)?.renderCommentButton():s.extraPopupElement&&e.append(s.extraPopupElement.render());if(this.div.append(e),await Promise.all(t),this.#t)for(const s of this.#i)this.#t.addPointerInTextLayer(s.contentElement,!1)}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:this.#r,svgFactory:new Bp,parent:this};for(const s of t){s.borderStyle||=Nb._defaultBorderStyle,e.data=s;const i=N0.create(e);i.isRenderable&&(i.render(),i.contentElement.id=`${iu}${s.id}`,this.#i.push(i))}await this.#c()}update({viewport:t}){const e=this.div;this.viewport=t,fc(e,{rotation:t.rotation}),this.#l(),e.hidden=!1}#l(){if(!this.#e)return;const t=this.div;for(const[e,s]of this.#e){const i=t.querySelector(`[data-annotation-id="${e}"]`);if(!i)continue;s.className="annotationContent";const{firstChild:r}=i;r?r.nodeName==="CANVAS"?r.replaceWith(s):r.classList.contains("annotationContent")?r.after(s):r.before(s):i.append(s);const o=this.#n.get(e);o&&(o._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,i.id,s),o._hasNoCanvas=!1):o.canvas=s)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}addFakeAnnotation(t){const{div:e}=this,{id:s,rotation:i}=t,r=new xJ({data:{id:s,rect:t.getPDFRect(),rotation:i},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:this.#r,annotationStorage:this.#s});return r.render(),r.contentElement.id=`${iu}${s}`,r.createOrUpdatePopup(),this.#i.push(r),r}removeAnnotation(t){const e=this.#i.findIndex(i=>i.data.id===t);if(e<0)return;const[s]=this.#i.splice(e,1);this.#t?.removePointerInTextLayer(s.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(const e of t)e.updateFakeAnnotationElement(this);this.#c()}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return Fe(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Qc.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const j1=/\r\n?|\n/g;class As extends ye{#t="";#e=`${this.id}-editor`;#s=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=As.prototype,e=r=>r.isEmpty(),s=Xa.TRANSLATE_SMALL,i=Xa.TRANSLATE_BIG;return Fe(this,"_keyboardManager",new uf([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}]]))}static _type="freetext";static _editorType=Ne.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||As._defaultColor||ye._defaultLineColor,this.#n=t.fontSize||As._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static initialize(t,e){ye.initialize(t,e);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case Ye.FREETEXT_SIZE:As._defaultFontSize=e;break;case Ye.FREETEXT_COLOR:As._defaultColor=e;break}}updateParams(t,e){switch(t){case Ye.FREETEXT_SIZE:this.#o(e);break;case Ye.FREETEXT_COLOR:this.#r(e);break}}static get defaultPropertiesToUpdate(){return[[Ye.FREETEXT_SIZE,As._defaultFontSize],[Ye.FREETEXT_COLOR,As._defaultColor||ye._defaultLineColor]]}get propertiesToUpdate(){return[[Ye.FREETEXT_SIZE,this.#n],[Ye.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new Vh(this),[["colorPicker",this._colorPicker]]}get colorType(){return Ye.FREETEXT_COLOR}#o(t){const e=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-this.#n)*this.parentScale),this.#n=i,this.#a()},s=this.#n;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ye.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#r(t){const e=i=>{this.color=i,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ye.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-As._internalPadding*t,-(As._internalPadding+this.#n)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#s=new AbortController;const t=this._uiManager.combinedSignal(this.#s);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#s?.abort(),this.#s=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#i(){const t=[];this.editorDiv.normalize();let e=null;for(const s of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(As.#c(s)),e=s);return t.join(`
`)}#a(){const[t,e]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:i,div:r}=this,o=r.style.display,a=r.classList.contains("hidden");r.classList.remove("hidden"),r.style.display="hidden",i.div.append(this.div),s=r.getBoundingClientRect(),r.remove(),r.style.display=o,r.classList.toggle("hidden",a)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/e):(this.width=s.height/t,this.height=s.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,e=this.#t=this.#i().trimEnd();if(t===e)return;const s=i=>{if(this.#t=i,!i){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#a()};this.addCommands({cmd:()=>{s(e)},undo:()=>{s(t)},mustExec:!1}),this.#a()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){As._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,r]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[a,l]=this.getInitialTranslation();[a,l]=this.pageTranslationToScreen(a,l);const[c,u]=this.pageDimensions,[d,f]=this.pageTranslation;let h,g;switch(this.rotation){case 0:h=t+(o[0]-d)/c,g=e+this.height-(o[1]-f)/u;break;case 90:h=t+(o[0]-d)/c,g=e-(o[1]-f)/u,[a,l]=[l,-a];break;case 180:h=t-this.width+(o[0]-d)/c,g=e-(o[1]-f)/u,[a,l]=[-a,-l];break;case 270:h=t+(o[0]-d-this.height*u)/c,g=e+(o[1]-f-this.width*c)/u,[a,l]=[-l,a];break}this.setAt(h*i,g*r,a,l)}else this._moveAfterPaste(t,e);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(j1,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:s}=e;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const i=As.#d(e.getData("text")||"").replaceAll(j1,`
`);if(!i)return;const r=window.getSelection();if(!r.rangeCount)return;this.editorDiv.normalize(),r.deleteFromDocument();const o=r.getRangeAt(0);if(!i.includes(`
`)){o.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),r.collapseToStart();return}const{startContainer:a,startOffset:l}=o,c=[],u=[];if(a.nodeType===Node.TEXT_NODE){const h=a.parentElement;if(u.push(a.nodeValue.slice(l).replaceAll(j1,"")),h!==this.editorDiv){let g=c;for(const m of this.editorDiv.childNodes){if(m===h){g=u;continue}g.push(As.#c(m))}}c.push(a.nodeValue.slice(0,l).replaceAll(j1,""))}else if(a===this.editorDiv){let h=c,g=0;for(const m of this.editorDiv.childNodes)g++===l&&(h=u),h.push(As.#c(m))}this.#t=`${c.join(`
`)}${i}${u.join(`
`)}`,this.#l();const d=new Range;let f=Math.sumPrecise(c.map(h=>h.length));for(const{firstChild:h}of this.editorDiv.childNodes)if(h.nodeType===Node.TEXT_NODE){const g=h.nodeValue.length;if(f<=g){d.setStart(h,f),d.setEnd(h,f);break}f-=g}r.removeAllRanges(),r.addRange(d)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#h(){return this.#t.replaceAll(""," ")}static#d(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=As._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,e,s){let i=null;if(t instanceof EC){const{data:{defaultAppearanceData:{fontSize:o,fontColor:a},rect:l,rotation:c,id:u,popupRef:d,richText:f,contentsObj:h,creationDate:g,modificationDate:m},textContent:b,textPosition:y,parent:{page:{pageNumber:x}}}=t;if(!b||b.length===0)return null;i=t={annotationType:Ne.FREETEXT,color:Array.from(a),fontSize:o,value:b.join(`
`),position:y,pageIndex:x-1,rect:l.slice(0),rotation:c,annotationElementId:u,id:u,deleted:!1,popupRef:d,comment:h?.str||null,richText:f,creationDate:g,modificationDate:m}}const r=await super.deserialize(t,e,s);return r.#n=t.fontSize,r.color=ee.makeHexColor(...t.color),r.#t=As.#d(t.value),r._initialData=i,t.comment&&r.setCommentData(t),r}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=ye._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(t),{color:e,fontSize:this.#n,value:this.#h()});return this.addComment(s),t?(s.isCopy=!0,s):this.annotationElementId&&!this.#f(s)?null:(s.id=this.annotationElementId,s)}#f(t){const{value:e,fontSize:s,color:i,pageIndex:r}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==s||t.color.some((o,a)=>o!==i[a])||t.pageIndex!==r}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(!e)return null;const{style:s}=e;s.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,s.color=this.color,e.replaceChildren();for(const i of this.#t.split(`
`)){const r=document.createElement("div");r.append(i?document.createTextNode(i):document.createElement("br")),e.append(r)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class Qt{static PRECISION=1e-4;toSVGPath(){wn("Abstract method `toSVGPath` must be implemented.")}get box(){wn("Abstract getter `box` must be implemented.")}serialize(t,e){wn("Abstract method `serialize` must be implemented.")}static _rescale(t,e,s,i,r,o){o||=new Float32Array(t.length);for(let a=0,l=t.length;a<l;a+=2)o[a]=e+t[a]*i,o[a+1]=s+t[a+1]*r;return o}static _rescaleAndSwap(t,e,s,i,r,o){o||=new Float32Array(t.length);for(let a=0,l=t.length;a<l;a+=2)o[a]=e+t[a+1]*i,o[a+1]=s+t[a]*r;return o}static _translate(t,e,s,i){i||=new Float32Array(t.length);for(let r=0,o=t.length;r<o;r+=2)i[r]=e+t[r],i[r+1]=s+t[r+1];return i}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,s,i,r){switch(r){case 90:return[1-e/s,t/i];case 180:return[1-t/s,1-e/i];case 270:return[e/s,1-t/i];default:return[t/s,e/i]}}static _normalizePagePoint(t,e,s){switch(s){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,s,i,r,o){return[(t+5*s)/6,(e+5*i)/6,(5*s+r)/6,(5*i+o)/6,(s+r)/2,(i+o)/2]}}class Yl{#t;#e=[];#s;#n;#o=[];#r=new Float32Array(18);#i;#a;#c;#l;#h;#d;#f=[];static#m=8;static#g=2;static#u=Yl.#m+Yl.#g;constructor({x:t,y:e},s,i,r,o,a=0){this.#t=s,this.#d=r*i,this.#n=o,this.#r.set([NaN,NaN,NaN,NaN,t,e],6),this.#s=a,this.#l=Yl.#m*i,this.#c=Yl.#u*i,this.#h=i,this.#f.push(t,e)}isEmpty(){return isNaN(this.#r[8])}#p(){const t=this.#r.subarray(4,6),e=this.#r.subarray(16,18),[s,i,r,o]=this.#t;return[(this.#i+(t[0]-e[0])/2-s)/r,(this.#a+(t[1]-e[1])/2-i)/o,(this.#i+(e[0]-t[0])/2-s)/r,(this.#a+(e[1]-t[1])/2-i)/o]}add({x:t,y:e}){this.#i=t,this.#a=e;const[s,i,r,o]=this.#t;let[a,l,c,u]=this.#r.subarray(8,12);const d=t-c,f=e-u,h=Math.hypot(d,f);if(h<this.#c)return!1;const g=h-this.#l,m=g/h,b=m*d,y=m*f;let x=a,_=l;a=c,l=u,c+=b,u+=y,this.#f?.push(t,e);const C=-y/g,A=b/g,I=C*this.#d,R=A*this.#d;return this.#r.set(this.#r.subarray(2,8),0),this.#r.set([c+I,u+R],4),this.#r.set(this.#r.subarray(14,18),12),this.#r.set([c-I,u-R],16),isNaN(this.#r[6])?(this.#o.length===0&&(this.#r.set([a+I,l+R],2),this.#o.push(NaN,NaN,NaN,NaN,(a+I-s)/r,(l+R-i)/o),this.#r.set([a-I,l-R],14),this.#e.push(NaN,NaN,NaN,NaN,(a-I-s)/r,(l-R-i)/o)),this.#r.set([x,_,a,l,c,u],6),!this.isEmpty()):(this.#r.set([x,_,a,l,c,u],6),Math.abs(Math.atan2(_-l,x-a)-Math.atan2(y,b))<Math.PI/2?([a,l,c,u]=this.#r.subarray(2,6),this.#o.push(NaN,NaN,NaN,NaN,((a+c)/2-s)/r,((l+u)/2-i)/o),[a,l,x,_]=this.#r.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((x+a)/2-s)/r,((_+l)/2-i)/o),!0):([x,_,a,l,c,u]=this.#r.subarray(0,6),this.#o.push(((x+5*a)/6-s)/r,((_+5*l)/6-i)/o,((5*a+c)/6-s)/r,((5*l+u)/6-i)/o,((a+c)/2-s)/r,((l+u)/2-i)/o),[c,u,a,l,x,_]=this.#r.subarray(12,18),this.#e.push(((x+5*a)/6-s)/r,((_+5*l)/6-i)/o,((5*a+c)/6-s)/r,((5*l+u)/6-i)/o,((a+c)/2-s)/r,((l+u)/2-i)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#o,e=this.#e;if(isNaN(this.#r[6])&&!this.isEmpty())return this.#b();const s=[];s.push(`M${t[4]} ${t[5]}`);for(let i=6;i<t.length;i+=6)isNaN(t[i])?s.push(`L${t[i+4]} ${t[i+5]}`):s.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);this.#v(s);for(let i=e.length-6;i>=6;i-=6)isNaN(e[i])?s.push(`L${e[i+4]} ${e[i+5]}`):s.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);return this.#y(s),s.join(" ")}#b(){const[t,e,s,i]=this.#t,[r,o,a,l]=this.#p();return`M${(this.#r[2]-t)/s} ${(this.#r[3]-e)/i} L${(this.#r[4]-t)/s} ${(this.#r[5]-e)/i} L${r} ${o} L${a} ${l} L${(this.#r[16]-t)/s} ${(this.#r[17]-e)/i} L${(this.#r[14]-t)/s} ${(this.#r[15]-e)/i} Z`}#y(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#v(t){const[e,s,i,r]=this.#t,o=this.#r.subarray(4,6),a=this.#r.subarray(16,18),[l,c,u,d]=this.#p();t.push(`L${(o[0]-e)/i} ${(o[1]-s)/r} L${l} ${c} L${u} ${d} L${(a[0]-e)/i} ${(a[1]-s)/r}`)}newFreeDrawOutline(t,e,s,i,r,o){return new IC(t,e,s,i,r,o)}getOutlines(){const t=this.#o,e=this.#e,s=this.#r,[i,r,o,a]=this.#t,l=new Float32Array((this.#f?.length??0)+2);for(let d=0,f=l.length-2;d<f;d+=2)l[d]=(this.#f[d]-i)/o,l[d+1]=(this.#f[d+1]-r)/a;if(l[l.length-2]=(this.#i-i)/o,l[l.length-1]=(this.#a-r)/a,isNaN(s[6])&&!this.isEmpty())return this.#A(l);const c=new Float32Array(this.#o.length+24+this.#e.length);let u=t.length;for(let d=0;d<u;d+=2){if(isNaN(t[d])){c[d]=c[d+1]=NaN;continue}c[d]=t[d],c[d+1]=t[d+1]}u=this.#_(c,u);for(let d=e.length-6;d>=6;d-=6)for(let f=0;f<6;f+=2){if(isNaN(e[d+f])){c[u]=c[u+1]=NaN,u+=2;continue}c[u]=e[d+f],c[u+1]=e[d+f+1],u+=2}return this.#C(c,u),this.newFreeDrawOutline(c,l,this.#t,this.#h,this.#s,this.#n)}#A(t){const e=this.#r,[s,i,r,o]=this.#t,[a,l,c,u]=this.#p(),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(e[2]-s)/r,(e[3]-i)/o,NaN,NaN,NaN,NaN,(e[4]-s)/r,(e[5]-i)/o,NaN,NaN,NaN,NaN,a,l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,(e[16]-s)/r,(e[17]-i)/o,NaN,NaN,NaN,NaN,(e[14]-s)/r,(e[15]-i)/o],0),this.newFreeDrawOutline(d,t,this.#t,this.#h,this.#s,this.#n)}#C(t,e){const s=this.#e;return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],e),e+=6}#_(t,e){const s=this.#r.subarray(4,6),i=this.#r.subarray(16,18),[r,o,a,l]=this.#t,[c,u,d,f]=this.#p();return t.set([NaN,NaN,NaN,NaN,(s[0]-r)/a,(s[1]-o)/l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(i[0]-r)/a,(i[1]-o)/l],e),e+=24}}class IC extends Qt{#t;#e=new Float32Array(4);#s;#n;#o;#r;#i;constructor(t,e,s,i,r,o){super(),this.#i=t,this.#o=e,this.#t=s,this.#r=i,this.#s=r,this.#n=o,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#a(o);const[a,l,c,u]=this.#e;for(let d=0,f=t.length;d<f;d+=2)t[d]=(t[d]-a)/c,t[d+1]=(t[d+1]-l)/u;for(let d=0,f=e.length;d<f;d+=2)e[d]=(e[d]-a)/c,e[d+1]=(e[d+1]-l)/u}toSVGPath(){const t=[`M${this.#i[4]} ${this.#i[5]}`];for(let e=6,s=this.#i.length;e<s;e+=6){if(isNaN(this.#i[e])){t.push(`L${this.#i[e+4]} ${this.#i[e+5]}`);continue}t.push(`C${this.#i[e]} ${this.#i[e+1]} ${this.#i[e+2]} ${this.#i[e+3]} ${this.#i[e+4]} ${this.#i[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,s,i],r){const o=s-t,a=i-e;let l,c;switch(r){case 0:l=Qt._rescale(this.#i,t,i,o,-a),c=Qt._rescale(this.#o,t,i,o,-a);break;case 90:l=Qt._rescaleAndSwap(this.#i,t,e,o,a),c=Qt._rescaleAndSwap(this.#o,t,e,o,a);break;case 180:l=Qt._rescale(this.#i,s,e,-o,a),c=Qt._rescale(this.#o,s,e,-o,a);break;case 270:l=Qt._rescaleAndSwap(this.#i,s,i,-o,-a),c=Qt._rescaleAndSwap(this.#o,s,i,-o,-a);break}return{outline:Array.from(l),points:[Array.from(c)]}}#a(t){const e=this.#i;let s=e[4],i=e[5];const r=[s,i,s,i];let o=s,a=i,l=s,c=i;const u=t?Math.max:Math.min,d=new Float32Array(4);for(let h=6,g=e.length;h<g;h+=6){const m=e[h+4],b=e[h+5];isNaN(e[h])?(ee.pointBoundingBox(m,b,r),a>b?(o=m,a=b):a===b&&(o=u(o,m)),c<b?(l=m,c=b):c===b&&(l=u(l,m))):(d[0]=d[1]=1/0,d[2]=d[3]=-1/0,ee.bezierBoundingBox(s,i,...e.slice(h,h+6),d),ee.rectBoundingBox(d[0],d[1],d[2],d[3],r),a>d[1]?(o=d[0],a=d[1]):a===d[1]&&(o=u(o,d[0])),c<d[3]?(l=d[2],c=d[3]):c===d[3]&&(l=u(l,d[2]))),s=m,i=b}const f=this.#e;f[0]=r[0]-this.#s,f[1]=r[1]-this.#s,f[2]=r[2]-r[0]+2*this.#s,f[3]=r[3]-r[1]+2*this.#s,this.firstPoint=[o,a],this.lastPoint=[l,c]}get box(){return this.#e}newOutliner(t,e,s,i,r,o=0){return new Yl(t,e,s,i,r,o)}getNewOutline(t,e){const[s,i,r,o]=this.#e,[a,l,c,u]=this.#t,d=r*c,f=o*u,h=s*c+a,g=i*u+l,m=this.newOutliner({x:this.#o[0]*d+h,y:this.#o[1]*f+g},this.#t,this.#r,t,this.#n,e??this.#s);for(let b=2;b<this.#o.length;b+=2)m.add({x:this.#o[b]*d+h,y:this.#o[b+1]*f+g});return m.getOutlines()}}class s5{#t;#e;#s;#n=[];#o=[];constructor(t,e=0,s=0,i=!0){const r=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:m,y:b,width:y,height:x}of t){const _=Math.floor((m-e)/o)*o,C=Math.ceil((m+y+e)/o)*o,A=Math.floor((b-e)/o)*o,I=Math.ceil((b+x+e)/o)*o,R=[_,A,I,!0],L=[C,A,I,!1];this.#n.push(R,L),ee.rectBoundingBox(_,A,C,I,r)}const a=r[2]-r[0]+2*s,l=r[3]-r[1]+2*s,c=r[0]-s,u=r[1]-s;let d=i?-1/0:1/0,f=1/0;const h=this.#n.at(i?-1:-2),g=[h[0],h[2]];for(const m of this.#n){const[b,y,x,_]=m;!_&&i?y<f?(f=y,d=b):y===f&&(d=Math.max(d,b)):_&&!i&&(y<f?(f=y,d=b):y===f&&(d=Math.min(d,b))),m[0]=(b-c)/a,m[1]=(y-u)/l,m[2]=(x-u)/l}this.#t=new Float32Array([c,u,a,l]),this.#e=[d,f],this.#s=g}getOutlines(){this.#n.sort((e,s)=>e[0]-s[0]||e[1]-s[1]||e[2]-s[2]);const t=[];for(const e of this.#n)e[3]?(t.push(...this.#l(e)),this.#a(e)):(this.#c(e),t.push(...this.#l(e)));return this.#r(t)}#r(t){const e=[],s=new Set;for(const o of t){const[a,l,c]=o;e.push([a,l,o],[a,c,o])}e.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=e.length;o<a;o+=2){const l=e[o][2],c=e[o+1][2];l.push(c),c.push(l),s.add(l),s.add(c)}const i=[];let r;for(;s.size>0;){const o=s.values().next().value;let[a,l,c,u,d]=o;s.delete(o);let f=a,h=l;for(r=[a,c],i.push(r);;){let g;if(s.has(u))g=u;else if(s.has(d))g=d;else break;s.delete(g),[a,l,c,u,d]=g,f!==a&&(r.push(f,h,a,h===l?l:c),f=a),h=h===l?c:l}r.push(f,h)}return new BJ(i,this.#t,this.#e,this.#s)}#i(t){const e=this.#o;let s=0,i=e.length-1;for(;s<=i;){const r=s+i>>1,o=e[r][0];if(o===t)return r;o<t?s=r+1:i=r-1}return i+1}#a([,t,e]){const s=this.#i(t);this.#o.splice(s,0,[t,e])}#c([,t,e]){const s=this.#i(t);for(let i=s;i<this.#o.length;i++){const[r,o]=this.#o[i];if(r!==t)break;if(r===t&&o===e){this.#o.splice(i,1);return}}for(let i=s-1;i>=0;i--){const[r,o]=this.#o[i];if(r!==t)break;if(r===t&&o===e){this.#o.splice(i,1);return}}}#l(t){const[e,s,i]=t,r=[[e,s,i]],o=this.#i(i);for(let a=0;a<o;a++){const[l,c]=this.#o[a];for(let u=0,d=r.length;u<d;u++){const[,f,h]=r[u];if(!(c<=f||h<=l)){if(f>=l){if(h>c)r[u][1]=c;else{if(d===1)return[];r.splice(u,1),u--,d--}continue}r[u][2]=l,h>c&&r.push([e,c,h])}}}return r}}class BJ extends Qt{#t;#e;constructor(t,e,s,i){super(),this.#e=t,this.#t=e,this.firstPoint=s,this.lastPoint=i}toSVGPath(){const t=[];for(const e of this.#e){let[s,i]=e;t.push(`M${s} ${i}`);for(let r=2;r<e.length;r+=2){const o=e[r],a=e[r+1];o===s?(t.push(`V${a}`),i=a):a===i&&(t.push(`H${o}`),s=o)}t.push("Z")}return t.join(" ")}serialize([t,e,s,i],r){const o=[],a=s-t,l=i-e;for(const c of this.#e){const u=new Array(c.length);for(let d=0;d<c.length;d+=2)u[d]=t+c[d]*a,u[d+1]=i-c[d+1]*l;o.push(u)}return o}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class i5 extends Yl{newFreeDrawOutline(t,e,s,i,r,o){return new jJ(t,e,s,i,r,o)}}class jJ extends IC{newOutliner(t,e,s,i,r,o=0){return new i5(t,e,s,i,r,o)}}class ts extends ye{#t=null;#e=0;#s;#n=null;#o=null;#r=null;#i=null;#a=0;#c=null;#l=null;#h=null;#d=!1;#f=null;#m=null;#g=null;#u="";#p;#b="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Ne.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=ts.prototype;return Fe(this,"_keyboardManager",new uf([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||ts._defaultColor,this.#p=t.thickness||ts._defaultThickness,this.opacity=t.opacity||ts._defaultOpacity,this.#s=t.boxes||null,this.#b=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#d=!0,this.#v(t),this.#w()):this.#s&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#i=t.focusNode,this.#a=t.focusOffset,this.#y(),this.#w(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#d?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#b}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#y(){const t=new s5(this.#s,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const e=new s5(this.#s,.0025,.001,this._uiManager.direction==="ltr");this.#r=e.getOutlines();const{firstPoint:s}=this.#l;this.#f=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height];const{lastPoint:i}=this.#r;this.#m=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#v({highlightOutlines:t,highlightId:e,clipPathId:s}){this.#l=t;const i=1.5;if(this.#r=t.getNewOutline(this.#p/2+i,.0025),e>=0)this.#h=e,this.#n=s,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#g=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},!0);else if(this.parent){const d=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:ts.#k(this.#l.box,(d-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#g,{bbox:ts.#k(this.#r.box,d),path:{d:this.#r.toSVGPath()}})}const[r,o,a,l]=t.box;switch(this.rotation){case 0:this.x=r,this.y=o,this.width=a,this.height=l;break;case 90:{const[d,f]=this.parentDimensions;this.x=o,this.y=1-r,this.width=a*f/d,this.height=l*d/f;break}case 180:this.x=1-r,this.y=1-o,this.width=a,this.height=l;break;case 270:{const[d,f]=this.parentDimensions;this.x=1-o,this.y=r,this.width=a*f/d,this.height=l*d/f;break}}const{firstPoint:c}=t;this.#f=[(c[0]-r)/a,(c[1]-o)/l];const{lastPoint:u}=this.#r;this.#m=[(u[0]-r)/a,(u[1]-o)/l]}static initialize(t,e){ye.initialize(t,e),ts._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case Ye.HIGHLIGHT_COLOR:ts._defaultColor=e;break;case Ye.HIGHLIGHT_THICKNESS:ts._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#m}get commentButtonPosition(){return this.#f}updateParams(t,e){switch(t){case Ye.HIGHLIGHT_COLOR:this.#A(e);break;case Ye.HIGHLIGHT_THICKNESS:this.#C(e);break}}static get defaultPropertiesToUpdate(){return[[Ye.HIGHLIGHT_COLOR,ts._defaultColor],[Ye.HIGHLIGHT_THICKNESS,ts._defaultThickness]]}get propertiesToUpdate(){return[[Ye.HIGHLIGHT_COLOR,this.color||ts._defaultColor],[Ye.HIGHLIGHT_THICKNESS,this.#p||ts._defaultThickness],[Ye.HIGHLIGHT_FREE,this.#d]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#o?.updateColor(this.color),super.onUpdatedColor()}#A(t){const e=(r,o)=>{this.color=r,this.opacity=o,this.onUpdatedColor()},s=this.color,i=this.opacity;this.addCommands({cmd:e.bind(this,t,ts._defaultOpacity),undo:e.bind(this,s,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ye.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#C(t){const e=this.#p,s=i=>{this.#p=i,this.#_(i)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ye.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#o=new rr({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#L())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#L())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#E(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#w(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#E():t&&(this.#w(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#_(t){this.#d&&(this.#v({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())}#E(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#g),this.#g=null)}#w(t=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#n}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#d},path:{d:this.#l.toSVGPath()}},!1,!0),this.#g=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#d},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},this.#d),this.#c&&(this.#c.style.clipPath=this.#n))}static#k([t,e,s,i],r){switch(r){case 90:return[1-e-i,t,i,s];case 180:return[1-t-s,1-e-i,s,i];case 270:return[e,1-t-s,i,s]}return[t,e,s,i]}rotate(t){const{drawLayer:e}=this.parent;let s;this.#d?(t=(t-this.rotation+360)%360,s=ts.#k(this.#l.box,t)):s=ts.#k([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#h,{bbox:s,root:{"data-main-rotation":t}}),e.updateProperties(this.#g,{bbox:ts.#k(this.#r.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#d?t.classList.add("free"):this.div.addEventListener("keydown",this.#P.bind(this),{signal:this._uiManager._signal});const e=this.#c=document.createElement("div");return t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#n,this.setDims(),aC(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1}})}#P(t){ts._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#T(!0);break;case 1:case 3:this.#T(!1);break}}#T(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#i,this.#a)}select(){super.select(),this.#g&&this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#g&&(this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{selected:!1}}),this.#d||this.#T(!1))}get _mustFixPosition(){return!this.#d}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#g,{rootClass:{hidden:!t}}))}#L(){return this.#d?this.rotation:0}#F(){if(this.#d)return null;const[t,e]=this.pageDimensions,[s,i]=this.pageTranslation,r=this.#s,o=new Float32Array(r.length*8);let a=0;for(const{x:l,y:c,width:u,height:d}of r){const f=l*t+s,h=(1-c)*e+i;o[a]=o[a+4]=f,o[a+1]=o[a+3]=h,o[a+2]=o[a+6]=f+u*t,o[a+5]=o[a+7]=h-d*e,a+=8}return o}#D(t){return this.#l.serialize(t,this.#L())}static startHighlighting(t,e,{target:s,x:i,y:r}){const{x:o,y:a,width:l,height:c}=s.getBoundingClientRect(),u=new AbortController,d=t.combinedSignal(u),f=h=>{u.abort(),this.#$(t,h)};window.addEventListener("blur",f,{signal:d}),window.addEventListener("pointerup",f,{signal:d}),window.addEventListener("pointerdown",Wn,{capture:!0,passive:!1,signal:d}),window.addEventListener("contextmenu",pr,{signal:d}),s.addEventListener("pointermove",this.#R.bind(this,t),{signal:d}),this._freeHighlight=new i5({x:i,y:r},[o,a,l,c],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#R(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#$(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,s){let i=null;if(t instanceof LC){const{data:{quadPoints:g,rect:m,rotation:b,id:y,color:x,opacity:_,popupRef:C,richText:A,contentsObj:I,creationDate:R,modificationDate:L},parent:{page:{pageNumber:P}}}=t;i=t={annotationType:Ne.HIGHLIGHT,color:Array.from(x),opacity:_,quadPoints:g,boxes:null,pageIndex:P-1,rect:m.slice(0),rotation:b,annotationElementId:y,id:y,deleted:!1,popupRef:C,richText:A,comment:I?.str||null,creationDate:R,modificationDate:L}}else if(t instanceof Rb){const{data:{inkLists:g,rect:m,rotation:b,id:y,color:x,borderStyle:{rawWidth:_},popupRef:C,richText:A,contentsObj:I,creationDate:R,modificationDate:L},parent:{page:{pageNumber:P}}}=t;i=t={annotationType:Ne.HIGHLIGHT,color:Array.from(x),thickness:_,inkLists:g,boxes:null,pageIndex:P-1,rect:m.slice(0),rotation:b,annotationElementId:y,id:y,deleted:!1,popupRef:C,richText:A,comment:I?.str||null,creationDate:R,modificationDate:L}}const{color:r,quadPoints:o,inkLists:a,opacity:l}=t,c=await super.deserialize(t,e,s);c.color=ee.makeHexColor(...r),c.opacity=l||1,a&&(c.#p=t.thickness),c._initialData=i,t.comment&&c.setCommentData(t);const[u,d]=c.pageDimensions,[f,h]=c.pageTranslation;if(o){const g=c.#s=[];for(let m=0;m<o.length;m+=8)g.push({x:(o[m]-f)/u,y:1-(o[m+1]-h)/d,width:(o[m+2]-o[m])/u,height:(o[m+1]-o[m+5])/d});c.#y(),c.#w(),c.rotate(c.rotation)}else if(a){c.#d=!0;const g=a[0],m={x:g[0]-f,y:d-(g[1]-h)},b=new i5(m,[0,0,u,d],1,c.#p/2,!0,.001);for(let _=0,C=g.length;_<C;_+=2)m.x=g[_]-f,m.y=d-(g[_+1]-h),b.add(m);const{id:y,clipPathId:x}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:c.color,"fill-opacity":c._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:b.toSVGPath()}},!0,!0);c.#v({highlightOutlines:b.getOutlines(),highlightId:y,clipPathId:x}),c.#w(),c.rotate(c.parentRotation)}return c}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=ye._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(t);return Object.assign(s,{color:e,opacity:this.opacity,thickness:this.#p,quadPoints:this.#F(),outlines:this.#D(s.rect)}),this.addComment(s),this.annotationElementId&&!this.#N(s)?null:(s.id=this.annotationElementId,s)}#N(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((s,i)=>s!==e[i])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class DC{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,s]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,s)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){wn("Not implemented")}}class nn extends ye{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#s=null;static#n=null;static#o=null;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#r(t),this.#c())}#r({drawOutlines:t,drawId:e,drawingOptions:s}){this.#t=t,this._drawingOptions||=s,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#i(t,this.parent),this.#d(t.box)}#i(t,e){const{id:s}=e.drawLayer.draw(nn._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s}static _mergeSVGProperties(t,e){const s=new Set(Object.keys(t));for(const[i,r]of Object.entries(e))s.has(i)?Object.assign(t[i],r):t[i]=r;return t}static getDefaultDrawingOptions(t){wn("Not implemented")}static get typesMap(){wn("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,e),this._currentParent&&(nn.#s.updateProperty(s,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[s,i]of this.typesMap)t.push([s,e[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[s,i]of this.constructor.typesMap)t.push([s,e[i]]);return t}_updateProperty(t,e,s){const i=this._drawingOptions,r=i[e],o=a=>{i.updateProperty(e,a);const l=this.#t.updateProperty(e,a);l&&this.#d(l),this.parent?.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:o.bind(this,s),undo:o.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,nn._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#h()),{bbox:this.#f()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,nn._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#h()),{bbox:this.#f()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#f()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,nn._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#h(),this.parentDimensions),{bbox:this.#f()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#a(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#c(),this.#d(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#a()):t&&(this._uiManager.addShouldRescale(this),this.#c(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#a(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#c(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#i(this.#t,t)}}#l([t,e,s,i]){const{parentDimensions:[r,o],rotation:a}=this;switch(a){case 90:return[e,1-t,s*(o/r),i*(r/o)];case 180:return[1-t,1-e,s,i];case 270:return[1-e,t,s*(o/r),i*(r/o)];default:return[t,e,s,i]}}#h(){const{x:t,y:e,width:s,height:i,parentDimensions:[r,o],rotation:a}=this;switch(a){case 90:return[1-e,t,s*(r/o),i*(o/r)];case 180:return[1-t,1-e,s,i];case 270:return[e,1-t,s*(r/o),i*(o/r)];default:return[t,e,s,i]}}#d(t){[this.x,this.y,this.width,this.height]=this.#l(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#f(){const{x:t,y:e,width:s,height:i,rotation:r,parentRotation:o,parentDimensions:[a,l]}=this;switch((r*4+o)/90){case 1:return[1-e-i,t,i,s];case 2:return[1-t-s,1-e-i,s,i];case 3:return[e,1-t-s,i,s];case 4:return[t,e-s*(a/l),i*(l/a),s*(a/l)];case 5:return[1-e,t,s*(a/l),i*(l/a)];case 6:return[1-t-i*(l/a),1-e,i*(l/a),s*(a/l)];case 7:return[e-s*(a/l),1-t-i*(l/a),s*(a/l),i*(l/a)];case 8:return[t-s,e-i,s,i];case 9:return[1-e,t-s,i,s];case 10:return[1-t,1-e,s,i];case 11:return[e-i,1-t,i,s];case 12:return[t-i*(l/a),e,i*(l/a),s*(a/l)];case 13:return[1-e-s*(a/l),t-i*(l/a),s*(a/l),i*(l/a)];case 14:return[1-t,1-e-s*(a/l),i*(l/a),s*(a/l)];case 15:return[e,1-t,s*(a/l),i*(l/a)];default:return[t,e,s,i]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,nn._mergeSVGProperties({bbox:this.#f()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#d(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const s=super.render();s.classList.add("draw");const i=document.createElement("div");return s.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),s}static createDrawerInstance(t,e,s,i,r){wn("Not implemented")}static startDrawing(t,e,s,i){const{target:r,offsetX:o,offsetY:a,pointerId:l,pointerType:c}=i;if(sn.isInitializedAndDifferentPointerType(c))return;const{viewport:{rotation:u}}=t,{width:d,height:f}=r.getBoundingClientRect(),h=nn.#n=new AbortController,g=t.combinedSignal(h);if(sn.setPointer(c,l),window.addEventListener("pointerup",m=>{sn.isSamePointerIdOrRemove(m.pointerId)&&this._endDraw(m)},{signal:g}),window.addEventListener("pointercancel",m=>{sn.isSamePointerIdOrRemove(m.pointerId)&&this._currentParent.endDrawingSession()},{signal:g}),window.addEventListener("pointerdown",m=>{sn.isSamePointerType(m.pointerType)&&(sn.initializeAndAddPointerId(m.pointerId),nn.#s.isCancellable()&&(nn.#s.removeLastElement(),nn.#s.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",pr,{signal:g}),r.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),r.addEventListener("touchmove",m=>{sn.isSameTimeStamp(m.timeStamp)&&Wn(m)},{signal:g}),t.toggleDrawing(),e._editorUndoBar?.hide(),nn.#s){t.drawLayer.updateProperties(this._currentDrawId,nn.#s.startNew(o,a,d,f,u));return}e.updateUIForDefaultProperties(this),nn.#s=this.createDrawerInstance(o,a,d,f,u),nn.#o=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(nn.#o.toSVGProperties(),nn.#s.defaultSVGProperties),!0,!1)}static _drawMove(t){if(sn.isSameTimeStamp(t.timeStamp),!nn.#s)return;const{offsetX:e,offsetY:s,pointerId:i}=t;if(sn.isSamePointerId(i)){if(sn.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,nn.#s.add(e,s)),sn.setTimeStamp(t.timeStamp),Wn(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,nn.#s=null,nn.#o=null,sn.clearPointerType(),sn.clearTimeStamp()),nn.#n&&(nn.#n.abort(),nn.#n=null,sn.clearPointerIds())}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,nn.#s.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=nn.#s,i=this._currentDrawId,r=s.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(i,s.setLastElement(r))},undo:()=>{e.drawLayer.updateProperties(i,s.removeLastElement())},mustExec:!1,type:Ye.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(Ye.DRAW_STEP),!nn.#s.isEmpty()){const{pageDimensions:[s,i],scale:r}=e,o=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:nn.#s.getOutlines(s*r,i*r,r,this._INNER_MARGIN),drawingOptions:nn.#o,mustBeCommitted:!t});return this._cleanup(!0),o}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,s,i,r,o){wn("Not implemented")}static async deserialize(t,e,s){const{rawDims:{pageWidth:i,pageHeight:r,pageX:o,pageY:a}}=e.viewport,l=this.deserializeDraw(o,a,i,r,this._INNER_MARGIN,t),c=await super.deserialize(t,e,s);return c.createDrawingOptions(t),c.#r({drawOutlines:l}),c.#c(),c.onScaleChanging(),c.rotate(),c}serializeDraw(t){const[e,s]=this.pageTranslation,[i,r]=this.pageDimensions;return this.#t.serialize([e,s,i,r],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class UJ{#t=new Float64Array(6);#e;#s;#n;#o;#r;#i="";#a=0;#c=new hf;#l;#h;constructor(t,e,s,i,r,o){this.#l=s,this.#h=i,this.#n=r,this.#o=o,[t,e]=this.#d(t,e);const a=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#r=[t,e],this.#s=[{line:a,points:this.#r}],this.#t.set(a,0)}updateProperty(t,e){t==="stroke-width"&&(this.#o=e)}#d(t,e){return Qt._normalizePoint(t,e,this.#l,this.#h,this.#n)}isEmpty(){return!this.#s||this.#s.length===0}isCancellable(){return this.#r.length<=10}add(t,e){[t,e]=this.#d(t,e);const[s,i,r,o]=this.#t.subarray(2,6),a=t-r,l=e-o;return Math.hypot(this.#l*a,this.#h*l)<=2?null:(this.#r.push(t,e),isNaN(s)?(this.#t.set([r,o,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([s,i,r,o,t,e],0),this.#e.push(...Qt.createBezierPoints(s,i,r,o,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const s=this.add(t,e);return s||(this.#r.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,s,i,r){this.#l=s,this.#h=i,this.#n=r,[t,e]=this.#d(t,e);const o=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#r=[t,e];const a=this.#s.at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),this.#s.push({line:o,points:this.#r}),this.#t.set(o,0),this.#a=0,this.toSVGPath(),null}getLastElement(){return this.#s.at(-1)}setLastElement(t){return this.#s?(this.#s.push(t),this.#e=t.line,this.#r=t.points,this.#a=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#s)return this.#c.removeLastElement();this.#s.pop(),this.#i="";for(let t=0,e=this.#s.length;t<e;t++){const{line:s,points:i}=this.#s[t];this.#e=s,this.#r=i,this.#a=0,this.toSVGPath()}return{path:{d:this.#i}}}toSVGPath(){const t=Qt.svgRound(this.#e[4]),e=Qt.svgRound(this.#e[5]);if(this.#r.length===2)return this.#i=`${this.#i} M ${t} ${e} Z`,this.#i;if(this.#r.length<=6){const i=this.#i.lastIndexOf("M");this.#i=`${this.#i.slice(0,i)} M ${t} ${e}`,this.#a=6}if(this.#r.length===4){const i=Qt.svgRound(this.#e[10]),r=Qt.svgRound(this.#e[11]);return this.#i=`${this.#i} L ${i} ${r}`,this.#a=12,this.#i}const s=[];this.#a===0&&(s.push(`M ${t} ${e}`),this.#a=6);for(let i=this.#a,r=this.#e.length;i<r;i+=6){const[o,a,l,c,u,d]=this.#e.slice(i,i+6).map(Qt.svgRound);s.push(`C${o} ${a} ${l} ${c} ${u} ${d}`)}return this.#i+=s.join(" "),this.#a=this.#e.length,this.#i}getOutlines(t,e,s,i){const r=this.#s.at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),this.#c.build(this.#s,t,e,s,this.#n,this.#o,i),this.#t=null,this.#e=null,this.#s=null,this.#i=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class hf extends Qt{#t;#e=0;#s;#n;#o;#r;#i;#a;#c;build(t,e,s,i,r,o,a){this.#o=e,this.#r=s,this.#i=i,this.#a=r,this.#c=o,this.#s=a??0,this.#n=t,this.#d()}get thickness(){return this.#c}setLastElement(t){return this.#n.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#n){if(t.push(`M${Qt.svgRound(e[4])} ${Qt.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${Qt.svgRound(e[10])} ${Qt.svgRound(e[11])}`);continue}for(let s=6,i=e.length;s<i;s+=6){const[r,o,a,l,c,u]=e.subarray(s,s+6).map(Qt.svgRound);t.push(`C${r} ${o} ${a} ${l} ${c} ${u}`)}}return t.join("")}serialize([t,e,s,i],r){const o=[],a=[],[l,c,u,d]=this.#h();let f,h,g,m,b,y,x,_,C;switch(this.#a){case 0:C=Qt._rescale,f=t,h=e+i,g=s,m=-i,b=t+l*s,y=e+(1-c-d)*i,x=t+(l+u)*s,_=e+(1-c)*i;break;case 90:C=Qt._rescaleAndSwap,f=t,h=e,g=s,m=i,b=t+c*s,y=e+l*i,x=t+(c+d)*s,_=e+(l+u)*i;break;case 180:C=Qt._rescale,f=t+s,h=e,g=-s,m=i,b=t+(1-l-u)*s,y=e+c*i,x=t+(1-l)*s,_=e+(c+d)*i;break;case 270:C=Qt._rescaleAndSwap,f=t+s,h=e+i,g=-s,m=-i,b=t+(1-c-d)*s,y=e+(1-l-u)*i,x=t+(1-c)*s,_=e+(1-l)*i;break}for(const{line:A,points:I}of this.#n)o.push(C(A,f,h,g,m,r?new Array(A.length):null)),a.push(C(I,f,h,g,m,r?new Array(I.length):null));return{lines:o,points:a,rect:[b,y,x,_]}}static deserialize(t,e,s,i,r,{paths:{lines:o,points:a},rotation:l,thickness:c}){const u=[];let d,f,h,g,m;switch(l){case 0:m=Qt._rescale,d=-t/s,f=e/i+1,h=1/s,g=-1/i;break;case 90:m=Qt._rescaleAndSwap,d=-e/i,f=-t/s,h=1/i,g=1/s;break;case 180:m=Qt._rescale,d=t/s+1,f=-e/i,h=-1/s,g=1/i;break;case 270:m=Qt._rescaleAndSwap,d=e/i+1,f=t/s+1,h=-1/i,g=-1/s;break}if(!o){o=[];for(const y of a){const x=y.length;if(x===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,y[0],y[1]]));continue}if(x===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,y[0],y[1],NaN,NaN,NaN,NaN,y[2],y[3]]));continue}const _=new Float32Array(3*(x-2));o.push(_);let[C,A,I,R]=y.subarray(0,4);_.set([NaN,NaN,NaN,NaN,C,A],0);for(let L=4;L<x;L+=2){const P=y[L],V=y[L+1];_.set(Qt.createBezierPoints(C,A,I,R,P,V),(L-2)*3),[C,A,I,R]=[I,R,P,V]}}}for(let y=0,x=o.length;y<x;y++)u.push({line:m(o[y].map(_=>_??NaN),d,f,h,g),points:m(a[y].map(_=>_??NaN),d,f,h,g)});const b=new this.prototype.constructor;return b.build(u,s,i,1,l,c,r),b}#l(t=this.#c){const e=this.#s+t/2*this.#i;return this.#a%180===0?[e/this.#o,e/this.#r]:[e/this.#r,e/this.#o]}#h(){const[t,e,s,i]=this.#t,[r,o]=this.#l(0);return[t+r,e+o,s-2*r,i-2*o]}#d(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:i}of this.#n){if(i.length<=12){for(let a=4,l=i.length;a<l;a+=6)ee.pointBoundingBox(i[a],i[a+1],t);continue}let r=i[4],o=i[5];for(let a=6,l=i.length;a<l;a+=6){const[c,u,d,f,h,g]=i.subarray(a,a+6);ee.bezierBoundingBox(r,o,c,u,d,f,h,g,t),r=h,o=g}}const[e,s]=this.#l();t[0]=di(t[0]-e,0,1),t[1]=di(t[1]-s,0,1),t[2]=di(t[2]+e,0,1),t[3]=di(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){const[e,s]=this.#l();this.#c=t;const[i,r]=this.#l(),[o,a]=[i-e,r-s],l=this.#t;return l[0]-=o,l[1]-=a,l[2]+=2*o,l[3]+=2*a,l}updateParentDimensions([t,e],s){const[i,r]=this.#l();this.#o=t,this.#r=e,this.#i=s;const[o,a]=this.#l(),l=o-i,c=a-r,u=this.#t;return u[0]-=l,u[1]-=c,u[2]+=2*l,u[3]+=2*c,u}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(Qt.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Qt.svgRound(t)} ${Qt.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let s=0,i=0,r=0,o=0,a=0,l=0;switch(this.#e){case 90:i=e/t,r=-t/e,a=t;break;case 180:s=-1,o=-1,a=t,l=e;break;case 270:i=-e/t,r=t/e,l=e;break;default:return""}return`matrix(${s} ${i} ${r} ${o} ${Qt.svgRound(a)} ${Qt.svgRound(l)})`}getPathResizingSVGProperties([t,e,s,i]){const[r,o]=this.#l(),[a,l,c,u]=this.#t;if(Math.abs(c-r)<=Qt.PRECISION||Math.abs(u-o)<=Qt.PRECISION){const m=t+s/2-(a+c/2),b=e+i/2-(l+u/2);return{path:{"transform-origin":`${Qt.svgRound(t)} ${Qt.svgRound(e)}`,transform:`${this.rotationTransform} translate(${m} ${b})`}}}const d=(s-2*r)/(c-2*r),f=(i-2*o)/(u-2*o),h=c/s,g=u/i;return{path:{"transform-origin":`${Qt.svgRound(a)} ${Qt.svgRound(l)}`,transform:`${this.rotationTransform} scale(${h} ${g}) translate(${Qt.svgRound(r)} ${Qt.svgRound(o)}) scale(${d} ${f}) translate(${Qt.svgRound(-r)} ${Qt.svgRound(-o)})`}}}getPathResizedSVGProperties([t,e,s,i]){const[r,o]=this.#l(),a=this.#t,[l,c,u,d]=a;if(a[0]=t,a[1]=e,a[2]=s,a[3]=i,Math.abs(u-r)<=Qt.PRECISION||Math.abs(d-o)<=Qt.PRECISION){const b=t+s/2-(l+u/2),y=e+i/2-(c+d/2);for(const{line:x,points:_}of this.#n)Qt._translate(x,b,y,x),Qt._translate(_,b,y,_);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Qt.svgRound(t)} ${Qt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const f=(s-2*r)/(u-2*r),h=(i-2*o)/(d-2*o),g=-f*(l+r)+t+r,m=-h*(c+o)+e+o;if(f!==1||h!==1||g!==0||m!==0)for(const{line:b,points:y}of this.#n)Qt._rescale(b,g,m,f,h,b),Qt._rescale(y,g,m,f,h,y);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Qt.svgRound(t)} ${Qt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],s){const[i,r]=s,o=this.#t,a=t-o[0],l=e-o[1];if(this.#o===i&&this.#r===r)for(const{line:c,points:u}of this.#n)Qt._translate(c,a,l,c),Qt._translate(u,a,l,u);else{const c=this.#o/i,u=this.#r/r;this.#o=i,this.#r=r;for(const{line:d,points:f}of this.#n)Qt._rescale(d,a,l,c,u,d),Qt._rescale(f,a,l,c,u,f);o[2]*=c,o[3]*=u}return o[0]=t,o[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Qt.svgRound(t)} ${Qt.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Qt.svgRound(t[0])} ${Qt.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class Pg extends DC{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:ye._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new Pg(this._viewParameters);return t.updateAll(this),t}}class Ob extends nn{static _type="ink";static _editorType=Ne.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){ye.initialize(t,e),this._defaultDrawingOptions=new Pg(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return Fe(this,"typesMap",new Map([[Ye.INK_THICKNESS,"stroke-width"],[Ye.INK_COLOR,"stroke"],[Ye.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,s,i,r){return new UJ(t,e,s,i,r,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,s,i,r,o){return hf.deserialize(t,e,s,i,r,o)}static async deserialize(t,e,s){let i=null;if(t instanceof Rb){const{data:{inkLists:o,rect:a,rotation:l,id:c,color:u,opacity:d,borderStyle:{rawWidth:f},popupRef:h,richText:g,contentsObj:m,creationDate:b,modificationDate:y},parent:{page:{pageNumber:x}}}=t;i=t={annotationType:Ne.INK,color:Array.from(u),thickness:f,opacity:d,paths:{points:o},boxes:null,pageIndex:x-1,rect:a.slice(0),rotation:l,annotationElementId:c,id:c,deleted:!1,popupRef:h,richText:g,comment:m?.str||null,creationDate:b,modificationDate:y}}const r=await super.deserialize(t,e,s);return r._initialData=i,t.comment&&r.setCommentData(t),r}get toolbarButtons(){return this._colorPicker||=new Vh(this),[["colorPicker",this._colorPicker]]}get colorType(){return Ye.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:s}=this;e.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:s}){this._drawingOptions=Ob.getDefaultDrawingOptions({stroke:ee.makeHexColor(...t),"stroke-width":e,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:s}=this.serializeDraw(t),{_drawingOptions:{stroke:i,"stroke-opacity":r,"stroke-width":o}}=this,a=Object.assign(super.serialize(t),{color:ye._colorManager.convert(i),opacity:r,thickness:o,paths:{lines:e,points:s}});return this.addComment(a),t?(a.isCopy=!0,a):this.annotationElementId&&!this.#t(a)?null:(a.id=this.annotationElementId,a)}#t(t){const{color:e,thickness:s,opacity:i,pageIndex:r}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((o,a)=>o!==e[a])||t.thickness!==s||t.opacity!==i||t.pageIndex!==r}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:e,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:e,popup:this.comment}),null}}class r5 extends hf{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const U1=8,Rd=3;class eu{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,s,i){return s-=t,i-=e,s===0?i>0?0:4:s===1?i+6:2-i}static#s=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(t,e,s,i,r,o,a){const l=this.#e(s,i,r,o);for(let c=0;c<8;c++){const u=(-c+l-a+16)%8,d=this.#s[2*u],f=this.#s[2*u+1];if(t[(s+d)*e+(i+f)]!==0)return u}return-1}static#o(t,e,s,i,r,o,a){const l=this.#e(s,i,r,o);for(let c=0;c<8;c++){const u=(c+l+a+16)%8,d=this.#s[2*u],f=this.#s[2*u+1];if(t[(s+d)*e+(i+f)]!==0)return u}return-1}static#r(t,e,s,i){const r=t.length,o=new Int32Array(r);for(let u=0;u<r;u++)o[u]=t[u]<=i?1:0;for(let u=1;u<s-1;u++)o[u*e]=o[u*e+e-1]=0;for(let u=0;u<e;u++)o[u]=o[e*s-1-u]=0;let a=1,l;const c=[];for(let u=1;u<s-1;u++){l=1;for(let d=1;d<e-1;d++){const f=u*e+d,h=o[f];if(h===0)continue;let g=u,m=d;if(h===1&&o[f-1]===0)a+=1,m-=1;else if(h>=1&&o[f+1]===0)a+=1,m+=1,h>1&&(l=h);else{h!==1&&(l=Math.abs(h));continue}const b=[d,u],y=m===d+1,x={isHole:y,points:b,id:a,parent:0};c.push(x);let _;for(const T of c)if(T.id===l){_=T;break}_?_.isHole?x.parent=y?_.parent:l:x.parent=y?l:_.parent:x.parent=y?l:0;const C=this.#n(o,e,u,d,g,m,0);if(C===-1){o[f]=-a,o[f]!==1&&(l=Math.abs(o[f]));continue}let A=this.#s[2*C],I=this.#s[2*C+1];const R=u+A,L=d+I;g=R,m=L;let P=u,V=d;for(;;){const T=this.#o(o,e,P,V,g,m,1);A=this.#s[2*T],I=this.#s[2*T+1];const D=P+A,K=V+I;b.push(K,D);const $=P*e+V;if(o[$+1]===0?o[$]=-a:o[$]===1&&(o[$]=a),D===u&&K===d&&P===R&&V===L){o[f]!==1&&(l=Math.abs(o[f]));break}else g=P,m=V,P=D,V=K}}}return c}static#i(t,e,s,i){if(s-e<=4){for(let R=e;R<s-2;R+=2)i.push(t[R],t[R+1]);return}const r=t[e],o=t[e+1],a=t[s-4]-r,l=t[s-3]-o,c=Math.hypot(a,l),u=a/c,d=l/c,f=u*o-d*r,h=l/a,g=1/c,m=Math.atan(h),b=Math.cos(m),y=Math.sin(m),x=g*(Math.abs(b)+Math.abs(y)),_=g*(1-x+x**2),C=Math.max(Math.atan(Math.abs(y+b)*_),Math.atan(Math.abs(y-b)*_));let A=0,I=e;for(let R=e+2;R<s-2;R+=2){const L=Math.abs(f-u*t[R+1]+d*t[R]);L>A&&(I=R,A=L)}A>(c*C)**2?(this.#i(t,e,I+2,i),this.#i(t,I,s,i)):i.push(r,o)}static#a(t){const e=[],s=t.length;return this.#i(t,0,s,e),e.push(t[s-2],t[s-1]),e.length<=4?null:e}static#c(t,e,s,i,r,o){const a=new Float32Array(o**2),l=-2*i**2,c=o>>1;for(let m=0;m<o;m++){const b=(m-c)**2;for(let y=0;y<o;y++)a[m*o+y]=Math.exp((b+(y-c)**2)/l)}const u=new Float32Array(256),d=-2*r**2;for(let m=0;m<256;m++)u[m]=Math.exp(m**2/d);const f=t.length,h=new Uint8Array(f),g=new Uint32Array(256);for(let m=0;m<s;m++)for(let b=0;b<e;b++){const y=m*e+b,x=t[y];let _=0,C=0;for(let I=0;I<o;I++){const R=m+I-c;if(!(R<0||R>=s))for(let L=0;L<o;L++){const P=b+L-c;if(P<0||P>=e)continue;const V=t[R*e+P],T=a[I*o+L]*u[Math.abs(V-x)];_+=V*T,C+=T}}const A=h[y]=Math.round(_/C);g[A]++}return[h,g]}static#l(t){const e=new Uint32Array(256);for(const s of t)e[s]++;return e}static#h(t){const e=t.length,s=new Uint8ClampedArray(e>>2);let i=-1/0,r=1/0;for(let a=0,l=s.length;a<l;a++){const c=s[a]=t[a<<2];i=Math.max(i,c),r=Math.min(r,c)}const o=255/(i-r);for(let a=0,l=s.length;a<l;a++)s[a]=(s[a]-r)*o;return s}static#d(t){let e,s=-1/0,i=-1/0;const r=t.findIndex(l=>l!==0);let o=r,a=r;for(e=r;e<256;e++){const l=t[e];l>s&&(e-o>i&&(i=e-o,a=e-1),s=l,o=e)}for(e=a-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){const e=t,{width:s,height:i}=t,{maxDim:r}=this.#t;let o=s,a=i;if(s>r||i>r){let f=s,h=i,g=Math.log2(Math.max(s,i)/r);const m=Math.floor(g);g=g===m?m-1:m;for(let y=0;y<g;y++){o=Math.ceil(f/2),a=Math.ceil(h/2);const x=new OffscreenCanvas(o,a);x.getContext("2d").drawImage(t,0,0,f,h,0,0,o,a),f=o,h=a,t!==e&&t.close(),t=x.transferToImageBitmap()}const b=Math.min(r/o,r/a);o=Math.round(o*b),a=Math.round(a*b)}const c=new OffscreenCanvas(o,a).getContext("2d",{willReadFrequently:!0});c.fillStyle="white",c.fillRect(0,0,o,a),c.filter="grayscale(1)",c.drawImage(t,0,0,t.width,t.height,0,0,o,a);const u=c.getImageData(0,0,o,a).data;return[this.#h(u),o,a]}static extractContoursFromText(t,{fontFamily:e,fontStyle:s,fontWeight:i},r,o,a,l){let c=new OffscreenCanvas(1,1),u=c.getContext("2d",{alpha:!1});const d=200,f=u.font=`${s} ${i} ${d}px ${e}`,{actualBoundingBoxLeft:h,actualBoundingBoxRight:g,actualBoundingBoxAscent:m,actualBoundingBoxDescent:b,fontBoundingBoxAscent:y,fontBoundingBoxDescent:x,width:_}=u.measureText(t),C=1.5,A=Math.ceil(Math.max(Math.abs(h)+Math.abs(g)||0,_)*C),I=Math.ceil(Math.max(Math.abs(m)+Math.abs(b)||d,Math.abs(y)+Math.abs(x)||d)*C);c=new OffscreenCanvas(A,I),u=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),u.font=f,u.filter="grayscale(1)",u.fillStyle="white",u.fillRect(0,0,A,I),u.fillStyle="black",u.fillText(t,A*(C-1)/2,I*(3-C)/2);const R=this.#h(u.getImageData(0,0,A,I).data),L=this.#l(R),P=this.#d(L),V=this.#r(R,A,I,P);return this.processDrawnLines({lines:{curves:V,width:A,height:I},pageWidth:r,pageHeight:o,rotation:a,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(t,e,s,i,r){const[o,a,l]=this.#f(t),[c,u]=this.#c(o,a,l,Math.hypot(a,l)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),d=this.#d(u),f=this.#r(c,a,l,d);return this.processDrawnLines({lines:{curves:f,width:a,height:l},pageWidth:e,pageHeight:s,rotation:i,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:s,rotation:i,innerMargin:r,mustSmooth:o,areContours:a}){i%180!==0&&([e,s]=[s,e]);const{curves:l,width:c,height:u}=t,d=t.thickness??0,f=[],h=Math.min(e/c,s/u),g=h/e,m=h/s,b=[];for(const{points:x}of l){const _=o?this.#a(x):x;if(!_)continue;b.push(_);const C=_.length,A=new Float32Array(C),I=new Float32Array(3*(C===2?2:C-2));if(f.push({line:I,points:A}),C===2){A[0]=_[0]*g,A[1]=_[1]*m,I.set([NaN,NaN,NaN,NaN,A[0],A[1]],0);continue}let[R,L,P,V]=_;R*=g,L*=m,P*=g,V*=m,A.set([R,L,P,V],0),I.set([NaN,NaN,NaN,NaN,R,L],0);for(let T=4;T<C;T+=2){const D=A[T]=_[T]*g,K=A[T+1]=_[T+1]*m;I.set(Qt.createBezierPoints(R,L,P,V,D,K),(T-2)*3),[R,L,P,V]=[P,V,D,K]}}if(f.length===0)return null;const y=a?new r5:new hf;return y.build(f,e,s,1,i,a?0:d,r),{outline:y,newCurves:b,areContours:a,thickness:d,width:c,height:u}}static async compressSignature({outlines:t,areContours:e,thickness:s,width:i,height:r}){let o=1/0,a=-1/0,l=0;for(const _ of t){l+=_.length;for(let C=2,A=_.length;C<A;C++){const I=_[C]-_[C-2];o=Math.min(o,I),a=Math.max(a,I)}}let c;o>=-128&&a<=127?c=Int8Array:o>=-32768&&a<=32767?c=Int16Array:c=Int32Array;const u=t.length,d=U1+Rd*u,f=new Uint32Array(d);let h=0;f[h++]=d*Uint32Array.BYTES_PER_ELEMENT+(l-2*u)*c.BYTES_PER_ELEMENT,f[h++]=0,f[h++]=i,f[h++]=r,f[h++]=e?0:1,f[h++]=Math.max(0,Math.floor(s??0)),f[h++]=u,f[h++]=c.BYTES_PER_ELEMENT;for(const _ of t)f[h++]=_.length-2,f[h++]=_[0],f[h++]=_[1];const g=new CompressionStream("deflate-raw"),m=g.writable.getWriter();await m.ready,m.write(f);const b=c.prototype.constructor;for(const _ of t){const C=new b(_.length-2);for(let A=2,I=_.length;A<I;A++)C[A-2]=_[A]-_[A-2];m.write(C)}m.close();const y=await new Response(g.readable).arrayBuffer(),x=new Uint8Array(y);return sC(x)}static async decompressSignature(t){try{const e=sZ(t),{readable:s,writable:i}=new DecompressionStream("deflate-raw"),r=i.getWriter();await r.ready,r.write(e).then(async()=>{await r.ready,await r.close()}).catch(()=>{});let o=null,a=0;for await(const _ of s)o||=new Uint8Array(new Uint32Array(_.buffer,0,4)[0]),o.set(_,a),a+=_.length;const l=new Uint32Array(o.buffer,0,o.length>>2),c=l[1];if(c!==0)throw new Error(`Invalid version: ${c}`);const u=l[2],d=l[3],f=l[4]===0,h=l[5],g=l[6],m=l[7],b=[],y=(U1+Rd*g)*Uint32Array.BYTES_PER_ELEMENT;let x;switch(m){case Int8Array.BYTES_PER_ELEMENT:x=new Int8Array(o.buffer,y);break;case Int16Array.BYTES_PER_ELEMENT:x=new Int16Array(o.buffer,y);break;case Int32Array.BYTES_PER_ELEMENT:x=new Int32Array(o.buffer,y);break}a=0;for(let _=0;_<g;_++){const C=l[Rd*_+U1],A=new Float32Array(C+2);b.push(A);for(let I=0;I<Rd-1;I++)A[I]=l[Rd*_+U1+I+1];for(let I=0;I<C;I++)A[I+2]=A[I]+x[a++]}return{areContours:f,thickness:h,outlines:b,width:u,height:d}}catch(e){return Pe(`decompressSignature: ${e}`),null}}}class Fb extends DC{constructor(){super(),super.updateProperties({fill:ye._defaultLineColor,"stroke-width":0})}clone(){const t=new Fb;return t.updateAll(this),t}}class $b extends Pg{constructor(t){super(t),super.updateProperties({stroke:ye._defaultLineColor,"stroke-width":1})}clone(){const t=new $b(this._viewParameters);return t.updateAll(this),t}}class eo extends nn{#t=!1;#e=null;#s=null;#n=null;static _type="signature";static _editorType=Ne.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#s=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){ye.initialize(t,e),this._defaultDrawingOptions=new Fb,this._defaultDrawnSignatureOptions=new $b(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return Fe(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#s){const{lines:i,mustSmooth:r,areContours:o,description:a,uuid:l,heightInPage:c}=this.#s,{rawDims:{pageWidth:u,pageHeight:d},rotation:f}=this.parent.viewport,h=eu.processDrawnLines({lines:i,pageWidth:u,pageHeight:d,rotation:f,innerMargin:eo._INNER_MARGIN,mustSmooth:r,areContours:o});this.addSignature(h,c,a,l)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#n=t,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:s,width:i,height:r}=this.#s,o=Math.max(i,r),a=eu.processDrawnLines({lines:{curves:t.map(l=>({points:l})),thickness:s,width:i,height:r},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:a.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,s,i){const{x:r,y:o}=this,{outline:a}=this.#s=t;this.#t=a instanceof r5,this.description=s;let l;this.#t?l=eo.getDefaultDrawingOptions():(l=eo._defaultDrawnSignatureOptions.clone(),l.updateProperties({"stroke-width":a.thickness})),this._addOutlines({drawOutlines:a,drawingOptions:l});const[,c]=this.pageDimensions;let u=e/c;u=u>=1?.5:u,this.width*=u/this.height,this.width>=1&&(u*=.9/this.width,this.width=.9),this.height=u,this.setDims(),this.x=r,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:s},rotation:i}=this.parent.viewport;return eu.process(t,e,s,i,eo._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:s,pageHeight:i},rotation:r}=this.parent.viewport;return eu.extractContoursFromText(t,e,s,i,r,eo._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:s},rotation:i}=this.parent.viewport;return eu.processDrawnLines({lines:t,pageWidth:e,pageHeight:s,rotation:i,innerMargin:eo._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=eo.getDefaultDrawingOptions():(this._drawingOptions=eo._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:s}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":i}}=this,r=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:i});return this.addComment(r),t?(r.paths={lines:e,points:s},r.uuid=this.#n,r.isCopy=!0):r.lines=e,this.#e&&(r.accessibilityData={type:"Figure",alt:this.#e}),r}static deserializeDraw(t,e,s,i,r,o){return o.areContours?r5.deserialize(t,e,s,i,r,o):hf.deserialize(t,e,s,i,r,o)}static async deserialize(t,e,s){const i=await super.deserialize(t,e,s);return i.#t=t.areContours,i.description=t.accessibilityData?.alt||"",i.#n=t.uuid,i}}class zJ extends ye{#t=null;#e=null;#s=null;#n=null;#o=null;#r="";#i=null;#a=!1;#c=null;#l=!1;#h=!1;static _type="stamp";static _editorType=Ne.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#n=t.bitmapUrl,this.#o=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){ye.initialize(t,e)}static isHandlingMimeForPasting(t){return Xm.includes(t)}static paste(t,e){e.pasteEditor({mode:Ne.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#d(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#r=t.file.name),this.#g()}#f(){if(this.#s=null,this._uiManager.enableWaiting(!1),!!this.#i){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:r,height:o}=t||this.copyCanvas(null,null,!0).imageData,a=await s.guess({name:"altText",request:{data:i,width:r,height:o,channels:i.length/(r*o)}});if(!a)throw new Error("No response from the AI service.");if(a.error)throw new Error("Error from the AI service.");if(a.cancel)return null;if(!a.output)throw new Error("No valid response from the AI service.");const l=a.output;return await this.setGuessedAltText(l),e&&!this.hasAltTextData()&&(this.altTextData={alt:l,decorative:!1}),l}#m(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(s=>this.#d(s,!0)).finally(()=>this.#f());return}if(this.#n){const s=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromUrl(s).then(i=>this.#d(i)).finally(()=>this.#f());return}if(this.#o){const s=this.#o;this.#o=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromFile(s).then(i=>this.#d(i)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=Xm.join(",");const e=this._uiManager._signal;this.#s=new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#d(i)}s()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#i?.remove(),this.#i=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#m();return}super.rebuild(),this.div!==null&&(this.#e&&this.#i===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#s||this.#t||this.#n||this.#o||this.#e||this.#a)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#a||(this.#t?this.#g():this.#m()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:s,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(this.#e=s,i&&(this.#t=i),this.#a=!1,this.#g())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#p()},t)}#g(){const{div:t}=this;let{width:e,height:s}=this.#t;const[i,r]=this.pageDimensions,o=.75;if(this.width)e=this.width*i,s=this.height*r;else if(e>o*i||s>o*r){const l=Math.min(o*i/e,o*r/s);e*=l,s*=l}this._uiManager.enableWaiting(!1);const a=this.#i=document.createElement("canvas");a.setAttribute("role","img"),this.addContainer(a),this.width=e/i,this.height=s/r,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#p(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._reportTelemetry({action:"inserted_image"}),this.#r&&this.div.setAttribute("aria-description",this.#r),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,s=!1){t||(t=224);const{width:i,height:r}=this.#t,o=new uo;let a=this.#t,l=i,c=r,u=null;if(e){if(i>e||r>e){const I=Math.min(e/i,e/r);l=Math.floor(i*I),c=Math.floor(r*I)}u=document.createElement("canvas");const f=u.width=Math.ceil(l*o.sx),h=u.height=Math.ceil(c*o.sy);this.#l||(a=this.#u(f,h));const g=u.getContext("2d");g.filter=this._uiManager.hcmFilter;let m="white",b="#cfcfd8";this._uiManager.hcmFilter!=="none"?b="black":cZ.isDarkMode&&(m="#8f8f9d",b="#42414d");const y=15,x=y*o.sx,_=y*o.sy,C=new OffscreenCanvas(x*2,_*2),A=C.getContext("2d");A.fillStyle=m,A.fillRect(0,0,x*2,_*2),A.fillStyle=b,A.fillRect(0,0,x,_),A.fillRect(x,_,x,_),g.fillStyle=g.createPattern(C,"repeat"),g.fillRect(0,0,f,h),g.drawImage(a,0,0,a.width,a.height,0,0,f,h)}let d=null;if(s){let f,h;if(o.symmetric&&a.width<t&&a.height<t)f=a.width,h=a.height;else if(a=this.#t,i>t||r>t){const b=Math.min(t/i,t/r);f=Math.floor(i*b),h=Math.floor(r*b),this.#l||(a=this.#u(f,h))}const m=new OffscreenCanvas(f,h).getContext("2d",{willReadFrequently:!0});m.drawImage(a,0,0,a.width,a.height,0,0,f,h),d={width:f,height:h,data:m.getImageData(0,0,f,h).data}}return{canvas:u,width:l,height:c,imageData:d}}#u(t,e){const{width:s,height:i}=this.#t;let r=s,o=i,a=this.#t;for(;r>2*t||o>2*e;){const l=r,c=o;r>2*t&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2)),o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const u=new OffscreenCanvas(r,o);u.getContext("2d").drawImage(a,0,0,l,c,0,0,r,o),a=u.transferToImageBitmap()}return a}#p(){const[t,e]=this.parentDimensions,{width:s,height:i}=this,r=new uo,o=Math.ceil(s*t*r.sx),a=Math.ceil(i*e*r.sy),l=this.#i;if(!l||l.width===o&&l.height===a)return;l.width=o,l.height=a;const c=this.#l?this.#t:this.#u(o,a),u=l.getContext("2d");u.filter=this._uiManager.hcmFilter,u.drawImage(c,0,0,c.width,c.height,0,0,o,a)}#b(t){if(t){if(this.#l){const i=this._uiManager.imageManager.getSvgUrl(this.#e);if(i)return i}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#l){const[e,s]=this.pageDimensions,i=Math.round(this.width*e*Nu.PDF_TO_CSS_UNITS),r=Math.round(this.height*s*Nu.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(i,r);return o.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,i,r),o.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,s){let i=null,r=!1;if(t instanceof PC){const{data:{rect:m,rotation:b,id:y,structParent:x,popupRef:_,richText:C,contentsObj:A,creationDate:I,modificationDate:R},container:L,parent:{page:{pageNumber:P}},canvas:V}=t;let T,D;V?(delete t.canvas,{id:T,bitmap:D}=s.imageManager.getFromCanvas(L.id,V),V.remove()):(r=!0,t._hasNoCanvas=!0);const K=(await e._structTree.getAriaAttributes(`${iu}${y}`))?.get("aria-label")||"";i=t={annotationType:Ne.STAMP,bitmapId:T,bitmap:D,pageIndex:P-1,rect:m.slice(0),rotation:b,annotationElementId:y,id:y,deleted:!1,accessibilityData:{decorative:!1,altText:K},isSvg:!1,structParent:x,popupRef:_,richText:C,comment:A?.str||null,creationDate:I,modificationDate:R}}const o=await super.deserialize(t,e,s),{rect:a,bitmap:l,bitmapUrl:c,bitmapId:u,isSvg:d,accessibilityData:f}=t;r?(s.addMissingCanvas(t.id,o),o.#a=!0):u&&s.imageManager.isValidId(u)?(o.#e=u,l&&(o.#t=l)):o.#n=c,o.#l=d;const[h,g]=o.pageDimensions;return o.width=(a[2]-a[0])/h,o.height=(a[3]-a[1])/g,f&&(o.altTextData=f),o._initialData=i,t.comment&&o.setCommentData(t),o.#h=!!i,o}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(s),t)return s.bitmapUrl=this.#b(!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:i,altText:r}=this.serializeAltText(!1);if(!i&&r&&(s.accessibilityData={type:"Figure",alt:r}),this.annotationElementId){const a=this.#y(s);return a.isSame?null:(a.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(e===null)return s;e.stamps||=new Map;const o=this.#l?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:o,serialized:s}),s.bitmap=this.#b(!1);else if(this.#l){const a=e.stamps.get(this.#e);o>a.area&&(a.area=o,a.serialized.bitmap.close(),a.serialized.bitmap=this.#b(!1))}return s}#y(t){const{pageIndex:e,accessibilityData:{altText:s}}=this._initialData,i=t.pageIndex===e,r=(t.accessibilityData?.alt||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&r,isSameAltText:r}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class Bo{#t;#e=!1;#s=null;#n=null;#o=null;#r=new Map;#i=!1;#a=!1;#c=!1;#l=null;#h=null;#d=null;#f=null;#m=null;#g=-1;#u;static _initialized=!1;static#p=new Map([As,Ob,zJ,ts,eo].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:s,structTreeLayer:i,accessibilityManager:r,annotationLayer:o,drawLayer:a,textLayer:l,viewport:c,l10n:u}){const d=[...Bo.#p.values()];if(!Bo._initialized){Bo._initialized=!0;for(const f of d)f.initialize(u,t)}t.registerEditorTypes(d),this.#u=t,this.pageIndex=e,this.div=s,this.#t=r,this.#s=o,this.viewport=c,this.#d=l,this.drawLayer=a,this._structTree=i,this.#u.addLayer(this)}get isEmpty(){return this.#r.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===Ne.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#_(),t){case Ne.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Ne.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Ne.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===Ne.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const s of Bo.#p.values())e.toggle(`${s._type}Editing`,t===s._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#d?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#s?.togglePointerEvents(t)}get#b(){return this.#r.size!==0?this.#r.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#m?.abort(),this.#m=null;const t=new Set;for(const s of this.#b)s.enableEditing(),s.show(!0),s.annotationElementId&&(this.#u.removeChangedExistingAnnotation(s),t.add(s.annotationElementId));const e=this.#s;if(e)for(const s of e.getEditableAnnotations()){if(s.hide(),this.#u.isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const i=await this.deserialize(s);i&&(this.addOrRebuild(i),i.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#a=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#d&&!this.#m){this.#m=new AbortController;const i=this.#u.combinedSignal(this.#m);this.#d.div.addEventListener("pointerdown",r=>{const{clientX:a,clientY:l,timeStamp:c}=r,u=this.#g;if(c-u>500){this.#g=c;return}this.#g=-1;const{classList:d}=this.div;d.toggle("getElements",!0);const f=document.elementsFromPoint(a,l);if(d.toggle("getElements",!1),!this.div.contains(f[0]))return;let h;const g=new RegExp(`^${jh}[0-9]+$`);for(const b of f)if(g.test(b.id)){h=b.id;break}if(!h)return;const m=this.#r.get(h);m?.annotationElementId===null&&(r.stopPropagation(),r.preventDefault(),m.dblclick(r))},{signal:i,capture:!0})}const t=this.#s,e=[];if(t){const i=new Map,r=new Map;for(const a of this.#b){if(a.disableEditing(),!a.annotationElementId){e.push(a);continue}if(a.serialize()!==null){i.set(a.annotationElementId,a);continue}else r.set(a.annotationElementId,a);this.getEditableAnnotation(a.annotationElementId)?.show(),a.remove()}const o=t.getEditableAnnotations();for(const a of o){const{id:l}=a.data;if(this.#u.isDeletedAnnotationElement(l)){a.updateEdited({deleted:!0});continue}let c=r.get(l);if(c){c.resetAnnotationElement(a),c.show(!1),a.show();continue}c=i.get(l),c&&(this.#u.addChangedExistingAnnotation(c),c.renderAnnotationElement(a)&&c.show(!1)),a.show()}}this.#_(),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const i of Bo.#p.values())s.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t?.updateFakeAnnotations(e),this.#a=!1}getEditableAnnotation(t){return this.#s?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#d?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#d.div.addEventListener("pointerdown",this.#y.bind(this),{signal:t}),this.#d.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#d?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#d.div.classList.remove("highlighting"))}#y(t){this.#u.unselectAll();const{target:e}=t;if(e===this.#d.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#d.div.contains(e)){const{isMac:s}=zs.platform;if(t.button!==0||t.ctrlKey&&s)return;this.#u.showAllEditors("highlight",!0,!0),this.#d.div.classList.add("free"),this.toggleDrawing(),ts.startHighlighting(this,this.#u.direction==="ltr",{target:this.#d.div,x:t.x,y:t.y}),this.#d.div.addEventListener("pointerup",()=>{this.#d.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const t=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#n?.abort(),this.#n=null}attach(t){this.#r.set(t.id,t);const{annotationElementId:e}=t;e&&this.#u.isDeletedAnnotationElement(e)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#r.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#a&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t.annotationElementId),ye.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#o&&(t._focusEventsAllowed=!1,this.#o=setTimeout(()=>{this.#o=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:e,undo:s,mustExec:!1})}getEditorByUID(t){for(const e of this.#r.values())if(e.uid===t)return e;return null}getNextId(){return this.#u.getId()}get#v(){return Bo.#p.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#A(t){const e=this.#v;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#v?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:s,offsetY:i}=this.#C(),r=this.getNextId(),o=this.#A({parent:this,id:r,x:s,y:i,uiManager:this.#u,isCentered:!0,...e});o&&this.add(o)}async deserialize(t){return await Bo.#p.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,e,s={}){const i=this.getNextId(),r=this.#A({parent:this,id:i,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:e,...s});return r&&this.add(r),r}get boundingClientRect(){return this.div.getBoundingClientRect()}#C(){const{x:t,y:e,width:s,height:i}=this.boundingClientRect,r=Math.max(0,t),o=Math.max(0,e),a=Math.min(window.innerWidth,t+s),l=Math.min(window.innerHeight,e+i),c=(r+a)/2-t,u=(o+l)/2-e,[d,f]=this.viewport.rotation%180===0?[c,u]:[u,c];return{offsetX:d,offsetY:f}}addNewEditor(t={}){this.createAndAddNewEditor(this.#C(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:e}=zs.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#i||(this.#i=!1,this.#v?.isDrawer&&this.#v.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const s=this.#u.getMode();if(s===Ne.STAMP||s===Ne.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===Ne.HIGHLIGHT&&this.enableTextSelection(),this.#i){this.#i=!1;return}const{isMac:e}=zs.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#i=!0,this.#v?.isDrawer){this.startDrawingSession(t);return}const s=this.#u.getActive();this.#e=!s||s.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#v.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const e=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(this.#h=null,this.commitOrRemove())},{signal:e}),this.#v.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#h=e);return}this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#h=null,this.#v.endDrawing(t)):null}findNewParent(t,e,s){const i=this.#u.findParent(e,s);return i===null||i===this?!1:(i.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#v.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#o&&(clearTimeout(this.#o),this.#o=null);for(const t of this.#r.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#r.clear(),this.#u.removeLayer(this)}#_(){for(const t of this.#r.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,fc(this.div,t);for(const e of this.#u.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#_();const e=this.viewport.rotation,s=t.rotation;if(this.viewport=t,fc(this.div,{rotation:s}),e!==s)for(const i of this.#r.values())i.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#u.viewParameters.realScale}}class Fs{#t=null;#e=new Map;#s=new Map;static#n=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return Fe(this,"_svgFactory",new Bp)}static#o(t,[e,s,i,r]){const{style:o}=t;o.top=`${100*s}%`,o.left=`${100*e}%`,o.width=`${100*i}%`,o.height=`${100*r}%`}#r(){const t=Fs._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#i(t,e){const s=Fs._svgFactory.createElement("clipPath");t.append(s);const i=`clip_${e}`;s.setAttribute("id",i),s.setAttribute("clipPathUnits","objectBoundingBox");const r=Fs._svgFactory.createElement("use");return s.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),i}#a(t,e){for(const[s,i]of Object.entries(e))i===null?t.removeAttribute(s):t.setAttribute(s,i)}draw(t,e=!1,s=!1){const i=Fs.#n++,r=this.#r(),o=Fs._svgFactory.createElement("defs");r.append(o);const a=Fs._svgFactory.createElement("path");o.append(a);const l=`path_p${this.pageIndex}_${i}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#s.set(i,a);const c=s?this.#i(o,l):null,u=Fs._svgFactory.createElement("use");return r.append(u),u.setAttribute("href",`#${l}`),this.updateProperties(r,t),this.#e.set(i,r),{id:i,clipPathId:`url(#${c})`}}drawOutline(t,e){const s=Fs.#n++,i=this.#r(),r=Fs._svgFactory.createElement("defs");i.append(r);const o=Fs._svgFactory.createElement("path");r.append(o);const a=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",a),o.setAttribute("vector-effect","non-scaling-stroke");let l;if(e){const d=Fs._svgFactory.createElement("mask");r.append(d),l=`mask_p${this.pageIndex}_${s}`,d.setAttribute("id",l),d.setAttribute("maskUnits","objectBoundingBox");const f=Fs._svgFactory.createElement("rect");d.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const h=Fs._svgFactory.createElement("use");d.append(h),h.setAttribute("href",`#${a}`),h.setAttribute("stroke","none"),h.setAttribute("fill","black"),h.setAttribute("fill-rule","nonzero"),h.classList.add("mask")}const c=Fs._svgFactory.createElement("use");i.append(c),c.setAttribute("href",`#${a}`),l&&c.setAttribute("mask",`url(#${l})`);const u=c.cloneNode();return i.append(u),c.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(i,t),this.#e.set(s,i),s}finalizeDraw(t,e){this.#s.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:s,bbox:i,rootClass:r,path:o}=e,a=typeof t=="number"?this.#e.get(t):t;if(a){if(s&&this.#a(a,s),i&&Fs.#o(a,i),r){const{classList:l}=a;for(const[c,u]of Object.entries(r))l.toggle(c,u)}if(o){const c=a.firstChild.firstChild;this.#a(c,o)}}}updateParent(t,e){if(e===this)return;const s=this.#e.get(t);s&&(e.#t.append(s),this.#e.delete(t),e.#e.set(t,s))}remove(t){this.#s.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#s.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:s5};globalThis.pdfjsLib={AbortException:Ka,AnnotationEditorLayer:Bo,AnnotationEditorParamsType:Ye,AnnotationEditorType:Ne,AnnotationEditorUIManager:Xa,AnnotationLayer:Nb,AnnotationMode:Da,AnnotationType:us,applyOpacity:dZ,build:vJ,ColorPicker:rr,createValidAbsoluteUrl:Qx,CSSConstants:uZ,DOMSVGFactory:Bp,DrawLayer:Fs,FeatureTest:zs,fetchData:af,findContrastColor:hZ,getDocument:xC,getFilenameFromUrl:iZ,getPdfFilenameFromUrl:rZ,getRGB:cf,getUuid:nC,getXfaPageViewport:aZ,GlobalWorkerOptions:wu,ImageKind:ip,InvalidPDFException:Ym,isDataScheme:Eg,isPdfFile:Ab,isValidExplicitDest:xZ,MathClamp:di,noContextMenu:pr,normalizeUnicode:eZ,OPS:Uh,OutputScale:uo,PasswordResponses:WX,PDFDataRangeTransport:CC,PDFDateString:Km,PDFWorker:Hh,PermissionFlag:qX,PixelsPerInch:Nu,RenderingCancelledException:kb,renderRichText:rC,ResponseException:Fp,setLayerDimensions:fc,shadow:Fe,SignatureExtractor:eu,stopEvent:Wn,SupportedImageMimeTypes:Xm,TextLayer:ci,TouchManager:Tg,updateUrlHash:tC,Util:ee,VerbosityLevel:kg,version:bJ,XfaLayer:iC};const HJ="/assets/pdf.worker.min-Cpi8b8z3.mjs",VJ={class:"organization-trainings"},qJ={class:"avatar"},WJ=["src"],GJ={key:0,class:"profile-section"},YJ={class:"org-name"},KJ={class:"profile-actions"},XJ={class:"content"},ZJ={class:"global-search-section"},JJ={class:"flex justify-center my-6 px-4"},QJ={class:"upcoming"},tQ={class:"flex items-center justify-between"},eQ={class:"section-title flex items-center gap-1"},nQ={class:"count-badge"},sQ={class:"trainings-grid"},iQ=["onClick"],rQ=["onClick"],oQ={class:"training-title"},aQ={class:"training-date"},lQ={class:"menu"},cQ=["onClick"],uQ=["onClick"],dQ=["onClick"],hQ={class:"completed"},fQ={class:"flex items-center justify-between"},pQ={class:"section-title flex items-center gap-1"},gQ={class:"count-badge"},mQ={class:"trainings-grid"},bQ=["onClick"],vQ=["onClick"],yQ={class:"training-title"},wQ={class:"training-date"},_Q={class:"menu"},xQ=["onClick"],CQ=["onClick"],kQ={class:"modal-content"},AQ={class:"modal-title"},SQ={class:"registrants-table-container"},EQ=["onUpdate:modelValue"],TQ={class:"registrant-certid"},LQ={class:"registrant-name"},PQ={class:"registration-date"},IQ=["disabled","onClick"],DQ=["onClick"],MQ={class:"modal-footer"},RQ={class:"training-details-modal"},NQ={class:"modal-title"},OQ={class:"training-info"},FQ={class:"training-info"},$Q={class:"training-info"},BQ={class:"training-info"},jQ={key:0,class:"training-info"},UQ={key:1,class:"training-info"},zQ=["href"],HQ={class:"training-actions"},VQ={key:2,class:"qr-container"},qQ={class:"certificate-modal"},WQ={class:"cert-modal-header"},GQ={class:"profile-avatar-wrapper"},YQ=["src"],KQ={key:1,class:"profile-avatar-placeholder"},XQ={class:"registrant-name"},ZQ={class:"status"},JQ={class:"date-registered"},QQ={class:"cert-input-wrapper"},ttt={class:"cert-input-wrapper file-input-wrapper"},ett={for:"certificate-upload",class:"cert-input upload-label"},ntt={key:3,class:"training-popup-overlay"},stt={class:"training-popup"},itt={class:"training-popup-title"},rtt={class:"popup-form-group schedule-group"},ott={class:"schedule-input-wrapper"},att={class:"date-input-wrapper"},ltt=["min"],ctt={class:"time-input-wrapper"},utt={class:"date-input-wrapper"},dtt={class:"time-input-wrapper"},htt={class:"date-input-wrapper"},ftt={class:"training-radio-group"},ptt={class:"relative mb-4"},gtt={class:"tag-list-wrapper"},mtt={class:"tag-list"},btt=["onClick"],vtt={key:0,class:"flex flex-wrap gap-2 mt-2"},ytt=["onClick"],wtt={type:"submit",class:"training-post-btn"};wu.workerSrc=HJ;async function Nd(n){try{const t=n instanceof Blob?await n.arrayBuffer():n,s=await(await xC({data:t}).promise).getPage(1),r=s.getViewport({scale:2}),o=document.createElement("canvas"),a=o.getContext("2d");return o.height=r.height,o.width=r.width,await s.render({canvasContext:a,viewport:r}).promise,new Promise((l,c)=>{o.toBlob(u=>{u?l(u):c(new Error("Failed to convert canvas to blob"))},"image/png",.95)})}catch(t){throw console.error("Error converting PDF to image:",t),t}}const _tt={components:{QrcodeVue:gc},data(){return{dictLogo:fo,globalSearchQuery:"",showAllUpcoming:!1,showAllCompleted:!1,activeTrainingQR:Ru,activeTrainingId:Bh,isEditMode:!1,trainingToEditId:null,qrCodeValue:null,qrExpiresAt:null,activeTrainingId:null,selectAll:!1,showBulkCertModal:!1,certificateData:{certTrackingID:"",certGivenDate:"",file:null},selectedRegistrant:null,bulkCertData:{baseTrackingID:"",certGivenDate:"",certificates:[]},openUpcomingMenu:null,openCompletedMenu:null,showTrainingDetailsModal:!1,selectedTraining:{},registrantsList:[],showRegistrantsModal:!1,showCertUploadModal:!1,selectedRegistrant:{name:"",dateRegistered:"",img:"",certificateTrackingID:"",certificateGivenDate:"",uploadedFile:null},upcomingtrainings:[],completedtrainings:[],showTrainingPopup:!1,newTraining:{title:"",description:"",date:"",startTime:"",endTime:"",mode:"",location:"",trainingLink:"",Tags:[]},QrcodeVue:"",qrExpiresAt:"",activeTrainingId:null,tagOptions:[],newTagName:""}},methods:{viewCertificate(n){if(!n)return alert("Certificate not found.");const t=Cm(n);if(!t)return alert("Unable to generate certificate URL.");window.open(t,"_blank")},async issueCertificate(n){try{if(n.hasCertificate)return;const t=new Date().toISOString().split("T")[0],e=new re({orientation:"landscape",unit:"pt",format:"a4"}),s=e.internal.pageSize.getWidth(),i=e.internal.pageSize.getHeight(),r=[{text:"Certificate of Completion",size:28},{text:`This is to certify that ${n.name}`,size:22},{text:`has completed the training: ${this.selectedTraining.title}`,size:18},{text:`Certificate Tracking ID: ${n.id}`,size:14},{text:`Date Issued: ${t}`,size:14}];let o=(i-r.reduce((g,m)=>g+m.size+10,0))/2;r.forEach(g=>{e.setFontSize(g.size),e.text(g.text,s/2,o,null,null,"center"),o+=g.size+10});const a=e.output("blob"),l=n.name.replace(/[/\\?%*:|"<>]/g,"_"),c=await Nd(a),u=new File([c],`${l}.png`,{type:"image/png"}),d=localStorage.getItem("token");if(!d){alert("Please log in to continue.");return}const f=new FormData;f.append("certificateTrackingID",String(n.id)),f.append("certificateGivenDate",t),f.append("file",u),f.append("_method","PUT");const h=await At.post(`https://pathfinder-development-production.up.railway.app/api/registrations/${n.id}/certificate`,f,{headers:{Authorization:`Bearer ${d}`,"Content-Type":"multipart/form-data"}});if(n.hasCertificate=!0,n.certificateTrackingID=n.id,n.certificatePath=h.data.data?.certificatePath||null,n.certificatePath){const{getPDFUrl:g}=await Xo(async()=>{const{getPDFUrl:m}=await Promise.resolve().then(()=>Pu);return{getPDFUrl:m}},[]);n.certificateUrl=g(n.certificatePath)}alert(`Certificate issued for ${n.name}!`)}catch(t){console.error("Error issuing certificate:",t),alert(`Failed to issue certificate for ${n.name}.`)}},async issueBulkCertificates(n){try{const t=new Date().toISOString().split("T")[0],e=localStorage.getItem("token");if(!e){alert("Please log in to continue.");return}for(const s of n){const i=new re({orientation:"landscape",unit:"pt",format:"a4"}),r=i.internal.pageSize.getWidth(),o=i.internal.pageSize.getHeight(),a=[{text:"Certificate of Completion",size:28},{text:`This is to certify that ${s.name}`,size:22},{text:`has completed the training: ${this.selectedTraining.title}`,size:18},{text:`Certificate Tracking ID: ${s.id}`,size:14},{text:`Date Issued: ${t}`,size:14}];let l=(o-a.reduce((h,g)=>h+g.size+10,0))/2;a.forEach(h=>{i.setFontSize(h.size),i.text(h.text,r/2,l,null,null,"center"),l+=h.size+10});const c=i.output("blob"),u=await Nd(c),d=new File([u],`${s.name}.png`,{type:"image/png"}),f=new FormData;f.append("certificateTrackingID",String(s.id)),f.append("certificateGivenDate",t),f.append("file",d),f.append("_method","PUT"),await At.post(`https://pathfinder-development-production.up.railway.app/api/registrations/${s.id}/certificate`,f,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"multipart/form-data"}})}alert("Bulk certificates issued successfully!")}catch(t){console.error("Error issuing bulk certificates:",t),alert("Failed to issue bulk certificates. "+(t.response?.data?.message||t.message))}},async issueCertificatesToSelected(){const n=this.registrantsList.filter(t=>t.selected&&!t.hasCertificate);if(!n.length)return alert("No selected registrants or all already issued.");try{const t=new Date().toISOString().split("T")[0],e=localStorage.getItem("token");if(!e){alert("Please log in to continue.");return}for(const s of n){const i=new re({orientation:"landscape",unit:"pt",format:"a4"}),r=i.internal.pageSize.getWidth(),o=i.internal.pageSize.getHeight(),a=[{text:"Certificate of Completion",size:28},{text:`This is to certify that ${s.name}`,size:22},{text:`has completed the training: ${this.selectedTraining.title}`,size:18},{text:`Certificate Tracking ID: ${s.id}`,size:14},{text:`Date Issued: ${t}`,size:14}];let l=(o-a.reduce((h,g)=>h+g.size+10,0))/2;a.forEach(h=>{i.setFontSize(h.size),i.text(h.text,r/2,l,null,null,"center"),l+=h.size+10});const c=i.output("blob"),u=await Nd(c),d=new File([u],`${s.id}.png`,{type:"image/png"}),f=new FormData;f.append("certificateTrackingID",String(s.id)),f.append("certificateGivenDate",t),f.append("file",d),f.append("_method","PUT"),await At.post(`https://pathfinder-development-production.up.railway.app/api/registrations/${s.id}/certificate`,f,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"multipart/form-data"}})}n.forEach(s=>{s.hasCertificate=!0,s.certificateTrackingID=s.id}),alert("Certificates issued successfully!"),this.selectedTraining&&await this.openRegistrantsModal(this.selectedTraining)}catch(t){console.error("Bulk issuance error:",t),alert("Failed to issue certificates. "+(t.response?.data?.message||t.message))}},toggleSelectAll(){this.registrantsList.forEach(n=>{n.selected=this.selectAll})},updateSelectAll(){this.selectAll=this.registrantsList.every(n=>n.selected)},openBulkCertModal(){const n=this.registrantsList.filter(t=>!t.hasCertificate);if(n.length===0){alert("All registrants already have certificates.");return}this.bulkCertData={baseTrackingID:"",certGivenDate:"",certificates:new Array(n.length).fill(null)},this.showBulkCertModal=!0},closeBulkCertModal(){this.showBulkCertModal=!1,this.bulkCertData={baseTrackingID:"",certGivenDate:"",certificates:[]}},handleBulkFileUpload(n,t){this.bulkCertData.certificates[t]=n.target.files[0],this.$forceUpdate()},async sendBulkCertificates(){const n=localStorage.getItem("token");if(!n){alert("Please log in to continue.");return}try{const t=new FormData;t.append("baseTrackingID",this.bulkCertData.baseTrackingID),t.append("certGivenDate",this.bulkCertData.certGivenDate),this.bulkCertData.certificates.forEach((s,i)=>{if(!s)throw new Error(`Please upload a certificate file for all registrants. Missing file at index ${i}`);t.append(`certificates[${i}]`,s)});const e=await At.post(`https://pathfinder-development-production.up.railway.app/apitrainings/${this.selectedTraining.trainingID}/certificates/bulk`,t,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"multipart/form-data"}});alert("Certificates issued successfully to all registrants!"),this.closeBulkCertModal(),await this.openRegistrantsModal(this.selectedTraining)}catch(t){console.error("Error issuing bulk certificates:",t),t.response?alert(t.response.data.message||"Failed to issue certificates."):alert(t.message||"An error occurred while issuing certificates.")}},async fetchTags(){try{const n=await At.get("https://pathfinder-development-production.up.railway.app/api/tags");this.tagOptions=n.data}catch(n){console.error("Error fetching tags:",n)}},toggleTag(n){const t=Number(n),e=this.newTraining.Tags.indexOf(t);e>-1?this.newTraining.Tags.splice(e,1):this.newTraining.Tags.push(t)},isTagSelected(n){const t=Number(n);return this.newTraining.Tags.includes(t)},removeTag(n){const t=Number(n),e=this.newTraining.Tags.indexOf(t);e>-1&&this.newTraining.Tags.splice(e,1)},async addTag(){const n=this.newTagName.trim();if(!n){alert("Please enter a tag name.");return}const t=this.tagOptions.find(e=>e.TagName.toLowerCase()===n.toLowerCase());if(t){const e=Number(t.TagID);this.newTraining.Tags.includes(e)||this.newTraining.Tags.push(e),this.newTagName="";return}try{const e=await At.post("https://pathfinder-development-production.up.railway.app/api/tags",{TagName:n});this.tagOptions.push(e.data),this.newTraining.Tags.push(Number(e.data.TagID)),this.newTagName=""}catch(e){console.error("Error adding tag:",e),alert("Failed to add tag.")}},async sendCertificateDetails(){if(!this.selectedRegistrant||!this.selectedRegistrant.id){console.error("No registrant ID found!");return}if(!this.selectedRegistrant.uploadedFile){alert("Please select a certificate file before sending.");return}const n=localStorage.getItem("token");if(!n){alert("Please log in to continue.");return}let t=this.selectedRegistrant.uploadedFile;if(t.type==="application/pdf"||t.name.toLowerCase().endsWith(".pdf"))try{const s=await t.arrayBuffer(),i=await Nd(s);t=new File([i],t.name.replace(/\.pdf$/i,".png"),{type:"image/png"})}catch(s){console.error("Error converting PDF to image:",s),alert("Failed to convert PDF to image. Please try uploading an image file instead.");return}const e=new FormData;e.append("certificateTrackingID",String(this.selectedRegistrant.certificateTrackingID||this.selectedRegistrant.id)),e.append("certificateGivenDate",this.selectedRegistrant.certificateGivenDate),e.append("file",t),e.append("_method","PUT");try{const s=await At.post(`https://pathfinder-development-production.up.railway.app/api/registrations/${this.selectedRegistrant.id}/certificate`,e,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"multipart/form-data"}});console.log("Certificate uploaded successfully",s.data),alert("Certificate uploaded successfully!"),this.showCertUploadModal=!1,this.showRegistrantsModal&&this.selectedTraining&&await this.openRegistrantsModal(this.selectedTraining)}catch(s){console.error("Error uploading certificate: ",s),alert(s.response?.data?.message||"Failed to upload certificate. Please try again.")}},getTagName(n){const t=Number(n),e=this.tagOptions.find(s=>Number(s.TagID)===t);return e?e.TagName:t},toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen},handleViewRegistrants(n){if(!n){console.error(" handleViewRegistrants called without training");return}this.openRegistrantsModal(n)},toggleUpcomingMenu(n){this.openUpcomingMenu=this.openUpcomingMenu===n?null:n,this.openCompletedMenu=null},closeModal(){this.showRegistrantsModal=!1},toggleCompletedMenu(n){this.openCompletedMenu=this.openCompletedMenu===n?null:n,this.openUpcomingMenu=null},closeAllMenus(){this.openUpcomingMenu=null,this.openCompletedMenu=null},handleOutsideClick(n){n.target.closest(".menu")||this.closeAllMenus()},async issueCertificate(n){try{if(n.hasCertificate)return;const t=new Date().toISOString().split("T")[0],e=new re({orientation:"landscape",unit:"pt",format:"a4"}),s=e.internal.pageSize.getWidth(),i=e.internal.pageSize.getHeight(),r=[{text:"Certificate of Completion",size:28},{text:`This is to certify that ${n.name}`,size:22},{text:`has completed the training: ${this.selectedTraining.title}`,size:18},{text:`Certificate Tracking ID: ${n.id}`,size:14},{text:`Date Issued: ${t}`,size:14}];let o=(i-r.reduce((g,m)=>g+m.size+10,0))/2;r.forEach(g=>{e.setFontSize(g.size),e.text(g.text,s/2,o,null,null,"center"),o+=g.size+10});const a=e.output("blob"),l=n.name.replace(/[/\\?%*:|"<>]/g,"_"),c=await Nd(a),u=new File([c],`${l}.png`,{type:"image/png"}),d=localStorage.getItem("token");if(!d){alert("Please log in to continue.");return}const f=new FormData;f.append("certificateTrackingID",String(n.id)),f.append("certificateGivenDate",t),f.append("file",u),f.append("_method","PUT");const h=await At.post(`https://pathfinder-development-production.up.railway.app/api/registrations/${n.id}/certificate`,f,{headers:{Authorization:`Bearer ${d}`,"Content-Type":"multipart/form-data"}});if(n.hasCertificate=!0,n.certificateTrackingID=n.id,n.certificatePath=h.data.data?.certificatePath||null,n.certificatePath){const{getPDFUrl:g}=await Xo(async()=>{const{getPDFUrl:m}=await Promise.resolve().then(()=>Pu);return{getPDFUrl:m}},void 0);n.certificateUrl=g(n.certificatePath)}alert(`Certificate issued for ${n.name}!`)}catch(t){console.error("Error issuing certificate:",t),alert(`Failed to issue certificate for ${n.name}.`)}},closeRegistrantsModal(){this.showRegistrantsModal=!1,this.registrantsList=[]},openCertUploadModal(n){console.log("REGISTRANT DATA:",n),this.selectedRegistrant={...n,certificateTrackingID:n.id||"",certificateGivenDate:n.certificateGivenDate||"",uploadedFile:null},console.log("SELECTED REGISTRANT:",this.selectedRegistrant),this.showCertUploadModal=!0},closeCertUploadModal(){this.showCertUploadModal=!1,this.selectedRegistrant={name:"",dateRegistered:"",img:""}},handleFileUpload(n){this.selectedRegistrant.uploadedFile=n.target.files[0]},sendCertificateDetails(){if(!this.selectedRegistrant.uploadedFile){alert("Please select a certificate file before sending.");return}this.sendCertificate(this.selectedRegistrant.uploadedFile,this.selectedRegistrant.id).then(()=>{this.closeCertUploadModal()}).catch(n=>{console.error(n),alert("Failed to send certificate.")})},dismissModal(){this.showCertUploadModal=!1,this.selectedRegistrant=null},openTrainingDetails(n){this.selectedTraining=n,this.showTrainingDetailsModal=!0,this.closeAllMenus()},closeTrainingDetails(){this.showTrainingDetailsModal=!1},handleViewRegistrants(n){this.closeTrainingDetails(),this.openRegistrantsModal(n)},async openRegistrantsModal(n){try{this.selectedTraining=n;const t=localStorage.getItem("token");if(!t)throw new Error("No token found");const e=await At.get(`https://pathfinder-development-production.up.railway.app/api/trainings/${n.trainingID}/registrants`,{headers:{Authorization:`Bearer ${t}`}});this.registrantsList=e.data.map(s=>({...s,certificateUrl:s.certificatePath?Cm(s.certificatePath):null})),this.showRegistrantsModal=!0,this.closeAllMenus()}catch(t){console.error("Error fetching registrants:",t),alert("Failed to fetch registrants.")}},async fetchTrainings(){try{const n=localStorage.getItem("user"),t=n?JSON.parse(n):null,e=t?.organizationID??t?.organization?.organizationID??null;let s=[];try{const{data:i}=await Er.get("/organization/trainings");s=i}catch(i){console.warn("Org trainings endpoint unavailable, falling back:",i?.response?.status);const r=localStorage.getItem("user"),o=r?JSON.parse(r):null,a=o?.organizationID??o?.organization?.organizationID??null,{data:l}=await Er.get("/trainings",{params:a?{organizationID:a}:{}});s=l}s.forEach(i=>{const r=this.upcomingtrainings.findIndex(o=>o.trainingID===i.trainingID);r>-1?this.upcomingtrainings[r]={...this.upcomingtrainings[r],...i}:this.upcomingtrainings.push(i),VX(i)})}catch(n){console.error("Error fetching trainings:",n)}},openTrainingPopup(){this.showTrainingPopup=!0,this.fetchTags()},async openTrainingPopup(n=null){await this.fetchTags(),n?(this.isEditMode=!0,this.trainingToEditId=n.trainingID,this.newTraining={...n,Tags:n.Tags?n.Tags.map(t=>Number(t.TagID??t.tagID??t.id)):[]}):(this.isEditMode=!1,this.newTraining={title:"",description:"",date:"",startTime:"",endTime:"",mode:"",location:"",trainingLink:"",Tags:[]}),Array.isArray(this.newTraining.Tags)||(this.newTraining.Tags=[]),this.showTrainingPopup=!0},closeTrainingPopup(){this.showTrainingPopup=!1,this.newTraining={title:"",description:"",date:"",startTime:"",endTime:"",mode:"",location:"",trainingLink:"",Tags:[]},this.newTagName=""},async updateTraining(n){const t=this.upcomingtrainings.find(s=>s.trainingID===n);if(!t){alert("Training not found.");return}const e=t.schedule?.includes("T")?t.schedule.split("T"):t.schedule?.split(" ")||[];this.newTraining.title=t.title,this.newTraining.description=t.description,this.newTraining.date=e[0]||"",this.newTraining.startTime=e[1]?.slice(0,5)||"",this.newTraining.endTime=t.end_time?(t.end_time.includes("T")?t.end_time.split("T")[1]:t.end_time.split(" ")[1])?.slice(0,5):"",this.newTraining.mode=t.mode,this.newTraining.location=t.location||"",this.newTraining.trainingLink=t.training_link||"",await this.fetchTags(),this.newTraining.Tags=t.Tags?t.Tags.map(s=>Number(s.TagID??s.tagID??s.id)):[],Array.isArray(this.newTraining.Tags)||(this.newTraining.Tags=[]),this.isEditMode=!0,this.trainingToEditId=n,this.showTrainingPopup=!0,this.closeAllMenus(),console.log("Prefilled training:",this.newTraining)},async saveTraining(){try{if(!this.newTraining.date||!this.newTraining.startTime){alert("PLEASE SELECT BOTH A DATE AND TIME FOR THE TRAINING");return}const n=`${this.newTraining.date} ${this.newTraining.startTime}`,t=this.newTraining.endTime?`${this.newTraining.date} ${this.newTraining.endTime}`:null,e={title:this.newTraining.title,description:this.newTraining.description,schedule:n,end_time:t,mode:this.newTraining.mode,location:this.newTraining.mode==="On-Site"&&this.newTraining.location||null,training_link:this.newTraining.mode==="Online"&&this.newTraining.trainingLink||null,Tags:this.newTraining.Tags||[]},s=localStorage.getItem("token");this.isEditMode&&this.trainingToEditId?(await At.put(`https://pathfinder-development-production.up.railway.app/api/trainings/${this.trainingToEditId}`,e,{headers:{Authorization:`Bearer ${s}`}}),alert(" TRAINING UPDATED SUCCESSFULLY!")):(await At.post("https://pathfinder-development-production.up.railway.app/api/trainings",e,{headers:{Authorization:`Bearer ${s}`}}),alert(" TRAINING POSTED SUCCESSFULLY!")),await this.fetchTrainings(),this.closeTrainingPopup(),this.isEditMode=!1,this.trainingToEditId=null}catch(n){console.error("ERROR SAVING TRAINING:",n.response?.data||n),alert(" SOMETHING WENT WRONG WHILE SAVING THE TRAINING")}},async deleteTraining(n){try{if(!confirm("Are you sure you want to delete this training?"))return;const t=localStorage.getItem("token");await At.delete(`https://pathfinder-development-production.up.railway.app/api/trainings/${n}`,{headers:{Authorization:`Bearer ${t}`}}),alert(" Training deleted successfully!"),await this.fetchTrainings(),this.activeTrainingId===n&&(this.qrCodeValue=null,this.qrExpiresAt=null,this.activeTrainingId=null,this.qrExpireTimeout&&clearTimeout(this.qrExpireTimeout))}catch(t){console.error("Failed to delete training:",t.response?.data||t),alert(" Something went wrong while deleting the training.")}},formatSchedule(n){if(!n)return"No schedule set";try{const[t,e]=n.split(/[ T]/),[s,i,r]=t.split("-"),[o,a,l]=(e||"00:00:00").split(":");return new Date(Number(s),Number(i)-1,Number(r),Number(o),Number(a),Number(l||0)).toLocaleString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})}catch{return n}}},mounted(){this.fetchTrainings(),document.addEventListener("click",this.handleOutsideClick),this.trainingPollInterval=setInterval(()=>{this.fetchTrainings()},3e4)},beforeUnmount(){document.removeEventListener("click",this.handleOutsideClick)},computed:{todayDate(){const n=new Date,t=n.getFullYear(),e=String(n.getMonth()+1).padStart(2,"0"),s=String(n.getDate()).padStart(2,"0");return`${t}-${e}-${s}`},visibleUpcomingTrainings(){const n=this.sortedUpcomingTrainings;return this.showAllUpcoming?n:n.slice(0,4)},visibleCompletedTrainings(){const n=this.sortedCompletedTrainings;return this.showAllCompleted?n:n.slice(0,4)},sortedUpcomingTrainings(){const n=new Date;return this.upcomingtrainings.filter(t=>new Date(t.schedule)>=n).sort((t,e)=>new Date(t.schedule)-new Date(e.schedule))},sortedCompletedTrainings(){const n=new Date;return this.upcomingtrainings.filter(t=>new Date(t.schedule)<n).sort((t,e)=>new Date(e.schedule)-new Date(t.schedule))},filteredUpcoming(){const n=this.globalSearchQuery.toLowerCase();return n?this.sortedUpcomingTrainings.filter(t=>t.title.toLowerCase().startsWith(n)):this.sortedUpcomingTrainings},filteredCompleted(){const n=this.globalSearchQuery.toLowerCase();return n?this.sortedCompletedTrainings.filter(t=>t.title.toLowerCase().startsWith(n)):this.sortedCompletedTrainings},visibleFilteredUpcoming(){return this.showAllUpcoming?this.filteredUpcoming:this.filteredUpcoming.slice(0,4)},visibleFilteredCompleted(){return this.showAllCompleted?this.filteredCompleted:this.filteredCompleted.slice(0,4)},visibleUpcomingTrainings(){const n=this.currentOrganizationId,t=this.sortedUpcomingTrainings.filter(e=>e.organization_id===n);return this.showAllUpcoming?t:t.slice(0,4)},visibleCompletedTrainings(){const n=this.currentOrganizationId,t=this.sortedCompletedTrainings.filter(e=>e.organization_id===n);return this.showAllCompleted?t:t.slice(0,4)},sortedUpcomingTrainings(){const n=new Date;return this.upcomingtrainings.filter(t=>new Date(t.schedule)>=n).sort((t,e)=>new Date(t.schedule)-new Date(e.schedule))},sortedCompletedTrainings(){const n=new Date;return this.upcomingtrainings.filter(t=>new Date(t.schedule)<n).sort((t,e)=>new Date(e.schedule)-new Date(t.schedule))},filteredTags(){if(!this.newTagName||this.newTagName.trim()==="")return this.tagOptions;const n=this.newTagName.toLowerCase().trim();return this.tagOptions.filter(t=>t.TagName.toLowerCase().includes(n))}}},xtt=Object.assign(_tt,{__name:"OrganizationTrainings",setup(n){const t=ut(!0),e=ut(""),s=ut(new Date),i=()=>{t.value=!t.value},r=gi(),o=c=>{r.push(c)};function a(c){const u=new Date(c.schedule);return s.value<=u}setInterval(()=>{s.value=new Date},6e4),je(()=>{const c=localStorage.getItem("user");if(c){const u=JSON.parse(c);u.role==="organization"&&(e.value=u.displayName||u.name)}});const l=()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),r.push({name:"Login"})};return(c,u)=>(j(),z("div",VJ,[p("button",{class:fe(["hamburger",{open:t.value,shifted:t.value}]),onClick:i},u[38]||(u[38]=[p("span",null,null,-1),p("span",null,null,-1),p("span",null,null,-1)]),2),Ce(dr,{name:"slide"},{default:hs(()=>[p("aside",{class:fe(["sidebar",{collapsed:!t.value}])},[u[45]||(u[45]=p("div",{class:"space"},null,-1)),p("div",qJ,[p("img",{src:Qe(fo),alt:"DICT Logo",class:"avatar-img"},null,8,WJ)]),Ce(dr,{name:"fade"},{default:hs(()=>[t.value?(j(),z("div",GJ,[p("h3",YJ,J(e.value),1),p("div",KJ,[p("div",{class:"action",onClick:u[0]||(u[0]=d=>o({name:"OrgUpdateProfile"}))},u[39]||(u[39]=[p("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M11.7278 8.27191C12.7534 9.87525 14.1247 11.2375 15.7464 12.2534L8.85673 19.144C8.43166 19.569 8.21841 19.7816 7.95731 19.9213C7.69637 20.0609 7.40171 20.1199 6.81278 20.2377L3.73563 20.853C3.40302 20.9195 3.23649 20.9525 3.14188 20.8578C3.04759 20.7632 3.08035 20.5971 3.14677 20.2651L3.76298 17.1879C3.88087 16.5985 3.93965 16.3035 4.07938 16.0424C4.21912 15.7814 4.43173 15.569 4.85673 15.144L11.7278 8.27191ZM16.1116 4.03656C16.6711 3.75929 17.3284 3.75931 17.888 4.03656C18.1821 4.18229 18.455 4.45518 19.0003 5.00043C19.5453 5.54545 19.8184 5.81774 19.9641 6.11175C20.2414 6.67123 20.2413 7.32861 19.9641 7.88812C19.8184 8.18221 19.5455 8.45517 19.0003 9.00043L17.2034 10.7963C15.5308 9.84498 14.1456 8.46859 13.1819 6.81781L15.0003 5.00043C15.5453 4.45539 15.8176 4.18234 16.1116 4.03656Z",fill:"#FFFDFD"})],-1),p("span",null,"Update Profile",-1)]))])])):Ct("",!0)]),_:1}),p("div",{class:"icon",onClick:u[1]||(u[1]=d=>o("/organization"))},u[40]||(u[40]=[p("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M6.25 17.0585C6.25 16.0494 6.25 15.5448 6.47166 15.1141C6.69333 14.6833 7.1039 14.3901 7.92505 13.8035L13.8375 9.58034C14.3989 9.17938 14.6795 8.9789 15 8.9789C15.3205 8.9789 15.6011 9.17938 16.1625 9.58034L22.075 13.8035C22.8961 14.3901 23.3067 14.6833 23.5283 15.1141C23.75 15.5448 23.75 16.0494 23.75 17.0585V24.25C23.75 25.1928 23.75 25.6642 23.4571 25.9571C23.1642 26.25 22.6928 26.25 21.75 26.25H8.25C7.30719 26.25 6.83579 26.25 6.54289 25.9571C6.25 25.6642 6.25 25.1928 6.25 24.25V17.0585Z",fill:"white"}),p("path",{d:"M3.75 15.6366C3.75 15.9035 3.75 16.0369 3.8341 16.0781C3.91819 16.1192 4.02352 16.0373 4.23418 15.8734L13.7721 8.45502C14.362 7.99625 14.6569 7.76686 15 7.76686C15.3431 7.76686 15.638 7.99625 16.2279 8.45502L25.7658 15.8734C25.9765 16.0373 26.0818 16.1192 26.1659 16.0781C26.25 16.0369 26.25 15.9035 26.25 15.6366V14.7282C26.25 14.2478 26.25 14.0076 26.1483 13.7997C26.0466 13.5918 25.857 13.4444 25.4779 13.1495L16.2279 5.95502C15.638 5.49625 15.3431 5.26686 15 5.26686C14.6569 5.26686 14.362 5.49625 13.7721 5.95502L4.52212 13.1495C4.14295 13.4444 3.95337 13.5918 3.85168 13.7997C3.75 14.0076 3.75 14.2478 3.75 14.7282V15.6366Z",fill:"white"}),p("path",{d:"M16.125 18.75H13.875C12.7704 18.75 11.875 19.6454 11.875 20.75V26.1C11.875 26.1828 11.9422 26.25 12.025 26.25H17.975C18.0578 26.25 18.125 26.1828 18.125 26.1V20.75C18.125 19.6454 17.2296 18.75 16.125 18.75Z",fill:"white"}),p("rect",{x:"20",y:"6.25",width:"2.5",height:"5",rx:"0.5",fill:"white"})],-1),p("span",null,"Home",-1)])),p("div",{class:"icon",onClick:u[2]||(u[2]=d=>o({name:"OrgTrainings"}))},u[41]||(u[41]=[p("svg",{width:"29",height:"29",viewBox:"0 0 29 29",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M20.5837 3.625C23.4119 3.625 24.8261 3.62526 25.7048 4.50391C26.5833 5.3826 26.5837 6.79675 26.5837 9.625V19.375C26.5837 22.2033 26.5833 23.6174 25.7048 24.4961C24.8261 25.3747 23.4119 25.375 20.5837 25.375H8.41666C5.58824 25.375 4.17425 25.3748 3.29557 24.4961C2.41689 23.6174 2.41666 22.2034 2.41666 19.375V9.625C2.41666 6.79657 2.41689 5.38259 3.29557 4.50391C4.17425 3.62523 5.58824 3.625 8.41666 3.625H20.5837ZM9.66666 12.292C9.11438 12.292 8.66666 12.7397 8.66666 13.292V20.542L8.67155 20.6445C8.72303 21.1485 9.1491 21.542 9.66666 21.542C10.1842 21.542 10.6103 21.1485 10.6618 20.6445L10.6667 20.542V13.292C10.6667 12.7397 10.2189 12.292 9.66666 12.292ZM19.3337 9.875C18.7814 9.875 18.3337 10.3227 18.3337 10.875V20.542L18.3385 20.6436C18.3896 21.148 18.8158 21.542 19.3337 21.542C19.8514 21.5418 20.2778 21.1479 20.3288 20.6436L20.3337 20.542V10.875C20.3337 10.3228 19.8858 9.87518 19.3337 9.875ZM14.4997 14.708C13.9476 14.7082 13.4998 15.156 13.4997 15.708V20.541L13.5046 20.6436C13.5557 21.1477 13.982 21.5408 14.4997 21.541C15.0175 21.541 15.4436 21.1478 15.4948 20.6436L15.4997 20.541V15.708C15.4995 15.1559 15.0518 14.708 14.4997 14.708Z",fill:"white"})],-1),p("span",null,"Trainings",-1)])),p("div",{class:"icon",onClick:u[3]||(u[3]=d=>o({name:"OrgCareers"}))},u[42]||(u[42]=[p("svg",{width:"25",height:"25",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M22.8798 11.0484C23.4046 10.8642 23.9845 11.1431 24.1081 11.6855C24.4792 13.3134 24.4217 15.0018 23.9268 16.6191C23.4739 18.0989 22.6698 19.4685 21.5787 20.6449C21.2148 21.0372 20.6017 21.0197 20.2239 20.6408L14.9487 15.3495C14.4292 14.8284 14.6314 13.9436 15.3257 13.6999L22.8798 11.0484ZM13 4.0826C13 3.50231 13.4932 3.04057 14.0672 3.12592C15.8633 3.39302 17.5788 4.00579 19.085 4.93161C20.3794 5.72731 21.4793 6.72976 22.3343 7.87824C22.709 8.38157 22.4513 9.07932 21.8592 9.28718L14.3313 11.9301C13.6809 12.1584 13 11.6758 13 10.9865V4.0826Z",fill:"white"}),p("path",{d:"M11.9511 13.2908C11.9512 13.5763 12.0581 13.8518 12.25 14.0632L19.2677 21.7886C19.6714 22.233 19.5963 22.9337 19.0759 23.2331C18.245 23.7112 17.354 24.0924 16.4209 24.365C14.5402 24.9144 12.5476 25.0087 10.6201 24.6394C8.69236 24.2701 6.88846 23.4478 5.36911 22.2468C3.84993 21.0459 2.66126 19.5025 1.90915 17.7537C1.15711 16.0048 0.864996 14.1043 1.05759 12.2205C1.25024 10.3365 1.92171 8.52693 3.01364 6.95288C4.1056 5.37884 5.58398 4.08845 7.31735 3.19605C8.43484 2.62073 9.63633 2.22318 10.8757 2.01305C11.4515 1.91541 11.9511 2.37876 11.9511 2.96284V13.2908Z",fill:"white"})],-1),p("span",null,"Career",-1)])),p("div",{class:"icon",onClick:u[4]||(u[4]=d=>o({name:"OrgCalendar"}))},u[43]||(u[43]=[p("svg",{width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M2.16675 9.4165C2.16675 7.53089 2.16675 6.58808 2.75253 6.00229C3.33832 5.4165 4.28113 5.4165 6.16675 5.4165H19.8334C21.719 5.4165 22.6618 5.4165 23.2476 6.00229C23.8334 6.58808 23.8334 7.53089 23.8334 9.4165V9.83317C23.8334 10.3046 23.8334 10.5403 23.687 10.6867C23.5405 10.8332 23.3048 10.8332 22.8334 10.8332H3.16675C2.69534 10.8332 2.45964 10.8332 2.31319 10.6867C2.16675 10.5403 2.16675 10.3046 2.16675 9.83317V9.4165Z",fill:"white"}),p("path",{d:"M22.833 13C23.3042 13 23.5401 13.0002 23.6865 13.1465C23.833 13.2929 23.833 13.5286 23.833 14V19.833C23.833 21.7186 23.8329 22.6613 23.2471 23.2471C22.6613 23.8329 21.7186 23.833 19.833 23.833H6.16699C4.28137 23.833 3.33872 23.8329 2.75293 23.2471C2.16714 22.6613 2.16699 21.7186 2.16699 19.833V14C2.16699 13.5286 2.16703 13.2929 2.31348 13.1465C2.45994 13.0002 2.69576 13 3.16699 13H22.833ZM8.58301 19.5C8.11182 19.5 7.87591 19.5001 7.72949 19.6465C7.58321 19.7929 7.58301 20.0288 7.58301 20.5V20.667C7.58301 21.1382 7.58308 21.3741 7.72949 21.5205C7.87591 21.6669 8.11182 21.667 8.58301 21.667H10.917C11.3882 21.667 11.6241 21.6669 11.7705 21.5205C11.9169 21.3741 11.917 21.1382 11.917 20.667V20.5C11.917 20.0288 11.9168 19.7929 11.7705 19.6465C11.6241 19.5001 11.3882 19.5 10.917 19.5H8.58301ZM15.083 19.5C14.6118 19.5 14.3759 19.5001 14.2295 19.6465C14.0832 19.7929 14.083 20.0288 14.083 20.5V20.667C14.083 21.1382 14.0831 21.3741 14.2295 21.5205C14.3759 21.6669 14.6118 21.667 15.083 21.667H17.417C17.8882 21.667 18.1241 21.6669 18.2705 21.5205C18.4169 21.3741 18.417 21.1382 18.417 20.667V20.5C18.417 20.0288 18.4168 19.7929 18.2705 19.6465C18.1241 19.5001 17.8882 19.5 17.417 19.5H15.083ZM8.58301 15.167C8.11182 15.167 7.87591 15.1671 7.72949 15.3135C7.58337 15.4599 7.58301 15.6959 7.58301 16.167V16.333C7.58301 16.8041 7.58337 17.0401 7.72949 17.1865C7.87591 17.3329 8.11182 17.333 8.58301 17.333H10.917C11.3882 17.333 11.6241 17.3329 11.7705 17.1865C11.9166 17.0401 11.917 16.8041 11.917 16.333V16.167C11.917 15.6959 11.9166 15.4599 11.7705 15.3135C11.6241 15.1671 11.3882 15.167 10.917 15.167H8.58301ZM15.083 15.167C14.6118 15.167 14.3759 15.1671 14.2295 15.3135C14.0834 15.4599 14.083 15.6959 14.083 16.167V16.333C14.083 16.8041 14.0834 17.0401 14.2295 17.1865C14.3759 17.3329 14.6118 17.333 15.083 17.333H17.417C17.8882 17.333 18.1241 17.3329 18.2705 17.1865C18.4166 17.0401 18.417 16.8041 18.417 16.333V16.167C18.417 15.6959 18.4166 15.4599 18.2705 15.3135C18.1241 15.1671 17.8882 15.167 17.417 15.167H15.083Z",fill:"white"}),p("path",{d:"M7.58325 3.25L7.58325 6.5",stroke:"white","stroke-width":"2","stroke-linecap":"round"}),p("path",{d:"M18.4167 3.25L18.4167 6.5",stroke:"white","stroke-width":"2","stroke-linecap":"round"})],-1),p("span",null,"Calendar",-1)])),u[46]||(u[46]=p("div",{class:"spacer"},null,-1)),p("div",{class:"icon signout",onClick:l},u[44]||(u[44]=[p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[p("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),p("polyline",{points:"16 17 21 12 16 7"}),p("line",{x1:"21",y1:"12",x2:"9",y2:"12"})],-1),p("span",null,"Sign Out",-1)]))],2)]),_:1}),p("main",XJ,[u[74]||(u[74]=p("header",{class:"topbar"},[p("div",{class:"Pathfinder-wrapper"},[p("span",{class:"logo-text"},"Pathfinder")])],-1)),p("section",ZJ,[p("div",JJ,[Ut(p("input",{type:"text","onUpdate:modelValue":u[5]||(u[5]=d=>c.globalSearchQuery=d),placeholder:"Search trainings...",class:"global-search-bar text-black px-4 py-2 border rounded-lg w-full sm:w-3/4 md:w-1/2 lg:w-1/3"},null,512),[[Wt,c.globalSearchQuery]])])]),p("section",QJ,[p("div",tQ,[p("h2",eQ,[u[47]||(u[47]=Dt(" Upcoming Trainings ")),p("span",nQ,J(c.sortedUpcomingTrainings.length),1)]),p("button",{class:"plus-btn-text",onClick:u[6]||(u[6]=d=>c.openTrainingPopup())},"+")]),p("div",sQ,[(j(!0),z(Kt,null,pe(c.visibleFilteredUpcoming,d=>(j(),z("div",{key:d.trainingID,class:"training-card",onClick:f=>c.openTrainingDetails(d)},[p("div",{class:"training-right",onClick:f=>c.openTrainingDetails(d)},[p("h3",oQ,J(d.title),1),p("p",aQ,J(c.formatSchedule(d.schedule)),1)],8,rQ),p("div",lQ,[p("div",{class:"menu-icon",onClick:me(f=>c.toggleUpcomingMenu(d.trainingID),["stop"])},"  ",8,cQ),c.openUpcomingMenu===d.trainingID?(j(),z("div",{key:0,class:"dropdown-menu",onClick:u[7]||(u[7]=me(()=>{},["stop"]))},[p("ul",null,[p("li",{onClick:f=>c.deleteTraining(d.trainingID)},"Delete Training",8,uQ),p("li",{onClick:f=>c.updateTraining(d.trainingID)},"Update Training",8,dQ)])])):Ct("",!0)])],8,iQ))),128))]),c.sortedUpcomingTrainings.length>4?(j(),z("button",{key:0,class:"show-more-btn",onClick:u[8]||(u[8]=d=>c.showAllUpcoming=!c.showAllUpcoming)},J(c.showAllUpcoming?"Show Less":"Show More"),1)):Ct("",!0)]),p("section",hQ,[p("div",fQ,[p("h2",pQ,[u[48]||(u[48]=Dt(" Completed Trainings ")),p("span",gQ,J(c.sortedCompletedTrainings.length),1)])]),p("div",mQ,[(j(!0),z(Kt,null,pe(c.visibleFilteredCompleted,d=>(j(),z("div",{key:d.trainingID,class:"training-card",onClick:f=>c.openTrainingDetails(d)},[p("div",{class:"training-right",onClick:f=>c.openTrainingDetails(d)},[p("h3",yQ,J(d.title),1),p("p",wQ,J(c.formatSchedule(d.schedule)),1)],8,vQ),p("div",_Q,[p("div",{class:"menu-icon",onClick:me(f=>c.toggleCompletedMenu(d.trainingID),["stop"])},"  ",8,xQ),c.openCompletedMenu===d.trainingID?(j(),z("div",{key:0,class:"dropdown-menu",onClick:u[9]||(u[9]=me(()=>{},["stop"]))},[p("ul",null,[p("li",{onClick:f=>c.deleteTraining(d.trainingID)},"Delete Training",8,CQ)])])):Ct("",!0)])],8,bQ))),128))]),c.sortedCompletedTrainings.length>4?(j(),z("button",{key:0,class:"show-more-btn",onClick:u[10]||(u[10]=d=>c.showAllCompleted=!c.showAllCompleted)},J(c.showAllCompleted?"Show Less":"Show More"),1)):Ct("",!0)]),c.showRegistrantsModal?(j(),z("div",{key:0,class:"modal-overlay",onClick:u[15]||(u[15]=me((...d)=>c.closeModal&&c.closeModal(...d),["self"]))},[p("div",kQ,[p("button",{class:"modal-close-btn",onClick:u[11]||(u[11]=(...d)=>c.closeModal&&c.closeModal(...d))},""),p("h3",AQ,"Registrants for "+J(c.selectedTraining.title),1),p("div",SQ,[p("table",null,[p("thead",null,[p("tr",null,[p("th",null,[Ut(p("input",{type:"checkbox","onUpdate:modelValue":u[12]||(u[12]=d=>c.selectAll=d),onChange:u[13]||(u[13]=(...d)=>c.toggleSelectAll&&c.toggleSelectAll(...d))},null,544),[[wh,c.selectAll]])]),u[49]||(u[49]=p("th",null,"CERTIFICATE TRACKING ID",-1)),u[50]||(u[50]=p("th",null,"FULL NAME",-1)),u[51]||(u[51]=p("th",null,"REGISTRATION DATE",-1)),u[52]||(u[52]=p("th",null,"STATUS",-1)),u[53]||(u[53]=p("th",{class:"cert-col-header"},"CERTIFICATE",-1))])]),p("tbody",null,[(j(!0),z(Kt,null,pe(c.registrantsList,d=>(j(),z("tr",{key:d.id},[p("td",null,[Ut(p("input",{type:"checkbox","onUpdate:modelValue":f=>d.selected=f},null,8,EQ),[[wh,d.selected]])]),p("td",null,[p("p",TQ,J(d.id),1)]),p("td",null,[p("p",LQ,J(d.name),1)]),p("td",null,[p("p",PQ,J(d.dateRegistered),1)]),p("td",{class:fe({"status-attended":d.status==="Attended","status-registered":d.status==="Registered","status-did-not-attend":d.status==="Did not Attend"})},J(d.status),3),p("td",null,[p("button",{class:fe(["action-btn",d.hasCertificate?"certificate-issued-btn":"issue-cert-btn"]),disabled:d.hasCertificate,onClick:f=>c.issueCertificate(d)},J(d.hasCertificate?"Certificate Issued":"Issue Certificate"),11,IQ),d.hasCertificate&&d.certificateUrl?(j(),z("button",{key:0,class:"action-btn",onClick:f=>c.viewCertificate(d.certificateUrl)}," View Certificate ",8,DQ)):Ct("",!0)])]))),128))])])]),p("div",MQ,[p("button",{class:"bulk-issue-btn",onClick:u[14]||(u[14]=(...d)=>c.issueCertificatesToSelected&&c.issueCertificatesToSelected(...d))}," Issue Certificates to Selected ")])])])):Ct("",!0),c.showTrainingDetailsModal?(j(),z("div",{key:1,class:"modal-overlay",onClick:u[18]||(u[18]=me((...d)=>c.closeTrainingDetails&&c.closeTrainingDetails(...d),["self"]))},[p("div",RQ,[p("button",{class:"modal-close-btn",onClick:u[16]||(u[16]=(...d)=>c.closeTrainingDetails&&c.closeTrainingDetails(...d))},""),p("h3",NQ,J(c.selectedTraining.title),1),p("p",OQ,[u[54]||(u[54]=p("strong",null,"Description:",-1)),Dt(" "+J(c.selectedTraining.description),1)]),p("p",FQ,[u[55]||(u[55]=p("strong",null,"Date and Start Time:",-1)),Dt(" "+J(c.formatSchedule(c.selectedTraining.schedule)),1)]),p("p",$Q,[u[56]||(u[56]=p("strong",null,"End Time:",-1)),Dt(" "+J(c.formatSchedule(c.selectedTraining.end_time)),1)]),p("p",BQ,[u[57]||(u[57]=p("strong",null,"Mode:",-1)),Dt(" "+J(c.selectedTraining.mode),1)]),c.selectedTraining.mode==="On-Site"?(j(),z("p",jQ,[u[58]||(u[58]=p("strong",null,"Location:",-1)),Dt(" "+J(c.selectedTraining.location),1)])):Ct("",!0),c.selectedTraining.mode==="Online"?(j(),z("p",UQ,[u[59]||(u[59]=p("strong",null,"Training Link: ",-1)),p("a",{href:c.selectedTraining.trainingLink,target:"_blank",class:"training-link"},J(c.selectedTraining.trainingLink),9,zQ)])):Ct("",!0),p("div",HQ,[p("button",{class:"btn-view-registrants",onClick:u[17]||(u[17]=d=>c.handleViewRegistrants(c.selectedTraining))}," View Registrants ")]),Qe(Ru)&&Qe(Bh)===c.selectedTraining.trainingID&&a(c.selectedTraining)?(j(),z("div",VQ,[p("h3",null,"QR Code (Expires at: "+J(c.activeTrainingQRExpiresAt)+")",1),Ce(gc,{value:Qe(Ru),size:200},null,8,["value"])])):Ct("",!0)])])):Ct("",!0),c.showCertUploadModal?(j(),z("div",{key:2,class:"modal-overlay",onClick:u[24]||(u[24]=me((...d)=>c.closeCertUploadModal&&c.closeCertUploadModal(...d),["self"]))},[p("div",qQ,[p("button",{class:"cert-close-btn",onClick:u[19]||(u[19]=(...d)=>c.dismissModal&&c.dismissModal(...d))},u[60]||(u[60]=[p("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M18 6L6 18M6 6L18 18",stroke:"#4a4a4a","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),p("div",WQ,[p("div",GQ,[c.selectedRegistrant.img?(j(),z("img",{key:0,src:c.selectedRegistrant.img,alt:"Registrant Profile",class:"profile-avatar-img"},null,8,YQ)):(j(),z("div",KQ,u[61]||(u[61]=[p("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("circle",{cx:"12",cy:"7",r:"4",fill:"#a7a7a7"}),p("path",{d:"M17.5 19.5c0-3.314-2.239-6-5-6s-5 2.686-5 6h10z",fill:"#a7a7a7"})],-1)])))]),p("p",XQ,J(c.selectedRegistrant.name),1)]),p("p",ZQ," Status: "+J(c.selectedRegistrant.status),1),p("p",JQ," Date Registered: "+J(c.selectedRegistrant.dateRegistered),1),p("form",{onSubmit:u[23]||(u[23]=me((...d)=>c.sendCertificateDetails&&c.sendCertificateDetails(...d),["prevent"])),class:"cert-form"},[Ut(p("input",{type:"text","onUpdate:modelValue":u[20]||(u[20]=d=>c.selectedRegistrant.certificateTrackingID=d),placeholder:"Certificate Tracking ID",class:"cert-input",required:""},null,512),[[Wt,c.selectedRegistrant.certificateTrackingID]]),p("div",QQ,[Ut(p("input",{type:"date","onUpdate:modelValue":u[21]||(u[21]=d=>c.selectedRegistrant.certificateGivenDate=d),placeholder:"dd/mm/yyyy",class:"cert-input date-input",required:""},null,512),[[Wt,c.selectedRegistrant.certificateGivenDate]]),u[62]||(u[62]=si('<span class="calendar-icon" data-v-536bfbe7><svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-536bfbe7><path d="M2.16669 9.4165C2.16669 7.53089 2.16669 6.58808 2.75247 6.00229C3.33826 5.4165 4.28107 5.4165 6.16669 5.4165H19.8334C21.719 5.4165 22.6618 5.4165 23.2476 6.00229C23.8334 6.58808 23.8334 7.53089 23.8334 9.4165V9.83317C23.8334 10.3046 23.8334 10.5403 23.6869 10.6867C23.5405 10.8332 23.3048 10.8332 22.8334 10.8332H3.16669C2.69528 10.8332 2.45958 10.8332 2.31313 10.687C2.16669 10.5405 2.16669 10.3048 2.16669 9.83317V9.4165Z" fill="#4a4a4a" data-v-536bfbe7></path><path d="M22.833 13C23.3042 13 23.5401 13.0002 23.6865 13.1465C23.833 13.2929 23.833 13.5286 23.833 14V19.833C23.833 21.7186 23.8329 22.6613 23.2471 23.2471C22.6613 23.8329 21.7186 23.833 19.833 23.833H6.16699C4.28137 23.833 3.33872 23.8329 2.75293 23.2471C2.16714 22.6613 2.16699 21.7186 2.16699 19.833V14C2.16699 13.5286 2.16703 13.2929 2.31348 13.1465C2.45994 13.0002 2.69576 13 3.16699 13H22.833ZM8.58301 19.5C8.11182 19.5 7.87591 19.5001 7.72949 19.6465C7.58321 19.7929 7.58301 20.0288 7.58301 20.5V20.667C7.58301 21.1382 7.58308 21.3741 7.72949 21.5205C7.87591 21.6669 8.11182 21.667 8.58301 21.667H10.917C11.3882 21.667 11.6241 21.6669 11.7705 21.5205C11.9169 21.3741 11.917 21.1382 11.917 20.667V20.5C11.917 20.0288 11.9168 19.7929 11.7705 19.6465C11.6241 19.5001 11.3882 19.5 10.917 19.5H8.58301ZM15.083 19.5C14.6118 19.5 14.3759 19.5001 14.2295 19.6465C14.0832 19.7929 14.083 20.0288 14.083 20.5V20.667C14.083 21.1382 14.0831 21.3741 14.2295 21.5205C14.3759 21.6669 14.6118 21.667 15.083 21.667H17.417C17.8882 21.667 18.1241 21.6669 18.2705 21.5205C18.4169 21.3741 18.417 21.1382 18.417 20.667V20.5C18.417 20.0288 18.4168 19.7929 18.2705 19.6465C18.1241 19.5001 17.8882 19.5 17.417 19.5H15.083ZM8.58301 15.167C8.11182 15.167 7.87591 15.1671 7.72949 15.3135C7.58337 15.4599 7.58301 15.6959 7.58301 16.167V16.333C7.58301 16.8041 7.58337 17.0401 7.72949 17.1865C7.87591 17.3329 8.11182 17.333 8.58301 17.333H10.917C11.3882 17.333 11.6241 17.3329 11.7705 17.1865C11.9166 17.0401 11.917 16.8041 11.917 16.333V16.167C11.917 15.6959 11.9166 15.4599 11.7705 15.3135C11.6241 15.1671 11.3882 15.167 10.917 15.167H8.58301ZM15.083 15.167C14.6118 15.167 14.3759 15.1671 14.2295 15.3135C14.0834 15.4599 14.083 15.6959 14.083 16.167V16.333C14.083 16.8041 14.0834 17.0401 14.2295 17.1865C14.3759 17.3329 14.6118 17.333 15.083 17.333H17.417C17.8882 17.333 18.1241 17.3329 18.2705 17.1865C18.4166 17.0401 18.417 16.8041 18.417 16.333V16.167C18.417 15.6959 18.4166 15.4599 18.2705 15.3135C18.1241 15.1671 17.8882 15.167 17.417 15.167H15.083Z" fill="#4a4a4a" data-v-536bfbe7></path><path d="M7.58331 3.25L7.58331 6.5" stroke="#4a4a4a" stroke-width="2" stroke-linecap="round" data-v-536bfbe7></path><path d="M18.4167 3.25L18.4167 6.5" stroke="#4a4a4a" stroke-width="2" stroke-linecap="round" data-v-536bfbe7></path></svg></span>',1))]),p("div",ttt,[p("input",{type:"file",id:"certificate-upload",accept:"image/*,application/pdf",onChange:u[22]||(u[22]=(...d)=>c.handleFileUpload&&c.handleFileUpload(...d)),class:"hidden-file-input"},null,32),p("label",ett,J(c.selectedRegistrant.uploadedFile?c.selectedRegistrant.uploadedFile.name:"Upload File (PDF or Image)"),1),u[63]||(u[63]=p("span",{class:"upload-icon"},[p("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M12 20L11.4 20.8L12 21.25L12.6 20.8L12 20ZM13 8C13 7.44772 12.5523 7 12 7C11.4477 7 11 7.44772 11 8H13ZM8 17L7.4 17.8L11.4 20.8L12 20L12.6 19.2L8.6 16.2L8 17ZM12 20L12.6 20.8L16.6 17.8L16 17L15.4 16.2L11.4 19.2L12 20ZM12 20H13V8H12H11V20H12Z",fill:"#4a4a4a"}),p("path",{d:"M8 13C7.07003 13 6.60504 13 6.22354 12.8978C5.18827 12.6204 4.37962 11.8117 4.10222 10.7765C4 10.395 4 9.92997 4 9V8C4 6.13077 4 5.19615 4.40192 4.5C4.66523 4.04394 5.04394 3.66523 5.5 3.40192C6.19615 3 7.13077 3 9 3H15C16.8692 3 17.8038 3 18.5 3.40192C18.9561 3.66523 19.3348 4.04394 19.5981 4.5C20 5.19615 20 6.13077 20 8V9C20 9.92997 20 10.395 19.8978 10.7765C19.6204 11.8117 18.8117 12.6204 17.7765 12.8978C17.395 13 16.93 13 16 13",stroke:"#4a4a4a","stroke-width":"2","stroke-linecap":"round"})])],-1))]),u[64]||(u[64]=p("button",{type:"submit",class:"cert-send-btn"},"Send",-1))],32)])])):Ct("",!0),c.showTrainingPopup?(j(),z("div",ntt,[p("div",stt,[p("button",{onClick:u[25]||(u[25]=(...d)=>c.closeTrainingPopup&&c.closeTrainingPopup(...d)),class:"training-popup-close"},"  "),p("h2",itt,J(c.isEditMode?"Update Training":"Post Training"),1),p("form",{onSubmit:u[37]||(u[37]=me((...d)=>c.saveTraining&&c.saveTraining(...d),["prevent"])),class:"training-popup-form"},[Ut(p("input",{"onUpdate:modelValue":u[26]||(u[26]=d=>c.newTraining.title=d),type:"text",placeholder:"Title",class:"training-input"},null,512),[[Wt,c.newTraining.title]]),Ut(p("textarea",{"onUpdate:modelValue":u[27]||(u[27]=d=>c.newTraining.description=d),placeholder:"Description",class:"training-input"},null,512),[[Wt,c.newTraining.description]]),p("div",rtt,[u[70]||(u[70]=p("label",{for:"schedule"},"Schedule",-1)),p("div",ott,[p("div",att,[Ut(p("input",{type:"date",id:"schedule","onUpdate:modelValue":u[28]||(u[28]=d=>c.newTraining.date=d),min:c.todayDate,placeholder:"Schedule"},null,8,ltt),[[Wt,c.newTraining.date]]),u[65]||(u[65]=si('<span class="calendar-icon" data-v-536bfbe7><svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-536bfbe7><path d="M2.16669 9.41675C2.16669 7.53113 2.16669 6.58832 2.75247 6.00253C3.33826 5.41675 4.28107 5.41675 6.16669 5.41675H19.8334C21.719 5.41675 22.6618 5.41675 23.2476 6.00253C23.8334 6.58832 23.8334 7.53113 23.8334 9.41675V9.83342C23.8334 10.3048 23.8334 10.5405 23.6869 10.687C23.5405 10.8334 23.3048 10.8334 22.8334 10.8334H3.16669C2.69528 10.8334 2.45958 10.8334 2.31313 10.687C2.16669 10.5405 2.16669 10.3048 2.16669 9.83341V9.41675Z" fill="black" data-v-536bfbe7></path><path d="M22.833 13C23.3042 13 23.5401 13.0002 23.6865 13.1465C23.833 13.2929 23.833 13.5286 23.833 14V19.833C23.833 21.7186 23.8329 22.6613 23.2471 23.2471C22.6613 23.8329 21.7186 23.833 19.833 23.833H6.16699C4.28137 23.833 3.33872 23.8329 2.75293 23.2471C2.16714 22.6613 2.16699 21.7186 2.16699 19.833V14C2.16699 13.5286 2.16703 13.2929 2.31348 13.1465C2.45994 13.0002 2.69576 13 3.16699 13H22.833Z" fill="black" data-v-536bfbe7></path><path d="M7.58331 3.25L7.58331 6.5" stroke="black" stroke-width="2" stroke-linecap="round" data-v-536bfbe7></path><path d="M18.4167 3.25L18.4167 6.5" stroke="black" stroke-width="2" stroke-linecap="round" data-v-536bfbe7></path></svg></span>',1))]),p("div",ctt,[u[67]||(u[67]=p("label",{for:"startTime"},"Start Time",-1)),p("div",utt,[Ut(p("input",{type:"time",id:"startTime","onUpdate:modelValue":u[29]||(u[29]=d=>c.newTraining.startTime=d),placeholder:"Start Time"},null,512),[[Wt,c.newTraining.startTime]]),u[66]||(u[66]=p("span",{class:"calendar-icon"},[p("svg",{width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M13 2.16663C7.02012 2.16663 2.16669 7.02006 2.16669 13C2.16669 18.9799 7.02012 23.8333 13 23.8333C18.9799 23.8333 23.8334 18.9799 23.8334 13C23.8334 7.02006 18.9799 2.16663 13 2.16663ZM13 21.6666C8.10012 21.6666 4.33335 17.8999 4.33335 13C4.33335 8.10006 8.10012 4.33329 13 4.33329C17.9 4.33329 21.6667 8.10006 21.6667 13C21.6667 17.8999 17.9 21.6666 13 21.6666Z",fill:"black"}),p("path",{d:"M13.8125 7.58337H12.1875V13.4067L16.9583 16.25L17.875 14.8334L13.8125 12.25V7.58337Z",fill:"black"})])],-1))])]),p("div",dtt,[u[69]||(u[69]=p("label",{for:"endTime"},"End Time",-1)),p("div",htt,[Ut(p("input",{type:"time",id:"endTime","onUpdate:modelValue":u[30]||(u[30]=d=>c.newTraining.endTime=d),placeholder:"End Time"},null,512),[[Wt,c.newTraining.endTime]]),u[68]||(u[68]=p("span",{class:"calendar-icon"},[p("svg",{width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M13 2.16663C7.02012 2.16663 2.16669 7.02006 2.16669 13C2.16669 18.9799 7.02012 23.8333 13 23.8333C18.9799 23.8333 23.8334 18.9799 23.8334 13C23.8334 7.02006 18.9799 2.16663 13 2.16663ZM13 21.6666C8.10012 21.6666 4.33335 17.8999 4.33335 13C4.33335 8.10006 8.10012 4.33329 13 4.33329C17.9 4.33329 21.6667 8.10006 21.6667 13C21.6667 17.8999 17.9 21.6666 13 21.6666Z",fill:"black"}),p("path",{d:"M13.8125 7.58337H12.1875V13.4067L16.9583 16.25L17.875 14.8334L13.8125 12.25V7.58337Z",fill:"black"})])],-1))])])])]),p("div",ftt,[p("label",null,[Ut(p("input",{type:"radio",value:"On-Site","onUpdate:modelValue":u[31]||(u[31]=d=>c.newTraining.mode=d)},null,512),[[_h,c.newTraining.mode]]),u[71]||(u[71]=Dt(" On-Site "))]),p("label",null,[Ut(p("input",{type:"radio",value:"Online","onUpdate:modelValue":u[32]||(u[32]=d=>c.newTraining.mode=d)},null,512),[[_h,c.newTraining.mode]]),u[72]||(u[72]=Dt(" Online "))])]),c.newTraining.mode==="On-Site"?Ut((j(),z("input",{key:0,"onUpdate:modelValue":u[33]||(u[33]=d=>c.newTraining.location=d),type:"text",placeholder:"Location",class:"training-input"},null,512)),[[Wt,c.newTraining.location]]):c.newTraining.mode==="Online"?Ut((j(),z("input",{key:1,"onUpdate:modelValue":u[34]||(u[34]=d=>c.newTraining.trainingLink=d),type:"url",placeholder:"Training Link",class:"training-input"},null,512)),[[Wt,c.newTraining.trainingLink]]):Ct("",!0),p("div",ptt,[u[73]||(u[73]=p("label",{class:"block font-semibold text-gray-600 mb-2"},"Tags",-1)),Ut(p("input",{"onUpdate:modelValue":u[35]||(u[35]=d=>c.newTagName=d),type:"text",placeholder:"Search or type a new tag...",class:"training-input mb-2"},null,512),[[Wt,c.newTagName]]),p("div",gtt,[p("div",mtt,[(j(!0),z(Kt,null,pe(c.filteredTags,d=>(j(),z("span",{key:d.TagID,class:fe(["tag-chip",{"tag-chip-selected":c.isTagSelected(d.TagID)}]),onClick:f=>c.toggleTag(d.TagID)},J(d.TagName),11,btt))),128))])]),c.newTraining.Tags.length?(j(),z("div",vtt,[(j(!0),z(Kt,null,pe(c.newTraining.Tags,d=>(j(),z("span",{key:d,class:"bg-blue-100 text-blue-700 text-sm px-3 py-1 rounded-full"},[Dt(J(c.getTagName(d))+" ",1),p("button",{onClick:me(f=>c.removeTag(d),["stop"]),class:"ml-1 text-red-500"},"",8,ytt)]))),128))])):Ct("",!0),p("button",{onClick:u[36]||(u[36]=me((...d)=>c.addTag&&c.addTag(...d),["prevent"])),class:"training-save-btn mt-2"},"Add Tag")]),p("button",wtt,J(c.isEditMode?"Update":"Post"),1)],32)])])):Ct("",!0)])]))}}),Ctt=gr(xtt,[["__scopeId","data-v-536bfbe7"]]),MC=At.create({baseURL:"https://pathfinder-development-production.up.railway.app/api"});MC.interceptors.request.use(n=>{const t=localStorage.getItem("token");return t&&(n.headers.Authorization=`Bearer ${t}`),n});const ktt={class:"organization-careers"},Att={class:"avatar"},Stt=["src"],Ett={key:0,class:"profile-section"},Ttt={class:"org-name"},Ltt={class:"profile-actions"},Ptt={class:"content"},Itt={class:"global-search-section"},Dtt={class:"flex justify-center my-6 px-4"},Mtt={class:"upcoming"},Rtt={class:"flex items-center justify-between"},Ntt={class:"section-title flex items-center gap-1"},Ott={class:"count-badge"},Ftt={class:"career-grid"},$tt=["onClick"],Btt={class:"career-right"},jtt={class:"career-title"},Utt={class:"career-deadline"},ztt={class:"menu"},Htt=["onClick"],Vtt=["onClick"],qtt=["onClick"],Wtt={class:"completed"},Gtt={class:"flex items-center justify-between"},Ytt={class:"section-title flex items-center gap-1"},Ktt={class:"count-badge"},Xtt={class:"career-grid"},Ztt=["onClick"],Jtt={class:"career-right"},Qtt={class:"career-title"},tet={class:"career-deadline"},eet={class:"menu"},net=["onClick"],set=["onClick"],iet={class:"modal-content"},ret={class:"modal-title"},oet={class:"applicants-table-container"},aet={key:0},cet={class:"applicant-name"},uet={class:"application-date"},det=["onUpdate:modelValue","onChange"],het={value:"submitted"},fet={value:"in review"},pet={value:"for interview"},get={value:"accepted"},met={value:"rejected"},bet={class:"requirements-col"},vet=["onClick"],yet={key:1},wet=["onClick"],_et={key:1,class:"schedule-btn",disabled:""},xet={key:2},Cet=["onClick"],ket={key:1},Aet={class:"modal-box"},Eet={class:"schedule-form"},Tet={class:"date-input-wrapper"},Let={class:"mode-selection"},Pet={key:0},Iet={key:1},Det={class:"modal-actions"},Met={class:"modal-box"},Ret={key:0,class:"view-schedule-info"},Net={key:0},Oet={key:1},Fet={key:2},$et={key:3},Bet=["href"],jet={class:"modal-actions"},Uet={key:3,class:"career-popup-overlay"},zet={class:"career-popup"},Het={class:"career-popup-title"},Vet={class:"deadline-input-wrapper"},qet=["min"],Wet={class:"relative mb-4"},Get={class:"tag-list-wrapper"},Yet={class:"tag-list"},Ket=["onClick"],Xet={key:0,class:"flex flex-wrap gap-2 mt-2"},Zet=["onClick"],Jet={type:"submit",class:"career-save-btn"},Qet={class:"career-details-modal"},tnt={class:"modal-title"},ent={class:"career-info"},nnt={class:"career-info"},snt={class:"career-info"},int={class:"career-info"},rnt={class:"career-info"},ont={class:"career-info"},ant={class:"career-actions"};ut(null);ut(!1);const Od=n=>({submitted:"Submitted","in review":"In Review","for interview":"For Interview",accepted:"Accepted",rejected:"Rejected"})[n]||n,lnt={data(){return{showRequirementsModal:!1,requirementsUrl:null,selectedCareer:{title:"",careerID:null,position:""},newTagName:"",dictLogo:fo,globalSearchQuery:"",openUpcomingMenu:null,openCompletedMenu:null,showCareerDetailsModal:!1,showApplicantsModal:!1,showViewScheduleModal:!1,showScheduleModal:!1,selectedPerson:null,showAllUpcoming:!1,showAllCompleted:!1,isEditMode:!1,careerToEditId:null,scheduleData:{date:"",mode:"",detail:""},applicantsList:[],upcomingCareers:[],showCareerPopup:!1,newCareer:{position:"",details:"",qualifications:"",requirements:"",letterAddress:"",deadline:"",Tags:[]},tagOptions:[]}},methods:{async openApplicantsModal(n){n=n||this.selectedCareer||null;let t=localStorage.getItem("token");if(!t){alert("Please log in to continue.");return}t=t.trim().replace(/^"(.*)"$/,"$1");const e=n?.careerID??n?.careerId??n?.id??n?._id??this.selectedCareer?.careerID??this.selectedCareer?.careerId??null;if(!e){console.error("Career object missing careerID:",n);return}console.log("Fetching applicants for Career ID:",e),console.log("Token exists:",!!t,"Token length:",t?t.length:0);try{this.selectedCareer={...this.selectedCareer||{},...n||{},careerID:n?.careerID??n?.careerId??n?.id??n?._id??this.selectedCareer?.careerID??null};const s=await At.get(`https://pathfinder-development-production.up.railway.app/api/careers/${e}/applicants`,{headers:{Authorization:`Bearer ${t}`,Accept:"application/json","Content-Type":"application/json"}});console.log("Applicants API response:",s.data),s.data&&Array.isArray(s.data)&&s.data.length>0?this.applicantsList=s.data.map(i=>({id:i.id??i.applicationID??i._id,name:i.name??`${i.firstName||""} ${i.lastName||""}`.trim(),dateSubmitted:i.dateSubmitted??i.created_at??i.createdAt,status:i.status?String(i.status).toLowerCase():"submitted",requirement_directory:i.requirement_directory??null,requirements:i.requirements??[],interviewSchedule:i.interviewSchedule??null,interviewMode:i.interviewMode??null,interviewLocation:i.interviewLocation??null,interviewLink:i.interviewLink??null})):this.applicantsList=[],this.showApplicantsModal=!0}catch(s){console.error("Error fetching applicants:",s),console.error("Error response:",s.response),s.response?.status===401?alert("Unauthorized. Please log in again. Error: "+(s.response.data?.message||"Token invalid or expired")):s.response?.status===403?alert("Access denied. You don't have permission to view applicants for this career."):alert(s.response?.data?.message||"An error occurred while fetching applicants. Please try again."),this.applicantsList=[]}},async updateApplicationStatus(n){const t=localStorage.getItem("token");if(!t){alert("Please log in to continue.");return}const e=n.status;console.log("Updating status for application ID:",n.id,"New status:",n.status),console.log("Token exists:",!!t);try{const s=await At.put(`https://pathfinder-development-production.up.railway.app/api/applications/${n.id}/status`,{status:n.status},{headers:{Authorization:`Bearer ${t.trim()}`,"Content-Type":"application/json",Accept:"application/json"}}),i=this.applicantsList.findIndex(r=>r.id===n.id);if(i!==-1){const r=s.data.data||s.data;this.applicantsList[i]={...this.applicantsList[i],status:r.applicationStatus?r.applicationStatus.toLowerCase():n.status}}}catch(s){console.error("Error updating status:",s),console.error("Error response:",s.response),n.status=e,s.response?.status===401?alert("Unauthorized. Please log in again. Error: "+(s.response.data?.message||"Token invalid or expired")):s.response?.status===403?alert("Access denied. You don't have permission to update this application status."):alert(s.response?.data?.message||"Failed to update application status. Please try again.")}},closeRequirementsModal(){this.showRequirementsModal=!1,this.requirementsUrl=null,this.selectedPerson=null},printRequirements(){if(this.requirementsUrl){const n=window.open(this.requirementsUrl,"_blank");n?n.onload=()=>{n.print()}:alert("Please allow pop-ups to print the requirements.")}else alert("No requirements to print.")},async downloadRequirements(n,t){try{if(t){const{getPDFUrl:e}=await Xo(async()=>{const{getPDFUrl:c}=await Promise.resolve().then(()=>Pu);return{getPDFUrl:c}},void 0),s=e(t,"Requirements"),i=await fetch(s);if(!i.ok)throw new Error("Failed to fetch PDF from Supabase");const r=await i.blob(),o=window.URL.createObjectURL(r),a=t.split("/").pop()||"requirement.pdf",l=document.createElement("a");l.href=o,l.download=a,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(o)}else{const e=await At({url:`https://pathfinder-development-production.up.railway.app/api/applications/${n}/requirement`,method:"GET",responseType:"blob",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),s=window.URL.createObjectURL(new Blob([e.data],{type:"application/pdf"})),i=document.createElement("a");i.href=s,i.download="requirement.pdf",document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(s)}}catch(e){console.error("Error downloading requirements:",e),alert("Failed to download requirements. Please try again.")}},async confirmSchedule(){if(!this.scheduleData.date||!this.scheduleData.mode||!this.scheduleData.detail){alert("Please fill out all fields.");return}const n=localStorage.getItem("token");if(!n){alert("Please log in to continue.");return}if(!this.selectedPerson||!this.selectedPerson.id){alert("No applicant selected.");return}try{const t=new Date(this.scheduleData.date);if(isNaN(t.getTime())){alert("Invalid date selected. Please try again.");return}const e=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),r=String(t.getHours()).padStart(2,"0"),o=String(t.getMinutes()).padStart(2,"0"),a=String(t.getSeconds()).padStart(2,"0"),l=`${e}-${s}-${i} ${r}:${o}:${a}`,c=this.scheduleData.mode==="onSite"?"On-Site":"Online",u={interviewSchedule:l,interviewMode:c,interviewLocation:this.scheduleData.mode==="onSite"?this.scheduleData.detail:null,interviewLink:this.scheduleData.mode==="online"?this.scheduleData.detail:null};console.log("Sending interview schedule payload:",u);const d=await At.put(`https://pathfinder-development-production.up.railway.app/api/applications/${this.selectedPerson.id}/interview`,u,{headers:{Authorization:`Bearer ${n.trim()}`,"Content-Type":"application/json",Accept:"application/json"}});if(console.log("Full response:",d),console.log("Response data:",d.data),d.data.success||d.data.message){const f=this.applicantsList.findIndex(h=>h.id===this.selectedPerson.id);if(f!==-1){const h=d.data.data||d.data;console.log("Received response data:",h);const g={...this.applicantsList[f],status:"for interview",interviewSchedule:h.interviewSchedule||l,interviewMode:h.interviewMode||c,interviewLocation:h.interviewLocation||(this.scheduleData.mode==="onSite"?this.scheduleData.detail:null),interviewLink:h.interviewLink||(this.scheduleData.mode==="online"?this.scheduleData.detail:null)};console.log("Updated applicant data:",g),this.$set?this.$set(this.applicantsList,f,g):(this.applicantsList[f]=g,this.applicantsList=[...this.applicantsList])}this.closeScheduleModal(),alert(" Interview scheduled successfully! The schedule has been saved.")}else throw new Error("Unexpected response format")}catch(t){console.error("Error scheduling interview:",t),console.error("Error response:",t.response),t.response?.status===401?alert("Unauthorized. Please log in again. Error: "+(t.response.data?.message||"Token invalid or expired")):t.response?.status===403?alert("Access denied. You don't have permission to schedule interviews for this application."):t.response?.status===422?alert("Validation error: "+(t.response.data?.message||"Please check your input and try again.")):alert(t.response?.data?.message||"Failed to schedule interview. Please try again.")}},checkToken(){const n=localStorage.getItem("token");return n||(alert(" Please log in to continue."),!1)},async addTag(){const n=this.newTagName.trim();if(!n){alert("Please enter a tag name.");return}const t=this.checkToken();if(!t)return;const e=this.tagOptions.find(s=>s.TagName.toLowerCase()===n.toLowerCase());if(e){const s=Number(e.TagID);this.newCareer.Tags.includes(s)||this.newCareer.Tags.push(s),this.newTagName="";return}try{const s=await At.post("https://pathfinder-development-production.up.railway.app/api/tags",{TagName:n},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});this.tagOptions.push(s.data),this.newCareer.Tags.push(Number(s.data.TagID)),this.newTagName=""}catch(s){console.error("Error adding tag:",s),alert("Failed to add tag.")}},toggleTag(n){Array.isArray(this.newCareer.Tags)||(this.newCareer.Tags=[]);const t=Number(n);this.newCareer.Tags.includes(t)?this.newCareer.Tags=this.newCareer.Tags.filter(e=>e!==t):this.newCareer.Tags.push(t)},isTagSelected(n){const t=Number(n);return Array.isArray(this.newCareer.Tags)&&this.newCareer.Tags.includes(t)},removeTag(n){if(!Array.isArray(this.newCareer.Tags))return;const t=Number(n),e=this.newCareer.Tags.indexOf(t);e!==-1&&this.newCareer.Tags.splice(e,1)},async fetchTags(){try{const n=await At.get("https://pathfinder-development-production.up.railway.app/api/tags");this.tagOptions=n.data,console.log(this.tagOptions)}catch(n){console.error("Error fetching tags:",n)}},getTagName(n){const t=Number(n),e=this.tagOptions.find(s=>Number(s.TagID)===t);return e?e.TagName:""},toggleUpcomingMenu(n){this.openUpcomingMenu=this.openUpcomingMenu===n?null:n,this.openCompletedMenu=null},toggleCompletedMenu(n){this.openCompletedMenu=this.openCompletedMenu===n?null:n,this.openUpcomingMenu=null},handleClickOutside(n){n.target.closest(".menu-icon, .dropdown-menu")||(this.openUpcomingMenu=null,this.openCompletedMenu=null)},closeModal(){this.showApplicantsModal=!1},showMoreUpcoming(){this.visibleUpcomingCount+=4},showMoreCompleted(){this.visibleCompletedCount+=4},openScheduleModal(n){n.status==="for interview"&&(this.selectedPerson=n,this.showScheduleModal=!0,this.showViewScheduleModal=!1,this.scheduleData={date:"",mode:"",detail:""})},closeScheduleModal(){this.showScheduleModal=!1,this.scheduleData={date:"",mode:"",detail:""},this.selectedPerson=null},async deleteCareer(n){const t=n.careerID||n.id;if(!t){console.error("No career ID provided",n);return}if(confirm(`Are you sure you want to delete "${n.position}"?`))try{const s=localStorage.getItem("token");await At.delete(`https://pathfinder-development-production.up.railway.app/api/careers/${t}`,{headers:{Authorization:`Bearer ${s}`}});const i=this.upcomingCareers.findIndex(r=>(r.careerID||r.id)===t);i!==-1&&this.upcomingCareers.splice(i,1),alert(" Career deleted successfully!")}catch(s){console.error("ERROR DELETING CAREER:",s.response?.data||s),alert(" Failed to delete career. See console for details.")}},async updateCareer(n){await this.fetchTags(),this.showCareerPopup=!0,this.isEditMode=!0,this.careerToEditId=n.careerID||n.id,this.newCareer={position:n.position,details:n.detailsAndInstructions,qualifications:n.qualifications,requirements:n.requirements,letterAddress:n.applicationLetterAddress,deadline:n.deadlineOfSubmission,Tags:Array.isArray(n.Tags)?n.Tags.map(t=>Number(t.TagID??t.tagID??t.id)):[]},Array.isArray(this.newCareer.Tags)||(this.newCareer.Tags=[]),console.log("Prefilled career:",this.newCareer)},async saveCareer(){try{const{position:n,details:t,qualifications:e,requirements:s,letterAddress:i,deadline:r}=this.newCareer;if(!n||!t||!e||!s||!i||!r){alert(" Please fill out all fields.");return}const a=JSON.parse(localStorage.getItem("user")||"{}")?.organizationID;if(!a){alert(" Could not determine your organization ID.");return}const l=localStorage.getItem("token");if(this.isEditMode&&this.careerToEditId){const c={position:n,detailsAndInstructions:t,qualifications:e,requirements:s,applicationLetterAddress:i,deadlineOfSubmission:r,organizationID:a},u=await At.put(`https://pathfinder-development-production.up.railway.app/api/careers/${this.careerToEditId}`,c,{headers:{Authorization:`Bearer ${l}`}}),d=this.upcomingCareers.findIndex(f=>(f.careerID||f.id)===this.careerToEditId);d!==-1&&(this.upcomingCareers[d]=u.data.data||u.data),alert(" Career updated successfully!")}else{const c={position:n,detailsAndInstructions:t,qualifications:e,requirements:s,applicationLetterAddress:i,deadlineOfSubmission:r,organizationID:a};await At.post("https://pathfinder-development-production.up.railway.app/api/careers",c,{headers:{Authorization:`Bearer ${l}`}}),await this.fetchCareers(),alert(" Career posted successfully!")}this.closeCareerPopup(),this.resetNewCareer()}catch(n){console.error("ERROR SAVING CAREER:",n.response?.data||n),console.error("Validation errors:",n.response?.data?.errors),alert(" Something went wrong while saving the career.")}finally{this.isEditMode=!1,this.careerToEditId=null}},resetNewCareer(){this.newCareer={position:"",details:"",qualifications:"",requirements:"",letterAddress:"",deadline:"",Tags:[]},this.isEditMode=!1,this.careerToEditId=null},openViewScheduleModal(n){n.status==="for interview"&&n.interviewSchedule&&(this.selectedPerson=n,this.showViewScheduleModal=!0,this.showScheduleModal=!1)},closeViewScheduleModal(){this.showViewScheduleModal=!1,this.selectedPerson=null},formatInterviewDateTime(n){if(!n)return"Not scheduled";try{const t=new Date(n);if(isNaN(t.getTime())){const e=n.split(" ");if(e.length===2){const[s,i]=e,[r,o,a]=s.split("-"),[l,c]=i.split(":");return new Date(r,o-1,a,l,c).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}return n}return t.toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(t){return console.error("Error formatting date:",t),n}},openCalendar(){const n=this.$refs.dateInput;if(!n){console.warn("dateInput ref not found");return}try{if(typeof n.showPicker=="function"){n.showPicker();return}}catch(t){console.debug("showPicker() failed:",t)}try{n.focus(),n.click();return}catch(t){console.debug("input.click()/focus failed:",t)}console.warn("Native picker was not opened programmatically by the browser. Consider adding a JS datepicker as a reliable fallback.")},async fetchCareers(){try{(await MC.get("/organization/careers")).data.forEach(e=>{const s=this.upcomingCareers.findIndex(i=>i.careerID===e.careerID);s>-1?this.upcomingCareers[s]={...this.upcomingCareers[s],...e}:this.upcomingCareers.push(e)})}catch(n){console.error("ERROR FETCHING CAREERS:",n)}},openCareerPopup(n=null){n?(this.newCareer={position:n.position||"",details:n.detailsAndInstructions||"",qualifications:n.qualifications||"",requirements:n.requirements||"",letterAddress:n.applicationLetterAddress||"",deadline:n.deadlineOfSubmission||"",Tags:Array.isArray(n.Tags)?n.Tags.map(t=>t.TagID??t.tagID??t.id):[]},this.isEditMode=!0,this.careerToEditId=n.careerID||n.id):(this.newCareer={position:"",details:"",qualifications:"",requirements:"",letterAddress:"",deadline:"",Tags:[]},this.isEditMode=!1,this.careerToEditId=null),Array.isArray(this.newCareer.Tags)||(this.newCareer.Tags=[]),this.showCareerPopup=!0,this.fetchTags()},closeCareerPopup(){this.showCareerPopup=!1,this.resetNewCareer()},openCareerDetails(n){this.selectedCareer={...n,careerID:n.careerID,_id:n.careerID},this.showCareerDetailsModal=!0},closeCareerDetails(){this.showCareerDetailsModal=!1},handleViewApplicants(n){this.closeCareerDetails(),this.openApplicantsModal(n)},async saveCareer(){try{let n=localStorage.getItem("token");if(console.log(" Raw token read from localStorage:",n),!n){alert(" Please log in to continue.");return}n=n.trim().replace(/^"(.*)"$/,"$1"),console.log(" Using token:",n);const t=["position","details","qualifications","requirements","letterAddress","deadline"];for(const o of t)if(!this.newCareer[o]){alert(`Please fill out the field: ${o}`);return}if((!this.newCareer.Tags||this.newCareer.Tags.length===0)&&!confirm("No tags selected. Continue without tags?"))return;const e={position:this.newCareer.position,details:this.newCareer.details,detailsAndInstructions:this.newCareer.details,qualifications:this.newCareer.qualifications,requirements:this.newCareer.requirements,letterAddress:this.newCareer.letterAddress,applicationLetterAddress:this.newCareer.letterAddress,deadline:this.newCareer.deadline,deadlineOfSubmission:this.newCareer.deadline,Tags:this.newCareer.Tags||[]};console.log(" Payload:",e);const s=this.isEditMode&&this.careerToEditId?`https://pathfinder-development-production.up.railway.app/api/careers/${this.careerToEditId}`:"https://pathfinder-development-production.up.railway.app/api/careers",i=this.isEditMode&&this.careerToEditId?"put":"post",r=await At({method:i,url:s,data:e,headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});r?.status>=200&&r?.status<300&&(console.log(" Career saved:",r.data),alert(this.isEditMode?"Career updated successfully!":"Career posted successfully!"),this.isEditMode||this.upcomingCareers.push(r.data.data||r.data),this.closeCareerPopup(),this.resetNewCareer(),await this.fetchCareers())}catch(n){console.error(" ERROR SAVING CAREER:",n),n.response?(console.log(" Server response:",n.response.data),n.response.status===401?(alert("Unauthorized: Your token is invalid or expired. Please log in again."),localStorage.removeItem("token")):n.response.status===422?alert("Validation failed. Check your inputs."):n.response.status===409?alert("This career already exists!"):alert("Server error: "+(n.response.data.message||"Please try again."))):n.request?alert("No response from server. Check your network or server."):alert("Error: "+n.message)}},resetNewCareer(){this.newCareer={position:"",details:"",qualifications:"",requirements:"",letterAddress:"",deadline:"",Tags:[]}},formatdeadline(n){if(!n)return"No deadline set";try{return new Date(n).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return n}}},computed:{todayDate(){const n=new Date,t=n.getFullYear(),e=String(n.getMonth()+1).padStart(2,"0"),s=String(n.getDate()).padStart(2,"0");return`${t}-${e}-${s}`},visibleUpcomingCareers(){const n=this.sortedUpcomingCareers;return this.showAllUpcoming?n:n.slice(0,4)},visibleCompletedCareers(){const n=this.sortedCompletedCareers;return this.showAllCompleted?n:n.slice(0,4)},sortedUpcomingCareers(){const n=new Date;return(Array.isArray(this.upcomingCareers)?this.upcomingCareers:[]).filter(e=>e.deadlineOfSubmission?new Date(e.deadlineOfSubmission)>=n:!0).sort((e,s)=>new Date(e.deadlineOfSubmission)-new Date(s.deadlineOfSubmission))},sortedCompletedCareers(){const n=new Date;return(Array.isArray(this.upcomingCareers)?this.upcomingCareers:[]).filter(e=>e.deadlineOfSubmission?new Date(e.deadlineOfSubmission)<n:!1).sort((e,s)=>new Date(s.deadlineOfSubmission)-new Date(e.deadlineOfSubmission))},filteredUpcomingCareers(){const n=this.globalSearchQuery.toLowerCase();return this.sortedUpcomingCareers.filter(t=>t.position.toLowerCase().includes(n))},filteredUpcomingCareers(){const n=this.globalSearchQuery.toLowerCase();return n?this.sortedUpcomingCareers.filter(t=>t.position.toLowerCase().startsWith(n)):this.sortedUpcomingCareers},filteredCompletedCareers(){const n=this.globalSearchQuery.toLowerCase();return n?this.sortedCompletedCareers.filter(t=>(t.position||"").toLowerCase().startsWith(n)):this.sortedCompletedCareers},visibleFilteredUpcoming(){return this.showAllUpcoming?this.filteredUpcomingCareers:this.filteredUpcomingCareers.slice(0,4)},visibleFilteredCompleted(){return this.showAllCompleted?this.filteredCompletedCareers:this.filteredCompletedCareers.slice(0,4)},filteredTags(){if(!this.newTagName||this.newTagName.trim()==="")return this.tagOptions;const n=this.newTagName.toLowerCase().trim();return this.tagOptions.filter(t=>t.TagName.toLowerCase().includes(n))}},mounted(){this.fetchCareers(),this.fetchTags(),document.addEventListener("click",this.handleClickOutside)},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}},cnt=Object.assign(lnt,{__name:"OrganizationCareers",setup(n){const t=gi(),e=ut(!0),s=ut(""),i=()=>{e.value=!e.value};je(()=>{const a=localStorage.getItem("user");if(a){const l=JSON.parse(a);l.role==="organization"&&(s.value=l.displayName||l.name)}});const r=a=>{t.push(a)},o=()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),t.push({name:"Login"})};return(a,l)=>(j(),z("div",ktt,[p("button",{class:fe(["hamburger",{open:e.value,shifted:e.value}]),onClick:i},l[43]||(l[43]=[p("span",null,null,-1),p("span",null,null,-1),p("span",null,null,-1)]),2),Ce(dr,{name:"slide"},{default:hs(()=>[p("aside",{class:fe(["sidebar",{collapsed:!e.value}])},[l[50]||(l[50]=p("div",{class:"space"},null,-1)),p("div",Att,[p("img",{src:Qe(fo),alt:"DICT Logo",class:"avatar-img"},null,8,Stt)]),Ce(dr,{name:"fade"},{default:hs(()=>[e.value?(j(),z("div",Ett,[p("h3",Ttt,J(s.value),1),p("div",Ltt,[p("div",{class:"action",onClick:l[0]||(l[0]=c=>r({name:"OrgProfile"}))},l[44]||(l[44]=[p("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M11.7278 8.27191C12.7534 9.87525 14.1247 11.2375 15.7464 12.2534L8.85673 19.144C8.43166 19.569 8.21841 19.7816 7.95731 19.9213C7.69637 20.0609 7.40171 20.1199 6.81278 20.2377L3.73563 20.853C3.40302 20.9195 3.23649 20.9525 3.14188 20.8578C3.04759 20.7632 3.08035 20.5971 3.14677 20.2651L3.76298 17.1879C3.88087 16.5985 3.93965 16.3035 4.07938 16.0424C4.21912 15.7814 4.43173 15.569 4.85673 15.144L11.7278 8.27191ZM16.1116 4.03656C16.6711 3.75929 17.3284 3.75931 17.888 4.03656C18.1821 4.18229 18.455 4.45518 19.0003 5.00043C19.5453 5.54545 19.8184 5.81774 19.9641 6.11175C20.2414 6.67123 20.2413 7.32861 19.9641 7.88812C19.8184 8.18221 19.5455 8.45517 19.0003 9.00043L17.2034 10.7963C15.5308 9.84498 14.1456 8.46859 13.1819 6.81781L15.0003 5.00043C15.5453 4.45539 15.8176 4.18234 16.1116 4.03656Z",fill:"#FFFDFD"})],-1),p("span",null,"Update Profile",-1)]))])])):Ct("",!0)]),_:1}),p("div",{class:"icon",onClick:l[1]||(l[1]=c=>r("/organization"))},l[45]||(l[45]=[p("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M6.25 17.0585C6.25 16.0494 6.25 15.5448 6.47166 15.1141C6.69333 14.6833 7.1039 14.3901 7.92505 13.8035L13.8375 9.58034C14.3989 9.17938 14.6795 8.9789 15 8.9789C15.3205 8.9789 15.6011 9.17938 16.1625 9.58034L22.075 13.8035C22.8961 14.3901 23.3067 14.6833 23.5283 15.1141C23.75 15.5448 23.75 16.0494 23.75 17.0585V24.25C23.75 25.1928 23.75 25.6642 23.4571 25.9571C23.1642 26.25 22.6928 26.25 21.75 26.25H8.25C7.30719 26.25 6.83579 26.25 6.54289 25.9571C6.25 25.6642 6.25 25.1928 6.25 24.25V17.0585Z",fill:"white"}),p("path",{d:"M3.75 15.6366C3.75 15.9035 3.75 16.0369 3.8341 16.0781C3.91819 16.1192 4.02352 16.0373 4.23418 15.8734L13.7721 8.45502C14.362 7.99625 14.6569 7.76686 15 7.76686C15.3431 7.76686 15.638 7.99625 16.2279 8.45502L25.7658 15.8734C25.9765 16.0373 26.0818 16.1192 26.1659 16.0781C26.25 16.0369 26.25 15.9035 26.25 15.6366V14.7282C26.25 14.2478 26.25 14.0076 26.1483 13.7997C26.0466 13.5918 25.857 13.4444 25.4779 13.1495L16.2279 5.95502C15.638 5.49625 15.3431 5.26686 15 5.26686C14.6569 5.26686 14.362 5.49625 13.7721 5.95502L4.52212 13.1495C4.14295 13.4444 3.95337 13.5918 3.85168 13.7997C3.75 14.0076 3.75 14.2478 3.75 14.7282V15.6366Z",fill:"white"}),p("path",{d:"M16.125 18.75H13.875C12.7704 18.75 11.875 19.6454 11.875 20.75V26.1C11.875 26.1828 11.9422 26.25 12.025 26.25H17.975C18.0578 26.25 18.125 26.1828 18.125 26.1V20.75C18.125 19.6454 17.2296 18.75 16.125 18.75Z",fill:"white"}),p("rect",{x:"20",y:"6.25",width:"2.5",height:"5",rx:"0.5",fill:"white"})],-1),p("span",null,"Home",-1)])),p("div",{class:"icon",onClick:l[2]||(l[2]=c=>r({name:"OrgTrainings"}))},l[46]||(l[46]=[p("svg",{width:"29",height:"29",viewBox:"0 0 29 29",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M20.5837 3.625C23.4119 3.625 24.8261 3.62526 25.7048 4.50391C26.5833 5.3826 26.5837 6.79675 26.5837 9.625V19.375C26.5837 22.2033 26.5833 23.6174 25.7048 24.4961C24.8261 25.3747 23.4119 25.375 20.5837 25.375H8.41666C5.58824 25.375 4.17425 25.3748 3.29557 24.4961C2.41689 23.6174 2.41666 22.2034 2.41666 19.375V9.625C2.41666 6.79657 2.41689 5.38259 3.29557 4.50391C4.17425 3.62523 5.58824 3.625 8.41666 3.625H20.5837ZM9.66666 12.292C9.11438 12.292 8.66666 12.7397 8.66666 13.292V20.542L8.67155 20.6445C8.72303 21.1485 9.1491 21.542 9.66666 21.542C10.1842 21.542 10.6103 21.1485 10.6618 20.6445L10.6667 20.542V13.292C10.6667 12.7397 10.2189 12.292 9.66666 12.292ZM19.3337 9.875C18.7814 9.875 18.3337 10.3227 18.3337 10.875V20.542L18.3385 20.6436C18.3896 21.148 18.8158 21.542 19.3337 21.542C19.8514 21.5418 20.2778 21.1479 20.3288 20.6436L20.3337 20.542V10.875C20.3337 10.3228 19.8858 9.87518 19.3337 9.875ZM14.4997 14.708C13.9476 14.7082 13.4998 15.156 13.4997 15.708V20.541L13.5046 20.6436C13.5557 21.1477 13.982 21.5408 14.4997 21.541C15.0175 21.541 15.4436 21.1478 15.4948 20.6436L15.4997 20.541V15.708C15.4995 15.1559 15.0518 14.708 14.4997 14.708Z",fill:"white"})],-1),p("span",null,"Trainings",-1)])),p("div",{class:"icon",onClick:l[3]||(l[3]=c=>r({name:"OrgCareers"}))},l[47]||(l[47]=[p("svg",{width:"25",height:"25",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M22.8798 11.0484C23.4046 10.8642 23.9845 11.1431 24.1081 11.6855C24.4792 13.3134 24.4217 15.0018 23.9268 16.6191C23.4739 18.0989 22.6698 19.4685 21.5787 20.6449C21.2148 21.0372 20.6017 21.0197 20.2239 20.6408L14.9487 15.3495C14.4292 14.8284 14.6314 13.9436 15.3257 13.6999L22.8798 11.0484ZM13 4.0826C13 3.50231 13.4932 3.04057 14.0672 3.12592C15.8633 3.39302 17.5788 4.00579 19.085 4.93161C20.3794 5.72731 21.4793 6.72976 22.3343 7.87824C22.709 8.38157 22.4513 9.07932 21.8592 9.28718L14.3313 11.9301C13.6809 12.1584 13 11.6758 13 10.9865V4.0826Z",fill:"white"}),p("path",{d:"M11.9511 13.2908C11.9512 13.5763 12.0581 13.8518 12.25 14.0632L19.2677 21.7886C19.6714 22.233 19.5963 22.9337 19.0759 23.2331C18.245 23.7112 17.354 24.0924 16.4209 24.365C14.5402 24.9144 12.5476 25.0087 10.6201 24.6394C8.69236 24.2701 6.88846 23.4478 5.36911 22.2468C3.84993 21.0459 2.66126 19.5025 1.90915 17.7537C1.15711 16.0048 0.864996 14.1043 1.05759 12.2205C1.25024 10.3365 1.92171 8.52693 3.01364 6.95288C4.1056 5.37884 5.58398 4.08845 7.31735 3.19605C8.43484 2.62073 9.63633 2.22318 10.8757 2.01305C11.4515 1.91541 11.9511 2.37876 11.9511 2.96284V13.2908Z",fill:"white"})],-1),p("span",null,"Career",-1)])),p("div",{class:"icon",onClick:l[4]||(l[4]=c=>r({name:"OrgCalendar"}))},l[48]||(l[48]=[p("svg",{width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M2.16675 9.4165C2.16675 7.53089 2.16675 6.58808 2.75253 6.00229C3.33832 5.4165 4.28113 5.4165 6.16675 5.4165H19.8334C21.719 5.4165 22.6618 5.4165 23.2476 6.00229C23.8334 6.58808 23.8334 7.53089 23.8334 9.4165V9.83317C23.8334 10.3046 23.8334 10.5403 23.687 10.6867C23.5405 10.8332 23.3048 10.8332 22.8334 10.8332H3.16675C2.69534 10.8332 2.45964 10.8332 2.31319 10.6867C2.16675 10.5403 2.16675 10.3046 2.16675 9.83317V9.4165Z",fill:"white"}),p("path",{d:"M22.833 13C23.3042 13 23.5401 13.0002 23.6865 13.1465C23.833 13.2929 23.833 13.5286 23.833 14V19.833C23.833 21.7186 23.8329 22.6613 23.2471 23.2471C22.6613 23.8329 21.7186 23.833 19.833 23.833H6.16699C4.28137 23.833 3.33872 23.8329 2.75293 23.2471C2.16714 22.6613 2.16699 21.7186 2.16699 19.833V14C2.16699 13.5286 2.16703 13.2929 2.31348 13.1465C2.45994 13.0002 2.69576 13 3.16699 13H22.833ZM8.58301 19.5C8.11182 19.5 7.87591 19.5001 7.72949 19.6465C7.58321 19.7929 7.58301 20.0288 7.58301 20.5V20.667C7.58301 21.1382 7.58308 21.3741 7.72949 21.5205C7.87591 21.6669 8.11182 21.667 8.58301 21.667H10.917C11.3882 21.667 11.6241 21.6669 11.7705 21.5205C11.9169 21.3741 11.917 21.1382 11.917 20.667V20.5C11.917 20.0288 11.9168 19.7929 11.7705 19.6465C11.6241 19.5001 11.3882 19.5 10.917 19.5H8.58301ZM15.083 19.5C14.6118 19.5 14.3759 19.5001 14.2295 19.6465C14.0832 19.7929 14.083 20.0288 14.083 20.5V20.667C14.083 21.1382 14.0831 21.3741 14.2295 21.5205C14.3759 21.6669 14.6118 21.667 15.083 21.667H17.417C17.8882 21.667 18.1241 21.6669 18.2705 21.5205C18.4169 21.3741 18.417 21.1382 18.417 20.667V20.5C18.417 20.0288 18.4168 19.7929 18.2705 19.6465C18.1241 19.5001 17.8882 19.5 17.417 19.5H15.083ZM8.58301 15.167C8.11182 15.167 7.87591 15.1671 7.72949 15.3135C7.58337 15.4599 7.58301 15.6959 7.58301 16.167V16.333C7.58301 16.8041 7.58337 17.0401 7.72949 17.1865C7.87591 17.3329 8.11182 17.333 8.58301 17.333H10.917C11.3882 17.333 11.6241 17.3329 11.7705 17.1865C11.9166 17.0401 11.917 16.8041 11.917 16.333V16.167C11.917 15.6959 11.9166 15.4599 11.7705 15.3135C11.6241 15.1671 11.3882 15.167 10.917 15.167H8.58301ZM15.083 15.167C14.6118 15.167 14.3759 15.1671 14.2295 15.3135C14.0834 15.4599 14.083 15.6959 14.083 16.167V16.333C14.083 16.8041 14.0834 17.0401 14.2295 17.1865C14.3759 17.3329 14.6118 17.333 15.083 17.333H17.417C17.8882 17.333 18.1241 17.3329 18.2705 17.1865C18.4166 17.0401 18.417 16.8041 18.417 16.333V16.167C18.417 15.6959 18.4166 15.4599 18.2705 15.3135C18.1241 15.1671 17.8882 15.167 17.417 15.167H15.083Z",fill:"white"}),p("path",{d:"M7.58325 3.25L7.58325 6.5",stroke:"white","stroke-width":"2","stroke-linecap":"round"}),p("path",{d:"M18.4167 3.25L18.4167 6.5",stroke:"white","stroke-width":"2","stroke-linecap":"round"})],-1),p("span",null,"Calendar",-1)])),l[51]||(l[51]=p("div",{class:"spacer"},null,-1)),p("div",{class:"icon signout",onClick:o},l[49]||(l[49]=[p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[p("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),p("polyline",{points:"16 17 21 12 16 7"}),p("line",{x1:"21",y1:"12",x2:"9",y2:"12"})],-1),p("span",null,"Sign Out",-1)]))],2)]),_:1}),p("main",Ptt,[l[74]||(l[74]=p("header",{class:"topbar"},[p("div",{class:"Pathfinder-wrapper"},[p("span",{class:"logo-text"},"Pathfinder")])],-1)),p("section",Itt,[p("div",Dtt,[Ut(p("input",{type:"text","onUpdate:modelValue":l[5]||(l[5]=c=>a.globalSearchQuery=c),placeholder:" Search careers...",class:"global-search-bar text-black px-4 py-2 rounded-lg w-full sm:w-3/4 md:w-1/2 lg:w-1/3"},null,512),[[Wt,a.globalSearchQuery]])])]),p("section",Mtt,[p("div",Rtt,[p("h2",Ntt,[l[52]||(l[52]=Dt(" Open Careers ")),p("span",Ott,J(a.sortedUpcomingCareers.length),1)]),p("button",{class:"plus-btn-text",onClick:l[6]||(l[6]=c=>a.openCareerPopup())},"+")]),p("div",Ftt,[(j(!0),z(Kt,null,pe(a.visibleFilteredUpcoming,c=>(j(),z("div",{class:"career-card",key:c.careerID||c.id,onClick:u=>a.openCareerDetails(c)},[p("div",Btt,[p("h3",jtt,J(c.position),1),p("p",Utt," Deadline: "+J(a.formatdeadline(c.deadlineOfSubmission)),1)]),p("div",ztt,[p("div",{class:"menu-icon",onClick:me(u=>a.toggleUpcomingMenu(c.careerID||c.id),["stop"])},"  ",8,Htt),a.openUpcomingMenu===(c.careerID||c.id)?(j(),z("div",{key:0,class:"dropdown-menu",onClick:l[7]||(l[7]=me(()=>{},["stop"]))},[p("ul",null,[p("li",{onClick:u=>a.deleteCareer(c)},"Delete Career",8,Vtt),p("li",{onClick:u=>a.openCareerPopup(c)},"Update Career",8,qtt)])])):Ct("",!0)])],8,$tt))),128))]),a.sortedUpcomingCareers.length>4?(j(),z("button",{key:0,class:"show-more-btn",onClick:l[8]||(l[8]=c=>a.showAllUpcoming=!a.showAllUpcoming)},J(a.showAllUpcoming?"Show Less":"Show More"),1)):Ct("",!0)]),p("section",Wtt,[p("div",Gtt,[p("h2",Ytt,[l[53]||(l[53]=Dt(" Closed Careers ")),p("span",Ktt,J(a.sortedCompletedCareers.length),1)])]),p("div",Xtt,[(j(!0),z(Kt,null,pe(a.visibleFilteredCompleted,c=>(j(),z("div",{class:"career-card",key:c.careerID||c.id,onClick:u=>a.openCareerDetails(c)},[p("div",Jtt,[p("h3",Qtt,J(c.title||c.position),1),p("p",tet," Closed: "+J(a.formatdeadline(c.deadlineOfSubmission)),1)]),p("div",eet,[p("div",{class:"menu-icon",onClick:me(u=>a.toggleCompletedMenu(c.careerID||c.id),["stop"])},"  ",8,net),a.openCompletedMenu===(c.careerID||c.id)?(j(),z("div",{key:0,class:"dropdown-menu",onClick:l[9]||(l[9]=me(()=>{},["stop"]))},[p("ul",null,[p("li",{onClick:u=>a.deleteCareer(c)},"Delete Career",8,set)])])):Ct("",!0)])],8,Ztt))),128))]),a.sortedCompletedCareers.length>4?(j(),z("button",{key:0,class:"show-more-btn",onClick:l[10]||(l[10]=c=>a.showAllCompleted=!a.showAllCompleted)},J(a.showAllCompleted?"Show Less":"Show More"),1)):Ct("",!0)]),a.showApplicantsModal?(j(),z("div",{key:0,class:"modal-overlay",onClick:l[12]||(l[12]=me((...c)=>a.closeModal&&a.closeModal(...c),["self"]))},[p("div",iet,[p("button",{class:"modal-close-btn",onClick:l[11]||(l[11]=(...c)=>a.closeModal&&a.closeModal(...c))},""),p("h3",ret," Applicants for "+J(a.selectedCareer.title||a.selectedCareer.position),1),p("div",oet,[p("table",null,[l[55]||(l[55]=p("thead",null,[p("tr",null,[p("th",null,"FULL NAME"),p("th",null,"DATE SUBMITTED"),p("th",null,"APPLICATION STATUS"),p("th",null,"REQUIREMENTS"),p("th",null,"SCHEDULE INTERVIEW"),p("th",null,"VIEW SCHEDULE")])],-1)),p("tbody",null,[a.applicantsList.length===0?(j(),z("tr",aet,l[54]||(l[54]=[p("td",{colspan:"6",style:{"text-align":"center"}},[p("p",null,"No applicants found for this career.")],-1)]))):Ct("",!0),(j(!0),z(Kt,null,pe(a.applicantsList,c=>(j(),z("tr",{key:c.id},[p("td",null,[p("p",cet,J(c.name),1)]),p("td",null,[p("p",uet,J(c.dateSubmitted),1)]),p("td",null,[Ut(p("select",{"onUpdate:modelValue":u=>c.status=u,onChange:u=>a.updateApplicationStatus(c),class:"status-dropdown"},[p("option",het,J(Od("submitted")),1),p("option",fet,J(Od("in review")),1),p("option",pet,J(Od("for interview")),1),p("option",get,J(Od("accepted")),1),p("option",met,J(Od("rejected")),1)],40,det),[[eg,c.status]])]),p("td",bet,[c.requirement_directory||c.requirements?(j(),z("button",{key:0,class:"download-btn",onClick:u=>a.downloadRequirements(c.id,c.requirement_directory||c.requirements)}," Download Requirements ",8,vet)):(j(),z("span",yet,"No requirements"))]),p("td",null,[c.status==="for interview"&&!c.interviewSchedule?(j(),z("button",{key:0,class:"schedule-btn",onClick:u=>a.openScheduleModal(c)}," Schedule ",8,wet)):c.status==="for interview"&&c.interviewSchedule?(j(),z("button",_et," Scheduled ")):(j(),z("span",xet,"-"))]),p("td",null,[c.status==="for interview"&&c.interviewSchedule?(j(),z("button",{key:0,class:"schedule-btn view",onClick:u=>a.openViewScheduleModal(c)}," View Schedule ",8,Cet)):(j(),z("span",ket,"-"))])]))),128))])])])])])):Ct("",!0),a.showScheduleModal?(j(),z("div",{key:1,class:"modal-overlay",onClick:l[26]||(l[26]=me((...c)=>a.closeScheduleModal&&a.closeScheduleModal(...c),["self"]))},[p("div",Aet,[p("button",{class:"modal-close-btn",onClick:l[13]||(l[13]=(...c)=>a.closeScheduleModal&&a.closeScheduleModal(...c))},""),p("h3",null,"Schedule Interview for "+J(a.selectedPerson?.name),1),p("div",Eet,[l[61]||(l[61]=p("label",{for:"scheduleDate"},"Date & Time:",-1)),p("div",Tet,[Ut(p("input",{id:"scheduleDate",ref:"dateInput",type:"datetime-local","onUpdate:modelValue":l[14]||(l[14]=c=>a.scheduleData.date=c),onKeydown:l[15]||(l[15]=me(()=>{},["prevent"])),onKeypress:l[16]||(l[16]=me(()=>{},["prevent"])),onPaste:l[17]||(l[17]=me(()=>{},["prevent"])),onInput:l[18]||(l[18]=c=>c.target.value=c.target.value)},null,544),[[Wt,a.scheduleData.date]]),p("span",{class:"calendar-icon",onClick:l[19]||(l[19]=me((...c)=>a.openCalendar&&a.openCalendar(...c),["prevent"]))},l[56]||(l[56]=[si('<svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-28073bae><path d="M2.16669 9.41675C2.16669 7.53113 2.16669 6.58832 2.75247 6.00253C3.33826 5.41675 4.28107 5.41675 6.16669 5.41675H19.8334C21.719 5.41675 22.6618 5.41675 23.2476 6.00253C23.8334 6.58832 23.8334 7.53113 23.8334 9.41675V9.83342C23.8334 10.3048 23.8334 10.5405 23.6869 10.687C23.5405 10.8334 23.3048 10.8334 22.8334 10.8334H3.16669C2.69528 10.8334 2.45958 10.8334 2.31313 10.687C2.16669 10.5405 2.16669 10.3048 2.16669 9.83341V9.41675Z" fill="black" data-v-28073bae></path><path d="M22.833 13C23.3042 13 23.5401 13.0002 23.6865 13.1465C23.833 13.2929 23.833 13.5286 23.833 14V19.833C23.833 21.7186 23.8329 22.6613 23.2471 23.2471C22.6613 23.8329 21.7186 23.833 19.833 23.833H6.16699C4.28137 23.833 3.33872 23.8329 2.75293 23.2471C2.16714 22.6613 2.16699 21.7186 2.16699 19.833V14C2.16699 13.5286 2.16703 13.2929 2.31348 13.1465C2.45994 13.0002 2.69576 13 3.16699 13H22.833Z" fill="black" data-v-28073bae></path><path d="M7.58331 3.25L7.58331 6.5" stroke="black" stroke-width="2" stroke-linecap="round" data-v-28073bae></path><path d="M18.4167 3.25L18.4167 6.5" stroke="black" stroke-width="2" stroke-linecap="round" data-v-28073bae></path></svg>',1)]))]),p("div",Let,[p("label",null,[Ut(p("input",{type:"radio",value:"onSite","onUpdate:modelValue":l[20]||(l[20]=c=>a.scheduleData.mode=c)},null,512),[[_h,a.scheduleData.mode]]),l[57]||(l[57]=Dt(" On-Site"))]),p("label",null,[Ut(p("input",{type:"radio",value:"online","onUpdate:modelValue":l[21]||(l[21]=c=>a.scheduleData.mode=c)},null,512),[[_h,a.scheduleData.mode]]),l[58]||(l[58]=Dt(" Online"))])]),a.scheduleData.mode==="onSite"?(j(),z("div",Pet,[l[59]||(l[59]=p("label",null,"Location:",-1)),Ut(p("input",{type:"text","onUpdate:modelValue":l[22]||(l[22]=c=>a.scheduleData.detail=c),placeholder:"Enter interview location"},null,512),[[Wt,a.scheduleData.detail]])])):a.scheduleData.mode==="online"?(j(),z("div",Iet,[l[60]||(l[60]=p("label",null,"Interview Link:",-1)),Ut(p("input",{type:"text","onUpdate:modelValue":l[23]||(l[23]=c=>a.scheduleData.detail=c),placeholder:"https://meet.google.com/..."},null,512),[[Wt,a.scheduleData.detail]])])):Ct("",!0),p("div",Det,[p("button",{class:"confirm-btn",onClick:l[24]||(l[24]=(...c)=>a.confirmSchedule&&a.confirmSchedule(...c))}," Confirm "),p("button",{class:"cancel-btn",onClick:l[25]||(l[25]=(...c)=>a.closeScheduleModal&&a.closeScheduleModal(...c))}," Cancel ")])])])])):Ct("",!0),a.showViewScheduleModal?(j(),z("div",{key:2,class:"modal-overlay",onClick:l[29]||(l[29]=me((...c)=>a.closeViewScheduleModal&&a.closeViewScheduleModal(...c),["self"]))},[p("div",Met,[p("button",{class:"modal-close-btn",onClick:l[27]||(l[27]=(...c)=>a.closeViewScheduleModal&&a.closeViewScheduleModal(...c))},"  "),p("h3",null,"Interview Schedule for "+J(a.selectedPerson?.name),1),a.selectedPerson?(j(),z("div",Ret,[a.selectedPerson.interviewSchedule?(j(),z("p",Net,[l[62]||(l[62]=p("strong",null,"Date & Time:",-1)),Dt(" "+J(a.formatInterviewDateTime(a.selectedPerson.interviewSchedule)),1)])):Ct("",!0),a.selectedPerson.interviewMode?(j(),z("p",Oet,[l[63]||(l[63]=p("strong",null,"Mode:",-1)),Dt(" "+J(a.selectedPerson.interviewMode),1)])):Ct("",!0),a.selectedPerson.interviewMode==="On-Site"&&a.selectedPerson.interviewLocation?(j(),z("p",Fet,[l[64]||(l[64]=p("strong",null,"Location:",-1)),Dt(" "+J(a.selectedPerson.interviewLocation),1)])):a.selectedPerson.interviewMode==="Online"&&a.selectedPerson.interviewLink?(j(),z("p",$et,[l[65]||(l[65]=p("strong",null,"Interview Link:",-1)),p("a",{href:a.selectedPerson.interviewLink,target:"_blank",rel:"noopener noreferrer"},J(a.selectedPerson.interviewLink),9,Bet)])):Ct("",!0)])):Ct("",!0),p("div",jet,[p("button",{class:"cancel-btn",onClick:l[28]||(l[28]=(...c)=>a.closeViewScheduleModal&&a.closeViewScheduleModal(...c))}," Close ")])])])):Ct("",!0),a.showCareerPopup?(j(),z("div",Uet,[p("div",zet,[p("button",{onClick:l[30]||(l[30]=(...c)=>a.closeCareerPopup&&a.closeCareerPopup(...c)),class:"career-popup-close"},"  "),p("h2",Het,J(a.isEditMode?"Update Career":"Post Career"),1),p("form",{onSubmit:l[39]||(l[39]=me((...c)=>a.saveCareer&&a.saveCareer(...c),["prevent"])),class:"Career-popup-form"},[Ut(p("input",{"onUpdate:modelValue":l[31]||(l[31]=c=>a.newCareer.position=c),type:"text",placeholder:"Position",class:"career-input"},null,512),[[Wt,a.newCareer.position]]),Ut(p("input",{"onUpdate:modelValue":l[32]||(l[32]=c=>a.newCareer.details=c),type:"text",placeholder:"Details and Instruction",class:"career-input"},null,512),[[Wt,a.newCareer.details]]),Ut(p("textarea",{"onUpdate:modelValue":l[33]||(l[33]=c=>a.newCareer.qualifications=c),placeholder:"Qualifications",class:"career-input"},null,512),[[Wt,a.newCareer.qualifications]]),Ut(p("textarea",{"onUpdate:modelValue":l[34]||(l[34]=c=>a.newCareer.requirements=c),placeholder:"Requirements",class:"career-input"},null,512),[[Wt,a.newCareer.requirements]]),Ut(p("input",{"onUpdate:modelValue":l[35]||(l[35]=c=>a.newCareer.letterAddress=c),type:"text",placeholder:"Application Letter Address",class:"career-input"},null,512),[[Wt,a.newCareer.letterAddress]]),p("div",Vet,[Ut(p("input",{type:"date","onUpdate:modelValue":l[36]||(l[36]=c=>a.newCareer.deadline=c),min:a.todayDate,placeholder:"Deadline of Submission",class:"career-input"},null,8,qet),[[Wt,a.newCareer.deadline]]),l[66]||(l[66]=p("span",{class:"calendar-icon"},null,-1))]),p("div",Wet,[l[67]||(l[67]=p("label",{class:"block font-semibold text-gray-600 mb-2"},"Tags",-1)),Ut(p("input",{"onUpdate:modelValue":l[37]||(l[37]=c=>a.newTagName=c),type:"text",placeholder:"Search or type a new tag...",class:"career-input mb-2"},null,512),[[Wt,a.newTagName]]),p("div",Get,[p("div",Yet,[(j(!0),z(Kt,null,pe(a.filteredTags,c=>(j(),z("span",{key:c.TagID,class:fe(["tag-chip",{"tag-chip-selected":a.isTagSelected(c.TagID)}]),onClick:u=>a.toggleTag(c.TagID)},J(c.TagName),11,Ket))),128))])]),a.newCareer.Tags.length?(j(),z("div",Xet,[(j(!0),z(Kt,null,pe(a.newCareer.Tags,c=>(j(),z("span",{key:c,class:"bg-blue-100 text-blue-700 text-sm px-3 py-1 rounded-full"},[Dt(J(a.getTagName(c))+" ",1),p("button",{onClick:me(u=>a.removeTag(c),["stop"]),class:"ml-1 text-red-500"},"  ",8,Zet)]))),128))])):Ct("",!0),p("button",{onClick:l[38]||(l[38]=me((...c)=>a.addTag&&a.addTag(...c),["prevent"])),class:"career-save-btn mt-2"}," Add Tag ")]),p("button",Jet,J(a.isEditMode?"Update":"Post"),1)],32)])])):Ct("",!0),a.showCareerDetailsModal?(j(),z("div",{key:4,class:"modal-overlay",onClick:l[42]||(l[42]=me((...c)=>a.closeCareerDetails&&a.closeCareerDetails(...c),["self"]))},[p("div",Qet,[p("button",{class:"modal-close-btn",onClick:l[40]||(l[40]=(...c)=>a.closeCareerDetails&&a.closeCareerDetails(...c))},""),p("h3",tnt,J(a.selectedCareer.title),1),p("p",ent,[l[68]||(l[68]=p("strong",null,"Position:",-1)),Dt(" "+J(a.selectedCareer.position),1)]),p("p",nnt,[l[69]||(l[69]=p("strong",null,"Details:",-1)),Dt(" "+J(a.selectedCareer.detailsAndInstructions),1)]),p("p",snt,[l[70]||(l[70]=p("strong",null,"Qualifications:",-1)),Dt(" "+J(a.selectedCareer.qualifications),1)]),p("p",int,[l[71]||(l[71]=p("strong",null,"Requirements:",-1)),Dt(" "+J(a.selectedCareer.requirements),1)]),p("p",rnt,[l[72]||(l[72]=p("strong",null,"Letter Address:",-1)),Dt(" "+J(a.selectedCareer.applicationLetterAddress),1)]),p("p",ont,[l[73]||(l[73]=p("strong",null,"Deadline:",-1)),Dt(" "+J(a.formatdeadline(a.selectedCareer.deadlineOfSubmission)),1)]),p("div",ant,[p("button",{class:"btn-view-applicants",onClick:l[41]||(l[41]=c=>a.handleViewApplicants(a.selectedCareer))}," View Applicants ")])])])):Ct("",!0)])]))}}),unt=gr(cnt,[["__scopeId","data-v-28073bae"]]),dnt=C5("auth",{state:()=>({isLoggedIn:!!localStorage.getItem("token"),user:null}),actions:{async login(n){localStorage.setItem("token",n),At.defaults.headers.common.Authorization=`Bearer ${n}`,this.isLoggedIn=!0,await this.fetchUser()},logout(){localStorage.removeItem("token"),delete At.defaults.headers.common.Authorization,this.user=null,this.isLoggedIn=!1},async fetchUser(){try{const n=await At.get("/api/user",{withCredentials:!0});this.user=n.data}catch{this.logout()}},async initialize(){const n=localStorage.getItem("token");n&&(At.defaults.headers.common.Authorization=`Bearer ${n}`,await this.fetchUser())}}}),hnt={class:"flex relative font-poppins"},fnt={class:"flex items-center"},pnt={class:"flex flex-col flex-1 overflow-y-auto"},gnt={class:"flex flex-col p-2 gap-2 flex-1"},mnt={class:"flex flex-col items-center justify-center gap-2 mb-6 pt-4 mx-auto"},bnt={class:"avatar"},vnt={key:0,class:"text-xl font-bold text-white transition-opacity duration-300"},ynt={key:0},wnt={key:0},_nt={key:0},xnt={key:0},Cnt={key:0},knt={class:"flex flex-col p-2 mt-auto gap-2"},Ant={key:0},Snt={key:0},Ent={__name:"SideBar",setup(n){Yh();const t=gi(),e=ut("");dnt();const s=()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),t.push({name:"Login"})},i=ut(!1),r=ut(null),o=()=>{i.value=!i.value},a=l=>{i.value&&r.value&&!r.value.contains(l.target)&&(i.value=!1)};return je(()=>{const l=()=>{r.value.style.height=`${window.innerHeight}px`};window.addEventListener("resize",l),l(),oc(()=>window.removeEventListener("resize",l))}),je(()=>{document.addEventListener("click",a);const l=localStorage.getItem("user");if(l){const c=JSON.parse(l);c.firstName&&c.lastName?e.value=`${c.firstName} ${c.lastName}`:e.value="Guest"}else e.value="Guest"}),je(()=>{document.addEventListener("click",a)}),oc(()=>{document.removeEventListener("click",a)}),(l,c)=>(j(),z("div",hnt,[p("div",{ref_key:"sidebar",ref:r,class:fe(["fixed h-screen top-0 left-0 overflow-y-auto bg-dark-slate text-white transition-all duration-300 flex flex-col z-50",i.value?"w-72 px-4":"w-16 items-center"])},[p("div",fnt,[p("button",{class:"p-2 mt-4 mb-2 hover:bg-slate-700 rounded-lg",onClick:me(o,["stop"])},c[7]||(c[7]=[p("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))]),p("aside",pnt,[p("ul",gnt,[p("li",null,[p("button",{onClick:c[0]||(c[0]=u=>l.$router.push({name:"Profile"})),class:"w-full"},[p("div",mnt,[p("div",bnt,[p("div",{class:fe([i.value?"w-16":"w-10","rounded-full","transition-all","duration-300"])},c[8]||(c[8]=[p("img",{src:"https://img.daisyui.com/images/profile/demo/yellingcat@192.webp",alt:"User Avatar"},null,-1)]),2)]),i.value?(j(),z("span",vnt,J(e.value),1)):Ct("",!0)])])]),p("li",null,[p("button",{class:"text-white mt-3 gap-3 p-3 py-2 hover:bg-slate-700 rounded-lg w-full flex items-center justify-start",onClick:c[1]||(c[1]=u=>l.$router.push({name:"Trainingpage"}))},[c[9]||(c[9]=p("svg",{class:"size-6 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.05442 1.17157C0 2.34315 0 4.22876 0 8V16C0 19.7712 0 21.6569 1.05442 22.8284C2.10883 24 3.80589 24 7.2 24H16.8C20.1941 24 21.8912 24 22.9456 22.8284C24 21.6569 24 19.7712 24 16V8C24 4.22876 24 2.34315 22.9456 1.17157C21.8912 0 20.1941 0 16.8 0H7.2C3.80589 0 2.10883 0 1.05442 1.17157ZM16.8 6.66667C17.4627 6.66667 18 7.26362 18 8V18.6667C18 19.403 17.4627 20 16.8 20C16.1373 20 15.6 19.403 15.6 18.6667V8C15.6 7.26362 16.1373 6.66667 16.8 6.66667ZM8.4 10.6667C8.4 9.93029 7.86274 9.33333 7.2 9.33333C6.53726 9.33333 6 9.93029 6 10.6667L6 18.6667C6 19.403 6.53726 20 7.2 20C7.86274 20 8.4 19.403 8.4 18.6667L8.4 10.6667ZM13.2 13.3333C13.2 12.597 12.6627 12 12 12C11.3373 12 10.8 12.597 10.8 13.3333V18.6667C10.8 19.403 11.3373 20 12 20C12.6627 20 13.2 19.403 13.2 18.6667V13.3333Z",fill:"white"})],-1)),i.value?(j(),z("span",ynt,"Training")):Ct("",!0)])]),p("li",null,[p("button",{class:"text-white gap-3 p-3 py-2 hover:bg-slate-700 rounded-lg w-full flex items-center justify-start",onClick:c[2]||(c[2]=u=>l.$router.push({name:"Careerpage"}))},[c[10]||(c[10]=si('<svg class="size-6 flex-shrink-0" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20.1456 19.0508C20.4307 19.3614 20.9281 19.3788 21.2121 19.0672C22.3383 17.8319 23.1617 16.3635 23.611 14.7685C24.1117 12.991 24.1277 11.1277 23.6669 9.35319C23.5618 8.94823 23.1083 8.74338 22.7073 8.89627L14.9063 11.8712C14.4209 12.0562 14.2739 12.6531 14.6205 13.0308L20.1456 19.0508Z" fill="white"></path><path d="M22.4984 6.57385C22.7184 6.94044 22.5324 7.4006 22.1252 7.55588L14.4062 10.4995C13.9141 10.6872 13.3816 10.3356 13.3816 9.82305V1.91852C13.3816 1.49848 13.7483 1.16366 14.1778 1.21988C15.9607 1.45324 17.6679 2.08798 19.154 3.08041C20.5314 4.0003 21.6708 5.19538 22.4984 6.57385Z" fill="white"></path><path d="M11.8816 0.706916C11.8816 0.288745 11.518 -0.0452101 11.0897 0.00501095C9.54973 0.185579 8.05327 0.635662 6.67712 1.33692C4.84512 2.27048 3.28289 3.62037 2.12882 5.26701C0.974739 6.91366 0.264437 8.80624 0.0608279 10.7771C-0.142781 12.748 0.166586 14.7363 0.961528 16.566C1.75647 18.3956 3.01245 20.0101 4.61821 21.2665C6.22397 22.5228 8.12995 23.3823 10.1673 23.7686C12.2047 24.155 14.3106 24.0563 16.2984 23.4815C17.5139 23.1299 18.6624 22.607 19.7071 21.9335C20.0707 21.6991 20.1185 21.2086 19.8283 20.8924L12.0997 12.4716C11.9592 12.3185 11.8816 12.1208 11.8816 11.916V0.706916Z" fill="white"></path><path d="M21.0922 20.082C21.1317 20.1251 21.171 20.0986 21.1286 20.0582L20.6621 19.6135L21.0922 20.082Z" fill="white"></path></svg>',1)),i.value?(j(),z("span",wnt,"Career")):Ct("",!0)])]),p("li",null,[p("button",{class:"text-white gap-3 p-3 py-2 hover:bg-slate-700 rounded-lg w-full flex items-center justify-start",onClick:c[3]||(c[3]=u=>l.$router.push({name:"ResumeEditorpage"}))},[c[11]||(c[11]=p("svg",{class:"size-6 flex-shrink-0",viewBox:"0 0 34 34",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M19.8333 3.21521V9.06681C19.8333 9.86022 19.8333 10.2569 19.9877 10.56C20.1235 10.8265 20.3402 11.0432 20.6068 11.1791C20.9098 11.3335 21.3066 11.3335 22.1 11.3335H27.9516M22.6666 18.4167H11.3333M22.6666 24.0834H11.3333M14.1666 12.75H11.3333M19.8333 2.83337H12.4666C10.0864 2.83337 8.89629 2.83337 7.98717 3.2966C7.18748 3.70406 6.53731 4.35423 6.12985 5.15391C5.66663 6.06304 5.66663 7.25315 5.66663 9.63337V24.3667C5.66663 26.7469 5.66663 27.937 6.12985 28.8462C6.53731 29.6459 7.18748 30.296 7.98717 30.7035C8.89629 31.1667 10.0864 31.1667 12.4666 31.1667H21.5333C23.9135 31.1667 25.1036 31.1667 26.0128 30.7035C26.8124 30.296 27.4626 29.6459 27.8701 28.8462C28.3333 27.937 28.3333 26.7469 28.3333 24.3667V11.3334L19.8333 2.83337Z",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),i.value?(j(),z("span",_nt,"Resume")):Ct("",!0)])]),p("li",null,[p("button",{class:"text-white gap-3 p-3 py-2 hover:bg-slate-700 rounded-lg w-full flex items-center justify-start",onClick:c[4]||(c[4]=u=>l.$router.push({name:"Certificatespage"}))},[c[12]||(c[12]=p("svg",{class:"size-6 flex-shrink-0",viewBox:"0 0 35 35",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M9.47917 29.1666H7.29167C5.68084 29.1666 4.375 27.8608 4.375 26.25V5.83329C4.375 4.22246 5.68084 2.91663 7.29167 2.91663H27.7083C29.3192 2.91663 30.625 4.22246 30.625 5.83329V26.25C30.625 27.8608 29.3192 29.1666 27.7083 29.1666H25.5208M17.5 27.7083C19.9162 27.7083 21.875 25.7495 21.875 23.3333C21.875 20.917 19.9162 18.9583 17.5 18.9583C15.0838 18.9583 13.125 20.917 13.125 23.3333C13.125 25.7495 15.0838 27.7083 17.5 27.7083ZM17.5 27.7083L17.5313 27.708L12.8751 32.3641L8.75036 28.2393L13.1537 23.836M17.5 27.7083L22.1562 32.3641L26.281 28.2393L21.8777 23.836M13.125 8.74996H21.875M10.2083 13.8541H24.7917",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),i.value?(j(),z("span",xnt,"Certificates")):Ct("",!0)])]),p("li",null,[p("button",{class:"text-white gap-3 p-3 py-2 hover:bg-slate-700 rounded-lg w-full flex items-center justify-start",onClick:c[5]||(c[5]=u=>l.$router.push({name:"Bookmarkpage"}))},[c[13]||(c[13]=p("svg",{class:"size-6 flex-shrink-0",viewBox:"0 0 18 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M3 3V24L10.5 16.5L18 24V3H3ZM15 0H0V21L1.5 19.5V1.5H15V0Z",fill:"white"})],-1)),i.value?(j(),z("span",Cnt,"Bookmark")):Ct("",!0)])])]),p("div",knt,[p("ul",null,[p("li",null,[p("button",{class:"text-white gap-3 p-3 py-2 hover:bg-slate-700 rounded-lg w-full flex items-center justify-start",onClick:c[6]||(c[6]=u=>l.$router.push({name:"UpdateDeletepage"}))},[c[14]||(c[14]=p("svg",{class:"size-6 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M20.1 9.21994C18.29 9.21994 17.55 7.93994 18.45 6.36994C18.97 5.45994 18.66 4.29994 17.75 3.77994L16.02 2.78994C15.23 2.31994 14.21 2.59994 13.74 3.38994L13.63 3.57994C12.73 5.14994 11.25 5.14994 10.34 3.57994L10.23 3.38994C9.78 2.59994 8.76 2.31994 7.97 2.78994L6.24 3.77994C5.33 4.29994 5.02 5.46994 5.54 6.37994C6.45 7.93994 5.71 9.21994 3.9 9.21994C2.86 9.21994 2 10.0699 2 11.1199V12.8799C2 13.9199 2.85 14.7799 3.9 14.7799C5.71 14.7799 6.45 16.0599 5.54 17.6299C5.02 18.5399 5.33 19.6999 6.24 20.2199L7.97 21.2099C8.76 21.6799 9.78 21.3999 10.25 20.6099L10.36 20.4199C11.26 18.8499 12.74 18.8499 13.65 20.4199L13.76 20.6099C14.23 21.3999 15.25 21.6799 16.04 21.2099L17.77 20.2199C18.68 19.6999 18.99 18.5299 18.47 17.6299C17.56 16.0599 18.3 14.7799 20.11 14.7799C21.15 14.7799 22.01 13.9299 22.01 12.8799V11.1199C22 10.0799 21.15 9.21994 20.1 9.21994ZM12 15.2499C10.21 15.2499 8.75 13.7899 8.75 11.9999C8.75 10.2099 10.21 8.74994 12 8.74994C13.79 8.74994 15.25 10.2099 15.25 11.9999C15.25 13.7899 13.79 15.2499 12 15.2499Z",fill:"white"})],-1)),i.value?(j(),z("span",Ant,"Account Setting")):Ct("",!0)])]),p("li",null,[p("button",{class:"text-white gap-3 p-3 py-2 hover:bg-slate-700 rounded-lg w-full flex items-center justify-start",onClick:s},[c[15]||(c[15]=p("svg",{class:"size-6 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M15.24 22.27H15.11C10.67 22.27 8.53002 20.52 8.16002 16.6C8.12002 16.19 8.42002 15.82 8.84002 15.78C9.24002 15.74 9.62002 16.05 9.66002 16.46C9.95002 19.6 11.43 20.77 15.12 20.77H15.25C19.32 20.77 20.76 19.33 20.76 15.26V8.73998C20.76 4.66998 19.32 3.22998 15.25 3.22998H15.12C11.41 3.22998 9.93002 4.41998 9.66002 7.61998C9.61002 8.02998 9.26002 8.33998 8.84002 8.29998C8.42002 8.26998 8.12001 7.89998 8.15001 7.48998C8.49001 3.50998 10.64 1.72998 15.11 1.72998H15.24C20.15 1.72998 22.25 3.82998 22.25 8.73998V15.26C22.25 20.17 20.15 22.27 15.24 22.27Z",fill:"white"}),p("path",{d:"M15.0001 12.75H3.62012C3.21012 12.75 2.87012 12.41 2.87012 12C2.87012 11.59 3.21012 11.25 3.62012 11.25H15.0001C15.4101 11.25 15.7501 11.59 15.7501 12C15.7501 12.41 15.4101 12.75 15.0001 12.75Z",fill:"white"}),p("path",{d:"M5.84994 16.1C5.65994 16.1 5.46994 16.03 5.31994 15.88L1.96994 12.53C1.67994 12.24 1.67994 11.76 1.96994 11.47L5.31994 8.12003C5.60994 7.83003 6.08994 7.83003 6.37994 8.12003C6.66994 8.41003 6.66994 8.89003 6.37994 9.18003L3.55994 12L6.37994 14.82C6.66994 15.11 6.66994 15.59 6.37994 15.88C6.23994 16.03 6.03994 16.1 5.84994 16.1Z",fill:"white"})],-1)),i.value?(j(),z("span",Snt,"Logout")):Ct("",!0)])])])])])],2)]))}},Tnt={class:"flex-grow flex items-center justify-between p-4"},Lnt={class:"flex items-center justify-between p-4 w-full"},Pnt={key:0,class:"flex items-center justify-center gap-8 flex-grow font-poppins pt-4 pb-3"},Int={key:1,class:"absolute top-2 right-6"},Dnt={key:2,class:"flex justify-end w-full"},Mnt={key:0,class:"absolute top-full left-0 mt-2 w-full bg-white border border-gray-200 rounded-lg shadow-md z-50 p-3 flex flex-col gap-3"},Rnt={class:"flex flex-wrap gap-2 justify-start"},Nnt=["onMousedown"],Ont={key:0,class:"flex flex-wrap gap-2 justify-start"},Fnt=["onMousedown"],$nt={key:1,class:"mt-2 max-h-60 overflow-y-auto"},Bnt=["onClick"],jnt={class:"font-semibold text-gray-800"},Unt={class:"text-sm text-gray-500"},znt={key:2,class:"text-center text-gray-500 text-sm mt-2"},Hnt={key:0,open:"",class:"modal sm:modal-middle"},Vnt={class:"modal-box max-w-3xl relative font-poppins"},qnt={class:"text-xl font-bold mb-2"},Wnt={class:"text-sm text-gray-600 mb-2"},Gnt={class:"my-4 flex justify-end gap-2"},Ynt=["disabled"],Knt={key:0,class:"flex items-center justify-center"},Xnt={key:1},Znt={class:"flex justify-center my-4"},Jnt=["src"],Qnt={key:1,class:"text-center text-gray-500 text-sm"},tst={key:1,open:"",class:"modal sm:modal-middle"},est={class:"modal-box max-w-3xl relative font-poppins"},nst={class:"text-xl font-bold mb-2"},sst={class:"text-sm text-gray-600 mb-2"},ist={class:"my-4 flex justify-end gap-2"},rst=["disabled"],ost={key:0,class:"animate-spin h-4 w-4 border-2 border-gray-400 rounded-full border-t-transparent"},ast={key:1},lst={key:2,open:"",class:"modal sm:modal-middle"},cst={class:"modal-box max-w-lg relative font-poppins"},ust={class:"text-xl font-bold mb-4"},dst={class:"mb-4"},hst={class:"fixed top-4 right-4 space-y-2 z-50"},fst={key:3,open:"",class:"modal sm:modal-middle"},pst={class:"modal-box max-w-2xl relative font-poppins"},gst={class:"flex items-center gap-3 mb-3"},mst=["src"],bst={class:"text-xl font-bold"},vst={class:"text-sm text-gray-600"},yst={key:0,class:"text-sm mb-5"},wst=["href"],_st={key:1,class:"mt-4"},xst={class:"flex overflow-x-auto space-x-3 pb-2 snap-x snap-mandatory",style:{"scrollbar-width":"thin"}},Cst=["onClick"],kst={class:"font-semibold text-sm leading-snug mb-1"},Ast={class:"text-[11px] text-gray-600 truncate"},Sst={key:2,class:"mt-6"},Est={class:"flex overflow-x-auto space-x-3 pb-2 snap-x snap-mandatory",style:{"scrollbar-width":"thin"}},Tst=["onClick"],Lst={class:"font-semibold text-sm leading-snug mb-1"},Pst={class:"text-[11px] text-gray-600 truncate"},Ist={__name:"TopBar",setup(n){const t=ut(null),e=Yh(),s=ut([]),i=V5(),r=ut(!1),o=ws({});async function a(E){if(!r.value){r.value=!0;try{await i.toggleRegister(E)}finally{r.value=!1}}}async function l(E){const M=E.TrainingID??E.trainingID??E.CareerID??E.ID??E.id;if(!M)return;(await i.toggleBookmark(M)).error?d("Failed to toggle bookmark.","error"):d(i.isTrainingBookmarked(M)?"Bookmarked successfully!":"Bookmark removed!","success")}async function c(E){const M=await i.toggleBookmark(E);M.success?d(M.bookmarked?"Bookmarked successfully!":"Bookmark removed!","success"):d(M.error||"Failed to toggle bookmark","error")}function u(E){const M=E.TrainingID??E.trainingID??E.CareerID??E.ID??E.id;return i.isTrainingBookmarked(M)}function d(E,M="info"){s.value.push({message:E,type:M}),setTimeout(()=>{s.value.shift()},3e3)}je(()=>{i.fetchMyRegistrations(),i.fetchBookmarks()});const f=ut(!1),h=ut([]),g=ut([]),m=ut(null),b=["Training","Career","Organization"],y=ut(""),x=ut([]),_=ut(!1);ut(!1);const C=ut({}),A=ut({});ut({}),ut([]);function I(E){h.value.includes(E)?(h.value=h.value.filter(M=>M!==E),(E==="Training"||E==="Career")&&(g.value=[])):((E==="Training"||E==="Career")&&(h.value=h.value.filter(M=>M!==(E==="Training"?"Career":"Training"))),h.value.push(E))}function R(E){g.value.includes(E)?g.value=[]:(["Online","On-site"].includes(E)&&(g.value=g.value.filter(M=>!["Online","On-site"].includes(M))),g.value=[E])}function L(E){m.value&&!m.value.contains(E.target)&&(f.value=!1)}je(()=>document.addEventListener("click",L)),oc(()=>document.removeEventListener("click",L));async function P(){if(!y.value.trim()){x.value=[];return}try{const E=await At.get("https://pathfinder-development-production.up.railway.app/api/search",{params:{search:y.value,filterType:h.value[0]?.toLowerCase()||"",subFilter:g.value[0]||""}});x.value=E.data.results||[]}catch(E){console.error("Search failed:",E),x.value=[]}}lo([y,h,g],P);function V(E){return E.Type?.toLowerCase().includes("training")}const T=ut(!1),D=ut(!1),K=ut(!1),$=ut({}),q=ut({});function W(){$.value={},T.value=!1}function F(){$.value={},D.value=!1}function O(E){$.value=E,_.value=!0}function et(){_.value=!1}function gt(){K.value=!1,q.value={}}async function lt(E){if(console.log(" Item clicked:",E),console.log(" Detected Type:",E.Type),E.Type==="Training"||E.Type.includes("Training"))$.value=E,T.value=!0;else if(E.Type==="Career"||E.Type.includes("Career"))$.value=E,D.value=!0;else if(E.Type==="Organization"){q.value={...E,careers:[],trainings:[]},K.value=!0;try{const B=(await At.get(`/api/search?search=${encodeURIComponent(E.Title)}&filterType=organization`)).data.results||[];q.value.careers=B.filter(at=>at.Type.includes("Career")),q.value.trainings=B.filter(at=>at.Type.includes("Training"))}catch(M){console.error("Error fetching organization posts:",M)}}}return(E,M)=>(j(),z("div",Tnt,[p("div",Lnt,[p("button",{class:"text-xl font-bold font-poppins text-darkslategray whitespace-nowrap",onClick:M[0]||(M[0]=B=>E.$router.push({name:"Homepage"}))}," Pathfinder "),Qe(e).path==="/admin"||Qe(e).path==="/admin/adminhomepage"||Qe(e).name==="AdminUpdateDelete"?(j(),z("div",Pnt,[p("button",{onClick:M[1]||(M[1]=B=>E.$router.push({name:"AdminHomePage"})),class:fe(["flex flex-col items-center justify-center transition-all duration-200",Qe(e).name==="AdminHomePage"?"text-dark-slate border-b-4 border-dark-slate":"text-gray-400 hover:text-customButton border-b-4 border-transparent hover:customButton"]),title:"Account Verification"},M[15]||(M[15]=[si('<svg class="w-8 h-8 mb-1" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" data-v-ea2193f2><rect width="24" height="24" fill="white" data-v-ea2193f2></rect><path d="M17.1 2H12.9C9.81693 2 8.37099 3.09409 8.06975 5.73901C8.00673 6.29235 8.465 6.75 9.02191 6.75H11.1C15.3 6.75 17.25 8.7 17.25 12.9V14.9781C17.25 15.535 17.7077 15.9933 18.261 15.9303C20.9059 15.629 22 14.1831 22 11.1V6.9C22 3.4 20.6 2 17.1 2Z" data-v-ea2193f2></path><path d="M11.1 8H6.9C3.4 8 2 9.4 2 12.9V17.1C2 20.6 3.4 22 6.9 22H11.1C14.6 22 16 20.6 16 17.1V12.9C16 9.4 14.6 8 11.1 8ZM12.29 13.65L8.58 17.36C8.44 17.5 8.26 17.57 8.07 17.57C7.88 17.57 7.7 17.5 7.56 17.36L5.7 15.5C5.42 15.22 5.42 14.77 5.7 14.49C5.98 14.21 6.43 14.21 6.71 14.49L8.06 15.84L11.27 12.63C11.55 12.35 12 12.35 12.28 12.63C12.56 12.91 12.57 13.37 12.29 13.65Z" data-v-ea2193f2></path></svg><span class="text-xs" data-v-ea2193f2>Account Verification</span>',2)]),2),p("button",{onClick:M[2]||(M[2]=B=>E.$router.push({name:"AdminUpdateDelete"})),class:fe(["flex flex-col items-center justify-center transition-all duration-200",Qe(e).name==="AdminUpdateDelete"?"text-dark-slate border-b-4 border-dark-slate":"text-gray-400 hover:text-customButton border-b-4 border-transparent hover:customButton"]),title:"Account Settings"},M[16]||(M[16]=[p("svg",{class:"w-8 h-8 mb-1",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M20.1 9.21994C18.29 9.21994 17.55 7.93994 18.45 6.36994C18.97 5.45994 18.66 4.29994 17.75 3.77994L16.02 2.78994C15.23 2.31994 14.21 2.59994 13.74 3.38994L13.63 3.57994C12.73 5.14994 11.25 5.14994 10.34 3.57994L10.23 3.38994C9.78 2.59994 8.76 2.31994 7.97 2.78994L6.24 3.77994C5.33 4.29994 5.02 5.46994 5.54 6.37994C6.45 7.93994 5.71 9.21994 3.9 9.21994C2.86 9.21994 2 10.0699 2 11.1199V12.8799C2 13.9199 2.85 14.7799 3.9 14.7799C5.71 14.7799 6.45 16.0599 5.54 17.6299C5.02 18.5399 5.33 19.6999 6.24 20.2199L7.97 21.2099C8.76 21.6799 9.78 21.3999 10.25 20.6099L10.36 20.4199C11.26 18.8499 12.74 18.8499 13.65 20.4199L13.76 20.6099C14.23 21.3999 15.25 21.6799 16.04 21.2099L17.77 20.2199C18.68 19.6999 18.99 18.5299 18.47 17.6299C17.56 16.0599 18.3 14.7799 20.11 14.7799C21.15 14.7799 22.01 13.9299 22.01 12.8799V11.1199C22 10.0799 21.15 9.21994 20.1 9.21994ZM12 15.2499C10.21 15.2499 8.75 13.7899 8.75 11.9999C8.75 10.2099 10.21 8.74994 12 8.74994C13.79 8.74994 15.25 10.2099 15.25 11.9999C15.25 13.7899 13.79 15.2499 12 15.2499Z",fill:"currentColor"})],-1),p("span",{class:"text-xs"},"Account Setting",-1)]),2)])):Ct("",!0),Qe(e).path==="/admin"||Qe(e).path==="/admin/adminhomepage"||Qe(e).name==="AdminUpdateDelete"?(j(),z("div",Int,[p("button",{onClick:M[3]||(M[3]=(...B)=>E.logout&&E.logout(...B)),class:fe(["flex flex-col items-center justify-center transition-all duration-200",Qe(e).name==="Logout"?"text-dark-slate border-b-4 border-dark-slate":"text-gray-400 hover:text-customButton border-b-4 border-transparent hover:border-customButton"]),title:"Logout"},M[17]||(M[17]=[si('<svg class="w-8 h-8 mb-1" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-ea2193f2><path d="M21.4999 13V15.26C21.4999 19.73 19.7099 21.52 15.2399 21.52H15.1099C11.0899 21.52 9.23991 20.07 8.90991 16.53" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-ea2193f2></path><path d="M8.8999 7.55999C9.2099 3.95999 11.0599 2.48999 15.1099 2.48999H15.2399C19.7099 2.48999 21.4999 4.27999 21.4999 8.74999" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-ea2193f2></path><path d="M15.0001 12H3.62012" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-ea2193f2></path><path d="M5.85 8.65002L2.5 12L5.85 15.35" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-ea2193f2></path></svg><span class="text-xs" data-v-ea2193f2>Logout</span>',2)]),2)])):(j(),z("div",Dnt,[p("div",{ref_key:"searchContainer",ref:m,class:"relative w-full max-w-md ml-4 font-poppins"},[p("label",{class:"bg-blue-gray input w-full flex items-center gap-2 border-none rounded-full px-3 py-2 cursor-text",onClick:M[7]||(M[7]=B=>f.value=!0)},[M[18]||(M[18]=p("svg",{class:"h-5 w-5 text-gray-500 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[p("g",{"stroke-linejoin":"round","stroke-linecap":"round","stroke-width":"2.5",fill:"none",stroke:"darkslategray"},[p("circle",{cx:"11",cy:"11",r:"8"}),p("path",{d:"m21 21-4.3-4.3"})])],-1)),Ut(p("input",{type:"search",placeholder:"Search","onUpdate:modelValue":M[4]||(M[4]=B=>y.value=B),class:"flex-grow bg-transparent outline-none font-poppins",onFocus:M[5]||(M[5]=B=>f.value=!0)},null,544),[[Wt,y.value]]),y.value?(j(),z("button",{key:0,type:"button",onClick:M[6]||(M[6]=B=>y.value=""),class:"absolute right-2 text-gray-400 hover:text-black"},"  ")):Ct("",!0)]),f.value?(j(),z("div",Mnt,[p("div",Rnt,[(j(),z(Kt,null,pe(b,B=>p("button",{key:B,onMousedown:me(at=>I(B),["prevent"]),class:fe(["px-4 py-1 rounded-full text-sm font-medium border transition-colors",h.value.includes(B)?"bg-dark-slate text-white border-dark-slate":"bg-gray-100 text-gray-700 hover:bg-gray-200 border-gray-300"])},J(B),43,Nnt)),64))]),h.value.includes("Training")?(j(),z("div",Ont,[(j(),z(Kt,null,pe(["Online","On-site"],B=>p("button",{key:B,onMousedown:me(at=>R(B),["prevent"]),class:fe(["px-4 py-1 rounded-full text-sm font-medium border transition-colors",g.value.includes(B)?"bg-dark-slate text-white border-dark-slate":"bg-gray-100 text-gray-700 hover:bg-gray-200 border-gray-300"])},J(B),43,Fnt)),64))])):Ct("",!0),x.value.length?(j(),z("div",$nt,[(j(!0),z(Kt,null,pe(x.value,(B,at)=>(j(),z("div",{key:at,class:"p-2 hover:bg-gray-100 rounded cursor-pointer",onClick:pt=>lt(B)},[p("div",jnt,J(B.Title||B.Position||B.Name),1),p("div",Unt,J(B.OrganizationName||B.location||""),1)],8,Bnt))),128))])):y.value&&h.value.length?(j(),z("div",znt," No results found. ")):Ct("",!0)])):Ct("",!0)],512)]))]),T.value?(j(),z("dialog",Hnt,[p("div",Vnt,[p("button",{class:"btn btn-sm btn-circle absolute right-2 top-2",onClick:W},"  "),p("h2",qnt,J($.value.Title),1),p("p",Wnt," Organization: "+J($.value.OrganizationName),1),p("div",Gnt,[p("button",{class:"btn btn-outline btn-sm",onClick:M[8]||(M[8]=B=>c($.value))},J(u($.value)?"Bookmarked":"Bookmark"),1),V($.value)?(j(),z("button",{key:0,class:fe(["btn btn-sm text-white flex items-center justify-center",Qe(i).registeredPosts[$.value.trainingID??$.value.TrainingID??$.value.id??$.value.ID]?"bg-gray-500":"bg-customButton"]),disabled:r.value,onClick:M[9]||(M[9]=B=>a($.value))},[r.value?(j(),z("span",Knt,M[19]||(M[19]=[p("svg",{class:"animate-spin h-4 w-4",viewBox:"0 0 24 24"},[p("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",fill:"none"}),p("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})],-1)]))):(j(),z("span",Xnt,J(Qe(i).registeredPosts[$.value.trainingID??$.value.TrainingID??$.value.id??$.value.ID]?"Unregister":"Register"),1))],10,Ynt)):Ct("",!0)]),p("div",Znt,[t.value?(j(),z("img",{key:0,src:t.value,alt:"Training QR",class:"w-40 h-40 border rounded shadow-md"},null,8,Jnt)):(j(),z("p",Qnt," QR code will appear once registered. "))]),p("p",null,[M[20]||(M[20]=p("strong",null,"Mode:",-1)),Dt(" "+J($.value.Mode||"Not specified"),1)]),p("p",null,[M[21]||(M[21]=p("strong",null,"Description:",-1)),Dt(" "+J($.value.Description),1)]),p("p",null,[M[22]||(M[22]=p("strong",null,"Schedule:",-1)),Dt(" "+J($.value.Schedule),1)]),p("p",null,[M[23]||(M[23]=p("strong",null,"Location:",-1)),Dt(" "+J($.value.Location),1)])])])):Ct("",!0),D.value?(j(),z("dialog",tst,[p("div",est,[p("button",{class:"btn btn-sm btn-circle absolute right-2 top-2",onClick:F},"  "),p("h2",nst,J($.value.Title||$.value.Position),1),p("p",sst," Organization: "+J($.value.OrganizationName),1),p("div",ist,[p("button",{class:"btn btn-outline btn-sm flex items-center gap-2",onClick:M[10]||(M[10]=B=>l($.value)),disabled:o[$.value.TrainingID||$.value.CareerID]},[o[$.value.TrainingID||$.value.CareerID]?(j(),z("span",ost)):(j(),z("span",ast,J(C.value[$.value.TrainingID||$.value.CareerID]?"Bookmarked":"Bookmark"),1))],8,rst),A.value[$.value.ID]?(j(),z("button",{key:1,class:"btn btn-sm bg-gray-500 text-white",onClick:M[12]||(M[12]=B=>E.cancelApplication($.value))}," Cancel Application ")):(j(),z("button",{key:0,class:"btn btn-sm bg-customButton text-white",onClick:M[11]||(M[11]=B=>O($.value))}," Apply "))]),p("p",null,[M[24]||(M[24]=p("strong",null,"Details:",-1)),Dt(" "+J($.value.Description||$.value.DetailsandInstructions),1)]),p("p",null,[M[25]||(M[25]=p("strong",null,"Qualifications:",-1)),Dt(" "+J($.value.Qualifications),1)]),p("p",null,[M[26]||(M[26]=p("strong",null,"Requirements:",-1)),Dt(" "+J($.value.Requirements),1)]),p("p",null,[M[27]||(M[27]=p("strong",null,"Application Address:",-1)),Dt(" "+J($.value.ApplicationLetterAddress),1)]),p("p",null,[M[28]||(M[28]=p("strong",null,"Deadline:",-1)),Dt(" "+J($.value.DeadlineofSubmission),1)])])])):Ct("",!0),_.value?(j(),z("dialog",lst,[p("div",cst,[p("button",{class:"btn btn-sm btn-circle border-transparent bg-transparent absolute right-2 top-2",onClick:et},"  "),p("h2",ust," Apply for "+J($.value?.Position||$.value?.Title),1),p("form",{onSubmit:M[14]||(M[14]=me((...B)=>E.submitApplication&&E.submitApplication(...B),["prevent"]))},[p("div",dst,[M[29]||(M[29]=p("label",{class:"block text-sm font-medium mb-1"}," Upload PDF Requirements ",-1)),p("input",{type:"file",accept:"application/pdf",onChange:M[13]||(M[13]=(...B)=>E.handleFileUpload&&E.handleFileUpload(...B)),required:"",class:"file-input file-input-bordered w-full"},null,32)]),p("div",{class:"flex justify-end gap-2"},[p("button",{type:"button",class:"btn btn-outline btn-sm",onClick:et}," Cancel "),M[30]||(M[30]=p("button",{type:"submit",class:"btn bg-customButton hover:bg-dark-slate text-white btn-sm"}," Submit ",-1))])],32)])])):Ct("",!0),p("div",hst,[(j(!0),z(Kt,null,pe(s.value,(B,at)=>(j(),z("div",{key:at,class:fe(["px-4 py-2 rounded text-white shadow-md",{"bg-green-600":B.type==="success","bg-red-600":B.type==="error","bg-blue-600":B.type==="info"}])},J(B.message),3))),128))]),K.value?(j(),z("dialog",fst,[p("div",pst,[p("button",{class:"btn btn-sm btn-circle border-transparent bg-transparent absolute right-2 top-2",onClick:gt},"  "),p("div",gst,[q.value.Logo?(j(),z("img",{key:0,src:q.value.Logo,alt:"Organization Logo",class:"w-14 h-14 rounded-full object-cover"},null,8,mst)):Ct("",!0),p("div",null,[p("h2",bst,J(q.value.Title||q.value.OrganizationName),1),p("p",vst,J(q.value.Description||q.value.OrganizationLocation),1)])]),q.value.Website?(j(),z("p",yst,[p("a",{href:q.value.Website,target:"_blank",class:"text-blue-600 underline break-all"},J(q.value.Website),9,wst)])):Ct("",!0),q.value.careers&&q.value.careers.length?(j(),z("div",_st,[M[31]||(M[31]=p("h3",{class:"text-base font-semibold mb-3"},"Career Posts",-1)),p("div",xst,[(j(!0),z(Kt,null,pe(q.value.careers,B=>(j(),z("div",{key:B.ID,class:"snap-start w-[180px] flex-shrink-0 p-3 bg-blue-gray rounded-lg cursor-pointer hover:bg-gray-200 transition shadow-sm",onClick:at=>lt(B)},[p("h4",kst,J(B.Title),1),p("p",Ast," Deadline: "+J(B.DeadlineOfSubmission||"N/A"),1)],8,Cst))),128))])])):Ct("",!0),q.value.trainings&&q.value.trainings.length?(j(),z("div",Sst,[M[32]||(M[32]=p("h3",{class:"text-base font-semibold mb-3"},"Training Posts",-1)),p("div",Est,[(j(!0),z(Kt,null,pe(q.value.trainings,B=>(j(),z("div",{key:B.ID,class:"snap-start w-[180px] flex-shrink-0 p-3 bg-blue-gray rounded-lg cursor-pointer hover:bg-gray-200 transition shadow-sm",onClick:at=>lt(B)},[p("h4",Lst,J(B.Title),1),p("p",Pst," Schedule: "+J(B.Schedule||"Not specified"),1)],8,Tst))),128))])])):Ct("",!0)])])):Ct("",!0)]))}},Dst=gr(Ist,[["__scopeId","data-v-ea2193f2"]]),Mst={class:"flex min-h-screen"},Rst={class:"flex flex-col flex-1"},Nst={class:"h-16 text-dark-slate flex items-center px-12"},Ost={class:"flex-1 overflow-x-auto px-12 bg-gray-100"},Fst={class:"w-full max-w-full"},$st={__name:"MainLayout",setup(n){return ut(!0),(t,e)=>{const s=Qo("router-view");return j(),z("div",Mst,[Ce(Ent),p("div",Rst,[p("header",Nst,[Ce(Dst)]),p("main",Ost,[p("div",Fst,[Ce(s,null,{default:hs(({Component:i})=>[(j(),Va(x6,null,[(j(),Va(E6(i)))],1024))]),_:1})])])])])}}},Bst={},jst={class:"flex justify-center items-start min-h-screen overflow-y-auto py-10 px-4"};function Ust(n,t){const e=Qo("router-view");return j(),z("div",jst,[Ce(e)])}const zst=gr(Bst,[["render",Ust]]),Hst={class:"organization-calendar"},Vst={class:"avatar"},qst=["src"],Wst={key:0,class:"profile-section"},Gst={class:"org-name"},Yst={class:"profile-actions"},Kst={class:"content"},Xst={class:"calendar-section"},Zst={class:"calendar-container"},Jst={class:"calendar-wrapper"},Qst={class:"calendar-header"},tit={class:"calendar-grid"},eit=["onClick"],nit={key:0,class:"date-number"},sit={key:1,class:"events-list"},iit={key:0,class:"events-list"},rit=["onClick"],oit={class:"calendar-side"},ait={key:0,class:"event-group"},lit={key:0,class:"event-info"},cit={key:1,class:"event-info"},uit={key:2,class:"event-info"},dit={key:3,class:"event-info"},hit={key:4,class:"event-info"},fit={key:5,class:"event-info"},pit={key:1,class:"event-group"},git={key:0,class:"event-info"},mit={key:1,class:"event-info"},bit={key:2,class:"event-info"},vit={key:3,class:"event-info"},yit={key:4,class:"event-info"},wit={key:5,class:"event-info"},_it={key:2,class:"event-group"},xit={class:"event-info"},Cit={class:"event-info"},kit={key:0,class:"event-info"},Ait={key:1,class:"event-info"},Sit={key:2,class:"event-info"},Eit=["href"],Tit={name:"OrganizationCalendar",data(){return{dictLogo:fo,currentDate:new Date,selectedEvents:{trainings:[],careers:[],scheduledInterviews:[]},isSidebarOpen:!0,dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],showModal:!1,selectedDate:null,showMenu:!1,trainings:[],careers:[],scheduledInterviews:[]}},setup(){return{events:ut({})}},computed:{monthYear(){return this.currentDate.toLocaleString("default",{month:"long",year:"numeric"})},calendarDays(){const n=this.currentDate.getFullYear(),t=this.currentDate.getMonth(),e=new Date(n,t,1),i=new Date(n,t+1,0).getDate(),r=[];for(let o=0;o<e.getDay();o++)r.push(null);for(let o=1;o<=i;o++)r.push(new Date(n,t,o));return r},formattedSelectedDate(){return this.selectedDate?this.selectedDate.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):""}},methods:{formatTime12Hour(n){if(!n)return"";const[t,e]=n.split(":"),s=parseInt(t,10),i=parseInt(e,10),r=s>=12?"PM":"AM";return`${s%12===0?12:s%12}:${i.toString().padStart(2,"0")} ${r}`},async fetchApplications(){try{const n=JSON.parse(localStorage.getItem("user")),t=localStorage.getItem("token");if(!n||!t)return;const{data:e}=await At.get("https://pathfinder-development-production.up.railway.app/api/applications",{headers:{Authorization:`Bearer ${t}`}}),s=e.filter(i=>i.interviewSchedule).map(i=>({id:i.applicationID,careerID:i.careerID,title:i.career?.position||"Career Interview",date:new Date(i.interviewSchedule).toISOString().split("T")[0],type:"career",interviewSchedule:i.interviewSchedule,interviewMode:i.interviewMode,interviewLink:i.interviewLink,interviewLocation:i.interviewLocation,organization:i.career?.organization}));s.forEach(i=>{events.value[i.date]||(events.value[i.date]=[]),events.value[i.date].push(i)}),console.log(" Career events merged:",s)}catch(n){console.error("Failed to fetch applications:",n)}},async fetchInterviews(){const n=localStorage.getItem("token");if(n)try{const t=await At.get("https://pathfinder-development-production.up.railway.app/api/applications/interviews",{headers:{Authorization:`Bearer ${n}`,Accept:"application/json"}});console.log("API /applications/interviews response:",t.data);const e=t.data.map(s=>{const i=s.interviewSchedule||s.schedule||null,r=i?new Date(i):null;return{id:s.id||s.applicationID||s.interviewID,applicantID:s.applicantID||s.applicant_id||null,applicantName:s.applicantName||null,title:s.title||s.interwiewStatus||"For Interview",date:r?r.toISOString().split("T")[0]:"",interviewSchedule:i,interviewMode:s.interviewMode||s.mode||null,interviewLink:s.interviewLink||s.link||null,interviewLocation:s.interviewLocation||s.location||null,organization:s.organizationName||s.organization||null}});this.scheduledInterviews=e,console.log(" Scheduled interviews loaded:",e.length)}catch(t){console.error("Error fetching interviews:",t)}},async fetchTrainings(){let n;try{n=await Er.get("/organization/trainings")}catch(t){console.warn("Org trainings endpoint unavailable for calendar, falling back:",t?.response?.status);const e=localStorage.getItem("token");if(!e)return;const s=localStorage.getItem("user"),i=s?JSON.parse(s):null,r=i?.organizationID??i?.organization?.organizationID??null;n=await At.get("https://pathfinder-development-production.up.railway.app/api/trainings",{headers:{Authorization:`Bearer ${e}`,Accept:"application/json"},params:r?{organizationID:r}:{}})}this.trainings=n.data.map(t=>{const e=t.schedule?new Date(t.schedule+" UTC"):null,s=t.end_time?new Date(t.end_time+" UTC"):null;return{id:t.trainingID,title:t.title,description:t.description,date:e?e.toISOString().split("T")[0]:"",startTime:e?e.toTimeString().slice(0,5):"",endTime:s?s.toTimeString().slice(0,5):"",mode:t.mode,location:t.location,link:t.trainingLink,organizationID:t.organization.organizationID}})},async fetchCareers(){const n=await Er.get("/organization/careers");this.careers=n.data.map(t=>({id:t.careerID,title:t.position,details:t.detailsAndInstructions,qualifications:t.qualifications,requirements:t.requirements,letterAddress:t.applicationLetterAddress,date:t.deadlineOfSubmission?t.deadlineOfSubmission.split("T")[0]:null,organizationID:t.organization?.organizationID||t.organizationID}))},openEventDetailsByDate(n){this.selectedDate=n,this.openDayModal(n)},formatDate(n){const t=n.getFullYear(),e=String(n.getMonth()+1).padStart(2,"0"),s=String(n.getDate()).padStart(2,"0");return`${t}-${e}-${s}`},prevMonth(){this.currentDate.setMonth(this.currentDate.getMonth()-1),this.currentDate=new Date(this.currentDate)},nextMonth(){this.currentDate.setMonth(this.currentDate.getMonth()+1),this.currentDate=new Date(this.currentDate)},isToday(n){if(!n)return!1;const t=new Date;return n.getDate()===t.getDate()&&n.getMonth()===t.getMonth()&&n.getFullYear()===t.getFullYear()},hasEvent(n){if(!n)return!1;const t=this.formatDate(n);return this.trainings.some(e=>e.date===t)||this.careers.some(e=>e.date===t)||this.scheduledInterviews.some(e=>e.date===t)},getEventTitles(n){if(!n)return[];const t=this.formatDate(n),e=this.trainings.filter(r=>r.date===t).map(r=>({type:"training",title:" "+r.title})),s=this.careers.filter(r=>r.date===t).map(r=>({type:"career",title:" "+r.title})),i=this.scheduledInterviews.filter(r=>r.date===t).map(r=>({type:"interview",title:" "+r.title}));return[...e,...s,...i]},getEventColor(n){if(!n)return"";const t=this.formatDate(n);return this.trainings.some(e=>e.date===t)||this.careers.some(e=>e.date===t)?"#F5F5F5":this.scheduledInterviews.some(e=>e.date===t)?"#FFE5E5":""},formatDate(n){const t=n.getFullYear(),e=String(n.getMonth()+1).padStart(2,"0"),s=String(n.getDate()).padStart(2,"0");return`${t}-${e}-${s}`},getEventsByDate(n){if(!n)return[];const t=this.formatDate(n),e=this.trainings?.filter(r=>r.date===t)||[],s=this.careers?.filter(r=>r.date===t)||[],i=this.scheduledInterviews?.filter(r=>r.date===t)||[];return[...e,...s,...i]},openEventDetails(n){this.selectedEvent=n},openDayModal(n){if(!n)return;const t=this.formatDate(n),e=this.trainings.filter(r=>r.date===t).map(r=>({...r,type:"Training"})),s=this.careers.filter(r=>r.date===t).map(r=>({...r,type:"Career"})),i=this.scheduledInterviews.filter(r=>r.date===t).map(r=>({...r,type:"Interview"}));this.selectedDate=t,this.selectedEvents={trainings:e,careers:s,interviews:i}},closeSidebar(){this.selectedEvents={trainings:[],careers:[]},this.selectedDate=null},toggleMenu(){this.showMenu=!this.showMenu},closeMenu(){this.showMenu=!1},editEvent(){alert("Edit function triggered!"),this.closeMenu()},deleteEvent(){confirm("Are you sure you want to delete this event?")&&alert("Delete function triggered!"),this.closeMenu()},closeModal(){this.showModal=!1,this.selectedDate=null,this.selectedEvents=[],this.showMenu=!1}},mounted(){this.fetchTrainings(),this.fetchCareers(),this.fetchApplications(),this.fetchInterviews()}},Lit=Object.assign(Tit,{setup(n){const t=gi(),e=ut(!0),s=ut("");je(()=>{const m=localStorage.getItem("user");if(m){const b=JSON.parse(m);b.role==="organization"&&(s.value=b.displayName||b.name)}});const i=m=>{t.push(m)};je(()=>{const m=localStorage.getItem("user");if(m)try{const b=JSON.parse(m);b.role==="organization"&&(s.value=b.displayName||b.name||"Organization")}catch(b){console.error("Failed to parse user from localStorage:",b)}});const r=()=>{e.value=!e.value},o=new Date,a=ut(o.getMonth()),l=ut(o.getFullYear()),c=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],u=cn(()=>new Date(l.value,a.value).toLocaleString("default",{month:"long"})),d=cn(()=>{const m=new Date(l.value,a.value,1),b=new Date(l.value,a.value+1,0),y=[];for(let x=0;x<m.getDay();x++)y.push(null);for(let x=1;x<=b.getDate();x++)y.push(new Date(l.value,a.value,x));return y}),f=()=>{a.value===0?(a.value=11,l.value--):a.value--},h=()=>{a.value===11?(a.value=0,l.value++):a.value++},g=m=>m?m.getDate()===o.getDate()&&m.getMonth()===o.getMonth()&&m.getFullYear()===o.getFullYear():!1;return(m,b)=>(j(),z("div",Hst,[p("button",{class:fe(["hamburger",{open:e.value,shifted:e.value}]),onClick:r},b[7]||(b[7]=[p("span",null,null,-1),p("span",null,null,-1),p("span",null,null,-1)]),2),Ce(dr,{name:"slide"},{default:hs(()=>[p("aside",{class:fe(["sidebar",{collapsed:!e.value}])},[b[14]||(b[14]=p("div",{class:"space"},null,-1)),p("div",Vst,[p("img",{src:Qe(fo),alt:"DICT Logo",class:"avatar-img"},null,8,qst)]),Ce(dr,{name:"fade"},{default:hs(()=>[e.value?(j(),z("div",Wst,[p("h3",Gst,J(s.value),1),p("div",Yst,[p("div",{class:"action",onClick:b[0]||(b[0]=y=>i({name:"OrgUpdateProfile"}))},b[8]||(b[8]=[p("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M11.7278 8.27191C12.7534 9.87525 14.1247 11.2375 15.7464 12.2534L8.85673 19.144C8.43166 19.569 8.21841 19.7816 7.95731 19.9213C7.69637 20.0609 7.40171 20.1199 6.81278 20.2377L3.73563 20.853C3.40302 20.9195 3.23649 20.9525 3.14188 20.8578C3.04759 20.7632 3.08035 20.5971 3.14677 20.2651L3.76298 17.1879C3.88087 16.5985 3.93965 16.3035 4.07938 16.0424C4.21912 15.7814 4.43173 15.569 4.85673 15.144L11.7278 8.27191ZM16.1116 4.03656C16.6711 3.75929 17.3284 3.75931 17.888 4.03656C18.1821 4.18229 18.455 4.45518 19.0003 5.00043C19.5453 5.54545 19.8184 5.81774 19.9641 6.11175C20.2414 6.67123 20.2413 7.32861 19.9641 7.88812C19.8184 8.18221 19.5455 8.45517 19.0003 9.00043L17.2034 10.7963C15.5308 9.84498 14.1456 8.46859 13.1819 6.81781L15.0003 5.00043C15.5453 4.45539 15.8176 4.18234 16.1116 4.03656Z",fill:"#FFFDFD"})],-1),p("span",null,"Update Profile",-1)]))])])):Ct("",!0)]),_:1}),p("div",{class:"icon",onClick:b[1]||(b[1]=y=>i("/organization"))},b[9]||(b[9]=[p("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M6.25 17.0585C6.25 16.0494 6.25 15.5448 6.47166 15.1141C6.69333 14.6833 7.1039 14.3901 7.92505 13.8035L13.8375 9.58034C14.3989 9.17938 14.6795 8.9789 15 8.9789C15.3205 8.9789 15.6011 9.17938 16.1625 9.58034L22.075 13.8035C22.8961 14.3901 23.3067 14.6833 23.5283 15.1141C23.75 15.5448 23.75 16.0494 23.75 17.0585V24.25C23.75 25.1928 23.75 25.6642 23.4571 25.9571C23.1642 26.25 22.6928 26.25 21.75 26.25H8.25C7.30719 26.25 6.83579 26.25 6.54289 25.9571C6.25 25.6642 6.25 25.1928 6.25 24.25V17.0585Z",fill:"white"}),p("path",{d:"M3.75 15.6366C3.75 15.9035 3.75 16.0369 3.8341 16.0781C3.91819 16.1192 4.02352 16.0373 4.23418 15.8734L13.7721 8.45502C14.362 7.99625 14.6569 7.76686 15 7.76686C15.3431 7.76686 15.638 7.99625 16.2279 8.45502L25.7658 15.8734C25.9765 16.0373 26.0818 16.1192 26.1659 16.0781C26.25 16.0369 26.25 15.9035 26.25 15.6366V14.7282C26.25 14.2478 26.25 14.0076 26.1483 13.7997C26.0466 13.5918 25.857 13.4444 25.4779 13.1495L16.2279 5.95502C15.638 5.49625 15.3431 5.26686 15 5.26686C14.6569 5.26686 14.362 5.49625 13.7721 5.95502L4.52212 13.1495C4.14295 13.4444 3.95337 13.5918 3.85168 13.7997C3.75 14.0076 3.75 14.2478 3.75 14.7282V15.6366Z",fill:"white"}),p("path",{d:"M16.125 18.75H13.875C12.7704 18.75 11.875 19.6454 11.875 20.75V26.1C11.875 26.1828 11.9422 26.25 12.025 26.25H17.975C18.0578 26.25 18.125 26.1828 18.125 26.1V20.75C18.125 19.6454 17.2296 18.75 16.125 18.75Z",fill:"white"}),p("rect",{x:"20",y:"6.25",width:"2.5",height:"5",rx:"0.5",fill:"white"})],-1),p("span",null,"Home",-1)])),p("div",{class:"icon",onClick:b[2]||(b[2]=y=>i({name:"OrgTrainings"}))},b[10]||(b[10]=[p("svg",{width:"29",height:"29",viewBox:"0 0 29 29",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M20.5837 3.625C23.4119 3.625 24.8261 3.62526 25.7048 4.50391C26.5833 5.3826 26.5837 6.79675 26.5837 9.625V19.375C26.5837 22.2033 26.5833 23.6174 25.7048 24.4961C24.8261 25.3747 23.4119 25.375 20.5837 25.375H8.41666C5.58824 25.375 4.17425 25.3748 3.29557 24.4961C2.41689 23.6174 2.41666 22.2034 2.41666 19.375V9.625C2.41666 6.79657 2.41689 5.38259 3.29557 4.50391C4.17425 3.62523 5.58824 3.625 8.41666 3.625H20.5837ZM9.66666 12.292C9.11438 12.292 8.66666 12.7397 8.66666 13.292V20.542L8.67155 20.6445C8.72303 21.1485 9.1491 21.542 9.66666 21.542C10.1842 21.542 10.6103 21.1485 10.6618 20.6445L10.6667 20.542V13.292C10.6667 12.7397 10.2189 12.292 9.66666 12.292ZM19.3337 9.875C18.7814 9.875 18.3337 10.3227 18.3337 10.875V20.542L18.3385 20.6436C18.3896 21.148 18.8158 21.542 19.3337 21.542C19.8514 21.5418 20.2778 21.1479 20.3288 20.6436L20.3337 20.542V10.875C20.3337 10.3228 19.8858 9.87518 19.3337 9.875ZM14.4997 14.708C13.9476 14.7082 13.4998 15.156 13.4997 15.708V20.541L13.5046 20.6436C13.5557 21.1477 13.982 21.5408 14.4997 21.541C15.0175 21.541 15.4436 21.1478 15.4948 20.6436L15.4997 20.541V15.708C15.4995 15.1559 15.0518 14.708 14.4997 14.708Z",fill:"white"})],-1),p("span",null,"Trainings",-1)])),p("div",{class:"icon",onClick:b[3]||(b[3]=y=>i({name:"OrgCareers"}))},b[11]||(b[11]=[p("svg",{width:"25",height:"25",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M22.8798 11.0484C23.4046 10.8642 23.9845 11.1431 24.1081 11.6855C24.4792 13.3134 24.4217 15.0018 23.9268 16.6191C23.4739 18.0989 22.6698 19.4685 21.5787 20.6449C21.2148 21.0372 20.6017 21.0197 20.2239 20.6408L14.9487 15.3495C14.4292 14.8284 14.6314 13.9436 15.3257 13.6999L22.8798 11.0484ZM13 4.0826C13 3.50231 13.4932 3.04057 14.0672 3.12592C15.8633 3.39302 17.5788 4.00579 19.085 4.93161C20.3794 5.72731 21.4793 6.72976 22.3343 7.87824C22.709 8.38157 22.4513 9.07932 21.8592 9.28718L14.3313 11.9301C13.6809 12.1584 13 11.6758 13 10.9865V4.0826Z",fill:"white"}),p("path",{d:"M11.9511 13.2908C11.9512 13.5763 12.0581 13.8518 12.25 14.0632L19.2677 21.7886C19.6714 22.233 19.5963 22.9337 19.0759 23.2331C18.245 23.7112 17.354 24.0924 16.4209 24.365C14.5402 24.9144 12.5476 25.0087 10.6201 24.6394C8.69236 24.2701 6.88846 23.4478 5.36911 22.2468C3.84993 21.0459 2.66126 19.5025 1.90915 17.7537C1.15711 16.0048 0.864996 14.1043 1.05759 12.2205C1.25024 10.3365 1.92171 8.52693 3.01364 6.95288C4.1056 5.37884 5.58398 4.08845 7.31735 3.19605C8.43484 2.62073 9.63633 2.22318 10.8757 2.01305C11.4515 1.91541 11.9511 2.37876 11.9511 2.96284V13.2908Z",fill:"white"})],-1),p("span",null,"Career",-1)])),p("div",{class:"icon",onClick:b[4]||(b[4]=y=>i({name:"OrgCalendar"}))},b[12]||(b[12]=[p("svg",{width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M2.16675 9.4165C2.16675 7.53089 2.16675 6.58808 2.75253 6.00229C3.33832 5.4165 4.28113 5.4165 6.16675 5.4165H19.8334C21.719 5.4165 22.6618 5.4165 23.2476 6.00229C23.8334 6.58808 23.8334 7.53089 23.8334 9.4165V9.83317C23.8334 10.3046 23.8334 10.5403 23.687 10.6867C23.5405 10.8332 23.3048 10.8332 22.8334 10.8332H3.16675C2.69534 10.8332 2.45964 10.8332 2.31319 10.6867C2.16675 10.5403 2.16675 10.3046 2.16675 9.83317V9.4165Z",fill:"white"}),p("path",{d:"M22.833 13C23.3042 13 23.5401 13.0002 23.6865 13.1465C23.833 13.2929 23.833 13.5286 23.833 14V19.833C23.833 21.7186 23.8329 22.6613 23.2471 23.2471C22.6613 23.8329 21.7186 23.833 19.833 23.833H6.16699C4.28137 23.833 3.33872 23.8329 2.75293 23.2471C2.16714 22.6613 2.16699 21.7186 2.16699 19.833V14C2.16699 13.5286 2.16703 13.2929 2.31348 13.1465C2.45994 13.0002 2.69576 13 3.16699 13H22.833ZM8.58301 19.5C8.11182 19.5 7.87591 19.5001 7.72949 19.6465C7.58321 19.7929 7.58301 20.0288 7.58301 20.5V20.667C7.58301 21.1382 7.58308 21.3741 7.72949 21.5205C7.87591 21.6669 8.11182 21.667 8.58301 21.667H10.917C11.3882 21.667 11.6241 21.6669 11.7705 21.5205C11.9169 21.3741 11.917 21.1382 11.917 20.667V20.5C11.917 20.0288 11.9168 19.7929 11.7705 19.6465C11.6241 19.5001 11.3882 19.5 10.917 19.5H8.58301ZM15.083 19.5C14.6118 19.5 14.3759 19.5001 14.2295 19.6465C14.0832 19.7929 14.083 20.0288 14.083 20.5V20.667C14.083 21.1382 14.0831 21.3741 14.2295 21.5205C14.3759 21.6669 14.6118 21.667 15.083 21.667H17.417C17.8882 21.667 18.1241 21.6669 18.2705 21.5205C18.4169 21.3741 18.417 21.1382 18.417 20.667V20.5C18.417 20.0288 18.4168 19.7929 18.2705 19.6465C18.1241 19.5001 17.8882 19.5 17.417 19.5H15.083ZM8.58301 15.167C8.11182 15.167 7.87591 15.1671 7.72949 15.3135C7.58337 15.4599 7.58301 15.6959 7.58301 16.167V16.333C7.58301 16.8041 7.58337 17.0401 7.72949 17.1865C7.87591 17.3329 8.11182 17.333 8.58301 17.333H10.917C11.3882 17.333 11.6241 17.3329 11.7705 17.1865C11.9166 17.0401 11.917 16.8041 11.917 16.333V16.167C11.917 15.6959 11.9166 15.4599 11.7705 15.3135C11.6241 15.1671 11.3882 15.167 10.917 15.167H8.58301ZM15.083 15.167C14.6118 15.167 14.3759 15.1671 14.2295 15.3135C14.0834 15.4599 14.083 15.6959 14.083 16.167V16.333C14.083 16.8041 14.0834 17.0401 14.2295 17.1865C14.3759 17.3329 14.6118 17.333 15.083 17.333H17.417C17.8882 17.333 18.1241 17.3329 18.2705 17.1865C18.4166 17.0401 18.417 16.8041 18.417 16.333V16.167C18.417 15.6959 18.4166 15.4599 18.2705 15.3135C18.1241 15.1671 17.8882 15.167 17.417 15.167H15.083Z",fill:"white"}),p("path",{d:"M7.58325 3.25L7.58325 6.5",stroke:"white","stroke-width":"2","stroke-linecap":"round"}),p("path",{d:"M18.4167 3.25L18.4167 6.5",stroke:"white","stroke-width":"2","stroke-linecap":"round"})],-1),p("span",null,"Calendar",-1)])),b[15]||(b[15]=p("div",{class:"spacer"},null,-1)),p("div",{class:"icon signout",onClick:b[5]||(b[5]=y=>m.$router.push("/loginform"))},b[13]||(b[13]=[p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[p("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),p("polyline",{points:"16 17 21 12 16 7"}),p("line",{x1:"21",y1:"12",x2:"9",y2:"12"})],-1),p("span",null,"Sign Out",-1)]))],2)]),_:1}),p("main",Kst,[b[35]||(b[35]=p("header",{class:"topbar"},[p("div",{class:"Pathfinder-wrapper"},[p("span",{class:"logo-text"},"Pathfinder")])],-1)),p("section",Xst,[p("div",Zst,[p("div",Jst,[p("div",Qst,[p("button",{onClick:f},""),p("h2",null,J(u.value)+" "+J(l.value),1),p("button",{onClick:h},"")]),p("div",tit,[(j(),z(Kt,null,pe(c,y=>p("div",{class:"day-name",key:y},J(y),1)),64)),(j(!0),z(Kt,null,pe(d.value,(y,x)=>(j(),z("div",{key:x,class:fe(["day-cell",{today:g(y),event:m.hasEvent(y)}]),style:qp({backgroundColor:m.getEventColor(y)}),onClick:_=>m.openDayModal(y)},[y?(j(),z("span",nit,J(y.getDate()),1)):Ct("",!0),y&&m.getEventsByDate(y).length?(j(),z("div",sit,[y&&m.getEventTitles(y).length?(j(),z("div",iit,[(j(!0),z(Kt,null,pe(m.getEventTitles(y).slice(0,1),(_,C)=>(j(),z("div",{key:C,class:fe(["event-title",_.type])},J(_.title),3))),128)),m.getEventTitles(y).length>1?(j(),z("div",{key:0,class:"show-more",onClick:me(_=>m.openEventDetailsByDate(y),["stop"])}," + Show more ",8,rit)):Ct("",!0)])):Ct("",!0)])):Ct("",!0)],14,eit))),128))]),b[16]||(b[16]=si('<div class="calendar-legend" data-v-9493bdfa><div class="legend-item" data-v-9493bdfa><span class="training" data-v-9493bdfa></span> Trainings </div><div class="legend-item" data-v-9493bdfa><span class="career" data-v-9493bdfa></span> Careers </div><div class="legend-item" data-v-9493bdfa><span class="interview" data-v-9493bdfa></span> Scheduled Interviews </div></div>',1))]),p("div",oit,[m.selectedEvents&&(m.selectedEvents.trainings?.length||m.selectedEvents.careers?.length||m.selectedEvents.interviews?.length)?(j(),z(Kt,{key:0},[p("h3",null,"Events on "+J(m.selectedDate),1),m.selectedEvents.trainings.length?(j(),z("div",ait,[b[22]||(b[22]=p("h4",{class:"group-title"}," Trainings",-1)),(j(!0),z(Kt,null,pe(m.selectedEvents.trainings,(y,x)=>(j(),z("div",{key:"t-"+x,class:"event-details-card"},[p("h5",null,J(y.title),1),y.startTime?(j(),z("p",lit,[b[17]||(b[17]=p("strong",null,"Start Time:",-1)),Dt(" "+J(m.formatTime12Hour(y.startTime)),1)])):Ct("",!0),y.endTime?(j(),z("p",cit,[b[18]||(b[18]=p("strong",null,"End Time:",-1)),Dt(" "+J(m.formatTime12Hour(y.endTime)),1)])):Ct("",!0),y.mode?(j(),z("p",uit,[b[19]||(b[19]=p("strong",null,"Mode:",-1)),Dt(" "+J(y.mode),1)])):Ct("",!0),y.location?(j(),z("p",dit,[b[20]||(b[20]=p("strong",null,"Location:",-1)),Dt(" "+J(y.location),1)])):Ct("",!0),y.description?(j(),z("p",hit,b[21]||(b[21]=[p("strong",null,"Description:",-1)]))):Ct("",!0),y.description?(j(),z("p",fit,J(y.description),1)):Ct("",!0)]))),128))])):Ct("",!0),m.selectedEvents.careers.length?(j(),z("div",pit,[b[26]||(b[26]=p("h4",{class:"group-title"}," Careers",-1)),(j(!0),z(Kt,null,pe(m.selectedEvents.careers,(y,x)=>(j(),z("div",{key:"c-"+x,class:"event-details-card"},[p("h5",null,J(y.title),1),y.qualifications?(j(),z("p",git,b[23]||(b[23]=[p("strong",null,"Qualifications:",-1)]))):Ct("",!0),y.qualifications?(j(),z("p",mit,J(y.qualifications),1)):Ct("",!0),y.requirements?(j(),z("p",bit,b[24]||(b[24]=[p("strong",null,"Requirements:",-1)]))):Ct("",!0),y.requirements?(j(),z("p",vit,J(y.requirements),1)):Ct("",!0),y.details?(j(),z("p",yit,b[25]||(b[25]=[p("strong",null,"Details:",-1)]))):Ct("",!0),y.details?(j(),z("p",wit,J(y.details),1)):Ct("",!0)]))),128))])):Ct("",!0),m.selectedEvents.interviews.length?(j(),z("div",_it,[b[32]||(b[32]=p("h4",{class:"group-title"}," Scheduled Interviews",-1)),(j(!0),z(Kt,null,pe(m.selectedEvents.interviews,(y,x)=>(j(),z("div",{key:"i-"+x,class:"event-details-card"},[p("h5",null,J(y.title),1),p("p",xit,[b[27]||(b[27]=p("strong",null,"Applicant:",-1)),Dt(" "+J(y.applicantName||y.applicantID||"N/A"),1)]),p("p",Cit,[b[28]||(b[28]=p("strong",null,"Time:",-1)),Dt(" "+J(m.formatTime12Hour(y.interviewSchedule)||"TBD"),1)]),y.mode?(j(),z("p",kit,[b[29]||(b[29]=p("strong",null,"Mode:",-1)),Dt(" "+J(y.interviewMode),1)])):Ct("",!0),y.location?(j(),z("p",Ait,[b[30]||(b[30]=p("strong",null,"Location:",-1)),Dt(" "+J(y.interviewLocation),1)])):Ct("",!0),y.interviewLink?(j(),z("p",Sit,[b[31]||(b[31]=p("strong",null,"Link:",-1)),p("a",{href:y.interviewLink,target:"_blank",rel:"noopener noreferrer"},J(y.interviewLink),9,Eit)])):Ct("",!0)]))),128))])):Ct("",!0),p("button",{class:"close-btn",onClick:b[6]||(b[6]=(...y)=>m.closeSidebar&&m.closeSidebar(...y))},"Close")],64)):(j(),z(Kt,{key:1},[b[33]||(b[33]=p("h3",null,"Select a date",-1)),b[34]||(b[34]=p("p",null,"Click a date in the calendar to view its trainings and careers.",-1))],64))])])])])]))}}),Pit=gr(Lit,[["__scopeId","data-v-9493bdfa"]]),Iit={class:"organization-profile"},Dit={key:0,class:"post-options"},Mit={__name:"Profile",setup(n){const t=ut(!1),e=ut(!1),s=()=>{t.value=!t.value},i=()=>{console.log("Signed out")};return(r,o)=>(j(),z("div",Iit,[Ce(dr,{name:"slide"},{default:hs(()=>[p("aside",{class:fe(["sidebar",{collapsed:!e.value}]),onMouseenter:o[6]||(o[6]=a=>e.value=!0),onMouseleave:o[7]||(o[7]=a=>e.value=!1)},[p("div",{class:"icon",onClick:o[0]||(o[0]=a=>r.$router.push("/OrganizationHomePage"))},o[8]||(o[8]=[p("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M6.25 17.0585C6.25 16.0494 6.25 15.5448 6.47166 15.1141C6.69333 14.6833 7.1039 14.3901 7.92505 13.8035L13.8375 9.58034C14.3989 9.17938 14.6795 8.9789 15 8.9789C15.3205 8.9789 15.6011 9.17938 16.1625 9.58034L22.075 13.8035C22.8961 14.3901 23.3067 14.6833 23.5283 15.1141C23.75 15.5448 23.75 16.0494 23.75 17.0585V24.25C23.75 25.1928 23.75 25.6642 23.4571 25.9571C23.1642 26.25 22.6928 26.25 21.75 26.25H8.25C7.30719 26.25 6.83579 26.25 6.54289 25.9571C6.25 25.6642 6.25 25.1928 6.25 24.25V17.0585Z",fill:"white"}),p("path",{d:"M3.75 15.6366C3.75 15.9035 3.75 16.0369 3.8341 16.0781C3.91819 16.1192 4.02352 16.0373 4.23418 15.8734L13.7721 8.45502C14.362 7.99625 14.6569 7.76686 15 7.76686C15.3431 7.76686 15.638 7.99625 16.2279 8.45502L25.7658 15.8734C25.9765 16.0373 26.0818 16.1192 26.1659 16.0781C26.25 16.0369 26.25 15.9035 26.25 15.6366V14.7282C26.25 14.2478 26.25 14.0076 26.1483 13.7997C26.0466 13.5918 25.857 13.4444 25.4779 13.1495L16.2279 5.95502C15.638 5.49625 15.3431 5.26686 15 5.26686C14.6569 5.26686 14.362 5.49625 13.7721 5.95502L4.52212 13.1495C4.14295 13.4444 3.95337 13.5918 3.85168 13.7997C3.75 14.0076 3.75 14.2478 3.75 14.7282V15.6366Z",fill:"white"}),p("path",{d:"M16.125 18.75H13.875C12.7704 18.75 11.875 19.6454 11.875 20.75V26.1C11.875 26.1828 11.9422 26.25 12.025 26.25H17.975C18.0578 26.25 18.125 26.1828 18.125 26.1V20.75C18.125 19.6454 17.2296 18.75 16.125 18.75Z",fill:"white"}),p("rect",{x:"20",y:"6.25",width:"2.5",height:"5",rx:"0.5",fill:"white"})],-1),p("span",null,"Home",-1)])),p("div",{class:"icon",onClick:o[1]||(o[1]=a=>r.$router.push("/trainings"))},o[9]||(o[9]=[p("svg",{width:"29",height:"29",viewBox:"0 0 29 29",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M20.5837 3.625C23.4119 3.625 24.8261 3.62526 25.7048 4.50391C26.5833 5.3826 26.5837 6.79675 26.5837 9.625V19.375C26.5837 22.2033 26.5833 23.6174 25.7048 24.4961C24.8261 25.3747 23.4119 25.375 20.5837 25.375H8.41666C5.58824 25.375 4.17425 25.3748 3.29557 24.4961C2.41689 23.6174 2.41666 22.2034 2.41666 19.375V9.625C2.41666 6.79657 2.41689 5.38259 3.29557 4.50391C4.17425 3.62523 5.58824 3.625 8.41666 3.625H20.5837ZM9.66666 12.292C9.11438 12.292 8.66666 12.7397 8.66666 13.292V20.542L8.67155 20.6445C8.72303 21.1485 9.1491 21.542 9.66666 21.542C10.1842 21.542 10.6103 21.1485 10.6618 20.6445L10.6667 20.542V13.292C10.6667 12.7397 10.2189 12.292 9.66666 12.292ZM19.3337 9.875C18.7814 9.875 18.3337 10.3227 18.3337 10.875V20.542L18.3385 20.6436C18.3896 21.148 18.8158 21.542 19.3337 21.542C19.8514 21.5418 20.2778 21.1479 20.3288 20.6436L20.3337 20.542V10.875C20.3337 10.3228 19.8858 9.87518 19.3337 9.875ZM14.4997 14.708C13.9476 14.7082 13.4998 15.156 13.4997 15.708V20.541L13.5046 20.6436C13.5557 21.1477 13.982 21.5408 14.4997 21.541C15.0175 21.541 15.4436 21.1478 15.4948 20.6436L15.4997 20.541V15.708C15.4995 15.1559 15.0518 14.708 14.4997 14.708Z",fill:"white"})],-1),p("span",null,"Trainings",-1)])),p("div",{class:"icon",onClick:s},o[10]||(o[10]=[p("svg",{width:"29",height:"29",viewBox:"0 0 29 29",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M3.625 7.625C3.625 5.41586 5.41586 3.625 7.625 3.625H21.375C23.5841 3.625 25.375 5.41586 25.375 7.625V21.375C25.375 23.5841 23.5841 25.375 21.375 25.375H7.625C5.41586 25.375 3.625 23.5841 3.625 21.375V7.625Z",stroke:"white","stroke-width":"2"}),p("path",{d:"M14.5 9.6665L14.5 19.3332",stroke:"white","stroke-width":"2","stroke-linecap":"square","stroke-linejoin":"round"}),p("path",{d:"M19.3333 14.5L9.66666 14.5",stroke:"white","stroke-width":"2","stroke-linecap":"square","stroke-linejoin":"round"})],-1),p("span",null,"Post",-1)])),Ce(dr,{name:"fade"},{default:hs(()=>[t.value&&e.value?(j(),z("div",Dit,[p("button",{onClick:o[2]||(o[2]=a=>r.$router.push("/post-career"))},"Post Career"),p("button",{onClick:o[3]||(o[3]=a=>r.$router.push("/post-training"))},"Post Training")])):Ct("",!0)]),_:1}),p("div",{class:"icon",onClick:o[4]||(o[4]=a=>r.$router.push("/career"))},o[11]||(o[11]=[p("svg",{width:"25",height:"25",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M22.8798 11.0484C23.4046 10.8642 23.9845 11.1431 24.1081 11.6855C24.4792 13.3134 24.4217 15.0018 23.9268 16.6191C23.4739 18.0989 22.6698 19.4685 21.5787 20.6449C21.2148 21.0372 20.6017 21.0197 20.2239 20.6408L14.9487 15.3495C14.4292 14.8284 14.6314 13.9436 15.3257 13.6999L22.8798 11.0484ZM13 4.0826C13 3.50231 13.4932 3.04057 14.0672 3.12592C15.8633 3.39302 17.5788 4.00579 19.085 4.93161C20.3794 5.72731 21.4793 6.72976 22.3343 7.87824C22.709 8.38157 22.4513 9.07932 21.8592 9.28718L14.3313 11.9301C13.6809 12.1584 13 11.6758 13 10.9865V4.0826Z",fill:"white"}),p("path",{d:"M11.9511 13.2908C11.9512 13.5763 12.0581 13.8518 12.25 14.0632L19.2677 21.7886C19.6714 22.233 19.5963 22.9337 19.0759 23.2331C18.245 23.7112 17.354 24.0924 16.4209 24.365C14.5402 24.9144 12.5476 25.0087 10.6201 24.6394C8.69236 24.2701 6.88846 23.4478 5.36911 22.2468C3.84993 21.0459 2.66126 19.5025 1.90915 17.7537C1.15711 16.0048 0.864996 14.1043 1.05759 12.2205C1.25024 10.3365 1.92171 8.52693 3.01364 6.95288C4.1056 5.37884 5.58398 4.08845 7.31735 3.19605C8.43484 2.62073 9.63633 2.22318 10.8757 2.01305C11.4515 1.91541 11.9511 2.37876 11.9511 2.96284V13.2908Z",fill:"white"})],-1),p("span",null,"Career",-1)])),p("div",{class:"icon",onClick:o[5]||(o[5]=a=>r.$router.push("/profile"))},o[12]||(o[12]=[p("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6001 9.6C15.6001 11.5882 13.9884 13.2 12.0001 13.2C10.0119 13.2 8.40015 11.5882 8.40015 9.6C8.40015 7.61177 10.0119 6 12.0001 6C13.9884 6 15.6001 7.61177 15.6001 9.6ZM14.4001 9.6C14.4001 10.9255 13.3256 12 12.0001 12C10.6747 12 9.60015 10.9255 9.60015 9.6C9.60015 8.27452 10.6747 7.2 12.0001 7.2C13.3256 7.2 14.4001 8.27452 14.4001 9.6Z",fill:"white"}),p("path",{d:"M12.0001 15C8.11552 15 4.80571 17.297 3.54492 20.5152C3.85206 20.8202 4.1756 21.1087 4.51412 21.3792C5.45296 18.4246 8.39818 16.2 12.0001 16.2C15.6021 16.2 18.5473 18.4246 19.4862 21.3792C19.8247 21.1087 20.1482 20.8202 20.4554 20.5152C19.1946 17.2971 15.8848 15 12.0001 15Z",fill:"white"})],-1),p("span",null,"Profile",-1)])),o[14]||(o[14]=p("div",{class:"spacer"},null,-1)),o[15]||(o[15]=p("div",{class:"spacer"},null,-1)),p("div",{class:"icon signout",onClick:i},o[13]||(o[13]=[p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[p("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),p("polyline",{points:"16 17 21 12 16 7"}),p("line",{x1:"21",y1:"12",x2:"9",y2:"12"})],-1),p("span",null,"Sign Out",-1)]))],34)]),_:1})]))}},Rit=gr(Mit,[["__scopeId","data-v-16e0db1b"]]),Nit={class:"organization-homepage"},Oit={class:"avatar"},Fit=["src"],$it={key:0,class:"profile-section"},Bit={class:"org-name"},jit={class:"profile-actions"},Uit={class:"content"},zit={class:"update-profile-container"},Hit={class:"input-group"},Vit={class:"input-group"},qit={class:"input-group"},Wit={class:"input-group"},Git={class:"input-group"},Yit={class:"input-group"},Kit={name:"OrganizationHomePage",data(){return{dictLogo:fo}},setup(){ut(!0);const n=ut("Loading...");je(()=>{const t=localStorage.getItem("organizationName");n.value=t||"My Organization"})}},Xit=Object.assign(Kit,{setup(n){const t=gi(),e=ut({organizationName:"",organizationLocation:"",organizationWebsiteURL:"",organizationPhoneNumber:"",organizationPassword:"",organizationConfirmPassword:""}),s=ut(!0),i=()=>{s.value=!s.value},r=ut("Loading...");je(()=>{const c=localStorage.getItem("user");if(c){const u=JSON.parse(c);r.value=u.organizationName||u.displayName||u.name||"Unknown Org"}o()});const o=async()=>{const c=localStorage.getItem("token");if(!c){alert("Please log in again."),t.push({name:"OrgLogin"});return}try{const d=(await At.get("https://pathfinder-development-production.up.railway.app/api/organization/details",{headers:{Authorization:`Bearer ${c}`}})).data.organization;e.value.organizationName=d.organizationName||"",e.value.organizationLocation=d.location||"",e.value.organizationWebsiteURL=d.websiteURL||"",e.value.organizationPhoneNumber=d.phoneNumber||"",e.value.organizationPassword="",e.value.organizationConfirmPassword=""}catch(u){console.error("Error fetching organization details:",u),alert("Failed to load organization details.")}},a=c=>{t.push(c)},l=()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),t.push({name:"OrgLogin"})};return(c,u)=>(j(),z("div",Nit,[p("button",{class:fe(["hamburger",{open:s.value,shifted:s.value}]),onClick:i},u[12]||(u[12]=[p("span",null,null,-1),p("span",null,null,-1),p("span",null,null,-1)]),2),Ce(dr,{name:"slide"},{default:hs(()=>[p("aside",{class:fe(["sidebar",{collapsed:!s.value}])},[u[19]||(u[19]=p("div",{class:"space"},null,-1)),p("div",Oit,[p("img",{src:Qe(fo),alt:"DICT Logo",class:"avatar-img"},null,8,Fit)]),Ce(dr,{name:"fade"},{default:hs(()=>[s.value?(j(),z("div",$it,[p("h3",Bit,J(r.value),1),p("div",jit,[p("div",{class:"action",onClick:u[0]||(u[0]=d=>a({name:"OrgUpdateProfile"}))},u[13]||(u[13]=[p("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M11.7278 8.27191C12.7534 9.87525 14.1247 11.2375 15.7464 12.2534L8.85673 19.144C8.43166 19.569 8.21841 19.7816 7.95731 19.9213C7.69637 20.0609 7.40171 20.1199 6.81278 20.2377L3.73563 20.853C3.40302 20.9195 3.23649 20.9525 3.14188 20.8578C3.04759 20.7632 3.08035 20.5971 3.14677 20.2651L3.76298 17.1879C3.88087 16.5985 3.93965 16.3035 4.07938 16.0424C4.21912 15.7814 4.43173 15.569 4.85673 15.144L11.7278 8.27191ZM16.1116 4.03656C16.6711 3.75929 17.3284 3.75931 17.888 4.03656C18.1821 4.18229 18.455 4.45518 19.0003 5.00043C19.5453 5.54545 19.8184 5.81774 19.9641 6.11175C20.2414 6.67123 20.2413 7.32861 19.9641 7.88812C19.8184 8.18221 19.5455 8.45517 19.0003 9.00043L17.2034 10.7963C15.5308 9.84498 14.1456 8.46859 13.1819 6.81781L15.0003 5.00043C15.5453 4.45539 15.8176 4.18234 16.1116 4.03656Z",fill:"#FFFDFD"})],-1),p("span",null,"Update Profile",-1)]))])])):Ct("",!0)]),_:1}),p("div",{class:"icon",onClick:u[1]||(u[1]=d=>a("/organization"))},u[14]||(u[14]=[p("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M6.25 17.0585C6.25 16.0494 6.25 15.5448 6.47166 15.1141C6.69333 14.6833 7.1039 14.3901 7.92505 13.8035L13.8375 9.58034C14.3989 9.17938 14.6795 8.9789 15 8.9789C15.3205 8.9789 15.6011 9.17938 16.1625 9.58034L22.075 13.8035C22.8961 14.3901 23.3067 14.6833 23.5283 15.1141C23.75 15.5448 23.75 16.0494 23.75 17.0585V24.25C23.75 25.1928 23.75 25.6642 23.4571 25.9571C23.1642 26.25 22.6928 26.25 21.75 26.25H8.25C7.30719 26.25 6.83579 26.25 6.54289 25.9571C6.25 25.6642 6.25 25.1928 6.25 24.25V17.0585Z",fill:"white"}),p("path",{d:"M3.75 15.6366C3.75 15.9035 3.75 16.0369 3.8341 16.0781C3.91819 16.1192 4.02352 16.0373 4.23418 15.8734L13.7721 8.45502C14.362 7.99625 14.6569 7.76686 15 7.76686C15.3431 7.76686 15.638 7.99625 16.2279 8.45502L25.7658 15.8734C25.9765 16.0373 26.0818 16.1192 26.1659 16.0781C26.25 16.0369 26.25 15.9035 26.25 15.6366V14.7282C26.25 14.2478 26.25 14.0076 26.1483 13.7997C26.0466 13.5918 25.857 13.4444 25.4779 13.1495L16.2279 5.95502C15.638 5.49625 15.3431 5.26686 15 5.26686C14.6569 5.26686 14.362 5.49625 13.7721 5.95502L4.52212 13.1495C4.14295 13.4444 3.95337 13.5918 3.85168 13.7997C3.75 14.0076 3.75 14.2478 3.75 14.7282V15.6366Z",fill:"white"}),p("path",{d:"M16.125 18.75H13.875C12.7704 18.75 11.875 19.6454 11.875 20.75V26.1C11.875 26.1828 11.9422 26.25 12.025 26.25H17.975C18.0578 26.25 18.125 26.1828 18.125 26.1V20.75C18.125 19.6454 17.2296 18.75 16.125 18.75Z",fill:"white"}),p("rect",{x:"20",y:"6.25",width:"2.5",height:"5",rx:"0.5",fill:"white"})],-1),p("span",null,"Home",-1)])),p("div",{class:"icon",onClick:u[2]||(u[2]=d=>a({name:"OrgTrainings"}))},u[15]||(u[15]=[p("svg",{width:"29",height:"29",viewBox:"0 0 29 29",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M20.5837 3.625C23.4119 3.625 24.8261 3.62526 25.7048 4.50391C26.5833 5.3826 26.5837 6.79675 26.5837 9.625V19.375C26.5837 22.2033 26.5833 23.6174 25.7048 24.4961C24.8261 25.3747 23.4119 25.375 20.5837 25.375H8.41666C5.58824 25.375 4.17425 25.3748 3.29557 24.4961C2.41689 23.6174 2.41666 22.2034 2.41666 19.375V9.625C2.41666 6.79657 2.41689 5.38259 3.29557 4.50391C4.17425 3.62523 5.58824 3.625 8.41666 3.625H20.5837ZM9.66666 12.292C9.11438 12.292 8.66666 12.7397 8.66666 13.292V20.542L8.67155 20.6445C8.72303 21.1485 9.1491 21.542 9.66666 21.542C10.1842 21.542 10.6103 21.1485 10.6618 20.6445L10.6667 20.542V13.292C10.6667 12.7397 10.2189 12.292 9.66666 12.292ZM19.3337 9.875C18.7814 9.875 18.3337 10.3227 18.3337 10.875V20.542L18.3385 20.6436C18.3896 21.148 18.8158 21.542 19.3337 21.542C19.8514 21.5418 20.2778 21.1479 20.3288 20.6436L20.3337 20.542V10.875C20.3337 10.3228 19.8858 9.87518 19.3337 9.875ZM14.4997 14.708C13.9476 14.7082 13.4998 15.156 13.4997 15.708V20.541L13.5046 20.6436C13.5557 21.1477 13.982 21.5408 14.4997 21.541C15.0175 21.541 15.4436 21.1478 15.4948 20.6436L15.4997 20.541V15.708C15.4995 15.1559 15.0518 14.708 14.4997 14.708Z",fill:"white"})],-1),p("span",null,"Trainings",-1)])),p("div",{class:"icon",onClick:u[3]||(u[3]=d=>a({name:"OrgCareers"}))},u[16]||(u[16]=[p("svg",{width:"25",height:"25",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M22.8798 11.0484C23.4046 10.8642 23.9845 11.1431 24.1081 11.6855C24.4792 13.3134 24.4217 15.0018 23.9268 16.6191C23.4739 18.0989 22.6698 19.4685 21.5787 20.6449C21.2148 21.0372 20.6017 21.0197 20.2239 20.6408L14.9487 15.3495C14.4292 14.8284 14.6314 13.9436 15.3257 13.6999L22.8798 11.0484ZM13 4.0826C13 3.50231 13.4932 3.04057 14.0672 3.12592C15.8633 3.39302 17.5788 4.00579 19.085 4.93161C20.3794 5.72731 21.4793 6.72976 22.3343 7.87824C22.709 8.38157 22.4513 9.07932 21.8592 9.28718L14.3313 11.9301C13.6809 12.1584 13 11.6758 13 10.9865V4.0826Z",fill:"white"}),p("path",{d:"M11.9511 13.2908C11.9512 13.5763 12.0581 13.8518 12.25 14.0632L19.2677 21.7886C19.6714 22.233 19.5963 22.9337 19.0759 23.2331C18.245 23.7112 17.354 24.0924 16.4209 24.365C14.5402 24.9144 12.5476 25.0087 10.6201 24.6394C8.69236 24.2701 6.88846 23.4478 5.36911 22.2468C3.84993 21.0459 2.66126 19.5025 1.90915 17.7537C1.15711 16.0048 0.864996 14.1043 1.05759 12.2205C1.25024 10.3365 1.92171 8.52693 3.01364 6.95288C4.1056 5.37884 5.58398 4.08845 7.31735 3.19605C8.43484 2.62073 9.63633 2.22318 10.8757 2.01305C11.4515 1.91541 11.9511 2.37876 11.9511 2.96284V13.2908Z",fill:"white"})],-1),p("span",null,"Career",-1)])),p("div",{class:"icon",onClick:u[4]||(u[4]=d=>a({name:"OrgCalendar"}))},u[17]||(u[17]=[p("svg",{width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M2.16675 9.4165C2.16675 7.53089 2.16675 6.58808 2.75253 6.00229C3.33832 5.4165 4.28113 5.4165 6.16675 5.4165H19.8334C21.719 5.4165 22.6618 5.4165 23.2476 6.00229C23.8334 6.58808 23.8334 7.53089 23.8334 9.4165V9.83317C23.8334 10.3046 23.8334 10.5403 23.687 10.6867C23.5405 10.8332 23.3048 10.8332 22.8334 10.8332H3.16675C2.69534 10.8332 2.45964 10.8332 2.31319 10.6867C2.16675 10.5403 2.16675 10.3046 2.16675 9.83317V9.4165Z",fill:"white"}),p("path",{d:"M22.833 13C23.3042 13 23.5401 13.0002 23.6865 13.1465C23.833 13.2929 23.833 13.5286 23.833 14V19.833C23.833 21.7186 23.8329 22.6613 23.2471 23.2471C22.6613 23.8329 21.7186 23.833 19.833 23.833H6.16699C4.28137 23.833 3.33872 23.8329 2.75293 23.2471C2.16714 22.6613 2.16699 21.7186 2.16699 19.833V14C2.16699 13.5286 2.16703 13.2929 2.31348 13.1465C2.45994 13.0002 2.69576 13 3.16699 13H22.833ZM8.58301 19.5C8.11182 19.5 7.87591 19.5001 7.72949 19.6465C7.58321 19.7929 7.58301 20.0288 7.58301 20.5V20.667C7.58301 21.1382 7.58308 21.3741 7.72949 21.5205C7.87591 21.6669 8.11182 21.667 8.58301 21.667H10.917C11.3882 21.667 11.6241 21.6669 11.7705 21.5205C11.9169 21.3741 11.917 21.1382 11.917 20.667V20.5C11.917 20.0288 11.9168 19.7929 11.7705 19.6465C11.6241 19.5001 11.3882 19.5 10.917 19.5H8.58301ZM15.083 19.5C14.6118 19.5 14.3759 19.5001 14.2295 19.6465C14.0832 19.7929 14.083 20.0288 14.083 20.5V20.667C14.083 21.1382 14.0831 21.3741 14.2295 21.5205C14.3759 21.6669 14.6118 21.667 15.083 21.667H17.417C17.8882 21.667 18.1241 21.6669 18.2705 21.5205C18.4169 21.3741 18.417 21.1382 18.417 20.667V20.5C18.417 20.0288 18.4168 19.7929 18.2705 19.6465C18.1241 19.5001 17.8882 19.5 17.417 19.5H15.083ZM8.58301 15.167C8.11182 15.167 7.87591 15.1671 7.72949 15.3135C7.58337 15.4599 7.58301 15.6959 7.58301 16.167V16.333C7.58301 16.8041 7.58337 17.0401 7.72949 17.1865C7.87591 17.3329 8.11182 17.333 8.58301 17.333H10.917C11.3882 17.333 11.6241 17.3329 11.7705 17.1865C11.9166 17.0401 11.917 16.8041 11.917 16.333V16.167C11.917 15.6959 11.9166 15.4599 11.7705 15.3135C11.6241 15.1671 11.3882 15.167 10.917 15.167H8.58301ZM15.083 15.167C14.6118 15.167 14.3759 15.1671 14.2295 15.3135C14.0834 15.4599 14.083 15.6959 14.083 16.167V16.333C14.083 16.8041 14.0834 17.0401 14.2295 17.1865C14.3759 17.3329 14.6118 17.333 15.083 17.333H17.417C17.8882 17.333 18.1241 17.3329 18.2705 17.1865C18.4166 17.0401 18.417 16.8041 18.417 16.333V16.167C18.417 15.6959 18.4166 15.4599 18.2705 15.3135C18.1241 15.1671 17.8882 15.167 17.417 15.167H15.083Z",fill:"white"}),p("path",{d:"M7.58325 3.25L7.58325 6.5",stroke:"white","stroke-width":"2","stroke-linecap":"round"}),p("path",{d:"M18.4167 3.25L18.4167 6.5",stroke:"white","stroke-width":"2","stroke-linecap":"round"})],-1),p("span",null,"Calendar",-1)])),u[20]||(u[20]=p("div",{class:"spacer"},null,-1)),p("div",{class:"icon signout",onClick:l},u[18]||(u[18]=[p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[p("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),p("polyline",{points:"16 17 21 12 16 7"}),p("line",{x1:"21",y1:"12",x2:"9",y2:"12"})],-1),p("span",null,"Sign Out",-1)]))],2)]),_:1}),p("main",Uit,[u[29]||(u[29]=p("header",{class:"topbar"},[p("div",{class:"Pathfinder-wrapper"},[p("span",{class:"logo-text"},"Pathfinder")])],-1)),p("div",zit,[u[28]||(u[28]=p("h2",{class:"update-title"},"Update Account",-1)),p("form",{onSubmit:u[11]||(u[11]=me((...d)=>c.updateAccount&&c.updateAccount(...d),["prevent"]))},[p("div",Hit,[u[21]||(u[21]=p("label",null,"Organization Name",-1)),Ut(p("input",{type:"text","onUpdate:modelValue":u[5]||(u[5]=d=>e.value.organizationName=d),placeholder:"Enter organization name"},null,512),[[Wt,e.value.organizationName]])]),p("div",Vit,[u[22]||(u[22]=p("label",null,"Location",-1)),Ut(p("input",{type:"text","onUpdate:modelValue":u[6]||(u[6]=d=>e.value.organizationLocation=d),placeholder:"Enter location"},null,512),[[Wt,e.value.organizationLocation]])]),p("div",qit,[u[23]||(u[23]=p("label",null,"Website URL",-1)),Ut(p("input",{type:"text","onUpdate:modelValue":u[7]||(u[7]=d=>e.value.organizationWebsiteURL=d),placeholder:"Enter website URL"},null,512),[[Wt,e.value.organizationWebsiteURL]])]),p("div",Wit,[u[24]||(u[24]=p("label",null,"Phone Number",-1)),Ut(p("input",{type:"text","onUpdate:modelValue":u[8]||(u[8]=d=>e.value.organizationPhoneNumber=d),placeholder:"Enter phone number"},null,512),[[Wt,e.value.organizationPhoneNumber]])]),p("div",Git,[u[25]||(u[25]=p("label",null,"Password",-1)),Ut(p("input",{type:"text","onUpdate:modelValue":u[9]||(u[9]=d=>e.value.organizationPassword=d),placeholder:"Enter password"},null,512),[[Wt,e.value.organizationPassword]])]),p("div",Yit,[u[26]||(u[26]=p("label",null,"Confirm Password",-1)),Ut(p("input",{type:"text","onUpdate:modelValue":u[10]||(u[10]=d=>e.value.organizationConfirmPassword=d),placeholder:"Enter confirm password"},null,512),[[Wt,e.value.organizationConfirmPassword]])]),u[27]||(u[27]=p("button",{type:"submit",class:"save-btn"},"Save Changes",-1))],32)])])]))}}),Zit=gr(Xit,[["__scopeId","data-v-321a362b"]]),Jit={class:"min-h-screen p-3 rounded-lg font-poppins bg-gray-50"},Qit={class:"bg-white rounded-lg shadow p-6 flex-1"},trt={class:"mt-4"},ert={key:0,class:"space-y-4"},nrt=["onClick"],srt={class:"text-md font-medium"},irt={class:"flex space-x-2"},rrt=["onClick"],ort=["onClick"],art={key:1,class:"text-gray-500 italic"},lrt={key:0,class:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-20"},crt={class:"bg-white rounded-lg shadow-lg w-full max-w-md p-6 relative"},urt={class:"space-y-2"},drt=["href"],hrt={class:"mt-6 flex justify-end space-x-2"},frt={key:1,class:"fixed inset-0 z-50 bg-black bg-opacity-30 flex items-center justify-center"},prt={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md relative"},grt={class:"mt-4 flex justify-end space-x-2"},mrt={__name:"AdminHomepage",setup(n){const t=ut([]),e=ut(null),s=ut(!1),i=ut(""),r=ut(null);function o(d){r.value=d,i.value="",s.value=!0}async function a(){if(!i.value.trim()){alert("Please enter a reason.");return}try{await At.post(`https://pathfinder-development-production.up.railway.app/api/organization/${r.value}/reject`,{reason:i.value}),t.value=t.value.filter(d=>d.organizationID!==r.value),s.value=!1,i.value="",r.value=null,showToast("Organization rejected successfully.")}catch(d){console.error("Rejection failed:",d.response?.data||d.message),showToast("Failed to reject organization.")}}async function l(){try{const d=await At.get("https://pathfinder-development-production.up.railway.app/api/admin/pending-organizations");t.value=d.data}catch(d){console.error("Error loading organizations:",d)}}function c(d){e.value=d}async function u(d){try{await At.post(`https://pathfinder-development-production.up.railway.app/api/organization/${d}/approve`),t.value=t.value.filter(f=>f.organizationID!==d),e.value=null}catch(f){console.error("Approval failed:",f)}}return je(()=>{l()}),(d,f)=>(j(),z("div",Jit,[p("div",Qit,[f[6]||(f[6]=p("header",{class:"sticky top-0 z-10 h-16 text-black flex items-center px-4"},[p("h1",null,[p("span",{class:"block text-sm"},"Organization Account"),p("span",{class:"block font-bold text-3xl"},"Verification")])],-1)),p("section",trt,[t.value.length?(j(),z("div",ert,[(j(!0),z(Kt,null,pe(t.value,h=>(j(),z("div",{key:h.organizationID,onClick:g=>c(h),class:"p-2 border rounded-lg cursor-pointer hover:bg-gray-50 flex justify-between items-center"},[p("div",null,[p("h3",srt,J(h.organizationName??h.name),1)]),p("div",irt,[p("button",{onClick:me(g=>u(h.organizationID),["stop"]),class:"px-4 py-2 text-white bg-customButton hover:bg-dark-slate rounded-lg transition"}," Accept ",8,rrt),p("button",{onClick:me(g=>o(h.organizationID),["stop"]),class:"px-4 py-2 text-black bg-gray-400 hover:bg-gray-500 rounded-lg transition"}," Reject ",8,ort)])],8,nrt))),128))])):(j(),z("p",art," No organizations waiting for verification. "))])]),e.value?(j(),z("div",lrt,[p("div",crt,[p("button",{onClick:f[0]||(f[0]=h=>e.value=null),class:"absolute top-3 right-3 text-gray-400 hover:text-gray-600"},"  "),f[11]||(f[11]=p("h2",{class:"text-xl font-semibold mb-4"},"Organization Details",-1)),p("div",urt,[p("p",null,[f[7]||(f[7]=p("strong",null,"Name:",-1)),Dt(" "+J(e.value.organizationName??e.value.name),1)]),p("p",null,[f[8]||(f[8]=p("strong",null,"Location:",-1)),Dt(" "+J(e.value.location),1)]),p("p",null,[f[9]||(f[9]=p("strong",null,"Website:",-1)),p("a",{href:e.value.websiteURL,target:"_blank",class:"text-blue-600 underline"},J(e.value.websiteURL),9,drt)]),p("p",null,[f[10]||(f[10]=p("strong",null,"Email:",-1)),Dt(" "+J(e.value.emailAddress),1)])]),p("div",hrt,[p("button",{onClick:f[1]||(f[1]=h=>o(e.value.organizationID)),class:"px-4 py-2 text-black bg-gray-400 hover:bg-gray-500 rounded-lg"}," Reject "),p("button",{onClick:f[2]||(f[2]=h=>u(e.value.organizationID)),class:"px-4 py-2 text-white bg-customButton hover:bg-dark-slate rounded-lg"}," Accept ")])])])):Ct("",!0),s.value?(j(),z("div",frt,[p("div",prt,[p("button",{onClick:f[3]||(f[3]=h=>s.value=!1),class:"absolute top-3 right-3 text-gray-400 hover:text-gray-600"},"  "),f[12]||(f[12]=p("h2",{class:"text-xl font-semibold mb-4"},"Reject Organization",-1)),f[13]||(f[13]=p("label",{class:"block mb-2 font-medium"},"Reason for rejection:",-1)),Ut(p("textarea",{"onUpdate:modelValue":f[4]||(f[4]=h=>i.value=h),class:"w-full border p-2 rounded-md",rows:"4",placeholder:"Enter reason..."},null,512),[[Wt,i.value]]),p("div",grt,[p("button",{onClick:f[5]||(f[5]=h=>s.value=!1),class:"px-4 py-2 bg-gray-400 hover:bg-gray-500 text-black rounded-lg"}," Cancel "),p("button",{onClick:a,class:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg"}," Submit ")])])])):Ct("",!0)]))}},brt=gr(mrt,[["__scopeId","data-v-d859f9c5"]]),vrt={class:"flex flex-col items-center justify-center min-h-screen text-center px-4"},yrt={key:0},wrt={key:1,class:"text-red-600 font-semibold"},_rt={key:2,class:"mb-4 p-4 border rounded w-full max-w-md bg-gray-50 text-left"},xrt={class:"text-xl font-semibold mb-1"},Crt={class:"mb-1"},krt={class:"text-sm text-gray-600 mb-1"},Art={class:"text-sm text-gray-600 mb-1"},Srt={key:0,class:"text-sm text-gray-600 mb-1"},Ert={key:1,class:"text-sm text-gray-600 mb-1"},Trt=["href"],Lrt={class:"text-sm text-gray-600"},Prt={key:2,class:"text-sm text-gray-600 mt-1"},Irt=["href"],Drt={class:"form-control"},Mrt={class:"form-control"},Rrt={class:"form-control"},Nrt={class:"form-control"},Ort=["disabled"],Frt={class:"text-xl"},$rt={class:"font-medium"},Brt={__name:"AttendanceChecking",setup(n){const t=Yh(),e=ut(null),s=ut(null),i=ut(null),r=ut(""),o=ut(""),a=ut(""),l=ut(""),c=ut(""),u=ut(!0),d=ut(""),f=ut(!1),h=ut(!1),g=cn(()=>h.value?"bg-green-100 text-green-800 border border-green-400":"bg-red-100 text-red-800 border border-red-400"),m=cn(()=>h.value?"":"");je(async()=>{if(e.value=t.query.trainingID,s.value=t.query.key,!e.value||!s.value){d.value=" Invalid or incomplete QR code.",u.value=!1;return}try{const x=await At.get(`https://pathfinder-development-production.up.railway.app/api/training/${e.value}`);i.value=x.data}catch{d.value=" Failed to load training information. Please check the link or try again."}finally{u.value=!1}});function b(x){return x?new Date(x).toLocaleString("en-PH",{timeZone:"Asia/Manila",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):""}async function y(){if(!r.value||!o.value||!a.value||!l.value){c.value=" All fields are required.",h.value=!1,f.value=!0;return}try{const x=await At.post("https://pathfinder-development-production.up.railway.app/api/attendance/checkin",{trainingID:e.value,key:s.value,firstName:r.value,lastName:o.value,emailAddress:a.value,phoneNumber:l.value});c.value=x.data.message||" Attendance Recorded Successfully",h.value=!0,f.value=!0}catch(x){c.value=x.response?.data?.message||" Attendance submission failed.",h.value=!1,f.value=!0}}return(x,_)=>(j(),z("div",vrt,[_[11]||(_[11]=p("h1",{class:"text-2xl font-bold mb-4"},"Attendance Check-In",-1)),u.value?(j(),z("p",yrt,"Checking QR code and loading training...")):Ct("",!0),d.value?(j(),z("p",wrt,J(d.value),1)):Ct("",!0),i.value&&!u.value?(j(),z("div",_rt,[p("h2",xrt,J(i.value.title),1),p("p",Crt,J(i.value.description),1),p("p",krt,[_[4]||(_[4]=p("strong",null,"Schedule:",-1)),Dt(" "+J(b(i.value.schedule))+" to "+J(b(i.value.end_time)),1)]),p("p",Art,[_[5]||(_[5]=p("strong",null,"Mode:",-1)),Dt(" "+J(i.value.mode),1)]),i.value.location?(j(),z("p",Srt,[_[6]||(_[6]=p("strong",null,"Location:",-1)),Dt(" "+J(i.value.location),1)])):Ct("",!0),i.value.trainingLink?(j(),z("p",Ert,[_[7]||(_[7]=p("strong",null,"Training Link:",-1)),p("a",{href:i.value.trainingLink,target:"_blank",class:"underline text-blue-600"},J(i.value.trainingLink),9,Trt)])):Ct("",!0),p("p",Lrt,[_[8]||(_[8]=p("strong",null,"Organization:",-1)),Dt(" "+J(i.value.organization?.name||"Unknown"),1)]),i.value.attendance_link?(j(),z("p",Prt,[_[9]||(_[9]=p("strong",null,"Attendance Link:",-1)),p("a",{href:i.value.attendance_link,target:"_blank",class:"underline text-blue-600"},J(i.value.attendance_link),9,Irt)])):Ct("",!0)])):Ct("",!0),!u.value&&!f.value&&!d.value?(j(),z("form",{key:3,onSubmit:me(y,["prevent"]),class:"space-y-4 w-full max-w-md"},[_[10]||(_[10]=p("p",{class:"mb-2 text-left font-medium"},"Please enter your details to record attendance:",-1)),p("div",Drt,[Ut(p("input",{"onUpdate:modelValue":_[0]||(_[0]=C=>r.value=C),type:"text",placeholder:"First Name",class:"input w-full bg-gray-100 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",required:""},null,512),[[Wt,r.value]])]),p("div",Mrt,[Ut(p("input",{"onUpdate:modelValue":_[1]||(_[1]=C=>o.value=C),type:"text",placeholder:"Last Name",class:"input w-full bg-gray-100 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",required:""},null,512),[[Wt,o.value]])]),p("div",Rrt,[Ut(p("input",{"onUpdate:modelValue":_[2]||(_[2]=C=>a.value=C),type:"email",placeholder:"Email",class:"input w-full bg-gray-100 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",required:""},null,512),[[Wt,a.value]])]),p("div",Nrt,[Ut(p("input",{"onUpdate:modelValue":_[3]||(_[3]=C=>l.value=C),type:"text",placeholder:"Phone Number",class:"input w-full bg-gray-100 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",required:""},null,512),[[Wt,l.value]])]),p("button",{type:"submit",class:"btn w-full bg-customButton hover:bg-dark-slate text-white rounded-lg py-2",disabled:u.value}," Submit Attendance ",8,Ort)],32)):Ct("",!0),f.value?(j(),z("div",{key:4,class:fe([g.value,"mt-4 w-full max-w-md p-3 rounded shadow flex items-center space-x-2"])},[p("span",Frt,J(m.value),1),p("span",$rt,J(c.value),1)],2)):Ct("",!0)]))}},jrt={class:"min-h-screen p-3 rounded-lg font-poppins"},Urt={class:"min-h-screen font-poppins lg:flex"},zrt={class:"w-full lg:mt-0 lg:ml-0 flex flex-col gap-6"},Hrt={class:"bg-white rounded-lg shadow p-6 flex-1"},Vrt={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},qrt={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Wrt={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Grt={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},Yrt={class:"bg-white p-6 rounded-lg max-w-sm w-full"},Krt={class:"flex justify-end gap-2"},Xrt=["disabled"],Zrt=["disabled"],Jrt={__name:"AdminUpdateDelete",setup(n){const t=gi(),e=ut(!1),s=ut(!1),i=ut(0),r=ut(0),o=ut({firstName:"",middleName:"",lastName:"",address:"",emailAddress:"",phoneNumber:"",newPassword:"",currentPassword:""}),a=ut("");je(async()=>{l();try{const f=(await At.get("https://pathfinder-development-production.up.railway.app/api/user",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data;o.value={...o.value,firstName:f.firstName||f.first_name||"",middleName:f.middleName||f.middle_name||"",lastName:f.lastName||f.last_name||"",emailAddress:f.emailAddress||f.email||"",phoneNumber:f.phoneNumber||f.phone||"",address:f.address||""},a.value=`${o.value.firstName} ${o.value.lastName}`.trim(),localStorage.setItem("user",JSON.stringify(f))}catch(d){console.error("API failed, fallback to localStorage:",d);const f=localStorage.getItem("user");if(f){const h=JSON.parse(f);o.value={...o.value,firstName:h.firstName||h.first_name||"",middleName:h.middleName||h.middle_name||"",lastName:h.lastName||h.last_name||"",emailAddress:h.emailAddress||h.email||"",phoneNumber:h.phoneNumber||h.phone||"",address:h.address||""},a.value=`${o.value.firstName} ${o.value.lastName}`.trim()}}});async function l(){try{const d=localStorage.getItem("token");if(!d)return;const h=(await At.get("https://pathfinder-development-production.up.railway.app/api/registrations",{headers:{Authorization:`Bearer ${d}`}})).data||[];i.value=h.filter(g=>g.registrationStatus?.toLowerCase()==="upcoming"||g.registrationStatus?.toLowerCase()==="registered").length,r.value=h.filter(g=>g.registrationStatus?.toLowerCase()==="completed").length}catch(d){console.error(" Error fetching training counters:",d)}}const c=async()=>{if(!o.value.currentPassword){alert("You must enter your current password to save changes.");return}try{await At.put("https://pathfinder-development-production.up.railway.app/api/user",o.value,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),alert("Profile updated successfully!"),t.push("/homepage")}catch(d){alert(d.response?.data?.message||"Update failed.")}},u=async()=>{try{s.value=!0;const d=await At.delete("https://pathfinder-development-production.up.railway.app/api/user",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},data:{currentPassword:o.value.currentPassword}});alert(d.data.message),localStorage.removeItem("token"),localStorage.removeItem("user"),t.push("/auth/login")}catch(d){alert(d.response?.data?.message||"Deletion failed.")}finally{s.value=!1,e.value=!1}};return(d,f)=>(j(),z("div",jrt,[p("div",Urt,[p("div",zrt,[p("div",Hrt,[f[16]||(f[16]=p("header",{class:"sticky top-0 z-10 bg-white h-16 text-black flex items-center px-4"},[p("h1",{class:"text-3xl font-bold"},"Account Setting")],-1)),p("form",{onSubmit:me(c,["prevent"]),class:"space-y-4 pt-4"},[f[8]||(f[8]=p("div",{class:"divider sm:hidden"},null,-1)),p("div",Vrt,[Ut(p("input",{class:"border border-gray-300 input w-full",type:"text",placeholder:"Name","onUpdate:modelValue":f[0]||(f[0]=h=>o.value.name=h)},null,512),[[Wt,o.value.name]]),Ut(p("input",{class:"border border-gray-300 input w-full",type:"URL",placeholder:"Website URL","onUpdate:modelValue":f[1]||(f[1]=h=>o.value.websiteURL=h)},null,512),[[Wt,o.value.websiteURL]])]),f[9]||(f[9]=p("div",{class:"hidden lg:block h-px bg-gray-300"},null,-1)),p("div",qrt,[Ut(p("input",{class:"border border-gray-300 input w-full",type:"text",placeholder:"Location","onUpdate:modelValue":f[2]||(f[2]=h=>o.value.location=h)},null,512),[[Wt,o.value.location]]),Ut(p("input",{class:"border border-gray-300 input w-full text-gray-600",type:"email",placeholder:"Email","onUpdate:modelValue":f[3]||(f[3]=h=>o.value.emailAddress=h),readonly:""},null,512),[[Wt,o.value.emailAddress]])]),f[10]||(f[10]=p("div",{class:"hidden lg:block h-px bg-gray-300"},null,-1)),p("div",Wrt,[Ut(p("input",{type:"password",class:"border border-gray-300 input w-full",placeholder:"New Password (optional)","onUpdate:modelValue":f[4]||(f[4]=h=>o.value.newPassword=h)},null,512),[[Wt,o.value.newPassword]]),Ut(p("input",{type:"password",class:"border border-gray-300 input w-full",placeholder:"Confirm New Password","onUpdate:modelValue":f[5]||(f[5]=h=>o.value.confirmPassword=h)},null,512),[[Wt,o.value.confirmPassword]])]),f[11]||(f[11]=p("div",{class:"hidden lg:block h-px bg-gray-300"},null,-1)),p("div",null,[Ut(p("input",{type:"password",class:"border border-gray-300 input w-full",placeholder:"Confirm Password","onUpdate:modelValue":f[6]||(f[6]=h=>o.value.currentPassword=h),required:""},null,512),[[Wt,o.value.currentPassword]])]),f[12]||(f[12]=p("div",{class:"hidden lg:block h-px bg-gray-300"},null,-1)),f[13]||(f[13]=p("div",{class:"flex justify-end pt-6"},[p("button",{type:"submit",class:"btn bg-customButton hover:bg-dark-slate text-white w-full sm:w-auto"}," Save Changes ")],-1))],32),e.value?(j(),z("div",Grt,[p("div",Yrt,[f[14]||(f[14]=p("h2",{class:"text-lg font-semibold mb-4"}," Confirm Account Deletion ",-1)),f[15]||(f[15]=p("p",{class:"mb-4 text-sm"}," This action is irreversible. Are you sure you want to delete your account? ",-1)),p("div",Krt,[p("button",{class:"btn btn-sm",onClick:f[7]||(f[7]=h=>e.value=!1),disabled:s.value}," Cancel ",8,Xrt),p("button",{class:"btn btn-error btn-sm text-white",onClick:u,disabled:s.value},J(s.value?"Deleting...":"Delete"),9,Zrt)])])])):Ct("",!0)])])])]))}},Qrt={class:"flex-grow flex items-center justify-between p-4 font-poppins"},tot={class:"flex items-center justify-between p-4 w-full"},eot={class:"flex gap-8 flex-grow font-poppins pt-4 pb-3 pl-8"},not={class:"absolute top-2 right-6"},sot={class:"flex justify-center w-full"},iot={key:0,class:"absolute top-full left-0 mt-2 w-full bg-white border border-gray-200 rounded-lg shadow-md z-50 p-3 flex flex-col gap-3"},rot={key:0,class:"text-center text-gray-500 text-sm mt-2"},oot={key:1,class:"max-h-60 overflow-y-auto"},aot=["onMousedown"],lot={class:"font-semibold text-gray-800"},cot={class:"text-sm text-gray-500"},uot={class:"text-xs italic text-gray-400"},dot={class:"bg-white rounded-xl shadow-lg w-full max-w-4xl p-6 relative max-h-[80vh] overflow-auto"},hot={class:"w-full text-left border-separate border-spacing-y-2"},fot={class:"px-4 py-3 text-gray-800"},pot={class:"px-4 py-3 text-gray-800"},got={class:"px-4 py-3 text-gray-600"},mot={class:"px-4 py-3 text-gray-800"},bot={class:"px-4 py-3 flex items-center justify-center"},vot=["onClick"],yot={key:0,class:"text-center text-gray-500 py-6"},wot={class:"bg-white rounded-xl shadow-lg w-full max-w-md p-6 relative"},_ot={class:"mb-6 text-gray-600"},xot={class:"flex justify-end gap-3"},Cot={class:"bg-white rounded-xl shadow-lg w-full max-w-5xl p-6 relative max-h-[80vh] overflow-auto"},kot={class:"w-full text-left border-separate border-spacing-y-2"},Aot={class:"px-4 py-3 text-gray-800"},Sot={class:"px-4 py-3 text-gray-600"},Eot={class:"px-4 py-3 text-blue-500 underline"},Tot=["href"],Lot={class:"px-4 py-3 text-gray-600"},Pot={class:"px-4 py-3 flex items-center justify-center"},Iot=["onClick"],Dot={key:3,class:"fixed inset-0 flex items-center justify-center z-50"},Mot={class:"bg-white rounded-xl shadow-lg w-full max-w-md p-6 relative"},Rot={class:"mb-6"},Not={class:"flex justify-end gap-3"},Oot={class:"fixed top-4 right-4 space-y-2 z-50"},Fot={__name:"AdminTopbar",emits:["open-organization-modal","open-applicant-modal"],setup(n,{emit:t}){const e=Yh(),s=ut([]);async function i($){try{if(!(await fetch(`https://pathfinder-development-production.up.railway.app/apiadmin/applicants/${$}`,{method:"DELETE"})).ok)throw new Error("Failed to delete applicant");A.value=A.value.filter(W=>W.id!==$),R.value=!1,L.value=null}catch(q){console.error("Error deleting applicant:",q)}}const r=ut(!1),o=ut(null),a=ut([]),l=ut(null);ut([]);const c=ut(null);function u(){I.value="",a.value=[],r.value=!1}async function d($){if(r.value=!1,I.value="",$.type==="organization")x($),l.value=$;else if($.type==="applicant"){c.value=$;const W=await(await fetch("https://pathfinder-development-production.up.railway.app/api/admin/applicants")).json();A.value=W.map(F=>({id:F.applicantID||F.id,name:F.firstName&&F.lastName?`${F.firstName} ${F.lastName}`:F.name,email:F.emailAddress||F.email,location:F.address||F.location||"N/A",phone:F.phoneNumber||F.phone||"N/A"})),A.value.sort(F=>F.id===$.id?-1:0),C.value=!0}}async function f(){if(console.log("Searching for:",I.value),!I.value){a.value=[];return}try{const $=await fetch(`https://pathfinder-development-production.up.railway.app/api/admin/search?query=${encodeURIComponent(I.value)}`),q=$.headers.get("content-type");if(!q||!q.includes("application/json")){const F=await $.text();console.error(" Expected JSON, got:",F);return}const W=await $.json();a.value=W.map(F=>({id:F.ID,name:F.Name,location:F.Location,email:F.EmailAddress,type:F.Type.toLowerCase()}))}catch($){console.error("Search failed:",$)}}function h(){C.value=!1,c.value=null}const g=ut(!1),m=ut([]),b=ut(null);async function y(){try{const $=await fetch("https://pathfinder-development-production.up.railway.app/api/admin/organizations");if(!$.ok)throw new Error("Failed to fetch organizations");const q=await $.json();m.value=q.map(W=>({id:W.organizationID,name:W.name,location:W.location,websiteURL:W.websiteURL,emailAddress:W.emailAddress}))}catch($){console.error("Error fetching organizations:",$)}}async function x($=null){b.value=$,m.value.length||await y(),$&&m.value.sort(q=>q.id===$.id?-1:0),g.value=!0}function _(){g.value=!1,b.value=null}ut(!1),ut(!1),ut(null);const C=ut(!1),A=ut([]),I=ut(""),R=ut(!1),L=ut(null);function P($){L.value=$,R.value=!0}const V=ut(!1),T=ut(null);function D($){T.value=$,V.value=!0}async function K($){try{if(!(await fetch(`https://pathfinder-development-production.up.railway.app/api/admin/organizations/${$}`,{method:"DELETE"})).ok)throw new Error("Failed to delete organization");m.value=m.value.filter(W=>W.id!==$),V.value=!1,T.value=null}catch(q){console.error("Error deleting organization:",q)}}return($,q)=>(j(),z("div",Qrt,[p("div",tot,[p("button",{class:"text-xl font-bold font-poppins text-darkslategray whitespace-nowrap",onClick:q[0]||(q[0]=W=>$.$router.push({name:"AdminHomePage"}))}," Pathfinder "),p("div",eot,[p("button",{onClick:q[1]||(q[1]=W=>$.$router.push({name:"AdminHomePage"})),class:fe(["flex flex-col items-center justify-center transition-all duration-200",Qe(e).name==="AdminHomePage"?"text-dark-slate border-b-4 border-dark-slate":"text-gray-400 hover:text-dark-slate border-b-4 border-transparent "]),title:"Account Verification"},q[12]||(q[12]=[si('<svg class="w-8 h-8 mb-1" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" data-v-9654cb3d><rect width="24" height="24" fill="white" data-v-9654cb3d></rect><path d="M17.1 2H12.9C9.81693 2 8.37099 3.09409 8.06975 5.73901C8.00673 6.29235 8.465 6.75 9.02191 6.75H11.1C15.3 6.75 17.25 8.7 17.25 12.9V14.9781C17.25 15.535 17.7077 15.9933 18.261 15.9303C20.9059 15.629 22 14.1831 22 11.1V6.9C22 3.4 20.6 2 17.1 2Z" data-v-9654cb3d></path><path d="M11.1 8H6.9C3.4 8 2 9.4 2 12.9V17.1C2 20.6 3.4 22 6.9 22H11.1C14.6 22 16 20.6 16 17.1V12.9C16 9.4 14.6 8 11.1 8ZM12.29 13.65L8.58 17.36C8.44 17.5 8.26 17.57 8.07 17.57C7.88 17.57 7.7 17.5 7.56 17.36L5.7 15.5C5.42 15.22 5.42 14.77 5.7 14.49C5.98 14.21 6.43 14.21 6.71 14.49L8.06 15.84L11.27 12.63C11.55 12.35 12 12.35 12.28 12.63C12.56 12.91 12.57 13.37 12.29 13.65Z" data-v-9654cb3d></path></svg><span class="text-xs whitespace-nowrap" data-v-9654cb3d>Verification</span>',2)]),2),p("button",{onClick:q[2]||(q[2]=W=>$.$router.push({name:"AdminUpdateDelete"})),class:fe(["flex flex-col items-center justify-center transition-all duration-200",Qe(e).name==="AdminUpdateDelete"?"text-dark-slate border-b-4 border-dark-slate":"text-gray-400 hover:text-dark-slate border-b-4 border-transparent hover:dark-slate"]),title:"Account Settings"},q[13]||(q[13]=[p("svg",{class:"w-8 h-8 mb-1",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M20.1 9.21994C18.29 9.21994 17.55 7.93994 18.45 6.36994C18.97 5.45994 18.66 4.29994 17.75 3.77994L16.02 2.78994C15.23 2.31994 14.21 2.59994 13.74 3.38994L13.63 3.57994C12.73 5.14994 11.25 5.14994 10.34 3.57994L10.23 3.38994C9.78 2.59994 8.76 2.31994 7.97 2.78994L6.24 3.77994C5.33 4.29994 5.02 5.46994 5.54 6.37994C6.45 7.93994 5.71 9.21994 3.9 9.21994C2.86 9.21994 2 10.0699 2 11.1199V12.8799C2 13.9199 2.85 14.7799 3.9 14.7799C5.71 14.7799 6.45 16.0599 5.54 17.6299C5.02 18.5399 5.33 19.6999 6.24 20.2199L7.97 21.2099C8.76 21.6799 9.78 21.3999 10.25 20.6099L10.36 20.4199C11.26 18.8499 12.74 18.8499 13.65 20.4199L13.76 20.6099C14.23 21.3999 15.25 21.6799 16.04 21.2099L17.77 20.2199C18.68 19.6999 18.99 18.5299 18.47 17.6299C17.56 16.0599 18.3 14.7799 20.11 14.7799C21.15 14.7799 22.01 13.9299 22.01 12.8799V11.1199C22 10.0799 21.15 9.21994 20.1 9.21994ZM12 15.2499C10.21 15.2499 8.75 13.7899 8.75 11.9999C8.75 10.2099 10.21 8.74994 12 8.74994C13.79 8.74994 15.25 10.2099 15.25 11.9999C15.25 13.7899 13.79 15.2499 12 15.2499Z",fill:"currentColor"})],-1),p("span",{class:"text-xs whitespace-nowrap"},"Account Settings",-1)]),2)]),p("div",not,[p("button",{onClick:q[3]||(q[3]=(...W)=>$.logout&&$.logout(...W)),class:fe(["flex flex-col items-center justify-center transition-all duration-200",Qe(e).name==="Logout"?"text-dark-slate border-b-4 border-dark-slate":"text-gray-400 hover:text-dark-slate border-b-4 border-transparent hover:border-dark-slate"]),title:"Logout"},q[14]||(q[14]=[si('<svg class="w-8 h-8 mb-1" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-9654cb3d><path d="M21.4999 13V15.26C21.4999 19.73 19.7099 21.52 15.2399 21.52H15.1099C11.0899 21.52 9.23991 20.07 8.90991 16.53" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-9654cb3d></path><path d="M8.8999 7.55999C9.2099 3.95999 11.0599 2.48999 15.1099 2.48999H15.2399C19.7099 2.48999 21.4999 4.27999 21.4999 8.74999" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-9654cb3d></path><path d="M15.0001 12H3.62012" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-9654cb3d></path><path d="M5.85 8.65002L2.5 12L5.85 15.35" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-9654cb3d></path></svg><span class="text-xs" data-v-9654cb3d>Logout</span>',2)]),2)]),p("div",sot,[p("div",{ref_key:"searchContainer",ref:o,class:"relative w-full max-w-md ml-4 font-poppins"},[p("label",{class:"bg-blue-gray input w-full flex items-center gap-2 border-none rounded-full px-3 py-2 cursor-text",onClick:q[6]||(q[6]=W=>r.value=!0)},[q[15]||(q[15]=p("svg",{class:"h-5 w-5 text-gray-500 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[p("g",{"stroke-linejoin":"round","stroke-linecap":"round","stroke-width":"2.5",fill:"none",stroke:"darkslategray"},[p("circle",{cx:"11",cy:"11",r:"8"}),p("path",{d:"m21 21-4.3-4.3"})])],-1)),Ut(p("input",{type:"search",placeholder:"Search Applicants or Organizations...","onUpdate:modelValue":q[4]||(q[4]=W=>I.value=W),class:"flex-grow bg-transparent outline-none font-poppins",onFocus:q[5]||(q[5]=W=>r.value=!0),onInput:f},null,544),[[Wt,I.value]]),I.value?(j(),z("button",{key:0,type:"button",onClick:u,class:"absolute right-2 text-gray-400 hover:text-black"},"  ")):Ct("",!0)]),r.value&&(a.value.length||I.value)?(j(),z("div",iot,[!a.value.length&&I.value?(j(),z("div",rot," No results found. ")):(j(),z("div",oot,[(j(!0),z(Kt,null,pe(a.value,(W,F)=>(j(),z("div",{key:F,class:"p-2 hover:bg-gray-100 rounded cursor-pointer transition-all",onMousedown:me(O=>d(W),["prevent"])},[p("div",lot,J(W.name),1),p("div",cot,J(W.email||W.location),1),p("div",uot,J(W.type==="organization"?"Organization":"Applicant"),1)],40,aot))),128))]))])):Ct("",!0)],512)]),C.value?(j(),z("div",{key:0,class:"fixed inset-0 flex items-center justify-center z-50",onClick:me(h,["self"])},[p("div",dot,[p("button",{onClick:h,class:"absolute top-4 right-4 text-gray-400 hover:text-gray-700 text-2xl font-light"},"  "),q[17]||(q[17]=p("h2",{class:"text-2xl font-semibold mb-6 text-gray-800"}," All Applicants ",-1)),p("table",hot,[q[16]||(q[16]=p("thead",null,[p("tr",null,[p("th",{class:"text-left text-black font-medium px-4 py-2"},"Name"),p("th",{class:"text-left text-black font-medium px-4 py-2"}," Location "),p("th",{class:"text-left text-black font-medium px-4 py-2"}," Email "),p("th",{class:"text-left text-black font-medium px-4 py-2 whitespace-nowrap"}," Contact Number "),p("th",{class:"px-4 py-2"})])],-1)),p("tbody",null,[(j(!0),z(Kt,null,pe(A.value,W=>(j(),z("tr",{key:W.id,class:"bg-gray-50 hover:bg-gray-100 rounded-lg transition"},[p("td",fot,J(W.name),1),p("td",pot,J(W.location),1),p("td",got,J(W.email),1),p("td",mot,J(W.phone),1),p("td",bot,[p("button",{onClick:F=>P(W),class:"bg-gray-500 text-white text-sm px-4 py-2 rounded-md hover:bg-dark-slate transition"}," Delete ",8,vot)])]))),128))])]),A.value.length===0?(j(),z("div",yot," No applicants found. ")):Ct("",!0)])])):Ct("",!0),R.value?(j(),z("div",{key:1,class:"fixed inset-0 flex items-center justify-center z-50",onClick:q[9]||(q[9]=me(W=>R.value=!1,["self"]))},[p("div",wot,[q[20]||(q[20]=p("h2",{class:"text-xl font-semibold mb-4 text-gray-800"}," Confirm Deletion ",-1)),p("p",_ot,[q[18]||(q[18]=Dt(" Are you sure you want to delete ")),p("strong",null,J(L.value.name),1),q[19]||(q[19]=Dt("? "))]),p("div",xot,[p("button",{onClick:q[7]||(q[7]=W=>R.value=!1),class:"px-4 py-2 rounded-md border border-gray-300 hover:bg-gray-100"}," Cancel "),p("button",{onClick:q[8]||(q[8]=W=>i(L.value.id)),class:"bg-gray-500 text-white text-sm px-4 py-2 rounded-md hover:bg-dark-slate transition"}," Delete ")])])])):Ct("",!0),g.value?(j(),z("div",{key:2,class:"fixed inset-0 flex items-center justify-center z-50",onClick:me(_,["self"])},[p("div",Cot,[p("button",{onClick:_,class:"absolute top-4 right-4 text-gray-400 hover:text-gray-700 text-2xl font-light"},"  "),q[22]||(q[22]=p("h2",{class:"text-2xl font-semibold mb-6 text-gray-800"}," All Organizations ",-1)),p("table",kot,[q[21]||(q[21]=p("thead",null,[p("tr",null,[p("th",{class:"text-left text-gray-500 font-medium px-4 py-2"}," Name "),p("th",{class:"text-left text-gray-500 font-medium px-4 py-2"}," Location "),p("th",{class:"text-left text-gray-500 font-medium px-4 py-2"}," Website "),p("th",{class:"text-left text-gray-500 font-medium px-4 py-2"}," Email "),p("th",{class:"px-4 py-2"})])],-1)),p("tbody",null,[(j(!0),z(Kt,null,pe(m.value,W=>(j(),z("tr",{key:W.id,class:"bg-gray-50 hover:bg-gray-100 rounded-lg transition"},[p("td",Aot,J(W.name),1),p("td",Sot,J(W.location),1),p("td",Eot,[p("a",{href:W.websiteURL,target:"_blank"},J(W.websiteURL),9,Tot)]),p("td",Lot,J(W.emailAddress),1),p("td",Pot,[p("button",{onClick:F=>D(W),class:"bg-gray-500 text-white text-sm px-4 py-2 rounded-md hover:bg-dark-slate transition"}," Delete ",8,Iot)])]))),128))])])])])):Ct("",!0),V.value?(j(),z("div",Dot,[p("div",Mot,[q[25]||(q[25]=p("h2",{class:"text-xl font-semibold mb-4"},"Confirm Deletion",-1)),p("p",Rot,[q[23]||(q[23]=Dt(" Are you sure you want to delete ")),p("strong",null,J(T.value?.name),1),q[24]||(q[24]=Dt("? "))]),p("div",Not,[p("button",{onClick:q[10]||(q[10]=W=>V.value=!1)},"Cancel"),p("button",{onClick:q[11]||(q[11]=W=>K(T.value.id)),class:"bg-gray-500 text-white text-sm px-4 py-2 rounded-md hover:bg-dark-slate transition"}," Delete ")])])])):Ct("",!0)]),p("div",Oot,[(j(!0),z(Kt,null,pe(s.value,(W,F)=>(j(),z("div",{key:F,class:fe(["px-4 py-2 rounded text-white shadow-md",{"bg-green-600":W.type==="success","bg-red-600":W.type==="error","bg-blue-600":W.type==="info"}])},J(W.message),3))),128))])]))}},$ot=gr(Fot,[["__scopeId","data-v-9654cb3d"]]),Bot={class:"flex h-screen"},jot={class:"flex flex-col flex-1"},Uot={class:"h-16 text-dark-slate flex items-center px-4"},zot={class:"flex-1 overflow-y-auto bg-gray-100"},Hot={__name:"AdminLayout",setup(n){return ut(!0),(t,e)=>{const s=Qo("router-view");return j(),z("div",Bot,[p("div",jot,[p("header",Uot,[Ce($ot)]),p("main",zot,[Ce(s,null,{default:hs(({Component:i})=>[(j(),Va(x6,null,[(j(),Va(E6(i)))],1024))]),_:1})])])])}}},RC=nT({history:IE("/"),routes:[{path:"/",redirect:"/auth/login"},{path:"/attendance/checkin",name:"AttendanceCheckin",component:Brt},{path:"/auth",component:zst,children:[{path:"login",name:"Login",component:VR},{path:"register",alias:"/typeofaccount",name:"Register",component:WV},{path:"aregistration",name:"ARegistrationForms",component:YM},{path:"oregistration",name:"ORegistrationForms",component:wR}]},{path:"/app",component:$st,meta:{requiresAuth:!0},children:[{path:"",name:"Homepage",component:lD},{path:"profile",name:"Profile",component:wM},{path:"training",name:"Trainingpage",component:xN},{path:"career",name:"Careerpage",component:m$},{path:"organization",name:"Organizationpage",component:k$},{path:"calendar",name:"Calendarpage",component:K$},{path:"bookmarks",name:"Bookmarkpage",component:YB},{path:"certificates",name:"Certificatespage",component:zj},{path:"update-delete",name:"UpdateDeletepage",component:oU},{path:"resume-editor",name:"ResumeEditorpage",component:FV}]},{path:"/organization",name:"OrgHome",component:HX,meta:{requiresAuth:!0,role:"organization"}},{path:"/organization/org-trainings",name:"OrgTrainings",component:Ctt,meta:{requiresAuth:!0,role:"organization"}},{path:"/organization/org-careers",name:"OrgCareers",component:unt,meta:{requiresAuth:!0,role:"organization"}},{path:"/organization/org-calendar",name:"OrgCalendar",component:Pit,meta:{requiresAuth:!0,role:"organization"}},{path:"/organization/org-profile",name:"OrgProfile",component:Rit,meta:{requiresAuth:!0,role:"organization"}},{path:"/organization/org-updateprofile",name:"OrgUpdateProfile",component:Zit,meta:{requiresAuth:!0,role:"organization"}},{path:"/admin",component:Hot,meta:{requiresAuth:!1},children:[{path:"adminhomepage",name:"AdminHomePage",component:brt},{path:"/admin/adminupdatedelete",name:"AdminUpdateDelete",component:Jrt,meta:{requiresAuth:!1}}]},{path:"/:pathMatch(.*)*",redirect:"/auth/login"}]});RC.beforeEach((n,t,e)=>{const s=JSON.parse(localStorage.getItem("user"));if(n.meta.requiresAuth&&!s)return e({name:"Login"});if(n.meta.role&&(!s||s.role!==n.meta.role))return e({name:"Login"});if(s&&n.path.startsWith("/auth"))return s.role==="organization"?e({name:"OrgHome"}):e({name:"Homepage"});e()});const O0=ut(null),F0=ut(!1);function Vot(){return{user:O0,authenticated:F0,attempt:async()=>{try{const t=await At.get("/api/user",{withCredentials:!0});O0.value=t.data,F0.value=!0}catch{O0.value=null,F0.value=!1}}}}const Ig=WS(iT),qot=KS();Ig.use(RC);Ig.use(qot);Ig.use(QT);const{attempt:Wot}=Vot();Wot().finally(()=>{Ig.mount("#app")});export{fn as _,vat as c,PN as g};
